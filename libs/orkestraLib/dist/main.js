/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={"./node_modules/@a11y/focus-trap/debounce.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{debounce:()=>i});const r=new Map;function i(e,t,n){const i=r.get(n);null!=i&&window.clearTimeout(i),r.set(n,window.setTimeout((()=>{e(),r.delete(n)}),t))}},"./node_modules/@a11y/focus-trap/focus-trap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{FocusTrap:()=>a});var r=n("./node_modules/@a11y/focus-trap/debounce.js"),i=n("./node_modules/@a11y/focus-trap/focusable.js"),o=n("./node_modules/@a11y/focus-trap/shadow.js");const s=document.createElement("template");s.innerHTML='\n\t<div id="start"></div>\n\t<div id="backup"></div>\n\t<slot></slot>\n\t<div id="end"></div>\n';class a extends HTMLElement{constructor(){super(),this.debounceId=Math.random().toString(),this._focused=!1;const e=this.attachShadow({mode:"open"});e.appendChild(s.content.cloneNode(!0)),this.$backup=e.querySelector("#backup"),this.$start=e.querySelector("#start"),this.$end=e.querySelector("#end"),this.focusLastElement=this.focusLastElement.bind(this),this.focusFirstElement=this.focusFirstElement.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}static get observedAttributes(){return["inactive"]}get inactive(){return this.hasAttribute("inactive")}set inactive(e){e?this.setAttribute("inactive",""):this.removeAttribute("inactive")}get focused(){return this._focused}connectedCallback(){this.$start.addEventListener("focus",this.focusLastElement),this.$end.addEventListener("focus",this.focusFirstElement),this.addEventListener("focusin",this.onFocusIn),this.addEventListener("focusout",this.onFocusOut),this.render()}disconnectedCallback(){this.$start.removeEventListener("focus",this.focusLastElement),this.$end.removeEventListener("focus",this.focusFirstElement),this.removeEventListener("focusin",this.onFocusIn),this.removeEventListener("focusout",this.onFocusOut)}attributeChangedCallback(){this.render()}focusFirstElement(){this.trapFocus()}focusLastElement(){this.trapFocus(!0)}getFocusableElements(){return(0,o.queryShadowRoot)(this,i.isHidden,i.isFocusable)}trapFocus(e){if(this.inactive)return;let t=this.getFocusableElements();t.length>0?(e?t[t.length-1].focus():t[0].focus(),this.$backup.setAttribute("tabindex","-1")):(this.$backup.setAttribute("tabindex","0"),this.$backup.focus())}onFocusIn(){this.updateFocused(!0)}onFocusOut(){this.updateFocused(!1)}updateFocused(e){(0,r.debounce)((()=>{this.focused!==e&&(this._focused=e,this.render())}),0,this.debounceId)}render(){this.$start.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.$end.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.focused?this.setAttribute("focused",""):this.removeAttribute("focused")}}window.customElements.define("focus-trap",a)},"./node_modules/@a11y/focus-trap/focusable.js":(e,t,n)=>{"use strict";function r(e){return e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"false"!==e.getAttribute("aria-hidden")||"none"===e.style.display||"0"===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility}function i(e){return e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"false"!==e.getAttribute("aria-disabled")}function o(e){return"-1"!==e.getAttribute("tabindex")&&!r(e)&&!i(e)&&(e.hasAttribute("tabindex")||(e instanceof HTMLAnchorElement||e instanceof HTMLAreaElement)&&e.hasAttribute("href")||e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLIFrameElement)}n.r(t),n.d(t,{isHidden:()=>r,isDisabled:()=>i,isFocusable:()=>o})},"./node_modules/@a11y/focus-trap/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{queryShadowRoot:()=>r.queryShadowRoot,isDisabled:()=>i.isDisabled,isFocusable:()=>i.isFocusable,isHidden:()=>i.isHidden,FocusTrap:()=>o.FocusTrap});var r=n("./node_modules/@a11y/focus-trap/shadow.js"),i=n("./node_modules/@a11y/focus-trap/focusable.js"),o=n("./node_modules/@a11y/focus-trap/focus-trap.js")},"./node_modules/@a11y/focus-trap/shadow.js":(e,t,n)=>{"use strict";function r(e,t,n,i=20,o=0){let s=[];if(o>=i)return s;const a=e=>{const s=e.assignedNodes().filter((e=>1===e.nodeType));return s.length>0?r(s[0].parentElement,t,n,i,o+1):[]},u=Array.from(e.children||[]);for(const e of u)t(e)||(n(e)&&s.push(e),null!=e.shadowRoot?s.push(...r(e.shadowRoot,t,n,i,o+1)):"SLOT"===e.tagName?s.push(...a(e)):s.push(...r(e,t,n,i,o+1)));return s}n.r(t),n.d(t,{queryShadowRoot:()=>r})},"./node_modules/@socket.io/component-emitter/index.mjs":(e,t,n)=>{"use strict";function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}n.r(t),n.d(t,{Emitter:()=>r}),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},"./node_modules/css-loader/dist/cjs.js!./src/orkestra/transitions/css/simple.css":(e,t,n)=>{(t=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.id,"/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>\nThis file is part of Orkestralib.\nOrkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nOrkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.\nYou should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */\n.ork_rotate { transition: transform 3s;transform: translateZ(0px) rotateY(56deg); }\n.ork_rotate1 { transition: transform 3s;transform: translateZ(56px) rotateY(156deg); }\n.ork_opacity_0 {transition: opacity  0.5s ease-in-out;\n    z-index: 99999;\n    background-color:black;\n    opacity: 0;\n}\n.ork_opacity_1 {transition: opacity 1.5s ease-in-out;\n    z-index: 99999;\n    background-color: black;\n    opacity: 1.0;\n}",""]),e.exports=t},"./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/custom.css":(e,t,n)=>{(t=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.id,"/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>\nThis file is part of Orkestralib.\nOrkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nOrkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.\nYou should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */\n.container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  width:100%;\n  height: 100%;\n}\n.resizable {\n  resize: both;\n  overflow: scroll;\n  border: 3px solid red;\n  \n}\n.grid{\ndisplay:grid;\n}\n.item79 {\nwidth: 32%;\npadding-bottom: 0%; /* 32:18, i.e. 16:9 */\nmargin-bottom: 0%; /* (100-32*3)/2 */\nheight: 33%;\nbackground-color:black;\nposition:relative;\n}\n.item24 {\nwidth: 49%;\npadding-bottom: 0%; /* 32:18, i.e. 16:9 */\nmargin-bottom: 2%; /* (100-32*3)/2 */\nbackground-color: black;\n  position:relative;\n}\n.item34 {\n  width: 49%;\n  height: 49%;\n  padding-bottom: 0%; /* 32:18, i.e. 16:9 */\n  margin-bottom: 1%; /* (100-32*3)/2 */\n  background-color: black;\n  position:relative;\n  }\n  .item456 {\n    width: 32%;\n    height: 49%;\n    padding-bottom: 0%; /* 32:18, i.e. 16:9 */\n    margin-bottom: 1%; /* (100-32*3)/2 */\n    background-color: black;\n    position:relative;\n    }\n.item21 {\n  width: 99%;\n   height:99%;\n  background-color: black;\n  padding-bottom: 0%; /* 32:18, i.e. 16:9 */\n  margin-bottom: 0%; /* (100-32*3)/2 */\n  position:absolute;\n  left:0%;\n  top:0%;\n}\n",""]),e.exports=t},"./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/pipgrid.css":(e,t,n)=>{(t=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.id,"/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>\nThis file is part of Orkestralib.\nOrkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nOrkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.\nYou should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */\n.containerpipgrid{\n    width:100%;\n    height:100%;\n    position: relative !important;\n}\n.main{\n    width: 67%;\n    height: 100%;\n}\n.fullmain{\n    width: 100%;\n}\n.secondary{\n    width: 33%;\n    left:66%;\n    position:absolute;\n}\n",""]),e.exports=t},"./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/tabs.css":(e,t,n)=>{(t=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.id,"/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>\nThis file is part of Orkestralib.\nOrkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nOrkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.\nYou should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */\n\n/* Style the tab */\n.tab {\n    overflow: hidden;\n    border: 1px solid #ccc;\n    background-color: #f1f1f1;\n  }\n  \n  /* Style the buttons inside the tab */\n  .tab button {\n    background-color: inherit;\n    float: left;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    padding: 14px 16px;\n    transition: 0.3s;\n    font-size: 17px;\n  }\n  \n  /* Change background color of buttons on hover */\n  .tab button:hover {\n    background-color: #ddd;\n  }\n  \n  /* Create an active/current tablink class */\n  .tab button.active {\n    background-color: #ccc;\n  }\n  \n  /* Style the tab content */\n  .tabcontentNone {\n    display: none;\n    padding: 6px 12px;\n    border: 1px solid #ccc;\n    border-top: none;\n  }\n  .tabcontentDisplay {\n    display: block;\n    padding: 6px 12px;\n    border: 1px solid #ccc;\n    border-top: none;\n  }",""]),e.exports=t},"./node_modules/css-loader/dist/cjs.js!./src/wcs/css/apptable.css":(e,t,n)=>{(t=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.id,"/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>\nThis file is part of Orkestralib.\nOrkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nOrkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.\nYou should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */\n\ndiv{\n\tword-wrap:break-word;\n}\n\n\t\n\t/*\n\tLabel the data\n*/\n",""]),e.exports=t},"./node_modules/css-loader/dist/cjs.js!./src/wcs/css/usertable.css":(e,t,n)=>{(t=n("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.id,"/* << Copyright 2022 Iñigo Tamayo Uria, Ana Domínguez Fanlo, Mikel Joseba Zorrilla Berasategui, Héctor Rivas Pagador, Sergio Cabrero Barros, Juan Felipe Mogollón Rodríguez and Stefano Masneri. >>\nThis file is part of Orkestralib.\nOrkestralib is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\nOrkestralib is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.\nYou should have received a copy of the GNU Lesser General Public License along with Orkestralib. If not, see <https://www.gnu.org/licenses/>. */\n\tdiv{\n\t\tword-wrap:break-word;\n\t}\n",""]),e.exports=t},"./node_modules/css-loader/dist/runtime/api.js":e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var s,a,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var u=[].concat(e[a]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},"./node_modules/custom-video-element/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});const r=document.createElement("template");r.innerHTML="\n<style>\n  :host {\n    /* Supposed to reset styles. Need to understand the specific effects more */\n    all: initial;\n\n    /* display:inline (like the native el) makes it so you can't fill\n      the container with the native el */\n    display: inline-block;\n    box-sizing: border-box;\n    position: relative;\n\n    /* Same default widths as the native el */\n    width: 300px;\n    height: 150px;\n  }\n\n  video {\n    /* Fill the continer */\n    width: 100%;\n    height: 100%;\n  }\n</style>\n";class i extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot.appendChild(r.content.cloneNode(!0));const e=this.nativeEl=document.createElement("video");Array.prototype.forEach.call(this.attributes,(e=>{this.attributeChangedCallback(e.name,null,e.value)})),e.defaultMuted&&(e.muted=!0),this.shadowRoot.appendChild(e)}static get observedAttributes(){let e=[];Object.getOwnPropertyNames(this.prototype).forEach((t=>{let n=!1;try{"function"==typeof this.prototype[t]&&(n=!0)}catch(e){}n||t===t.toUpperCase()||e.push(t.toLowerCase())}));const t=Object.getPrototypeOf(this).observedAttributes;return t&&(e=e.concat(t)),e}attributeChangedCallback(e,t,n){const r=function(e,t){let n=null;return e.forEach((e=>{e.toLowerCase()==t.toLowerCase()&&(n=e)})),n}(Object.getOwnPropertyNames(Object.getPrototypeOf(this)),e),i=0===Object.getPrototypeOf(this.constructor).toString().indexOf("function HTMLElement");r&&!i?"boolean"==typeof this[r]?this[r]=null!==n:this[r]=n:null===n?this.nativeEl.removeAttribute(e):-1===["id","class"].indexOf(e)&&this.nativeEl.setAttribute(e,n)}}let o=[];const s=document.createElement("video"),a=["webkitDisplayingFullscreen","webkitSupportsFullscreen"];for(let e=Object.getPrototypeOf(s);e&&e!==HTMLElement.prototype;e=Object.getPrototypeOf(e))Object.keys(e).forEach((e=>{-1===a.indexOf(e)&&o.push(e)}));o=o.concat(Object.keys(EventTarget.prototype)),o.forEach((e=>{if("function"==typeof s[e])i.prototype[e]=function(){return this.nativeEl[e].apply(this.nativeEl,arguments)};else{let t={get(){return this.nativeEl[e]}};e!==e.toUpperCase()&&(t.set=function(t){this.nativeEl[e]=t}),Object.defineProperty(i.prototype,e,t)}})),window.customElements.get("custom-video")||(window.customElements.define("custom-video",i),window.CustomVideoElement=i);const u=i},"./node_modules/engine.io-client/build/esm/contrib/has-cors.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{hasCORS:()=>i});let r=!1;try{r="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const i=r},"./node_modules/engine.io-client/build/esm/contrib/parseqs.js":(e,t,n)=>{"use strict";function r(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function i(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}n.r(t),n.d(t,{encode:()=>r,decode:()=>i})},"./node_modules/engine.io-client/build/esm/contrib/parseuri.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{parse:()=>o});const r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function o(e){const t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));let s=r.exec(e||""),a={},u=14;for(;u--;)a[i[u]]=s[u]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}},"./node_modules/engine.io-client/build/esm/contrib/yeast.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{encode:()=>u,decode:()=>l,yeast:()=>d});const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={};let o,s=0,a=0;function u(e){let t="";do{t=r[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(e){let t=0;for(a=0;a<e.length;a++)t=64*t+i[e.charAt(a)];return t}function d(){const e=u(+new Date);return e!==o?(s=0,o=e):e+"."+u(s++)}for(;a<64;a++)i[r[a]]=a},"./node_modules/engine.io-client/build/esm/globalThis.browser.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{globalThisShim:()=>r});const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},"./node_modules/engine.io-client/build/esm/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Socket:()=>r.Socket,protocol:()=>l,Transport:()=>i.Transport,transports:()=>o.transports,installTimerFunctions:()=>s.installTimerFunctions,parse:()=>a.parse,nextTick:()=>u.nextTick});var r=n("./node_modules/engine.io-client/build/esm/socket.js"),i=n("./node_modules/engine.io-client/build/esm/transport.js"),o=n("./node_modules/engine.io-client/build/esm/transports/index.js"),s=n("./node_modules/engine.io-client/build/esm/util.js"),a=n("./node_modules/engine.io-client/build/esm/contrib/parseuri.js"),u=n("./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js");const l=r.Socket.protocol},"./node_modules/engine.io-client/build/esm/socket.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Socket:()=>l});var r=n("./node_modules/engine.io-client/build/esm/transports/index.js"),i=n("./node_modules/engine.io-client/build/esm/util.js"),o=n("./node_modules/engine.io-client/build/esm/contrib/parseqs.js"),s=n("./node_modules/engine.io-client/build/esm/contrib/parseuri.js"),a=n("./node_modules/@socket.io/component-emitter/index.mjs"),u=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js");class l extends a.Emitter{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=(0,s.parse)(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=(0,s.parse)(t.host).host),(0,i.installTimerFunctions)(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=(0,o.decode)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new r.transports[e](n)}open(){let e;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),n=!1;l.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){n||(n=!0,d(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function u(e){t&&e.name!==t.name&&i()}const d=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",u)};t.once("open",r),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",u),t.open()}onOpen(){if(this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=(0,i.byteLength)(n)),t>0&&e>this.maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){l.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}l.protocol=u.protocol},"./node_modules/engine.io-client/build/esm/transport.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Transport:()=>a});var r=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js"),i=n("./node_modules/@socket.io/component-emitter/index.mjs"),o=n("./node_modules/engine.io-client/build/esm/util.js");class s extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class a extends i.Emitter{constructor(e){super(),this.writable=!1,(0,o.installTimerFunctions)(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new s(e,t,n)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=(0,r.decodePacket)(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}},"./node_modules/engine.io-client/build/esm/transports/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{transports:()=>i});var r=n("./node_modules/engine.io-client/build/esm/transports/polling.js");const i={websocket:n("./node_modules/engine.io-client/build/esm/transports/websocket.js").WS,polling:r.Polling}},"./node_modules/engine.io-client/build/esm/transports/polling.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Polling:()=>h,Request:()=>p});var r=n("./node_modules/engine.io-client/build/esm/transport.js"),i=n("./node_modules/engine.io-client/build/esm/contrib/yeast.js"),o=n("./node_modules/engine.io-client/build/esm/contrib/parseqs.js"),s=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js"),a=n("./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js"),u=n("./node_modules/@socket.io/component-emitter/index.mjs"),l=n("./node_modules/engine.io-client/build/esm/util.js"),d=n("./node_modules/engine.io-client/build/esm/globalThis.browser.js");function c(){}const f=null!=new a.XHR({xdomain:!1}).responseType;class h extends r.Transport{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=f&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){(0,s.decodePayload)(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,(0,s.encodePayload)(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,i.yeast)()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const r=(0,o.encode)(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class p extends u.Emitter{constructor(e,t){super(),(0,l.installTimerFunctions)(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=(0,l.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new a.XHR(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",m);else if("function"==typeof addEventListener){const e="onpagehide"in d.globalThisShim?"pagehide":"unload";addEventListener(e,m,!1)}function m(){for(let e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}},"./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{nextTick:()=>i,WebSocket:()=>o,usingBrowserWebSocket:()=>s,defaultBinaryType:()=>a});var r=n("./node_modules/engine.io-client/build/esm/globalThis.browser.js");const i="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),o=r.globalThisShim.WebSocket||r.globalThisShim.MozWebSocket,s=!0,a="arraybuffer"},"./node_modules/engine.io-client/build/esm/transports/websocket.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WS:()=>d});var r=n("./node_modules/engine.io-client/build/esm/transport.js"),i=n("./node_modules/engine.io-client/build/esm/contrib/parseqs.js"),o=n("./node_modules/engine.io-client/build/esm/contrib/yeast.js"),s=n("./node_modules/engine.io-client/build/esm/util.js"),a=n("./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js"),u=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js");const l="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class d extends r.Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=l?{}:(0,s.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=a.usingBrowserWebSocket&&!l?t?new a.WebSocket(e,t):new a.WebSocket(e):new a.WebSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||a.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;(0,u.encodePacket)(n,this.supportsBinary,(e=>{const t={};if(!a.usingBrowserWebSocket&&(n.options&&(t.compress=n.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?Buffer.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{a.usingBrowserWebSocket?this.ws.send(e):this.ws.send(e,t)}catch(e){}r&&(0,a.nextTick)((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=(0,o.yeast)()),this.supportsBinary||(e.b64=1);const r=(0,i.encode)(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!!a.WebSocket}}},"./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{XHR:()=>o});var r=n("./node_modules/engine.io-client/build/esm/contrib/has-cors.js"),i=n("./node_modules/engine.io-client/build/esm/globalThis.browser.js");function o(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r.hasCORS))return new XMLHttpRequest}catch(e){}if(!t)try{return new(i.globalThisShim[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},"./node_modules/engine.io-client/build/esm/util.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{pick:()=>i,installTimerFunctions:()=>a,byteLength:()=>u});var r=n("./node_modules/engine.io-client/build/esm/globalThis.browser.js");function i(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const o=setTimeout,s=clearTimeout;function a(e,t){t.useNativeTimers?(e.setTimeoutFn=o.bind(r.globalThisShim),e.clearTimeoutFn=s.bind(r.globalThisShim)):(e.setTimeoutFn=setTimeout.bind(r.globalThisShim),e.clearTimeoutFn=clearTimeout.bind(r.globalThisShim))}function u(e){return"string"==typeof e?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}},"./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{PACKET_TYPES:()=>r,PACKET_TYPES_REVERSE:()=>i,ERROR_PACKET:()=>o});const r=Object.create(null);r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";const i=Object.create(null);Object.keys(r).forEach((e=>{i[r[e]]=e}));const o={type:"error",data:"parser error"}},"./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{encode:()=>o,decode:()=>s});const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<r.length;e++)i[r.charCodeAt(e)]=e;const o=e=>{let t,n=new Uint8Array(e),i=n.length,o="";for(t=0;t<i;t+=3)o+=r[n[t]>>2],o+=r[(3&n[t])<<4|n[t+1]>>4],o+=r[(15&n[t+1])<<2|n[t+2]>>6],o+=r[63&n[t+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},s=e=>{let t,n,r,o,s,a=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const d=new ArrayBuffer(a),c=new Uint8Array(d);for(t=0;t<u;t+=4)n=i[e.charCodeAt(t)],r=i[e.charCodeAt(t+1)],o=i[e.charCodeAt(t+2)],s=i[e.charCodeAt(t+3)],c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|o>>2,c[l++]=(3&o)<<6|63&s;return d}},"./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/decodePacket.browser.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js"),i=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js");const o="function"==typeof ArrayBuffer,s=(e,t)=>{if(o){const n=(0,i.decode)(e);return a(n,t)}return{base64:!0,data:e}},a=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e,u=(e,t)=>{if("string"!=typeof e)return{type:"message",data:a(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:s(e.substring(1),t)};return r.PACKET_TYPES_REVERSE[n]?e.length>1?{type:r.PACKET_TYPES_REVERSE[n],data:e.substring(1)}:{type:r.PACKET_TYPES_REVERSE[n]}:r.ERROR_PACKET}},"./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/encodePacket.browser.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/commons.js");const i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,s=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},a=({type:e,data:t},n,a)=>{return i&&t instanceof Blob?n?a(t):s(t,a):o&&(t instanceof ArrayBuffer||(u=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(u):u&&u.buffer instanceof ArrayBuffer))?n?a(t):s(new Blob([t]),a):a(r.PACKET_TYPES[e]+(t||""));var u}},"./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{protocol:()=>u,encodePacket:()=>r.default,encodePayload:()=>s,decodePacket:()=>i.default,decodePayload:()=>a});var r=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/encodePacket.browser.js"),i=n("./node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/decodePacket.browser.js");const o=String.fromCharCode(30),s=(e,t)=>{const n=e.length,i=new Array(n);let s=0;e.forEach(((e,a)=>{(0,r.default)(e,!1,(e=>{i[a]=e,++s===n&&t(i.join(o))}))}))},a=(e,t)=>{const n=e.split(o),r=[];for(let e=0;e<n.length;e++){const o=(0,i.default)(n[e],t);if(r.push(o),"error"===o.type)break}return r},u=4},"./node_modules/loglevel/lib/loglevel.js":function(e,t,n){var r,i;!function(o,s){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t,n){var r=e[t];if("function"==typeof r.bind)return r.bind(e,`[${t.toUpperCase()}]`,n);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(r,s){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?o:void 0!==console[r]?i(console,r,s,r):void 0!==console.log?i(console,"log"):e)}function a(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function u(e,n,r){return function(){typeof console!==t&&(a.call(this,n,r),this[e].apply(this,arguments))}}function l(e,t,n){return s(e,n)||u.apply(this,arguments)}function d(e,n,i){var o,s=this,u="loglevel";function d(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&u){try{return void(window.localStorage[u]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch(e){}}}function c(){var e;if(typeof window!==t&&u){try{e=window.localStorage[u]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}"string"==typeof e?u+=":"+e:"symbol"==typeof e&&(u=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||l,s.getLevel=function(){return o},s.setPrefix=function(n){if(s.prefix=n,"function"==typeof s.prefix?a.call(s,s.level,s.prefix()||e.toUpperCase()||""):a.call(s,s.level,s.prefix||e.toUpperCase()||""),typeof console===t&&level<s.levels.SILENT)return"No console available for logging"},s.setLevel=function(n,r){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==r&&d(n),a.call(s,n,(e||"").toUpperCase()),typeof console===t&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){c()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var f=c();null==f&&(f=null==n?"WARN":n),s.setLevel(f,!1)}var c=new d,f={};c.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new d(e,c.getLevel(),c.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return c.noConflict=function(){return typeof window!==t&&window.log===c&&(window.log=h),c},c.getLoggers=function(){return f},c.default=c,c},void 0===(i="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=i)}()},"./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{COMPLETE_NOTIFICATION:()=>r,errorNotification:()=>i,nextNotification:()=>o,createNotification:()=>s});var r=s("C",void 0,void 0);function i(e){return s("E",void 0,e)}function o(e){return s("N",e,void 0)}function s(e,t,n){return{kind:e,value:t,error:n}}},"./node_modules/rxjs/dist/esm5/internal/Observable.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Observable:()=>d});var r=n("./node_modules/rxjs/dist/esm5/internal/Subscriber.js"),i=n("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),o=n("./node_modules/rxjs/dist/esm5/internal/symbol/observable.js"),s=n("./node_modules/rxjs/dist/esm5/internal/util/pipe.js"),a=n("./node_modules/rxjs/dist/esm5/internal/config.js"),u=n("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js"),l=n("./node_modules/rxjs/dist/esm5/internal/util/errorContext.js"),d=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var o,s=this,a=(o=e)&&o instanceof r.Subscriber||function(e){return e&&(0,u.isFunction)(e.next)&&(0,u.isFunction)(e.error)&&(0,u.isFunction)(e.complete)}(o)&&(0,i.isSubscription)(o)?e:new r.SafeSubscriber(e,t,n);return(0,l.errorContext)((function(){var e=s,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?s._subscribe(a):s._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=c(t))((function(t,i){var o=new r.SafeSubscriber({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.pipeFromArray)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=c(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function c(e){var t;return null!==(t=null!=e?e:a.config.Promise)&&void 0!==t?t:Promise}},"./node_modules/rxjs/dist/esm5/internal/Subject.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Subject:()=>l,AnonymousSubject:()=>d});var r=n("./node_modules/tslib/tslib.es6.js"),i=n("./node_modules/rxjs/dist/esm5/internal/Observable.js"),o=n("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),s=n("./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js"),a=n("./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js"),u=n("./node_modules/rxjs/dist/esm5/internal/util/errorContext.js"),l=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.__extends)(t,e),t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new s.ObjectUnsubscribedError},t.prototype.next=function(e){var t=this;(0,u.errorContext)((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=(0,r.__values)(t.currentObservers),s=o.next();!s.done;s=o.next()){s.value.next(e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;(0,u.errorContext)((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;(0,u.errorContext)((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,s=n.observers;return r||i?o.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(e),new o.Subscription((function(){t.currentObservers=null,(0,a.arrRemove)(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,r.__extends)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:o.EMPTY_SUBSCRIPTION},t}(l)},"./node_modules/rxjs/dist/esm5/internal/Subscriber.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Subscriber:()=>f,SafeSubscriber:()=>g,EMPTY_OBSERVER:()=>_});var r=n("./node_modules/tslib/tslib.es6.js"),i=n("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js"),o=n("./node_modules/rxjs/dist/esm5/internal/Subscription.js"),s=n("./node_modules/rxjs/dist/esm5/internal/config.js"),a=n("./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js"),u=n("./node_modules/rxjs/dist/esm5/internal/util/noop.js"),l=n("./node_modules/rxjs/dist/esm5/internal/NotificationFactories.js"),d=n("./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js"),c=n("./node_modules/rxjs/dist/esm5/internal/util/errorContext.js"),f=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,(0,o.isSubscription)(t)&&t.add(n)):n.destination=_,n}return(0,r.__extends)(t,e),t.create=function(e,t,n){return new g(e,t,n)},t.prototype.next=function(e){this.isStopped?y((0,l.nextNotification)(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?y((0,l.errorNotification)(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?y(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(o.Subscription),h=Function.prototype.bind;function p(e,t){return h.call(e,t)}var m=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){v(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){v(e)}else v(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){v(e)}},e}(),g=function(e){function t(t,n,r){var o,a,u=e.call(this)||this;(0,i.isFunction)(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:u&&s.config.useDeprecatedNextContext?((a=Object.create(t)).unsubscribe=function(){return u.unsubscribe()},o={next:t.next&&p(t.next,a),error:t.error&&p(t.error,a),complete:t.complete&&p(t.complete,a)}):o=t;return u.destination=new m(o),u}return(0,r.__extends)(t,e),t}(f);function v(e){s.config.useDeprecatedSynchronousErrorHandling?(0,c.captureError)(e):(0,a.reportUnhandledError)(e)}function y(e,t){var n=s.config.onStoppedNotification;n&&d.timeoutProvider.setTimeout((function(){return n(e,t)}))}var _={closed:!0,next:u.noop,error:function(e){throw e},complete:u.noop}},"./node_modules/rxjs/dist/esm5/internal/Subscription.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Subscription:()=>a,EMPTY_SUBSCRIPTION:()=>u,isSubscription:()=>l});var r=n("./node_modules/tslib/tslib.es6.js"),i=n("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js"),o=n("./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js"),s=n("./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js"),a=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,s,a;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var l=(0,r.__values)(u),c=l.next();!c.done;c=l.next()){c.value.remove(this)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else u.remove(this);var f=this.initialTeardown;if((0,i.isFunction)(f))try{f()}catch(e){a=e instanceof o.UnsubscriptionError?e.errors:[e]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var p=(0,r.__values)(h),m=p.next();!m.done;m=p.next()){var g=m.value;try{d(g)}catch(e){a=null!=a?a:[],e instanceof o.UnsubscriptionError?a=(0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(a)),(0,r.__read)(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}}if(a)throw new o.UnsubscriptionError(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)d(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&(0,s.arrRemove)(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&(0,s.arrRemove)(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}(),u=a.EMPTY;function l(e){return e instanceof a||e&&"closed"in e&&(0,i.isFunction)(e.remove)&&(0,i.isFunction)(e.add)&&(0,i.isFunction)(e.unsubscribe)}function d(e){(0,i.isFunction)(e)?e():e.unsubscribe()}},"./node_modules/rxjs/dist/esm5/internal/config.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{config:()=>r});var r={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},"./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{timeoutProvider:()=>i});var r=n("./node_modules/tslib/tslib.es6.js"),i={setTimeout:function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var s=i.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,(0,r.__spreadArray)([e,t],(0,r.__read)(n))):setTimeout.apply(void 0,(0,r.__spreadArray)([e,t],(0,r.__read)(n)))},clearTimeout:function(e){var t=i.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0}},"./node_modules/rxjs/dist/esm5/internal/symbol/observable.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{observable:()=>r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},"./node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ObjectUnsubscribedError:()=>r});var r=(0,n("./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js").createErrorClass)((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}))},"./node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{UnsubscriptionError:()=>r});var r=(0,n("./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js").createErrorClass)((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}))},"./node_modules/rxjs/dist/esm5/internal/util/arrRemove.js":(e,t,n)=>{"use strict";function r(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}n.r(t),n.d(t,{arrRemove:()=>r})},"./node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js":(e,t,n)=>{"use strict";function r(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}n.r(t),n.d(t,{createErrorClass:()=>r})},"./node_modules/rxjs/dist/esm5/internal/util/errorContext.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{errorContext:()=>o,captureError:()=>s});var r=n("./node_modules/rxjs/dist/esm5/internal/config.js"),i=null;function o(e){if(r.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t&&(i={errorThrown:!1,error:null}),e(),t){var n=i,o=n.errorThrown,s=n.error;if(i=null,o)throw s}}else e()}function s(e){r.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=e)}},"./node_modules/rxjs/dist/esm5/internal/util/identity.js":(e,t,n)=>{"use strict";function r(e){return e}n.r(t),n.d(t,{identity:()=>r})},"./node_modules/rxjs/dist/esm5/internal/util/isFunction.js":(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.r(t),n.d(t,{isFunction:()=>r})},"./node_modules/rxjs/dist/esm5/internal/util/noop.js":(e,t,n)=>{"use strict";function r(){}n.r(t),n.d(t,{noop:()=>r})},"./node_modules/rxjs/dist/esm5/internal/util/pipe.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{pipe:()=>i,pipeFromArray:()=>o});var r=n("./node_modules/rxjs/dist/esm5/internal/util/identity.js");function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?r.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},"./node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{reportUnhandledError:()=>o});var r=n("./node_modules/rxjs/dist/esm5/internal/config.js"),i=n("./node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js");function o(e){i.timeoutProvider.setTimeout((function(){var t=r.config.onUnhandledError;if(!t)throw e;t(e)}))}},"./node_modules/sdp/sdp.js":e=>{"use strict";const t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){let t=e.substr(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");for(let i=3;i<r.length;i++){const o=r[i],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){const r=t.parseRtpMap(s),i=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(r.parameters=i.length?t.parseFmtp(i[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let u;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substr(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===a&&(u=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&u&&(t.rtx={ssrc:u}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substr(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substr(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substr(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let e=0;e<n.length;e++)if(n[e].length<2||"="!==n[e].charAt(1))return!1;return!0},e.exports=t},"./node_modules/socket.io-client/build/esm/contrib/backo2.js":(e,t,n)=>{"use strict";function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}n.r(t),n.d(t,{Backoff:()=>r}),r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},"./node_modules/socket.io-client/build/esm/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{protocol:()=>s.protocol,Manager:()=>i.Manager,Socket:()=>o.Socket,io:()=>u,connect:()=>u,default:()=>u});var r=n("./node_modules/socket.io-client/build/esm/url.js"),i=n("./node_modules/socket.io-client/build/esm/manager.js"),o=n("./node_modules/socket.io-client/build/esm/socket.js"),s=n("./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js");const a={};function u(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};const n=(0,r.url)(e,t.path||"/socket.io"),o=n.source,s=n.id,u=n.path,l=a[s]&&u in a[s].nsps;let d;return t.forceNew||t["force new connection"]||!1===t.multiplex||l?d=new i.Manager(o,t):(a[s]||(a[s]=new i.Manager(o,t)),d=a[s]),n.query&&!t.query&&(t.query=n.queryKey),d.socket(n.path,t)}Object.assign(u,{Manager:i.Manager,Socket:o.Socket,io:u,connect:u})},"./node_modules/socket.io-client/build/esm/manager.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Manager:()=>l});var r=n("./node_modules/engine.io-client/build/esm/index.js"),i=n("./node_modules/socket.io-client/build/esm/socket.js"),o=n("./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js"),s=n("./node_modules/socket.io-client/build/esm/on.js"),a=n("./node_modules/socket.io-client/build/esm/contrib/backo2.js"),u=n("./node_modules/@socket.io/component-emitter/index.mjs");class l extends u.Emitter{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,(0,r.installTimerFunctions)(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new a.Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||o;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new r.Socket(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=(0,s.on)(t,"open",(function(){n.onopen(),e&&e()})),o=(0,s.on)(t,"error",(t=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&i();const n=this.setTimeoutFn((()=>{i(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push((0,s.on)(e,"ping",this.onping.bind(this)),(0,s.on)(e,"data",this.ondata.bind(this)),(0,s.on)(e,"error",this.onerror.bind(this)),(0,s.on)(e,"close",this.onclose.bind(this)),(0,s.on)(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error")}}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new i.Socket(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}},"./node_modules/socket.io-client/build/esm/on.js":(e,t,n)=>{"use strict";function r(e,t,n){return e.on(t,n),function(){e.off(t,n)}}n.r(t),n.d(t,{on:()=>r})},"./node_modules/socket.io-client/build/esm/socket.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Socket:()=>a});var r=n("./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js"),i=n("./node_modules/socket.io-client/build/esm/on.js"),o=n("./node_modules/@socket.io/component-emitter/index.mjs");const s=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class a extends o.Emitter{constructor(e,t,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[(0,i.on)(e,"open",this.onopen.bind(this)),(0,i.on)(e,"packet",this.onpacket.bind(this)),(0,i.on)(e,"error",this.onerror.bind(this)),(0,i.on)(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(s.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');t.unshift(e);const n={type:r.PacketType.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),n.id=e}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){const n=this.flags.timeout;if(void 0===n)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),n);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,[null,...e])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this.packet({type:r.PacketType.CONNECT,data:e})})):this.packet({type:r.PacketType.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case r.PacketType.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.PacketType.EVENT:case r.PacketType.BINARY_EVENT:this.onevent(e);break;case r.PacketType.ACK:case r.PacketType.BINARY_ACK:this.onack(e);break;case r.PacketType.DISCONNECT:this.ondisconnect();break;case r.PacketType.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:r.PacketType.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:r.PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}},"./node_modules/socket.io-client/build/esm/url.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{url:()=>i});var r=n("./node_modules/engine.io-client/build/esm/index.js");function i(e,t="",n){let i=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),i=(0,r.parse)(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}},"./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/binary.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{deconstructPacket:()=>i,reconstructPacket:()=>s});var r=n("./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js");function i(e){const t=[],n=e.data,r=e;return r.data=o(n,t),r.attachments=t.length,{packet:r,buffers:t}}function o(e,t){if(!e)return e;if((0,r.isBinary)(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=o(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=o(e[r],t));return n}return e}function s(e,t){return e.data=a(e.data,t),e.attachments=void 0,e}function a(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=a(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=a(e[n],t));return e}},"./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{protocol:()=>s,PacketType:()=>a,Encoder:()=>u,Decoder:()=>l});var r=n("./node_modules/@socket.io/component-emitter/index.mjs"),i=n("./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/binary.js"),o=n("./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js");const s=5;var a;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a||(a={}));class u{constructor(e){this.replacer=e}encode(e){return e.type!==a.EVENT&&e.type!==a.ACK||!(0,o.hasBinary)(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=(0,i.deconstructPacket)(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class l extends r.Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e),t.type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new d(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!(0,o.isBinary)(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!l.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case a.CONNECT:return"object"==typeof t;case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class d{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=(0,i.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},"./node_modules/socket.io-client/node_modules/socket.io-parser/build/esm/is-binary.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{isBinary:()=>a,hasBinary:()=>u});const r="function"==typeof ArrayBuffer,i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);function a(e){return r&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||o&&e instanceof Blob||s&&e instanceof File}function u(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(u(e[t]))return!0;return!1}if(a(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return u(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&u(e[t]))return!0;return!1}},"./src/orkestra/transitions/css/simple.css":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./src/orkestra/transitions/css/simple.css");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},"./src/orkestra/ui/plugins/css/custom.css":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/custom.css");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},"./src/orkestra/ui/plugins/css/pipgrid.css":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/pipgrid.css");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},"./src/orkestra/ui/plugins/css/tabs.css":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./src/orkestra/ui/plugins/css/tabs.css");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},"./src/wcs/css/apptable.css":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./src/wcs/css/apptable.css");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},"./src/wcs/css/usertable.css":(e,t,n)=>{var r=n("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),i=n("./node_modules/css-loader/dist/cjs.js!./src/wcs/css/usertable.css");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.id,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":(e,t,n)=>{"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],l=n[u]||0,d="".concat(u," ").concat(l);n[u]=l+1;var c=a(d),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==c?(s[c].references++,s[c].updater(f)):s.push({identifier:d,updater:g(f,t),references:1}),r.push(d)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,c=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function h(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=l(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=l(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=u(e,t),l=0;l<n.length;l++){var d=a(n[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}n=o}}}},"./node_modules/tslib/tslib.es6.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>u,__metadata:()=>l,__awaiter:()=>d,__generator:()=>c,__createBinding:()=>f,__exportStar:()=>h,__values:()=>p,__read:()=>m,__spread:()=>g,__spreadArrays:()=>v,__spreadArray:()=>y,__await:()=>_,__asyncGenerator:()=>E,__asyncDelegator:()=>b,__asyncValues:()=>T,__makeTemplateObject:()=>S,__importStar:()=>A,__importDefault:()=>R,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>I,__classPrivateFieldIn:()=>O});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function h(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function E(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,l):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function u(e){a("next",e)}function l(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return w(t,e),t}function R(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function I(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},"./node_modules/underscore/modules/_baseCreate.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/_setup.js");function o(e){if(!(0,r.default)(e))return{};if(i.nativeCreate)return(0,i.nativeCreate)(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}},"./node_modules/underscore/modules/_baseIteratee.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n("./node_modules/underscore/modules/identity.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/isObject.js"),s=n("./node_modules/underscore/modules/isArray.js"),a=n("./node_modules/underscore/modules/matcher.js"),u=n("./node_modules/underscore/modules/property.js"),l=n("./node_modules/underscore/modules/_optimizeCb.js");function d(e,t,n){return null==e?r.default:(0,i.default)(e)?(0,l.default)(e,t,n):(0,o.default)(e)&&!(0,s.default)(e)?(0,a.default)(e):(0,u.default)(e)}},"./node_modules/underscore/modules/_cb.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/_baseIteratee.js"),o=n("./node_modules/underscore/modules/iteratee.js");function s(e,t,n){return r.default.iteratee!==o.default?r.default.iteratee(e,t):(0,i.default)(e,t,n)}},"./node_modules/underscore/modules/_chainResult.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/underscore.js");function i(e,t){return e._chain?(0,r.default)(t).chain():t}},"./node_modules/underscore/modules/_collectNonEnumProps.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/_has.js");function s(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=r.nonEnumerableProps.length,s=e.constructor,a=(0,i.default)(s)&&s.prototype||r.ObjProto,u="constructor";for((0,o.default)(e,u)&&!t.contains(u)&&t.push(u);n--;)(u=r.nonEnumerableProps[n])in e&&e[u]!==a[u]&&!t.contains(u)&&t.push(u)}},"./node_modules/underscore/modules/_createAssigner.js":(e,t,n)=>{"use strict";function r(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,u=0;u<a;u++){var l=s[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/_createEscaper.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/keys.js");function i(e){var t=function(t){return e[t]},n="(?:"+(0,r.default)(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}}},"./node_modules/underscore/modules/_createIndexFinder.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/isNaN.js");function s(e,t,n){return function(s,a,u){var l=0,d=(0,r.default)(s);if("number"==typeof u)e>0?l=u>=0?u:Math.max(u+d,l):d=u>=0?Math.min(u+1,d):u+d+1;else if(n&&u&&d)return s[u=n(s,a)]===a?u:-1;if(a!=a)return(u=t(i.slice.call(s,l,d),o.default))>=0?u+l:-1;for(u=e>0?l:d-1;u>=0&&u<d;u+=e)if(s[u]===a)return u;return-1}}},"./node_modules/underscore/modules/_createPredicateIndexFinder.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_getLength.js");function o(e){return function(t,n,o){n=(0,r.default)(n,o);for(var s=(0,i.default)(t),a=e>0?0:s-1;a>=0&&a<s;a+=e)if(n(t[a],a,t))return a;return-1}}},"./node_modules/underscore/modules/_createReduce.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/keys.js"),o=n("./node_modules/underscore/modules/_optimizeCb.js");function s(e){var t=function(t,n,o,s){var a=!(0,r.default)(t)&&(0,i.default)(t),u=(a||t).length,l=e>0?0:u-1;for(s||(o=t[a?a[l]:l],l+=e);l>=0&&l<u;l+=e){var d=a?a[l]:l;o=n(o,t[d],d,t)}return o};return function(e,n,r,i){var s=arguments.length>=3;return t(e,(0,o.default)(n,i,4),r,s)}}},"./node_modules/underscore/modules/_createSizePropertyCheck.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=r.MAX_ARRAY_INDEX}}},"./node_modules/underscore/modules/_deepGet.js":(e,t,n)=>{"use strict";function r(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/_escapeMap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},"./node_modules/underscore/modules/_executeBound.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_baseCreate.js"),i=n("./node_modules/underscore/modules/isObject.js");function o(e,t,n,o,s){if(!(o instanceof t))return e.apply(n,s);var a=(0,r.default)(e.prototype),u=e.apply(a,s);return(0,i.default)(u)?u:a}},"./node_modules/underscore/modules/_flatten.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/isArray.js"),s=n("./node_modules/underscore/modules/isArguments.js");function a(e,t,n,u){if(u=u||[],t||0===t){if(t<=0)return u.concat(e)}else t=1/0;for(var l=u.length,d=0,c=(0,r.default)(e);d<c;d++){var f=e[d];if((0,i.default)(f)&&((0,o.default)(f)||(0,s.default)(f)))if(t>1)a(f,t-1,n,u),l=u.length;else for(var h=0,p=f.length;h<p;)u[l++]=f[h++];else n||(u[l++]=f)}return u}},"./node_modules/underscore/modules/_getByteLength.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_shallowProperty.js").default)("byteLength")},"./node_modules/underscore/modules/_getLength.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_shallowProperty.js").default)("length")},"./node_modules/underscore/modules/_group.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/each.js");function o(e,t){return function(n,o,s){var a=t?[[],[]]:{};return o=(0,r.default)(o,s),(0,i.default)(n,(function(t,r){var i=o(t,r,n);e(a,t,i)})),a}}},"./node_modules/underscore/modules/_has.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t){return null!=e&&r.hasOwnProperty.call(e,t)}},"./node_modules/underscore/modules/_hasObjectTag.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("Object")},"./node_modules/underscore/modules/_isArrayLike.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createSizePropertyCheck.js"),i=n("./node_modules/underscore/modules/_getLength.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/_isBufferLike.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createSizePropertyCheck.js"),i=n("./node_modules/underscore/modules/_getByteLength.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/_keyInObj.js":(e,t,n)=>{"use strict";function r(e,t,n){return t in n}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/_methodFingerprint.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ie11fingerprint:()=>s,mapMethods:()=>d,weakMapMethods:()=>c,setMethods:()=>f});var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/allKeys.js");function s(e){var t=(0,r.default)(e);return function(n){if(null==n)return!1;var s=(0,o.default)(n);if((0,r.default)(s))return!1;for(var u=0;u<t;u++)if(!(0,i.default)(n[e[u]]))return!1;return e!==c||!(0,i.default)(n[a])}}var a="forEach",u=["clear","delete"],l=["get","has","set"],d=u.concat(a,l),c=u.concat(l),f=["add"].concat(u,a,"has")},"./node_modules/underscore/modules/_optimizeCb.js":(e,t,n)=>{"use strict";function r(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/_setup.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{VERSION:()=>r,root:()=>i,ArrayProto:()=>o,ObjProto:()=>s,SymbolProto:()=>a,push:()=>u,slice:()=>l,toString:()=>d,hasOwnProperty:()=>c,supportsArrayBuffer:()=>f,supportsDataView:()=>h,nativeIsArray:()=>p,nativeKeys:()=>m,nativeCreate:()=>g,nativeIsView:()=>v,_isNaN:()=>y,_isFinite:()=>_,hasEnumBug:()=>E,nonEnumerableProps:()=>b,MAX_ARRAY_INDEX:()=>T});var r="1.13.6",i="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},o=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,u=o.push,l=o.slice,d=s.toString,c=s.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,p=Array.isArray,m=Object.keys,g=Object.create,v=f&&ArrayBuffer.isView,y=isNaN,_=isFinite,E=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],T=Math.pow(2,53)-1},"./node_modules/underscore/modules/_shallowProperty.js":(e,t,n)=>{"use strict";function r(e){return function(t){return null==t?void 0:t[e]}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/_stringTagBug.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{hasStringTagBug:()=>o,isIE11:()=>s});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/_hasObjectTag.js"),o=r.supportsDataView&&(0,i.default)(new DataView(new ArrayBuffer(8))),s="undefined"!=typeof Map&&(0,i.default)(new Map)},"./node_modules/underscore/modules/_tagTester.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e){var t="[object "+e+"]";return function(e){return r.toString.call(e)===t}}},"./node_modules/underscore/modules/_toBufferView.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_getByteLength.js");function i(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,(0,r.default)(e))}},"./node_modules/underscore/modules/_toPath.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/underscore.js");n("./node_modules/underscore/modules/toPath.js");function i(e){return r.default.toPath(e)}},"./node_modules/underscore/modules/_unescapeMap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/invert.js"),i=n("./node_modules/underscore/modules/_escapeMap.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/after.js":(e,t,n)=>{"use strict";function r(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/allKeys.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/_collectNonEnumProps.js");function s(e){if(!(0,r.default)(e))return[];var t=[];for(var n in e)t.push(n);return i.hasEnumBug&&(0,o.default)(e,t),t}},"./node_modules/underscore/modules/before.js":(e,t,n)=>{"use strict";function r(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/bind.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/_executeBound.js");const s=(0,r.default)((function(e,t,n){if(!(0,i.default)(e))throw new TypeError("Bind must be called on a function");var s=(0,r.default)((function(r){return(0,o.default)(e,s,t,this,n.concat(r))}));return s}))},"./node_modules/underscore/modules/bindAll.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/_flatten.js"),o=n("./node_modules/underscore/modules/bind.js");const s=(0,r.default)((function(e,t){var n=(t=(0,i.default)(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=(0,o.default)(e[r],e)}return e}))},"./node_modules/underscore/modules/chain.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/underscore.js");function i(e){var t=(0,r.default)(e);return t._chain=!0,t}},"./node_modules/underscore/modules/chunk.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t){if(null==t||t<1)return[];for(var n=[],i=0,o=e.length;i<o;)n.push(r.slice.call(e,i,i+=t));return n}},"./node_modules/underscore/modules/clone.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/isArray.js"),o=n("./node_modules/underscore/modules/extend.js");function s(e){return(0,r.default)(e)?(0,i.default)(e)?e.slice():(0,o.default)({},e):e}},"./node_modules/underscore/modules/compact.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/filter.js");function i(e){return(0,r.default)(e,Boolean)}},"./node_modules/underscore/modules/compose.js":(e,t,n)=>{"use strict";function r(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/constant.js":(e,t,n)=>{"use strict";function r(e){return function(){return e}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/contains.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/indexOf.js");function s(e,t,n,s){return(0,r.default)(e)||(e=(0,i.default)(e)),("number"!=typeof n||s)&&(n=0),(0,o.default)(e,t,n)>=0}},"./node_modules/underscore/modules/countBy.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_group.js"),i=n("./node_modules/underscore/modules/_has.js");const o=(0,r.default)((function(e,t,n){(0,i.default)(e,n)?e[n]++:e[n]=1}))},"./node_modules/underscore/modules/create.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_baseCreate.js"),i=n("./node_modules/underscore/modules/extendOwn.js");function o(e,t){var n=(0,r.default)(e);return t&&(0,i.default)(n,t),n}},"./node_modules/underscore/modules/debounce.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/now.js");function o(e,t,n){var o,s,a,u,l,d=function(){var r=(0,i.default)()-s;t>r?o=setTimeout(d,t-r):(o=null,n||(u=e.apply(l,a)),o||(a=l=null))},c=(0,r.default)((function(r){return l=this,a=r,s=(0,i.default)(),o||(o=setTimeout(d,t),n&&(u=e.apply(l,a))),u}));return c.cancel=function(){clearTimeout(o),o=a=l=null},c}},"./node_modules/underscore/modules/defaults.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createAssigner.js"),i=n("./node_modules/underscore/modules/allKeys.js");const o=(0,r.default)(i.default,!0)},"./node_modules/underscore/modules/defer.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/partial.js"),i=n("./node_modules/underscore/modules/delay.js"),o=n("./node_modules/underscore/modules/underscore.js");const s=(0,r.default)(i.default,o.default,1)},"./node_modules/underscore/modules/delay.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/restArguments.js").default)((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)}))},"./node_modules/underscore/modules/difference.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/_flatten.js"),o=n("./node_modules/underscore/modules/filter.js"),s=n("./node_modules/underscore/modules/contains.js");const a=(0,r.default)((function(e,t){return t=(0,i.default)(t,!0,!0),(0,o.default)(e,(function(e){return!(0,s.default)(t,e)}))}))},"./node_modules/underscore/modules/each.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_optimizeCb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){var s,a;if(t=(0,r.default)(t,n),(0,i.default)(e))for(s=0,a=e.length;s<a;s++)t(e[s],s,e);else{var u=(0,o.default)(e);for(s=0,a=u.length;s<a;s++)t(e[u[s]],u[s],e)}return e}},"./node_modules/underscore/modules/escape.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createEscaper.js"),i=n("./node_modules/underscore/modules/_escapeMap.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/every.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){t=(0,r.default)(t,n);for(var s=!(0,i.default)(e)&&(0,o.default)(e),a=(s||e).length,u=0;u<a;u++){var l=s?s[u]:u;if(!t(e[l],l,e))return!1}return!0}},"./node_modules/underscore/modules/extend.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createAssigner.js"),i=n("./node_modules/underscore/modules/allKeys.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/extendOwn.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createAssigner.js"),i=n("./node_modules/underscore/modules/keys.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/filter.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/each.js");function o(e,t,n){var o=[];return t=(0,r.default)(t,n),(0,i.default)(e,(function(e,n,r){t(e,n,r)&&o.push(e)})),o}},"./node_modules/underscore/modules/find.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/findIndex.js"),o=n("./node_modules/underscore/modules/findKey.js");function s(e,t,n){var s=((0,r.default)(e)?i.default:o.default)(e,t,n);if(void 0!==s&&-1!==s)return e[s]}},"./node_modules/underscore/modules/findIndex.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_createPredicateIndexFinder.js").default)(1)},"./node_modules/underscore/modules/findKey.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/keys.js");function o(e,t,n){t=(0,r.default)(t,n);for(var o,s=(0,i.default)(e),a=0,u=s.length;a<u;a++)if(t(e[o=s[a]],o,e))return o}},"./node_modules/underscore/modules/findLastIndex.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_createPredicateIndexFinder.js").default)(-1)},"./node_modules/underscore/modules/findWhere.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/find.js"),i=n("./node_modules/underscore/modules/matcher.js");function o(e,t){return(0,r.default)(e,(0,i.default)(t))}},"./node_modules/underscore/modules/first.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/initial.js");function i(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:(0,r.default)(e,e.length-t)}},"./node_modules/underscore/modules/flatten.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_flatten.js");function i(e,t){return(0,r.default)(e,t,!1)}},"./node_modules/underscore/modules/functions.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/isFunction.js");function i(e){var t=[];for(var n in e)(0,r.default)(e[n])&&t.push(n);return t.sort()}},"./node_modules/underscore/modules/get.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_toPath.js"),i=n("./node_modules/underscore/modules/_deepGet.js"),o=n("./node_modules/underscore/modules/isUndefined.js");function s(e,t,n){var s=(0,i.default)(e,(0,r.default)(t));return(0,o.default)(s)?n:s}},"./node_modules/underscore/modules/groupBy.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_group.js"),i=n("./node_modules/underscore/modules/_has.js");const o=(0,r.default)((function(e,t,n){(0,i.default)(e,n)?e[n].push(t):e[n]=[t]}))},"./node_modules/underscore/modules/has.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_has.js"),i=n("./node_modules/underscore/modules/_toPath.js");function o(e,t){for(var n=(t=(0,i.default)(t)).length,o=0;o<n;o++){var s=t[o];if(!(0,r.default)(e,s))return!1;e=e[s]}return!!n}},"./node_modules/underscore/modules/identity.js":(e,t,n)=>{"use strict";function r(e){return e}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/index-all.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.default,VERSION:()=>i.VERSION,after:()=>i.after,all:()=>i.all,allKeys:()=>i.allKeys,any:()=>i.any,assign:()=>i.assign,before:()=>i.before,bind:()=>i.bind,bindAll:()=>i.bindAll,chain:()=>i.chain,chunk:()=>i.chunk,clone:()=>i.clone,collect:()=>i.collect,compact:()=>i.compact,compose:()=>i.compose,constant:()=>i.constant,contains:()=>i.contains,countBy:()=>i.countBy,create:()=>i.create,debounce:()=>i.debounce,defaults:()=>i.defaults,defer:()=>i.defer,delay:()=>i.delay,detect:()=>i.detect,difference:()=>i.difference,drop:()=>i.drop,each:()=>i.each,escape:()=>i.escape,every:()=>i.every,extend:()=>i.extend,extendOwn:()=>i.extendOwn,filter:()=>i.filter,find:()=>i.find,findIndex:()=>i.findIndex,findKey:()=>i.findKey,findLastIndex:()=>i.findLastIndex,findWhere:()=>i.findWhere,first:()=>i.first,flatten:()=>i.flatten,foldl:()=>i.foldl,foldr:()=>i.foldr,forEach:()=>i.forEach,functions:()=>i.functions,get:()=>i.get,groupBy:()=>i.groupBy,has:()=>i.has,head:()=>i.head,identity:()=>i.identity,include:()=>i.include,includes:()=>i.includes,indexBy:()=>i.indexBy,indexOf:()=>i.indexOf,initial:()=>i.initial,inject:()=>i.inject,intersection:()=>i.intersection,invert:()=>i.invert,invoke:()=>i.invoke,isArguments:()=>i.isArguments,isArray:()=>i.isArray,isArrayBuffer:()=>i.isArrayBuffer,isBoolean:()=>i.isBoolean,isDataView:()=>i.isDataView,isDate:()=>i.isDate,isElement:()=>i.isElement,isEmpty:()=>i.isEmpty,isEqual:()=>i.isEqual,isError:()=>i.isError,isFinite:()=>i.isFinite,isFunction:()=>i.isFunction,isMap:()=>i.isMap,isMatch:()=>i.isMatch,isNaN:()=>i.isNaN,isNull:()=>i.isNull,isNumber:()=>i.isNumber,isObject:()=>i.isObject,isRegExp:()=>i.isRegExp,isSet:()=>i.isSet,isString:()=>i.isString,isSymbol:()=>i.isSymbol,isTypedArray:()=>i.isTypedArray,isUndefined:()=>i.isUndefined,isWeakMap:()=>i.isWeakMap,isWeakSet:()=>i.isWeakSet,iteratee:()=>i.iteratee,keys:()=>i.keys,last:()=>i.last,lastIndexOf:()=>i.lastIndexOf,map:()=>i.map,mapObject:()=>i.mapObject,matcher:()=>i.matcher,matches:()=>i.matches,max:()=>i.max,memoize:()=>i.memoize,methods:()=>i.methods,min:()=>i.min,mixin:()=>i.mixin,negate:()=>i.negate,noop:()=>i.noop,now:()=>i.now,object:()=>i.object,omit:()=>i.omit,once:()=>i.once,pairs:()=>i.pairs,partial:()=>i.partial,partition:()=>i.partition,pick:()=>i.pick,pluck:()=>i.pluck,property:()=>i.property,propertyOf:()=>i.propertyOf,random:()=>i.random,range:()=>i.range,reduce:()=>i.reduce,reduceRight:()=>i.reduceRight,reject:()=>i.reject,rest:()=>i.rest,restArguments:()=>i.restArguments,result:()=>i.result,sample:()=>i.sample,select:()=>i.select,shuffle:()=>i.shuffle,size:()=>i.size,some:()=>i.some,sortBy:()=>i.sortBy,sortedIndex:()=>i.sortedIndex,tail:()=>i.tail,take:()=>i.take,tap:()=>i.tap,template:()=>i.template,templateSettings:()=>i.templateSettings,throttle:()=>i.throttle,times:()=>i.times,toArray:()=>i.toArray,toPath:()=>i.toPath,transpose:()=>i.transpose,unescape:()=>i.unescape,union:()=>i.union,uniq:()=>i.uniq,unique:()=>i.unique,uniqueId:()=>i.uniqueId,unzip:()=>i.unzip,values:()=>i.values,where:()=>i.where,without:()=>i.without,wrap:()=>i.wrap,zip:()=>i.zip});var r=n("./node_modules/underscore/modules/index-default.js"),i=n("./node_modules/underscore/modules/index.js")},"./node_modules/underscore/modules/index-default.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/index.js"),i=(0,r.mixin)(r);i._=i;const o=i},"./node_modules/underscore/modules/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{VERSION:()=>r.VERSION,restArguments:()=>i.default,isObject:()=>o.default,isNull:()=>s.default,isUndefined:()=>a.default,isBoolean:()=>u.default,isElement:()=>l.default,isString:()=>d.default,isNumber:()=>c.default,isDate:()=>f.default,isRegExp:()=>h.default,isError:()=>p.default,isSymbol:()=>m.default,isArrayBuffer:()=>g.default,isDataView:()=>v.default,isArray:()=>y.default,isFunction:()=>_.default,isArguments:()=>E.default,isFinite:()=>b.default,isNaN:()=>T.default,isTypedArray:()=>S.default,isEmpty:()=>w.default,isMatch:()=>A.default,isEqual:()=>R.default,isMap:()=>C.default,isWeakMap:()=>I.default,isSet:()=>O.default,isWeakSet:()=>D.default,keys:()=>M.default,allKeys:()=>N.default,values:()=>P.default,pairs:()=>x.default,invert:()=>L.default,functions:()=>k.default,methods:()=>k.default,extend:()=>j.default,extendOwn:()=>F.default,assign:()=>F.default,defaults:()=>U.default,create:()=>B.default,clone:()=>G.default,tap:()=>q.default,get:()=>H.default,has:()=>V.default,mapObject:()=>Y.default,identity:()=>K.default,constant:()=>z.default,noop:()=>W.default,toPath:()=>J.default,property:()=>X.default,propertyOf:()=>Q.default,matcher:()=>$.default,matches:()=>$.default,times:()=>Z.default,random:()=>ee.default,now:()=>te.default,escape:()=>ne.default,unescape:()=>re.default,templateSettings:()=>ie.default,template:()=>oe.default,result:()=>se.default,uniqueId:()=>ae.default,chain:()=>ue.default,iteratee:()=>le.default,partial:()=>de.default,bind:()=>ce.default,bindAll:()=>fe.default,memoize:()=>he.default,delay:()=>pe.default,defer:()=>me.default,throttle:()=>ge.default,debounce:()=>ve.default,wrap:()=>ye.default,negate:()=>_e.default,compose:()=>Ee.default,after:()=>be.default,before:()=>Te.default,once:()=>Se.default,findKey:()=>we.default,findIndex:()=>Ae.default,findLastIndex:()=>Re.default,sortedIndex:()=>Ce.default,indexOf:()=>Ie.default,lastIndexOf:()=>Oe.default,find:()=>De.default,detect:()=>De.default,findWhere:()=>Me.default,each:()=>Ne.default,forEach:()=>Ne.default,map:()=>Pe.default,collect:()=>Pe.default,reduce:()=>xe.default,foldl:()=>xe.default,inject:()=>xe.default,reduceRight:()=>Le.default,foldr:()=>Le.default,filter:()=>ke.default,select:()=>ke.default,reject:()=>je.default,every:()=>Fe.default,all:()=>Fe.default,some:()=>Ue.default,any:()=>Ue.default,contains:()=>Be.default,includes:()=>Be.default,include:()=>Be.default,invoke:()=>Ge.default,pluck:()=>qe.default,where:()=>He.default,max:()=>Ve.default,min:()=>Ye.default,shuffle:()=>Ke.default,sample:()=>ze.default,sortBy:()=>We.default,groupBy:()=>Je.default,indexBy:()=>Xe.default,countBy:()=>Qe.default,partition:()=>$e.default,toArray:()=>Ze.default,size:()=>et.default,pick:()=>tt.default,omit:()=>nt.default,first:()=>rt.default,head:()=>rt.default,take:()=>rt.default,initial:()=>it.default,last:()=>ot.default,rest:()=>st.default,tail:()=>st.default,drop:()=>st.default,compact:()=>at.default,flatten:()=>ut.default,without:()=>lt.default,uniq:()=>dt.default,unique:()=>dt.default,union:()=>ct.default,intersection:()=>ft.default,difference:()=>ht.default,unzip:()=>pt.default,transpose:()=>pt.default,zip:()=>mt.default,object:()=>gt.default,range:()=>vt.default,chunk:()=>yt.default,mixin:()=>_t.default,default:()=>Et.default});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/restArguments.js"),o=n("./node_modules/underscore/modules/isObject.js"),s=n("./node_modules/underscore/modules/isNull.js"),a=n("./node_modules/underscore/modules/isUndefined.js"),u=n("./node_modules/underscore/modules/isBoolean.js"),l=n("./node_modules/underscore/modules/isElement.js"),d=n("./node_modules/underscore/modules/isString.js"),c=n("./node_modules/underscore/modules/isNumber.js"),f=n("./node_modules/underscore/modules/isDate.js"),h=n("./node_modules/underscore/modules/isRegExp.js"),p=n("./node_modules/underscore/modules/isError.js"),m=n("./node_modules/underscore/modules/isSymbol.js"),g=n("./node_modules/underscore/modules/isArrayBuffer.js"),v=n("./node_modules/underscore/modules/isDataView.js"),y=n("./node_modules/underscore/modules/isArray.js"),_=n("./node_modules/underscore/modules/isFunction.js"),E=n("./node_modules/underscore/modules/isArguments.js"),b=n("./node_modules/underscore/modules/isFinite.js"),T=n("./node_modules/underscore/modules/isNaN.js"),S=n("./node_modules/underscore/modules/isTypedArray.js"),w=n("./node_modules/underscore/modules/isEmpty.js"),A=n("./node_modules/underscore/modules/isMatch.js"),R=n("./node_modules/underscore/modules/isEqual.js"),C=n("./node_modules/underscore/modules/isMap.js"),I=n("./node_modules/underscore/modules/isWeakMap.js"),O=n("./node_modules/underscore/modules/isSet.js"),D=n("./node_modules/underscore/modules/isWeakSet.js"),M=n("./node_modules/underscore/modules/keys.js"),N=n("./node_modules/underscore/modules/allKeys.js"),P=n("./node_modules/underscore/modules/values.js"),x=n("./node_modules/underscore/modules/pairs.js"),L=n("./node_modules/underscore/modules/invert.js"),k=n("./node_modules/underscore/modules/functions.js"),j=n("./node_modules/underscore/modules/extend.js"),F=n("./node_modules/underscore/modules/extendOwn.js"),U=n("./node_modules/underscore/modules/defaults.js"),B=n("./node_modules/underscore/modules/create.js"),G=n("./node_modules/underscore/modules/clone.js"),q=n("./node_modules/underscore/modules/tap.js"),H=n("./node_modules/underscore/modules/get.js"),V=n("./node_modules/underscore/modules/has.js"),Y=n("./node_modules/underscore/modules/mapObject.js"),K=n("./node_modules/underscore/modules/identity.js"),z=n("./node_modules/underscore/modules/constant.js"),W=n("./node_modules/underscore/modules/noop.js"),J=n("./node_modules/underscore/modules/toPath.js"),X=n("./node_modules/underscore/modules/property.js"),Q=n("./node_modules/underscore/modules/propertyOf.js"),$=n("./node_modules/underscore/modules/matcher.js"),Z=n("./node_modules/underscore/modules/times.js"),ee=n("./node_modules/underscore/modules/random.js"),te=n("./node_modules/underscore/modules/now.js"),ne=n("./node_modules/underscore/modules/escape.js"),re=n("./node_modules/underscore/modules/unescape.js"),ie=n("./node_modules/underscore/modules/templateSettings.js"),oe=n("./node_modules/underscore/modules/template.js"),se=n("./node_modules/underscore/modules/result.js"),ae=n("./node_modules/underscore/modules/uniqueId.js"),ue=n("./node_modules/underscore/modules/chain.js"),le=n("./node_modules/underscore/modules/iteratee.js"),de=n("./node_modules/underscore/modules/partial.js"),ce=n("./node_modules/underscore/modules/bind.js"),fe=n("./node_modules/underscore/modules/bindAll.js"),he=n("./node_modules/underscore/modules/memoize.js"),pe=n("./node_modules/underscore/modules/delay.js"),me=n("./node_modules/underscore/modules/defer.js"),ge=n("./node_modules/underscore/modules/throttle.js"),ve=n("./node_modules/underscore/modules/debounce.js"),ye=n("./node_modules/underscore/modules/wrap.js"),_e=n("./node_modules/underscore/modules/negate.js"),Ee=n("./node_modules/underscore/modules/compose.js"),be=n("./node_modules/underscore/modules/after.js"),Te=n("./node_modules/underscore/modules/before.js"),Se=n("./node_modules/underscore/modules/once.js"),we=n("./node_modules/underscore/modules/findKey.js"),Ae=n("./node_modules/underscore/modules/findIndex.js"),Re=n("./node_modules/underscore/modules/findLastIndex.js"),Ce=n("./node_modules/underscore/modules/sortedIndex.js"),Ie=n("./node_modules/underscore/modules/indexOf.js"),Oe=n("./node_modules/underscore/modules/lastIndexOf.js"),De=n("./node_modules/underscore/modules/find.js"),Me=n("./node_modules/underscore/modules/findWhere.js"),Ne=n("./node_modules/underscore/modules/each.js"),Pe=n("./node_modules/underscore/modules/map.js"),xe=n("./node_modules/underscore/modules/reduce.js"),Le=n("./node_modules/underscore/modules/reduceRight.js"),ke=n("./node_modules/underscore/modules/filter.js"),je=n("./node_modules/underscore/modules/reject.js"),Fe=n("./node_modules/underscore/modules/every.js"),Ue=n("./node_modules/underscore/modules/some.js"),Be=n("./node_modules/underscore/modules/contains.js"),Ge=n("./node_modules/underscore/modules/invoke.js"),qe=n("./node_modules/underscore/modules/pluck.js"),He=n("./node_modules/underscore/modules/where.js"),Ve=n("./node_modules/underscore/modules/max.js"),Ye=n("./node_modules/underscore/modules/min.js"),Ke=n("./node_modules/underscore/modules/shuffle.js"),ze=n("./node_modules/underscore/modules/sample.js"),We=n("./node_modules/underscore/modules/sortBy.js"),Je=n("./node_modules/underscore/modules/groupBy.js"),Xe=n("./node_modules/underscore/modules/indexBy.js"),Qe=n("./node_modules/underscore/modules/countBy.js"),$e=n("./node_modules/underscore/modules/partition.js"),Ze=n("./node_modules/underscore/modules/toArray.js"),et=n("./node_modules/underscore/modules/size.js"),tt=n("./node_modules/underscore/modules/pick.js"),nt=n("./node_modules/underscore/modules/omit.js"),rt=n("./node_modules/underscore/modules/first.js"),it=n("./node_modules/underscore/modules/initial.js"),ot=n("./node_modules/underscore/modules/last.js"),st=n("./node_modules/underscore/modules/rest.js"),at=n("./node_modules/underscore/modules/compact.js"),ut=n("./node_modules/underscore/modules/flatten.js"),lt=n("./node_modules/underscore/modules/without.js"),dt=n("./node_modules/underscore/modules/uniq.js"),ct=n("./node_modules/underscore/modules/union.js"),ft=n("./node_modules/underscore/modules/intersection.js"),ht=n("./node_modules/underscore/modules/difference.js"),pt=n("./node_modules/underscore/modules/unzip.js"),mt=n("./node_modules/underscore/modules/zip.js"),gt=n("./node_modules/underscore/modules/object.js"),vt=n("./node_modules/underscore/modules/range.js"),yt=n("./node_modules/underscore/modules/chunk.js"),_t=n("./node_modules/underscore/modules/mixin.js"),Et=n("./node_modules/underscore/modules/underscore-array-methods.js")},"./node_modules/underscore/modules/indexBy.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_group.js").default)((function(e,t,n){e[n]=t}))},"./node_modules/underscore/modules/indexOf.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/sortedIndex.js"),i=n("./node_modules/underscore/modules/findIndex.js");const o=(0,n("./node_modules/underscore/modules/_createIndexFinder.js").default)(1,i.default,r.default)},"./node_modules/underscore/modules/initial.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t,n){return r.slice.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}},"./node_modules/underscore/modules/intersection.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/contains.js");function o(e){for(var t=[],n=arguments.length,o=0,s=(0,r.default)(e);o<s;o++){var a=e[o];if(!(0,i.default)(t,a)){var u;for(u=1;u<n&&(0,i.default)(arguments[u],a);u++);u===n&&t.push(a)}}return t}},"./node_modules/underscore/modules/invert.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/keys.js");function i(e){for(var t={},n=(0,r.default)(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t}},"./node_modules/underscore/modules/invoke.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/map.js"),s=n("./node_modules/underscore/modules/_deepGet.js"),a=n("./node_modules/underscore/modules/_toPath.js");const u=(0,r.default)((function(e,t,n){var r,u;return(0,i.default)(t)?u=t:(t=(0,a.default)(t),r=t.slice(0,-1),t=t[t.length-1]),(0,o.default)(e,(function(e){var i=u;if(!i){if(r&&r.length&&(e=(0,s.default)(e,r)),null==e)return;i=e[t]}return null==i?i:i.apply(e,n)}))}))},"./node_modules/underscore/modules/isArguments.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_has.js"),o=(0,r.default)("Arguments");!function(){o(arguments)||(o=function(e){return(0,i.default)(e,"callee")})}();const s=o},"./node_modules/underscore/modules/isArray.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/_tagTester.js");const o=r.nativeIsArray||(0,i.default)("Array")},"./node_modules/underscore/modules/isArrayBuffer.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("ArrayBuffer")},"./node_modules/underscore/modules/isBoolean.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return!0===e||!1===e||"[object Boolean]"===r.toString.call(e)}},"./node_modules/underscore/modules/isDataView.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/isArrayBuffer.js"),s=n("./node_modules/underscore/modules/_stringTagBug.js"),a=(0,r.default)("DataView");const u=s.hasStringTagBug?function(e){return null!=e&&(0,i.default)(e.getInt8)&&(0,o.default)(e.buffer)}:a},"./node_modules/underscore/modules/isDate.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("Date")},"./node_modules/underscore/modules/isElement.js":(e,t,n)=>{"use strict";function r(e){return!(!e||1!==e.nodeType)}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/isEmpty.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/underscore/modules/_getLength.js"),i=n("./node_modules/underscore/modules/isArray.js"),o=n("./node_modules/underscore/modules/isString.js"),s=n("./node_modules/underscore/modules/isArguments.js"),a=n("./node_modules/underscore/modules/keys.js");function u(e){if(null==e)return!0;var t=(0,r.default)(e);return"number"==typeof t&&((0,i.default)(e)||(0,o.default)(e)||(0,s.default)(e))?0===t:0===(0,r.default)((0,a.default)(e))}},"./node_modules/underscore/modules/isEqual.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/_getByteLength.js"),s=n("./node_modules/underscore/modules/isTypedArray.js"),a=n("./node_modules/underscore/modules/isFunction.js"),u=n("./node_modules/underscore/modules/_stringTagBug.js"),l=n("./node_modules/underscore/modules/isDataView.js"),d=n("./node_modules/underscore/modules/keys.js"),c=n("./node_modules/underscore/modules/_has.js"),f=n("./node_modules/underscore/modules/_toBufferView.js"),h="[object DataView]";function p(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&m(e,t,n,r)}function m(e,t,n,g){e instanceof r.default&&(e=e._wrapped),t instanceof r.default&&(t=t._wrapped);var v=i.toString.call(e);if(v!==i.toString.call(t))return!1;if(u.hasStringTagBug&&"[object Object]"==v&&(0,l.default)(e)){if(!(0,l.default)(t))return!1;v=h}switch(v){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return i.SymbolProto.valueOf.call(e)===i.SymbolProto.valueOf.call(t);case"[object ArrayBuffer]":case h:return m((0,f.default)(e),(0,f.default)(t),n,g)}var y="[object Array]"===v;if(!y&&(0,s.default)(e)){if((0,o.default)(e)!==(0,o.default)(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;y=!0}if(!y){if("object"!=typeof e||"object"!=typeof t)return!1;var _=e.constructor,E=t.constructor;if(_!==E&&!((0,a.default)(_)&&_ instanceof _&&(0,a.default)(E)&&E instanceof E)&&"constructor"in e&&"constructor"in t)return!1}g=g||[];for(var b=(n=n||[]).length;b--;)if(n[b]===e)return g[b]===t;if(n.push(e),g.push(t),y){if((b=e.length)!==t.length)return!1;for(;b--;)if(!p(e[b],t[b],n,g))return!1}else{var T,S=(0,d.default)(e);if(b=S.length,(0,d.default)(t).length!==b)return!1;for(;b--;)if(T=S[b],!(0,c.default)(t,T)||!p(e[T],t[T],n,g))return!1}return n.pop(),g.pop(),!0}function g(e,t){return p(e,t)}},"./node_modules/underscore/modules/isError.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("Error")},"./node_modules/underscore/modules/isFinite.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isSymbol.js");function o(e){return!(0,i.default)(e)&&(0,r._isFinite)(e)&&!isNaN(parseFloat(e))}},"./node_modules/underscore/modules/isFunction.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=(0,r.default)("Function"),s=i.root.document&&i.root.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof s&&(o=function(e){return"function"==typeof e||!1});const a=o},"./node_modules/underscore/modules/isMap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_stringTagBug.js"),o=n("./node_modules/underscore/modules/_methodFingerprint.js");const s=i.isIE11?(0,o.ie11fingerprint)(o.mapMethods):(0,r.default)("Map")},"./node_modules/underscore/modules/isMatch.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/keys.js");function i(e,t){var n=(0,r.default)(t),i=n.length;if(null==e)return!i;for(var o=Object(e),s=0;s<i;s++){var a=n[s];if(t[a]!==o[a]||!(a in o))return!1}return!0}},"./node_modules/underscore/modules/isNaN.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isNumber.js");function o(e){return(0,i.default)(e)&&(0,r._isNaN)(e)}},"./node_modules/underscore/modules/isNull.js":(e,t,n)=>{"use strict";function r(e){return null===e}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/isNumber.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("Number")},"./node_modules/underscore/modules/isObject.js":(e,t,n)=>{"use strict";function r(e){var t=typeof e;return"function"===t||"object"===t&&!!e}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/isRegExp.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("RegExp")},"./node_modules/underscore/modules/isSet.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_stringTagBug.js"),o=n("./node_modules/underscore/modules/_methodFingerprint.js");const s=i.isIE11?(0,o.ie11fingerprint)(o.setMethods):(0,r.default)("Set")},"./node_modules/underscore/modules/isString.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("String")},"./node_modules/underscore/modules/isSymbol.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("Symbol")},"./node_modules/underscore/modules/isTypedArray.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/underscore/modules/_setup.js"),i=n("./node_modules/underscore/modules/isDataView.js"),o=n("./node_modules/underscore/modules/constant.js"),s=n("./node_modules/underscore/modules/_isBufferLike.js"),a=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const u=r.supportsArrayBuffer?function(e){return r.nativeIsView?(0,r.nativeIsView)(e)&&!(0,i.default)(e):(0,s.default)(e)&&a.test(r.toString.call(e))}:(0,o.default)(!1)},"./node_modules/underscore/modules/isUndefined.js":(e,t,n)=>{"use strict";function r(e){return void 0===e}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/isWeakMap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_tagTester.js"),i=n("./node_modules/underscore/modules/_stringTagBug.js"),o=n("./node_modules/underscore/modules/_methodFingerprint.js");const s=i.isIE11?(0,o.ie11fingerprint)(o.weakMapMethods):(0,r.default)("WeakMap")},"./node_modules/underscore/modules/isWeakSet.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_tagTester.js").default)("WeakSet")},"./node_modules/underscore/modules/iteratee.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/_baseIteratee.js");function o(e,t){return(0,i.default)(e,t,1/0)}r.default.iteratee=o},"./node_modules/underscore/modules/keys.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/isObject.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/_has.js"),s=n("./node_modules/underscore/modules/_collectNonEnumProps.js");function a(e){if(!(0,r.default)(e))return[];if(i.nativeKeys)return(0,i.nativeKeys)(e);var t=[];for(var n in e)(0,o.default)(e,n)&&t.push(n);return i.hasEnumBug&&(0,s.default)(e,t),t}},"./node_modules/underscore/modules/last.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/rest.js");function i(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:(0,r.default)(e,Math.max(0,e.length-t))}},"./node_modules/underscore/modules/lastIndexOf.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/findLastIndex.js");const i=(0,n("./node_modules/underscore/modules/_createIndexFinder.js").default)(-1,r.default)},"./node_modules/underscore/modules/map.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){t=(0,r.default)(t,n);for(var s=!(0,i.default)(e)&&(0,o.default)(e),a=(s||e).length,u=Array(a),l=0;l<a;l++){var d=s?s[l]:l;u[l]=t(e[d],d,e)}return u}},"./node_modules/underscore/modules/mapObject.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/keys.js");function o(e,t,n){t=(0,r.default)(t,n);for(var o=(0,i.default)(e),s=o.length,a={},u=0;u<s;u++){var l=o[u];a[l]=t(e[l],l,e)}return a}},"./node_modules/underscore/modules/matcher.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/extendOwn.js"),i=n("./node_modules/underscore/modules/isMatch.js");function o(e){return e=(0,r.default)({},e),function(t){return(0,i.default)(t,e)}}},"./node_modules/underscore/modules/max.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/_cb.js"),s=n("./node_modules/underscore/modules/each.js");function a(e,t,n){var a,u,l=-1/0,d=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var c=0,f=(e=(0,r.default)(e)?e:(0,i.default)(e)).length;c<f;c++)null!=(a=e[c])&&a>l&&(l=a);else t=(0,o.default)(t,n),(0,s.default)(e,(function(e,n,r){((u=t(e,n,r))>d||u===-1/0&&l===-1/0)&&(l=e,d=u)}));return l}},"./node_modules/underscore/modules/memoize.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_has.js");function i(e,t){var n=function(i){var o=n.cache,s=""+(t?t.apply(this,arguments):i);return(0,r.default)(o,s)||(o[s]=e.apply(this,arguments)),o[s]};return n.cache={},n}},"./node_modules/underscore/modules/min.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/_cb.js"),s=n("./node_modules/underscore/modules/each.js");function a(e,t,n){var a,u,l=1/0,d=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var c=0,f=(e=(0,r.default)(e)?e:(0,i.default)(e)).length;c<f;c++)null!=(a=e[c])&&a<l&&(l=a);else t=(0,o.default)(t,n),(0,s.default)(e,(function(e,n,r){((u=t(e,n,r))<d||u===1/0&&l===1/0)&&(l=e,d=u)}));return l}},"./node_modules/underscore/modules/mixin.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/each.js"),o=n("./node_modules/underscore/modules/functions.js"),s=n("./node_modules/underscore/modules/_setup.js"),a=n("./node_modules/underscore/modules/_chainResult.js");function u(e){return(0,i.default)((0,o.default)(e),(function(t){var n=r.default[t]=e[t];r.default.prototype[t]=function(){var e=[this._wrapped];return s.push.apply(e,arguments),(0,a.default)(this,n.apply(r.default,e))}})),r.default}},"./node_modules/underscore/modules/negate.js":(e,t,n)=>{"use strict";function r(e){return function(){return!e.apply(this,arguments)}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/noop.js":(e,t,n)=>{"use strict";function r(){}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/now.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=Date.now||function(){return(new Date).getTime()}},"./node_modules/underscore/modules/object.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_getLength.js");function i(e,t){for(var n={},i=0,o=(0,r.default)(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}},"./node_modules/underscore/modules/omit.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/negate.js"),s=n("./node_modules/underscore/modules/map.js"),a=n("./node_modules/underscore/modules/_flatten.js"),u=n("./node_modules/underscore/modules/contains.js"),l=n("./node_modules/underscore/modules/pick.js");const d=(0,r.default)((function(e,t){var n,r=t[0];return(0,i.default)(r)?(r=(0,o.default)(r),t.length>1&&(n=t[1])):(t=(0,s.default)((0,a.default)(t,!1,!1),String),r=function(e,n){return!(0,u.default)(t,n)}),(0,l.default)(e,r,n)}))},"./node_modules/underscore/modules/once.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/partial.js"),i=n("./node_modules/underscore/modules/before.js");const o=(0,r.default)(i.default,2)},"./node_modules/underscore/modules/pairs.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/keys.js");function i(e){for(var t=(0,r.default)(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i}},"./node_modules/underscore/modules/partial.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/_executeBound.js"),o=n("./node_modules/underscore/modules/underscore.js"),s=(0,r.default)((function(e,t){var n=s.placeholder,r=function(){for(var o=0,s=t.length,a=Array(s),u=0;u<s;u++)a[u]=t[u]===n?arguments[o++]:t[u];for(;o<arguments.length;)a.push(arguments[o++]);return(0,i.default)(e,r,this,this,a)};return r}));s.placeholder=o.default;const a=s},"./node_modules/underscore/modules/partition.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_group.js").default)((function(e,t,n){e[n?0:1].push(t)}),!0)},"./node_modules/underscore/modules/pick.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/isFunction.js"),o=n("./node_modules/underscore/modules/_optimizeCb.js"),s=n("./node_modules/underscore/modules/allKeys.js"),a=n("./node_modules/underscore/modules/_keyInObj.js"),u=n("./node_modules/underscore/modules/_flatten.js");const l=(0,r.default)((function(e,t){var n={},r=t[0];if(null==e)return n;(0,i.default)(r)?(t.length>1&&(r=(0,o.default)(r,t[1])),t=(0,s.default)(e)):(r=a.default,t=(0,u.default)(t,!1,!1),e=Object(e));for(var l=0,d=t.length;l<d;l++){var c=t[l],f=e[c];r(f,c,e)&&(n[c]=f)}return n}))},"./node_modules/underscore/modules/pluck.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/map.js"),i=n("./node_modules/underscore/modules/property.js");function o(e,t){return(0,r.default)(e,(0,i.default)(t))}},"./node_modules/underscore/modules/property.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_deepGet.js"),i=n("./node_modules/underscore/modules/_toPath.js");function o(e){return e=(0,i.default)(e),function(t){return(0,r.default)(t,e)}}},"./node_modules/underscore/modules/propertyOf.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/noop.js"),i=n("./node_modules/underscore/modules/get.js");function o(e){return null==e?r.default:function(t){return(0,i.default)(e,t)}}},"./node_modules/underscore/modules/random.js":(e,t,n)=>{"use strict";function r(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/range.js":(e,t,n)=>{"use strict";function r(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/reduce.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_createReduce.js").default)(1)},"./node_modules/underscore/modules/reduceRight.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/underscore/modules/_createReduce.js").default)(-1)},"./node_modules/underscore/modules/reject.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/filter.js"),i=n("./node_modules/underscore/modules/negate.js"),o=n("./node_modules/underscore/modules/_cb.js");function s(e,t,n){return(0,r.default)(e,(0,i.default)((0,o.default)(t)),n)}},"./node_modules/underscore/modules/rest.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e,t,n){return r.slice.call(e,null==t||n?1:t)}},"./node_modules/underscore/modules/restArguments.js":(e,t,n)=>{"use strict";function r(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/result.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/isFunction.js"),i=n("./node_modules/underscore/modules/_toPath.js");function o(e,t,n){var o=(t=(0,i.default)(t)).length;if(!o)return(0,r.default)(n)?n.call(e):n;for(var s=0;s<o;s++){var a=null==e?void 0:e[t[s]];void 0===a&&(a=n,s=o),e=(0,r.default)(a)?a.call(e):a}return e}},"./node_modules/underscore/modules/sample.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/values.js"),o=n("./node_modules/underscore/modules/_getLength.js"),s=n("./node_modules/underscore/modules/random.js"),a=n("./node_modules/underscore/modules/toArray.js");function u(e,t,n){if(null==t||n)return(0,r.default)(e)||(e=(0,i.default)(e)),e[(0,s.default)(e.length-1)];var u=(0,a.default)(e),l=(0,o.default)(u);t=Math.max(Math.min(t,l),0);for(var d=l-1,c=0;c<t;c++){var f=(0,s.default)(c,d),h=u[c];u[c]=u[f],u[f]=h}return u.slice(0,t)}},"./node_modules/underscore/modules/shuffle.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/sample.js");function i(e){return(0,r.default)(e,1/0)}},"./node_modules/underscore/modules/size.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_isArrayLike.js"),i=n("./node_modules/underscore/modules/keys.js");function o(e){return null==e?0:(0,r.default)(e)?e.length:(0,i.default)(e).length}},"./node_modules/underscore/modules/some.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_isArrayLike.js"),o=n("./node_modules/underscore/modules/keys.js");function s(e,t,n){t=(0,r.default)(t,n);for(var s=!(0,i.default)(e)&&(0,o.default)(e),a=(s||e).length,u=0;u<a;u++){var l=s?s[u]:u;if(t(e[l],l,e))return!0}return!1}},"./node_modules/underscore/modules/sortBy.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/pluck.js"),o=n("./node_modules/underscore/modules/map.js");function s(e,t,n){var s=0;return t=(0,r.default)(t,n),(0,i.default)((0,o.default)(e,(function(e,n,r){return{value:e,index:s++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}},"./node_modules/underscore/modules/sortedIndex.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_cb.js"),i=n("./node_modules/underscore/modules/_getLength.js");function o(e,t,n,o){for(var s=(n=(0,r.default)(n,o,1))(t),a=0,u=(0,i.default)(e);a<u;){var l=Math.floor((a+u)/2);n(e[l])<s?a=l+1:u=l}return a}},"./node_modules/underscore/modules/tap.js":(e,t,n)=>{"use strict";function r(e,t){return t(e),e}n.r(t),n.d(t,{default:()=>r})},"./node_modules/underscore/modules/template.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n("./node_modules/underscore/modules/defaults.js"),i=n("./node_modules/underscore/modules/underscore.js"),o=(n("./node_modules/underscore/modules/templateSettings.js"),/(.)^/),s={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\u2028|\u2029/g;function u(e){return"\\"+s[e]}var l=/^\s*(\w|\$)+\s*$/;function d(e,t,n){!t&&n&&(t=n),t=(0,r.default)({},t,i.default.templateSettings);var s=RegExp([(t.escape||o).source,(t.interpolate||o).source,(t.evaluate||o).source].join("|")+"|$","g"),d=0,c="__p+='";e.replace(s,(function(t,n,r,i,o){return c+=e.slice(d,o).replace(a,u),d=o+t.length,n?c+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?c+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(c+="';\n"+i+"\n__p+='"),t})),c+="';\n";var f,h=t.variable;if(h){if(!l.test(h))throw new Error("variable is not a bare identifier: "+h)}else c="with(obj||{}){\n"+c+"}\n",h="obj";c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{f=new Function(h,"_",c)}catch(e){throw e.source=c,e}var p=function(e){return f.call(this,e,i.default)};return p.source="function("+h+"){\n"+c+"}",p}},"./node_modules/underscore/modules/templateSettings.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=n("./node_modules/underscore/modules/underscore.js").default.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}},"./node_modules/underscore/modules/throttle.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/now.js");function i(e,t,n){var i,o,s,a,u=0;n||(n={});var l=function(){u=!1===n.leading?0:(0,r.default)(),i=null,a=e.apply(o,s),i||(o=s=null)},d=function(){var d=(0,r.default)();u||!1!==n.leading||(u=d);var c=t-(d-u);return o=this,s=arguments,c<=0||c>t?(i&&(clearTimeout(i),i=null),u=d,a=e.apply(o,s),i||(o=s=null)):i||!1===n.trailing||(i=setTimeout(l,c)),a};return d.cancel=function(){clearTimeout(i),u=0,i=o=s=null},d}},"./node_modules/underscore/modules/times.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_optimizeCb.js");function i(e,t,n){var i=Array(Math.max(0,e));t=(0,r.default)(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i}},"./node_modules/underscore/modules/toArray.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n("./node_modules/underscore/modules/isArray.js"),i=n("./node_modules/underscore/modules/_setup.js"),o=n("./node_modules/underscore/modules/isString.js"),s=n("./node_modules/underscore/modules/_isArrayLike.js"),a=n("./node_modules/underscore/modules/map.js"),u=n("./node_modules/underscore/modules/identity.js"),l=n("./node_modules/underscore/modules/values.js"),d=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function c(e){return e?(0,r.default)(e)?i.slice.call(e):(0,o.default)(e)?e.match(d):(0,s.default)(e)?(0,a.default)(e,u.default):(0,l.default)(e):[]}},"./node_modules/underscore/modules/toPath.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/isArray.js");function o(e){return(0,i.default)(e)?e:[e]}r.default.toPath=o},"./node_modules/underscore/modules/underscore-array-methods.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/underscore.js"),i=n("./node_modules/underscore/modules/each.js"),o=n("./node_modules/underscore/modules/_setup.js"),s=n("./node_modules/underscore/modules/_chainResult.js");(0,i.default)(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=o.ArrayProto[e];r.default.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),(0,s.default)(this,n)}})),(0,i.default)(["concat","join","slice"],(function(e){var t=o.ArrayProto[e];r.default.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),(0,s.default)(this,e)}}));const a=r.default},"./node_modules/underscore/modules/underscore.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/_setup.js");function i(e){return e instanceof i?e:this instanceof i?void(this._wrapped=e):new i(e)}i.VERSION=r.VERSION,i.prototype.value=function(){return this._wrapped},i.prototype.valueOf=i.prototype.toJSON=i.prototype.value,i.prototype.toString=function(){return String(this._wrapped)}},"./node_modules/underscore/modules/unescape.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/_createEscaper.js"),i=n("./node_modules/underscore/modules/_unescapeMap.js");const o=(0,r.default)(i.default)},"./node_modules/underscore/modules/union.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/uniq.js"),o=n("./node_modules/underscore/modules/_flatten.js");const s=(0,r.default)((function(e){return(0,i.default)((0,o.default)(e,!0,!0))}))},"./node_modules/underscore/modules/uniq.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n("./node_modules/underscore/modules/isBoolean.js"),i=n("./node_modules/underscore/modules/_cb.js"),o=n("./node_modules/underscore/modules/_getLength.js"),s=n("./node_modules/underscore/modules/contains.js");function a(e,t,n,a){(0,r.default)(t)||(a=n,n=t,t=!1),null!=n&&(n=(0,i.default)(n,a));for(var u=[],l=[],d=0,c=(0,o.default)(e);d<c;d++){var f=e[d],h=n?n(f,d,e):f;t&&!n?(d&&l===h||u.push(f),l=h):n?(0,s.default)(l,h)||(l.push(h),u.push(f)):(0,s.default)(u,f)||u.push(f)}return u}},"./node_modules/underscore/modules/uniqueId.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=0;function i(e){var t=++r+"";return e?e+t:t}},"./node_modules/underscore/modules/unzip.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n("./node_modules/underscore/modules/max.js"),i=n("./node_modules/underscore/modules/_getLength.js"),o=n("./node_modules/underscore/modules/pluck.js");function s(e){for(var t=e&&(0,r.default)(e,i.default).length||0,n=Array(t),s=0;s<t;s++)n[s]=(0,o.default)(e,s);return n}},"./node_modules/underscore/modules/values.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/keys.js");function i(e){for(var t=(0,r.default)(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i}},"./node_modules/underscore/modules/where.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/filter.js"),i=n("./node_modules/underscore/modules/matcher.js");function o(e,t){return(0,r.default)(e,(0,i.default)(t))}},"./node_modules/underscore/modules/without.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/difference.js");const o=(0,r.default)((function(e,t){return(0,i.default)(e,t)}))},"./node_modules/underscore/modules/wrap.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n("./node_modules/underscore/modules/partial.js");function i(e,t){return(0,r.default)(t,e)}},"./node_modules/underscore/modules/zip.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/underscore/modules/restArguments.js"),i=n("./node_modules/underscore/modules/unzip.js");const o=(0,r.default)(i.default)},"./node_modules/web-dialog/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WebDialog:()=>r.WebDialog,getDialogCount:()=>i.getDialogCount,setDialogCount:()=>i.setDialogCount,traverseActiveElements:()=>i.traverseActiveElements,openDialog:()=>o.openDialog});n("./node_modules/@a11y/focus-trap/index.js");var r=n("./node_modules/web-dialog/web-dialog.js"),i=n("./node_modules/web-dialog/util.js"),o=n("./node_modules/web-dialog/open-dialog.js")},"./node_modules/web-dialog/open-dialog.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{openDialog:()=>i});n("./node_modules/@a11y/focus-trap/index.js");var r=n("./node_modules/web-dialog/web-dialog.js");n("./node_modules/web-dialog/util.js");function i({$content:e,$container:t=document.body,center:n=!1,initialize:i=(()=>new r.WebDialog)}={}){const o=i();null!=n&&(o.center=n),null!=e&&("function"==typeof e?e(o):o.appendChild(e));const s=new Promise((e=>{o.addEventListener("close",(t=>{o.remove(),e(t.detail)}),{once:!0})}));return t.appendChild(o),o.show(),{$dialog:o,resolver:s}}},"./node_modules/web-dialog/util.js":(e,t,n)=>{"use strict";function r(e){return Number(e.getAttribute("data-dialog-count"))||0}function i(e,t){e.setAttribute("data-dialog-count",t.toString())}function o(e=document.activeElement){return null!=e&&null!=e.shadowRoot&&null!=e.shadowRoot.activeElement?o(e.shadowRoot.activeElement):e}n.r(t),n.d(t,{getDialogCount:()=>r,setDialogCount:()=>i,traverseActiveElements:()=>o})},"./node_modules/web-dialog/web-dialog.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WebDialog:()=>o});n("./node_modules/@a11y/focus-trap/index.js");var r=n("./node_modules/web-dialog/util.js");const i=document.createElement("template");i.innerHTML='\n  <style>*{box-sizing:border-box}:host{padding:var(--dialog-container-padding,5vw 24px);z-index:var(--dialog-z-index,12345678);outline:none}#backdrop,:host{position:fixed;top:0;left:0;bottom:0;right:0}:host,:host([center]) #dialog{overflow-x:var(--dialog-overflow-x,hidden);overflow-y:var(--dialog-overflow-y,auto);overscroll-behavior:contain;-webkit-overflow-scrolling:touch}:host([center]){display:flex;align-items:center;justify-content:center;overflow:hidden}:host([center]) #dialog{max-height:var(--dialog-max-height,100%)}:host(:not(:defined)),:host(:not([open])){display:none}#backdrop{background:var(--dialog-backdrop-bg,rgba(0,0,0,.6));animation:fadeIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);z-index:-1}#dialog{animation:scaleIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);border-radius:var(--dialog-border-radius,12px);box-shadow:var(--dialog-box-shadow,0 2px 10px -5px rgba(0,0,0,.6));max-width:var(--dialog-max-width,700px);width:var(--dialog-width,100%);padding:var(--dialog-padding,24px);max-height:var(--dialog-max-height,unset);height:var(--dialog-height,auto);color:var(--dialog-color,currentColor);background:var(--dialog-bg,#fff);z-index:1;position:relative;display:flex;flex-direction:column;margin:0 auto;border:none}::slotted(article),article{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch}::slotted(footer),::slotted(header),footer,header{flex-shrink:0}@keyframes scaleIn{0%{transform:scale(.9) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}</style>\n  <div id="backdrop" part="backdrop"></div>\n  <focus-trap id="dialog" part="dialog">\n    <slot></slot>\n  </focus-trap>\n';class o extends HTMLElement{constructor(){super(),this.$scrollContainer=document.documentElement,this.$previousActiveElement=null;const e=this.attachShadow({mode:"open"});e.appendChild(i.content.cloneNode(!0)),this.$dialog=e.querySelector("#dialog"),this.$backdrop=e.querySelector("#backdrop"),this.onBackdropClick=this.onBackdropClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.setAttribute("aria-modal","true"),this.$dialog.setAttribute("role","alertdialog")}static get observedAttributes(){return["open","center"]}get open(){return this.hasAttribute("open")}set open(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get center(){return this.hasAttribute("center")}set center(e){e?this.setAttribute("center",""):this.removeAttribute("center")}connectedCallback(){this.$backdrop.addEventListener("click",this.onBackdropClick)}disconnectedCallback(){this.$backdrop.removeEventListener("click",this.onBackdropClick),this.open&&this.didClose()}show(){this.open=!0}close(e){this.result=e,this.open=!1}onBackdropClick(){this.assertClosing()&&this.close()}onKeyDown(e){if("Escape"===e.code)this.assertClosing()&&(this.close(),e.stopImmediatePropagation())}assertClosing(){return this.dispatchEvent(new CustomEvent("closing",{cancelable:!0}))}didOpen(){this.$previousActiveElement=(0,r.traverseActiveElements)(document.activeElement),requestAnimationFrame((()=>{this.$dialog.focusFirstElement()})),this.tabIndex=0,this.$scrollContainer.style.overflow="hidden",this.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0}),(0,r.setDialogCount)(this.$scrollContainer,(0,r.getDialogCount)(this.$scrollContainer)+1),this.dispatchEvent(new CustomEvent("open"))}didClose(){this.removeEventListener("keydown",this.onKeyDown,{capture:!0}),(0,r.setDialogCount)(this.$scrollContainer,Math.max(0,(0,r.getDialogCount)(this.$scrollContainer)-1)),(0,r.getDialogCount)(this.$scrollContainer)<=0&&(this.$scrollContainer.style.overflow=""),this.tabIndex=-1,null!=this.$previousActiveElement&&(this.$previousActiveElement.focus(),this.$previousActiveElement=null),this.dispatchEvent(new CustomEvent("close",{detail:this.result}))}attributeChangedCallback(e,t,n){if("open"===e)this.open?this.didOpen():this.didClose()}}customElements.define("web-dialog",o)},"./node_modules/webrtc-adapter/src/js/adapter_core.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=(0,n("./node_modules/webrtc-adapter/src/js/adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window})},"./node_modules/webrtc-adapter/src/js/adapter_factory.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{adapterFactory:()=>l});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),i=n("./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js"),o=n("./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js"),s=n("./node_modules/webrtc-adapter/src/js/safari/safari_shim.js"),a=n("./node_modules/webrtc-adapter/src/js/common_shim.js"),u=n("./node_modules/sdp/sdp.js");function l({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=r.log,l=r.detectBrowser(e),d={browserDetails:l,commonShim:a,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings,sdp:u};switch(l.browser){case"chrome":if(!i||!i.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),d;if(null===l.version)return n("Chrome shim can not determine version, not shimming."),d;n("adapter.js shimming chrome."),d.browserShim=i,a.shimAddIceCandidateNullOrEmpty(e,l),a.shimParameterlessSetLocalDescription(e,l),i.shimGetUserMedia(e,l),i.shimMediaStream(e,l),i.shimPeerConnection(e,l),i.shimOnTrack(e,l),i.shimAddTrackRemoveTrack(e,l),i.shimGetSendersWithDtmf(e,l),i.shimGetStats(e,l),i.shimSenderReceiverGetStats(e,l),i.fixNegotiationNeeded(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),d;n("adapter.js shimming firefox."),d.browserShim=o,a.shimAddIceCandidateNullOrEmpty(e,l),a.shimParameterlessSetLocalDescription(e,l),o.shimGetUserMedia(e,l),o.shimPeerConnection(e,l),o.shimOnTrack(e,l),o.shimRemoveStream(e,l),o.shimSenderGetStats(e,l),o.shimReceiverGetStats(e,l),o.shimRTCDataChannel(e,l),o.shimAddTransceiver(e,l),o.shimGetParameters(e,l),o.shimCreateOffer(e,l),o.shimCreateAnswer(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),d;n("adapter.js shimming safari."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(e,l),a.shimParameterlessSetLocalDescription(e,l),s.shimRTCIceServerUrls(e,l),s.shimCreateOfferLegacy(e,l),s.shimCallbacksAPI(e,l),s.shimLocalStreamsAPI(e,l),s.shimRemoteStreamsAPI(e,l),s.shimTrackEventTransceiver(e,l),s.shimGetUserMedia(e,l),s.shimAudioContext(e,l),a.shimRTCIceCandidate(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;default:n("Unsupported browser!")}return d}},"./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>i.shimGetUserMedia,shimGetDisplayMedia:()=>o.shimGetDisplayMedia,shimMediaStream:()=>s,shimOnTrack:()=>a,shimGetSendersWithDtmf:()=>u,shimGetStats:()=>l,shimSenderReceiverGetStats:()=>d,shimAddTrackRemoveTrackWithNative:()=>c,shimAddTrackRemoveTrack:()=>f,shimPeerConnection:()=>h,fixNegotiationNeeded:()=>p});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),i=n("./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js"),o=n("./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js");function s(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function a(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else r.wrapPeerConnectionEvent(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function u(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function l(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function d(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>r.filterStats(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),r.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>r.filterStats(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function c(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function f(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return c(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=u.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function h(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function p(e,t){r.wrapPeerConnectionEvent(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},"./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>i});const r=n("./node_modules/webrtc-adapter/src/js/utils.js").log;function i(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const a=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=s.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=i(e.video),r("chrome: "+JSON.stringify(e)),o(e)}))}e.video=i(e.video)}return r("chrome: "+JSON.stringify(e)),o(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){o(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return o(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}},"./node_modules/webrtc-adapter/src/js/common_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimRTCIceCandidate:()=>s,shimMaxMessageSize:()=>a,shimSendThrowTypeError:()=>u,shimConnectionState:()=>l,removeExtmapAllowMixed:()=>d,shimAddIceCandidateNullOrEmpty:()=>c,shimParameterlessSetLocalDescription:()=>f});var r=n("./node_modules/sdp/sdp.js"),i=n.n(r),o=n("./node_modules/webrtc-adapter/src/js/utils.js");function s(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=i().parseCandidate(e.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function a(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=i().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=i().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const o=i().matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=o(e),n=s(arguments[0],e);let i;i=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>i}),this._sctp=a}return a.apply(this,arguments)}}function u(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},o.wrapPeerConnectionEvent(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function l(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function d(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function c(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function f(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);const t="offer"===e.type?this.createOffer:this.createAnswer;return t.apply(this).then((e=>n.apply(this,[e])))})}},"./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>i.shimGetUserMedia,shimGetDisplayMedia:()=>o.shimGetDisplayMedia,shimOnTrack:()=>s,shimPeerConnection:()=>a,shimSenderGetStats:()=>u,shimReceiverGetStats:()=>l,shimRemoveStream:()=>d,shimRTCDataChannel:()=>c,shimAddTransceiver:()=>f,shimGetParameters:()=>h,shimCreateOffer:()=>p,shimCreateAnswer:()=>m});var r=n("./node_modules/webrtc-adapter/src/js/utils.js"),i=n("./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js"),o=n("./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js");function s(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function a(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function u(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function l(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),r.wrapPeerConnectionEvent(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function d(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){r.deprecated("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function c(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function f(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function h(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function p(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function m(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}},"./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":(e,t,n)=>{"use strict";function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}n.r(t),n.d(t,{shimGetDisplayMedia:()=>r})},"./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimGetUserMedia:()=>i});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function i(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}},"./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{shimLocalStreamsAPI:()=>i,shimRemoteStreamsAPI:()=>o,shimCallbacksAPI:()=>s,shimGetUserMedia:()=>a,shimConstraints:()=>u,shimRTCIceServerUrls:()=>l,shimTrackEventTransceiver:()=>d,shimCreateOfferLegacy:()=>c,shimAudioContext:()=>f});var r=n("./node_modules/webrtc-adapter/src/js/utils.js");function i(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function o(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function s(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function a(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(u(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function u(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function l(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function d(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function c(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function f(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},"./node_modules/webrtc-adapter/src/js/utils.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{extractVersion:()=>o,wrapPeerConnectionEvent:()=>s,disableLog:()=>a,disableWarnings:()=>u,log:()=>l,deprecated:()=>d,detectBrowser:()=>c,compactObject:()=>h,walkStats:()=>p,filterStats:()=>m});let r=!0,i=!0;function o(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function s(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function a(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function u(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function d(e,t){i&&console.warn(e+" is deprecated, please use "+t+" instead.")}function c(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=o(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=o(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=o(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function h(e){return f(e)?Object.keys(e).reduce((function(t,n){const r=f(e[n]),i=r?h(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function p(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?p(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{p(e,e.get(t),n)}))})))}function m(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&p(e,n,i)}))})),i}},"./src/orkestra/agentcontext.js":(t,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>s});var o=r("./src/orkestra/utils/index.js");const s=function(){var t={},n=o.Logger.getLogger("AgentContext"),r={},s=[],a={},u=[],l=function(){for(var e=0;e<u.length;e++)try{u[e].call(t)}catch(e){n.error("Error in meta-update",e)}},d=function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]={currentValue:e[n].val||"undefined",callbacks:[],on:e[n].on,off:e[n].off},e[n].init?e[n].init.call(t):f.call(t,"keychange",n));return l(),t},c=function(){var e=[];for(let t in r)e.push(t);return e},f=function(e,i,o){if("keychange"!==e){if(!r.hasOwnProperty(e))throw"Unsupported event "+e;var a;for(u=0;u<r[e].callbacks.length;u++){if(a=r[e].callbacks[u],void 0===o){if(a._immediate_pending)continue}else{if(a!==o)continue;o._immediate_pending=!1}try{a.call(t,i)}catch(i){n.error("Error in "+e+": "+a+": "+i)}}}else for(var u=0;u<s.length;u++)try{s[u].call(t,i)}catch(e){n.error("Error in keychange handler:"+i)}};return t.loadContextElements=d,t.load=d,t.keys=c,t.on=function(e,i,o){if("keychange"===e)return s.push(i),void i.call(c());if("agentchange"!==e){if(!i||"function"!=typeof i)throw"Illegal handler";if(r.hasOwnProperty(e))return-1===r[e].callbacks.indexOf(i)&&(0==r[e].callbacks&&!0===t.requestHandler.call(t,e,o||"self")&&r[e].on&&(n.info("Turning "+e+" on"),r[e].on.call(t)),r[e].callbacks.push(i),i._immediate_pending=!0,f(e,{key:e,value:r[e].currentValue},i)),t;console.warn("Unsupported event "+e)}else{n.info("*** Registered agentchange"),u.push(i);try{i.call(t)}catch(e){console.log("Error in agentchange handler",e)}}},t.off=function(i,o){if("keychange"!==i){if("agentchange"!==i){if(!r.hasOwnProperty(i))throw"Unknown parameter "+i;if(void 0!==r[i].callbacks){var a=r[i].callbacks.indexOf(o);a>-1&&r[i].callbacks.splice(a,1),0===r[i].callbacks.length&&r[i].off&&(n.debug("Turning "+i+" off"),r[i].off.call(t))}return t}if(-1==u.indexOf(o))throw"Callback not registered";u.splice(agent_update_handlers.indexOf(o),1)}else s.splice(s.indexOf(o),e)},t.setCapability=function(e,n){a[e]=n,l(),f.call(t,"keychange",e)},t.getCapability=function(e){return a[e]},t.capabilities=function(){return a},t.setItem=function(e,n){return r.hasOwnProperty(e)||(i=[],i[e]={val:n},d(i)),r[e].currentValue=n,f(e,{key:e,value:n}),t},t.getItem=function(e){if(!r.hasOwnProperty(e))throw"Unknown item "+e;return r[e].currentValue},t.requestHandler=function(e,t){return n.info("Allowing "+e+" by "+t),!0},t}},"./src/orkestra/applicationcontext.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ApplicationContext:()=>u});var r=n("./src/orkestra/agentcontext.js"),i=n("./src/orkestra/sharedstate.es6.js"),o=n("./node_modules/rxjs/dist/esm5/internal/Subject.js"),s=n("./node_modules/rxjs/dist/esm5/internal/Observable.js"),a=n("./src/orkestra/utils/index.js"),u=function(e,t){var n=new o.Subject,u=new s.Observable((e=>{n=e})),l=a.Logger.getLogger("ApplicationContext");function d(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=d(e[n]));return t}if(!r.default)throw"Missing flexcontrol agentContext, please load the correct js files";var c=(0,r.default)();t=t||{};var f={},h={};if(void 0===i.default)throw"Missing flexcontrol shared state, please include the correct js files";var p=function(e){var t={},n={agentchange:[]};t.agentid=e;var r=[];A.on("change",(e=>{if(0==e.key.indexOf("__val__"+t.agentid)&&n[e.key]&&n[e.key].length>0)for(var r=0;r<n[e.key].length;r++)try{n[e.key][r].call(t.publicAPI,e)}catch(e){l.error("Error in callback: "+what)}}));var i=function(){var e=A.getItem("__meta__"+t.agentid);return e?("string"==typeof e&&(e=JSON.parse(e)),e.keys):[]};t.update_value=function(e,r,i){if(void 0!==n[r])for(var o=0;o<n[r].length;o++)try{n[r][o].call(t.publicAPI,r,i)}catch(e){l.error("Error in update: ",e)}},t.handlers=n,t.update_meta=function(e){var i={added:{},altered:{},removed:[]};for(var o in r)void 0===e.capabilities[o]&&i.removed.push(o);for(var o in e.capabilities)void 0===r[o]?i.added[o]=e.capabilities[o]:r[o]!=e.capabilities[o]&&(i.altered[o]=e.capabilities[o]);r=e.capabilities;for(var s=0;s<n.agentchange.length;s++)try{n.agentchange[s].call(t.publicAPI,{diff:i})}catch(e){l.error("Error in meta-update",e)}};let o={};return o.agentid=t.agentid,o.keys=i,o.on=function(e,r){if("agentchange"!=e){if(-1==i().indexOf(e))throw"Unknown parameter "+e;var o=A.getItem("__metasub__"+A.agentid)||[],s=t.agentid+"_"+e;-1==o.indexOf(s)&&(o.push(s),A.setItem("__metasub__"+A.agentid,o)),void 0===n[e]&&(n[e]=[]),n[e].push(r);var a=A.getItem("__val__"+s);a&&r.call(t.publicAPI,e,a)}else n.agentchange.push(r)},o.off=function(e,r){if("agentchange"!=e){if(-1==i().indexOf(e))throw"Unknown parameter "+e;var o=d(A.getItem("__metasub__"+A.agentid)),s=t.agentid+"_"+e;if(!(o.indexOf(s)>-1))throw"Not subscribed to "+e;o.splice(o.indexOf(s),1),A.setItem("__metasub__"+A.agentid,o),n[e]?n[e].splice(n[e].indexOf(s),1):l.warn("*** Warning: Missing handler for "+e)}else n[e].splice(n[e].indexOf(r),1)},o.setItem=function(e,n){A.setItem("__val__"+t.agentid+"_"+e,n)},o.getItem=function(e){return A.getItem("__val__"+t.agentid+"_"+e)},o.capabilities=function(){var e=A.getItem("__meta__"+t.agentid);return e?e.capabilities:[]},t.publicAPI=o,t},m=[],g={},v={},y={},_={},E=function(e,t){if(null==R(e))return l.warn("Subscription update for unknown node",e),void setTimeout((()=>{if(void 0!==R(e)){if(E(e,t),!(t=t||A.getItem("__metasub__"+e)))return;R(e).handlers;for(var n=g[e]||[],r=0;r<t.length;r++){var i=t[r].substr(0,t[r].indexOf("_")),o=t[r].substr(t[r].indexOf("_")+1);if(i===A.agentid){if(n.indexOf(o)>-1)continue;void 0===m[o]&&(m[o]=[]),m[o].push(e),v[o]&&0!=v[o].length||(v[o]=function(e){A.setItem("__val__"+A.agentid+"_"+e.key,e.value)}),c.on(o,v[o])}}for(r=0;r<n.length;r++)if(-1==m.indexOf(n[r])){i=n[r].substr(0,n[r].indexOf("_")),o=n[r].substr(n[r].indexOf("_")+1);if(i!=A.agentid)continue;null!=m[o]?(m[o].splice(m[o].indexOf(n[r]),1),m[o].length):l.warn(" *** Warning, unsub but don't have handler")}g[e]=t}}),0);if(t=t||A.getItem("__metasub__"+e)){R(e).handlers;for(var n=g[e]||[],r=0;r<t.length;r++){var i=t[r].substr(0,t[r].indexOf("_")),o=t[r].substr(t[r].indexOf("_")+1);if(i===A.agentid){if(n.indexOf(o)>-1)continue;void 0===m[o]&&(m[o]=[]),m[o].push(e),v[o]&&0!=v[o].length||(v[o]=function(e){A.setItem("__val__"+A.agentid+"_"+e.key,e.value)}),c.on(o,v[o])}}for(r=0;r<n.length;r++)if(-1==m.indexOf(n[r])){i=n[r].substr(0,n[r].indexOf("_")),o=n[r].substr(n[r].indexOf("_")+1);if(i!=A.agentid)continue;null!=m[o]?(m[o].splice(m[o].indexOf(n[r]),1),m[o].length):l.warn(" *** Warning, unsub but don't have handler")}g[e]=t}},b=[],T=[],S=function(e,t){if("agentchange"==e){if(t.agentContext?null==y[t.agentid]&&(y[t.agentid]={capabilities:{},keys:[]}):(delete y[t.agentid],l.info(y)),t.diff={capabilities:{},keys:[]},t.agentContext){var n=t.agentContext.capabilities();for(var r in n)n.hasOwnProperty(r)&&(y[t.agentid].capabilities||(y[t.agentid].capabilities={}),y[t.agentid].capabilities[r]!=n[r]&&(t.diff.capabilities[r]=n[r]));for(var i=t.agentContext.keys(),o=0;o<i.length;o++)-1==y[t.agentid].keys.indexOf(i[o])&&t.diff.keys.push(i[o]);y[t.agentid]={capabilities:n,keys:i}}for(o=0;o<b.length;o++)try{b[o].call(f,t)}catch(e){l.error("Error in agentchange callback: ",e),l.error("cb:",b[o])}}else{o=0;for(var s=T[e].length;o<s;o++)try{T[e][o].call(f,t)}catch(t){l.error("Error in agentchange callback: ",t),l.error("cb:",T[e][o])}}};t.autoPresence=!0;var w=!1,A=(0,i.default)(e,t).on("readystatechange",(function(e){if(e===A.STATE.OPEN){n.next("ready"),w=!0;let e={keys:c.keys(),capabilities:c.capabilities()};A.setItem("__meta__"+A.agentid,e),A.setItem("__metasub__"+A.agentid,[]),A.setPresence("online"),c.on("keychange",(function(e){var t={keys:c.keys(),capabilities:c.capabilities()};A.setItem("__meta__"+A.agentid,t)})),A.on("presence",(function(e){var t=e.key;e.value;if("offline"==e.value)h.hasOwnProperty(t)&&(h[t]=null,delete h[t],S("agentchange",{agentid:t,agentContext:null}));else if("online"==e.value){h[t]||(h[t]=p(t));var n={added:{},altered:{},removed:[]},r=h[t].publicAPI.capabilities();if(null!=_[t])for(var i in _[t])l.debug(i),void 0===r[i]&&n.removed.push(i);else _[t]=[];for(var i in r)void 0===_[t][i]?n.added[i]=r[i]:_[t][i]!=r[i]&&(n.altered[i]=r[i]);_[t]=r;let e=setInterval((()=>{null!=R(t)&&(clearInterval(e),E(t),S("agentchange",{agentid:t,agentContext:h[t].publicAPI,diff:n}))}),15)}}))}})).on("change",(function(e){if(e.key.indexOf("__meta__")>-1){var n=e.key.substr(8),r=h[n];r?(r.update_meta(e.value),S("agentchange",{agentid:n,agentContext:h[n].publicAPI})):1==t.autoremove&&(A.removeItem("__meta__"+n),A.removeItem("__metasub__"+n))}else if(e.key.indexOf("__metasub__")>-1){let t=e.key.substr(11),n=setInterval((()=>{null!=R(t)&&(clearInterval(n),E(t,e.value))}),15)}else if(e.key.indexOf("__val__")>-1){var i=e.key.substr(7).split("_");i.splice(i.length-1),function(e,t,n){var r=R(e);r&&r.update_value(e,t,n)}(i.join("_"),(i=e.key.substr(7).split("_")).splice(i.length-1)[0],e.value)}else if(e.key.indexOf("__global__")>-1){l.debug("globalVar",e.key,e.value);var o=e.key.substr(10);if(T[o])S(o,{key:o,value:e.value});else{const[t]=T.default;t.call(f,{key:o,value:e.value})}}else l.warb("Unknown Change:"+JSON.stringify(e))})),R=function(e){return h[e]};return f.getAgents=function(){null==h[A.agentid]&&(h[A.agentid]=p(A.agentid));var e={self:h[A.agentid].publicAPI};for(var t in h)t!=A.agentid&&h[A.agentid]&&(e[t]=h[t].publicAPI);return e},f.on=function(e,t){"agentchange"==e?b.push(t):(T[e]||(T[e]=[]),T[e].push(t))},f.off=function(e,t){if("agentchange"==e){if(-1==b.indexOf(t))throw"Handler not registered";b.splice(b.indexOf(t),1)}else{if(-1==T[e].indexOf(t))throw"Handler not registered";T[e].splice(T[e].indexOf(t),1)}},f.me=c,f.ready=function(){return w},f.setItem=function(e,t){void 0!==e&&void 0!==t&&A.setItem("__global__"+e,t)},f.getItem=function(e){return A.getItem("__global__"+e)},f.keys=function(){for(var e=A.keys(),t=[],n=0,r=e.length;n<r;n++)e[n].indexOf("__global__")>-1&&t.push(e[n].substr(10));return t},f.onready=u,f.addAgent=function(e){if(null!=h[e.agentid])throw new Error("Already have agent '"+e.agentid+"'");h[e.agentid]=e,S("agentchange",{agentid:e.agentid,agentContext:e,diff:{added:e.capabilities()}})},f.removeAgent=function(e){if(h[e.agentid]!=e)throw new Error("Failed to remove agent '"+e.agentid+"'");delete h[e.agentid],S("agentchange",{agentid:e.agentid,agentContext:null})},f}},"./src/orkestra/instruments/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DeviceProfile:()=>r.DeviceProfile,TextData:()=>r.TextData,MasterSlaveProfile:()=>r.MasterSlaveProfile,KeyPress:()=>r.KeyPress,UserProfile:()=>r.UserProfile,UserData:()=>r.UserData,ComponentsStatus:()=>r.ComponentsStatus,Message:()=>r.Message});var r=n("./src/orkestra/instruments/instruments.js")},"./src/orkestra/instruments/instruments.js":(e,t,n)=>{"use strict";function r(e){return{deviceProfile:{init:function(){this.setCapability("deviceProfile","supported")},on:function(){e?e+="checkDevice?agent="+navigator.userAgent:e="https://"+window.location.host+"/checkDevice?agent="+navigator.userAgent,fetch(e).then((e=>{e.json().then((e=>{this.setItem("deviceProfile",e.deviceType)}))}))},off:function(){}}}}function i(e){return{textShare:{init:function(){this.setCapability("textShare","supported")},on:function(){e.addEventListener("change",(t=>{this.setItem("textShare",e.value)}))},off:function(){e.removeEventListener("change",(t=>{this.setItem("textShare",e.value)}))}}}}function o(e){return{masterSlave:{init:function(){this.setCapability("masterSlave","supported")},on:function(){this.setItem("masterSlave",void 0===e.master||!0===e.master)},off:function(){}}}}function s(e){return{userProfile:{init:function(){this.setCapability("userProfile","supported")},on:function(){this.setItem("userProfile",e.options.profile||"")},off:function(){}}}}function a(e){return{userData:{init:function(){this.setCapability("userData","supported")},on:function(){setTimeout((()=>{let e="undefined"!=this.getItem("userData")?this.getItem("userData"):{};this.setItem("userData",e)}),0)},off:function(){}}}}function u(){return{keyPress:{init:function(){this.setCapability("keyPress","supported")},on:function(){document.addEventListener("keypress",(e=>{this.setItem("keyPress",e.key)}))},off:function(){document.removeEventListener("keypress",(e=>{this.setItem("keyPress",e.key)}))}}}}function l(e){return{componentsStatus:{init:function(){this.setCapability("componentsStatus","supported")},on:function(){0===this.getItem("componentsStatus").length&&this.setItem("componentsStatus",[])},off:function(){}}}}function d(e){return{message:{init:function(){this.setCapability("message","supported"),this.setItem("message",e||"undefined")},on:function(){this.setItem("message",e||"undefined")},off:function(){}}}}n.r(t),n.d(t,{DeviceProfile:()=>r,TextData:()=>i,MasterSlaveProfile:()=>o,UserProfile:()=>s,UserData:()=>a,KeyPress:()=>u,ComponentsStatus:()=>l,Message:()=>d})},"./src/orkestra/mappingservice.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{MappingService:()=>o});var r=n("./node_modules/socket.io-client/build/esm/index.js"),i=n("./src/orkestra/utils/index.js"),o=function(e,t){var n=i.Logger.getLogger("MappingService"),o=null,s={},a=Object.freeze({CONNECTING:"connecting",OPEN:"open",CLOSED:"closed"});if("object"==typeof e){t=e;e={}}var u={readystatechange:[]};if(!t)t={};t.maxTimeout||(t.maxTimeout=2e3),t.forceNew=!0,t.multiplex=!1,t.transport=["websocket","polling"];var l,d=e||{},c=[],f=[],h=function(){g.set("open")},p=function(t){var n=e;if("object"==typeof e||!e)n=window.location.protocol+"//"+window.location.host+"/";if(t.group){r={group:n+t.group};if(f.length>0){f.pop()(r)}}else{var r={};t.user&&(r.user=n+t.user),t.app&&(r.app=n+t.app),t.userApp&&(r.userApp=n+t.userApp),c.length>0&&(promise=c.pop(),promise(r))}},m=function(e,t,n){if(!u.hasOwnProperty(e))throw"Unsupported event "+e;var r;for(let i=0;i<u[e].length;i++){if(r=u[e][i],void 0===n){if(r._immediate_pending)continue}else{if(r!==n)continue;n._immediate_pending=!1}try{r.call(s,t)}catch(t){_error("Error in "+e+": "+r+": "+t)}}},g=(l=a.CONNECTING,{set:function(e){let t=!1;for(let n in a)a.hasOwnProperty(n)&&a[n]===e&&(t=!0);if(!t)throw"Illegal state value "+e;l!==a.CLOSED&&e!==l&&(l=e,m("readystatechange",e))},get:function(){return l}});return s.__defineGetter__("readyState",g.get),s.__defineGetter__("STATE",(function(){return a})),s.getUserMapping=function(e,n){if(!e||!Array.isArray(n))throw"appId or scopeList undefined";for(var r={appId:e},i=0,s=n.length;i<s;i++)"user"===n[i]&&(r.user=!0),"app"===n[i]&&(r.app=!0),"userApp"===n[i]&&(r.userApp=!0);return t.userId&&(r.userId=t.userId),o.emit("getMapping",r),new Promise((function(e,n){c.push((function(t){e(t)})),setTimeout((function(){n({error:"timeout-mappinservice"})}),t.maxTimeout)}))},s.getGroupMapping=function(e){if(!e)throw"groupId undefined";var r={groupId:e};return o.emit("getMapping",r),new Promise((function(e,r){f.push((function(t){e(t)})),n.info("set timeout",t.maxTimeout),setTimeout((function(){r({error:"timeout-mappinservice2"})}),t.maxTimeout)}))},s.on=function(e,t){if(!t||"function"!=typeof t)throw"Illegal handler";if(!u.hasOwnProperty(e))throw"Unsupported event "+e;return-1===u[e].indexOf(t)&&(u[e].push(t),t._immediate_pending=!0,setTimeout((function(){if("readystatechange"===e)m("readystatechange",g.get(),t)}),0)),s},s.off=function(e,t){if(void 0!==u[e]){var n=u[e].indexOf(t);n>-1&&u[e].splice(n,1)}return s},(o=(0,r.default)(d,t)).on("connect",h),g.set("connecting"),o.on("mapping",p),!0===o.connected&&h(),s}},"./src/orkestra/motion/motion.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Motion:()=>l,ObjectSync:()=>s.ObjectSync});var r=n("./src/orkestra/motion/src/TimingObject.js"),i=n("./src/orkestra/motion/src/SocketTimingProvider.js"),o=n("./src/orkestra/motion/src/TimingMediaController.js"),s=(n("./src/orkestra/motion/src/StateVector.js"),n("./src/orkestra/motion/src/ObjectSync.js")),a=n("./src/orkestra/motion/src/utils.js"),u=n("./src/orkestra/motion/src/event-target.js"),l=function(e,t){var n=void 0,l=void 0,d={addObject:function(e,t){return n.addMediaElement(e,t),n.addEventListener("readystatechange",(function(e){"open"===e.value&&d.dispatchEvent({type:"motionReady",value:e.target.currentTime})})),n},removeObject:function(e){n.removeMediaElement(e)},getController:function(){return n},start:function(){let s=a.Utils.getHostName(e);var u=new i.SocketTimingProvider("wss://"+s+":8080/"+(t||"test"));(l=new r.TimingObject).srcObject=u,n=new o.TimingMediaController(l)},ready:!1,timing:function(){return l},live:!1,ObjectSync:s.ObjectSync,initTime:0};return d.removeEventListener=(0,u.EventTarget)().removeEventListener,d.addEventListener=(0,u.EventTarget)().addEventListener,d.dispatchEvent=(0,u.EventTarget)().dispatchEvent,d}},"./src/orkestra/motion/src/AbstractSyncClock.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractSyncClock:()=>i});var r=n("./src/orkestra/motion/src/event-target.js"),i=function(e,t){var n=this,r=e||0,i=t||0,o="connecting";Object.defineProperties(this,{readyState:{get:function(){return o},set:function(e){e!==o&&(o=e,setTimeout((function(){n.dispatchEvent({type:"readystatechange",value:e})}),0))}},delta:{get:function(){return i},set:function(e){i===(i=e)||n.dispatchEvent({type:"change"})}},skew:{get:function(){return r},set:function(e){var t=r;r=e,"open"!==o||t===r||n.dispatchEvent({type:"change"})}}})};i.prototype.addEventListener=(0,r.EventTarget)().addEventListener,i.prototype.removeEventListener=(0,r.EventTarget)().removeEventListener,i.prototype.dispatchEvent=(0,r.EventTarget)().dispatchEvent,i.prototype.getTime=function(e){return e+this.skew-this.delta},i.prototype.now=function(){return this.getTime(Date.now())},i.prototype.close=function(){"closing"!==this.readyState&&"closed"!==this.readyState&&(this.readyState="closing",this.readyState="closed")}},"./src/orkestra/motion/src/AbstractTimingProvider.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractTimingProvider:()=>s});var r=n("./src/orkestra/motion/src/event-target.js"),i=n("./src/orkestra/motion/src/StateVector.js"),o=n("./src/orkestra/motion/src/Interval.js"),s=function(e,t){this.range=new o.Interval(t);var n=new i.StateVector(e),r="connecting",s=this;Object.defineProperties(this,{readyState:{get:function(){return r},set:function(e){e!==r&&(r=e,setTimeout((function(){s.dispatchEvent({type:"readystatechange",value:e})}),0))}},vector:{get:function(){return n},set:function(e){var t=n;n=e,0===t.compareTo(n)||s.dispatchEvent({type:"change",value:n})}}})};s.prototype.addEventListener=(0,r.EventTarget)().addEventListener,s.prototype.removeEventListener=(0,r.EventTarget)().removeEventListener,s.prototype.dispatchEvent=(0,r.EventTarget)().dispatchEvent,s.prototype.query=function(){var e=Date.now()/1e3;return new i.StateVector({position:this.vector.computePosition(e),velocity:this.vector.computeVelocity(e),acceleration:this.vector.computeAcceleration(e),timestamp:e})},s.prototype.update=function(e){return e=new i.StateVector(e||{}),new Promise((function(e,t){t(new Error('Abstract "update" method called'))}))},s.prototype.close=function(){"closing"!==this.readyState&&"closed"!==this.readyState&&(this.readyState="closing",this.readyState="closed")}},"./src/orkestra/motion/src/Interval.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Interval:()=>i});var r=n("./src/orkestra/motion/src/utils.js"),i=function(e){e=e||{},this.low=e.low,this.lowInclude=e.lowInclude,this.high=e.high,this.highInclude=e.highInclude,r.Utils.isNumber(this.low)&&r.Utils.isNumber(this.high)&&this.low>this.high&&(e.low=this.high,e.lowInclude=this.highInclude,this.high=this.low,this.highInclude=this.lowInclude,this.low=e.low,this.lowInclude=e.lowInclude)};i.prototype.covers=function(e){return(!this.low||this.low<e||this.low===e&&this.lowInclude)&&(!this.high||this.high>e||this.high===e&&this.highInclude)},i.prototype.isSingular=function(){return this.low===this.high}},"./src/orkestra/motion/src/LocalTimingProvider.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{LocalTimingProvider:()=>s});var r=n("./src/orkestra/motion/src/AbstractTimingProvider.js"),i=n("./src/orkestra/motion/src/StateVector.js"),o=n("./src/orkestra/motion/src/utils.js"),s=function(e,t){r.AbstractTimingProvider.call(this,e,t),this.readyState="open"};s.prototype=new r.AbstractTimingProvider,s.prototype.update=function(e){e=e||{};var t=Date.now()/1e3,n={position:o.Utils.isNull(e.position)?this.vector.computePosition(t):e.position,velocity:o.Utils.isNull(e.velocity)?this.vector.computeVelocity(t):e.velocity,acceleration:o.Utils.isNull(e.acceleration)?this.vector.computeAcceleration(t):e.acceleration,timestamp:t};return this.vector=new i.StateVector(n),new Promise((function(e,t){e(n)}))}},"./src/orkestra/motion/src/ObjectSync.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ObjectSync:()=>r});class r{constructor(){this.currentTime=0,this.playbackRate=1,this.paused=!0,this.offset=0}pause(){console.log("TODO")}play(){console.log("TODO")}seekTo(e){console.log("TODO")}setPlaybackRate(e){this.playbackRate=e}incPlayBacRate(){this.playbackRate+=.3}decPlayBacRate(){this.playbackRate-=.3}}},"./src/orkestra/motion/src/SocketSyncClock.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{SocketSyncClock:()=>o});var r=n("./src/orkestra/motion/src/AbstractSyncClock.js"),i=n("./src/orkestra/motion/src/utils.js"),o=function(e,t){r.AbstractSyncClock.call(this);var n=this;this.socket=t;var o=1e3,s=1e3,a=0,u=[],l=null,d=null,c=null;1===t.readyState?E():3===t.readyState&&(this.readyState="closed");var f=function(e){return!0},h=function(){return E(),!0},p=function(){return n.close(),!0},m=function(e){var t=null,r=Date.now(),d=0;if("string"!=typeof e.data)return!0;try{t=JSON.parse(e.data)||{}}catch(e){return!0}if("sync"!==t.type)return!0;if(!(t.client&&t.server&&i.Utils.isNumber(t.client.sent)&&i.Utils.isNumber(t.server.received)&&i.Utils.isNumber(t.server.sent)))return!0;if(t.id!==l)return!0;a+=1;var f=r-t.client.sent;return!("connecting"!==n.readyState&&f>s)&&(!!c&&(clearTimeout(c),c=null,"connecting"===n.readyState?(u.push({received:r,roundtrip:f,msg:t}),a>=10?(S(),T()):b(),!1):(f<o&&((s=Math.ceil(s*(f/o)))<5&&(s=5),o=f),d=(t.server.sent+t.server.received-(t.client.sent+r))/2,d=Math.abs(d-n.skew)<1?n.skew:Math.round(d),n.skew=d,T(),!1)))},g=this.socket.onerror,v=this.socket.onopen,y=this.socket.onclose,_=this.socket.onmessage;this.socket.addEventListener?(this.socket.addEventListener("error",f),this.socket.addEventListener("open",h),this.socket.addEventListener("close",p),this.socket.addEventListener("message",m)):(this.socket.onerror=function(e){g&&g(e)},this.socket.onopen=function(e){h()&&v&&v(e)},this.socket.onclose=function(e){p()&&y&&y(e)},this.socket.onmessage=function(e){m(e)&&_&&_(e)});var E=function(){l=e+"#"+Date.now(),n.socket.send(i.Utils.stringify({type:"sync",id:l,client:{sent:Date.now()}})),d=null,c=setTimeout((function(){c=null,(a+=1)>=10?("connecting"===n.readyState?S():s=Math.ceil(1.2*s),T()):b()}),s)},b=function(){var e="connecting"===n.readyState?10:500;c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),d=setTimeout(E,e)},T=function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),a=0,d=setTimeout(E,1e4)},S=function(){var e=null,t=null,r=0,a=0;u.sort((function(e,t){return e.roundtrip-t.roundtrip})),u.length>0&&(e=u[0].msg,r=u[0].received,o=u[0].roundtrip,i.Utils.isNumber(e.delta)&&(n.delta=e.delta),t=(e.server.sent+e.server.received-(e.client.sent+r))/2,t=Math.abs(t-n.skew)<1?n.skew:Math.round(t),n.skew=t),(a=Math.ceil(5)-1)>=u.length&&(a=u.length-1),a>=0&&(s=u[a].roundtrip),s<1.3*o&&(s=Math.ceil(1.3*o)),s<5&&(s=5),n.readyState="open",u=[]};this.stopSync=function(){d&&(clearTimeout(d),d=null),c&&(clearTimeout(c),c=null)}};o.prototype=new r.AbstractSyncClock,o.prototype.close=function(){"closing"!==this.readyState&&"closed"!==this.readyState&&(this.readyState="closing",this.stopSync(),this.socket=null,this.readyState="closed")}},"./src/orkestra/motion/src/SocketTimingProvider.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{SocketTimingProvider:()=>u});var r=n("./src/orkestra/motion/src/AbstractTimingProvider.js"),i=n("./src/orkestra/motion/src/StateVector.js"),o=n("./src/orkestra/motion/src/SocketSyncClock.js"),s=n("./src/orkestra/motion/src/utils.js"),a=null;a=window.WebSocket;var u=function(e,t,n){var u=this;this.url=e;var l=null;Object.defineProperty(this,"serverVector",{get:function(){return l},set:function(e){var t=Date.now();l=e,u.vector=new i.StateVector({position:e.position,velocity:e.velocity,acceleration:e.acceleration,timestamp:e.timestamp+(t-u.clock.getTime(t))/1e3})}});var d=[],c=null,f=function(){if(h(),0!==d.length){var e=Date.now(),t=1e3*d[0].timestamp+e-u.clock.getTime(e),n=function(){for(var e=Date.now(),t=d.shift();d.length>0&&!(1e3*d[0].timestamp+e-u.clock.getTime(e)>e);)t=d.shift();u.serverVector=t,f()};t>e?c=setTimeout(n,t-e):n()}},h=function(){c&&(clearTimeout(c),c=null)},p=function(e){"connecting"===u.readyState&&("open"===u.clock.readyState?(u.clock.delta&&(e.vector.timestamp-=u.clock.delta/1e3),u.serverVector=new i.StateVector(e.vector),u.readyState="open"):u.clock.addEventListener("readystatechange",(function(){"open"===u.clock.readyState&&p(e)})))};r.AbstractTimingProvider.call(this),t?(this.socket=t,this.socketProvided=!0):(this.socket=new a(e,"echo-protocol"),this.socketProvided=!1),this.socket.onerror=function(e){console.log("error",e)},this.socket.onopen=function(){console.warn("socket open"),u.socket.send(s.Utils.stringify({type:"info",id:e}))},this.socket.onclose=function(){console.warn("socket closed"),u.close()},window.onbeforeunload=function(){u.onclose=function(){},u.close()},this.socket.onmessage=function(t){var n=null,r=null,o=Date.now();if("string"==typeof t.data){try{n=JSON.parse(t.data)||{}}catch(e){return}if(n.id!==e)return;switch(n.type){case"info":p(n);break;case"change":if("open"!==u.readyState)return;if(n.vector.timestamp<u.serverVector.timestamp)return;1e3*(r=new i.StateVector(n.vector)).timestamp+o-u.clock.getTime(o)<o?u.serverVector=r:(d.push(r),d.sort((function(e,t){return e.timestamp-t.timestamp})),f())}}},n?this.clock=n:(this.clock=new o.SocketSyncClock(e,this.socket),this.clock.addEventListener("change",(function(){"open"===u.readyState&&f()}))),1===this.socket.readyState?this.socket.send(s.Utils.stringify({type:"info",id:e})):3===this.socket.readyState&&u.close()};u.prototype=new r.AbstractTimingProvider,u.prototype.update=function(e){return e=e||{},"open"!==this.readyState?new Promise((function(e,t){t(new Error("Underlying socket was closed"))})):(this.socket.send(s.Utils.stringify({type:"update",id:this.url,vector:e})),new Promise((function(e,t){e()})))},u.prototype.close=function(){"closing"!==this.readyState&&"closed"!==this.readyState&&(this.readyState="closing",this.clock.close(),this.socketProvided||3===this.socket.readyState||this.socket.close(),this.socket=null,this.readyState="closed")}},"./src/orkestra/motion/src/StateVector.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{StateVector:()=>r});var r=function(e){e=e||{},this.position=e.position||0,this.velocity=e.velocity||0,this.acceleration=e.acceleration||0,this.timestamp=e.timestamp||Date.now()/1e3};r.prototype.computePosition=function(e){var t=e-this.timestamp;return this.position+this.velocity*t+.5*this.acceleration*t*t},r.prototype.computeVelocity=function(e){var t=e-this.timestamp;return this.velocity+this.acceleration*t},r.prototype.computeAcceleration=function(e){return this.acceleration},r.prototype.compareTo=function(e){var t=this.timestamp,n=0;return n=e.computePosition(t),this.position<n?-1:this.position>n?1:(n=e.computeVelocity(t),this.velocity<n?-1:this.velocity>n?1:(n=e.computeAcceleration(t),this.acceleration<n?-1:this.acceleration>n?1:0))},r.prototype.toString=function(){return"(position="+this.position+", velocity="+this.velocity+", acceleration="+this.acceleration+", timestamp="+this.timestamp+")"}},"./src/orkestra/motion/src/TimingMediaController.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TimingMediaController:()=>s});var r=n("./src/orkestra/motion/src/event-target.js"),i=n("./src/orkestra/motion/src/TimingObject.js"),o=n("./src/orkestra/motion/src/StateVector.js"),s=function(e,t){var n=this;if(t=t||{},!e||!e instanceof i.TimingObject)throw new Error("No timing object provided");var r=t.minDiff||.04,s=t.maxDelay||.8,a=t.amortPeriod||1,u=[],l=null,d=null;Object.defineProperties(this,{readyState:{get:function(){return timingProvider.readyState}},currentTime:{get:function(){return e.currentPosition},set:function(t){e.update(t,null)}},playbackRate:{get:function(){return e.currentVelocity},set:function(t){e.update(null,t)}}}),this.play=function(){e.update(null,1,null)},this.pause=function(){e.update(null,0,null)},this.reset=function(t){e.update(0,t,null)},this.seek=function(t,n){e.update(t,n,null)},this.incPlayBacRate=function(){this.playbackRate+=.3},this.decPlayBacRate=function(){this.playbackRate-=.3},this.addMediaElement=function(e,t){var n=!1;if(e){if(console.log("OFFSET",t/1e3),e._offset=t/1e3,u.forEach((function(t){t.element===e&&(n=!0)})),n)return;u.push({element:e,vector:null,driftRate:0,seeked:!1,amortization:!1})}},this.removeMediaElement=function(e){u=u.filter((function(t){return t.element!==e}))};var c=function(){var e=Date.now()/1e3;d=null,u.forEach((function(t){if(t.amortization)if(t.amortization=!1,t.seeked)t.seeked=!1;else{t.vector.computePosition(e),t.element.currentTime;t.driftRate=.002,t.vector.velocity=l.velocity+t.driftRate,t.element.playbackRate=t.vector.velocity}}))},f=function(){if(!d){l=e.query(),u.forEach(h);var t=!1;u.forEach((function(e){e.amortization&&(t=!0)})),t&&(d=setTimeout(c,1e3*a)),setTimeout((function(){n.dispatchEvent({type:"timeupdate"},0)}))}},h=function(e){var t=e.element,n=0,i=0;if(0===l.velocity&&0===l.acceleration)t.pause(),t.currentTime=l.position,e.vector=new o.StateVector(l);else if(t.paused)e.vector=new o.StateVector({position:l.position,velocity:l.velocity+e.driftRate,acceleration:0,timestamp:l.timestamp}),e.seeked=!0,e.amortization=!0,t.currentTime=e.vector.position-t._offset,t.playbackRate=e.vector.velocity,t.play();else{var u=e.vector?e.vector.velocity:.95;e.vector=new o.StateVector({position:t.currentTime,velocity:u}),n=l.position-e.vector.position-t._offset,Math.abs(n)<r||(Math.abs(n)>s?(console.log("DIFF",n),e.vector.position=l.position,e.vector.velocity=l.velocity+e.driftRate,e.seeked=!0,e.amortization=!1,t.currentTime=e.vector.position-t._offset,t.playbackRate=e.vector.velocity):(i=l.computePosition(l.timestamp+a),e.vector.velocity=e.driftRate+(i-e.vector.position)/a,e.amortization=!1,t.playbackRate=e.vector.velocity))}};e.addEventListener("timeupdate",f),e.addEventListener("change",(function(){d&&(clearTimeout(d),d=null,u.forEach((function(e){e.amortization=!1,e.seeked=!1}))),f()})),e.addEventListener("readystatechange",(function(e){n.dispatchEvent(e)}))};s.prototype.addEventListener=(0,r.EventTarget)().addEventListener,s.prototype.removeEventListener=(0,r.EventTarget)().removeEventListener,s.prototype.dispatchEvent=(0,r.EventTarget)().dispatchEvent},"./src/orkestra/motion/src/TimingObject.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TimingObject:()=>o});var r=n("./src/orkestra/motion/src/event-target.js"),i=n("./src/orkestra/motion/src/LocalTimingProvider.js"),o=function(e,t){var n=this,r=null,o=function(){r&&(clearInterval(r),r=null)},s=function(e){var t=e.value||{velocity:0,acceleration:0};0!==t.velocity||0!==t.acceleration?r||(r=setInterval((function(){n.dispatchEvent({type:"timeupdate"})}),Math.round(100))):o(),n.dispatchEvent(e)},a=function(e){"closed"===e.value&&o(),n.dispatchEvent(e)},u=!0,l=null,d=function(e){var t=l;c(t),l=e,e.addEventListener("change",s),e.addEventListener("readystatechange",a),t&&"open"===e.readyState&&0!==t.vector.compareTo(e.vector)&&s({type:"change",value:e.query()})},c=function(e){e&&(e.removeEventListener("change",s),e.removeEventListener("readystatechange",a))};this.query=function(){return l.query()},this.update=function(e,t,n){return l.update({position:e,velocity:t,acceleration:n})},this.isMoving=function(){var e=l.query();return 0!==e.velocity||0!==e.acceleration},Object.defineProperties(this,{readyState:{get:function(){return l.readyState}},srcObject:{get:function(){return u?null:l},set:function(e){var t=l;e?(u=!1,d(e)):u||(u=!0,e=new i.LocalTimingProvider(t.query(),t.range),d(e))}},currentPosition:{get:function(){return l.query().position}},currentVelocity:{get:function(){return l.query().velocity}},currentAcceleration:{get:function(){return l.query().acceleration}}}),d(new i.LocalTimingProvider(e,t))};o.prototype.addEventListener=(0,r.EventTarget)().addEventListener,o.prototype.removeEventListener=(0,r.EventTarget)().removeEventListener,o.prototype.dispatchEvent=(0,r.EventTarget)().dispatchEvent},"./src/orkestra/motion/src/event-target.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{EventTarget:()=>r});var r=function(){function e(e,t,n){r.value=n,i(e,t,r),r.value=null}var t="@@",n={},r={configurable:!0,value:null},i=Object.defineProperty||function(e,t,n){e[t]=n.value},o=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},s=n.hasOwnProperty;return e(n,"addEventListener",(function(n,r){!function(t,n,r){var i;s.call(t,n)?i=t[n]:e(t,n,i=[]),o.call(i,r)<0&&i.push(r)}(this,t+n,r)})),e(n,"dispatchEvent",(function(e){!function(e,t,n){var r,i,o;if(s.call(e,t))for(n.target=e,r=e[t].slice(0),o=0;o<r.length;o++)"function"==typeof(i=r[o])?i.call(e,n):"function"==typeof i.handleEvent&&i.handleEvent(n)}(this,t+e.type,e)})),e(n,"removeEventListener",(function(e,n){!function(e,t,n){var r,i;s.call(e,t)&&(r=e[t],-1<(i=o.call(r,n))&&(r.splice(i,1),r.length||delete e[t]))}(this,t+e,n)})),n}},"./src/orkestra/motion/src/utils.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Utils:()=>r});var r={toString:Object.prototype.toString,isNull:function(e){return null===e},isNumber:function(e){return"[object Number]"===toString.call(e)},stringify:function(e){return JSON.stringify(e,null,2)},getHostName:function(e){var t=document.createElement("a");return t.href="http://"+e,t.hostname}}},"./src/orkestra/orkestra.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{EVENT:()=>h,Orkestra:()=>p});var r,i=n("./node_modules/rxjs/dist/esm5/internal/Subject.js"),o=n("./node_modules/rxjs/dist/esm5/internal/Observable.js"),s=n("./src/orkestra/applicationcontext.js"),a=n("./src/orkestra/mappingservice.js"),u=n("./src/orkestra/instruments/index.js"),l=n("./src/orkestra/motion/motion.js"),d=n("./src/orkestra/user.js"),c=n("./src/orkestra/ui/UI.js"),f=n("./src/orkestra/utils/index.js");const h={AGENT_CHANGE:"agent_change",AGENT_LEFT:"agent_left",AGENT_JOIN:"agent_join",CAP_CHANGE:"capability_change",TIMELINE_EVENT:"timeline_change"};class p{constructor(e){if(this.options=e,e.debug&&!1!==e.debug?(r=f.Logger.getLogger("Orkestra"),f.Logger.setLogLevel(r.levels.TRACE,"Orkestra"),"all"==e.debug&&this.addDebugger()):(r=f.Logger.getLogger("Orkestra"),f.Logger.setLogLevel(r.levels.SILENT,"Orkestra")),this.userObserver=new i.Subject,this.userPrivObserver=new i.Subject,this.timeObserver=new i.Subject,this.appObserver=new i.Subject,this.readyObserver=new i.Subject,this.readyPrivObserver=new i.Subject,this.userPrivObservable=new o.Observable((e=>{this.userPrivObserver.subscribe(e)})),this.userObservable=new o.Observable((e=>{this.userObserver.subscribe(e)})),this.appObservable=new o.Observable((e=>{this.appObserver.subscribe(e)})),this.timerObservable=new o.Observable((e=>{this.timeObserver.subscribe(e)})),this.readyObservable=new o.Observable((e=>{this.readyObserver=e})),this.readyPrivObservable=new o.Observable((e=>{this.readyPrivObserver=e})),this.serviceObservable=new o.Observable((e=>{this.serviceObserver=e})),e.agentid=e.agentid?e.agentid:f.Hash.genRanHex(8),this.master=e.master,this.users=new Map,this.users_priv=new Map,this.appCtx=null,this.ruleEngineEnabled=!1,this.privateChannel=e.privateChannel,this.appData=new Object,this._ui=(0,c.UI)(this),this.rulesEnabled=!1,this.eventLogs=[],this.eventLogs2=[],this.servicesSubs=[],this.transitionsCbs=[],!0===this.privateChannel){let t=e.agentid||-1,n=new d.User(t,"me",e.profile||"slave",{});this.users_priv.set(n.name,n)}if("debugger"==e.agentid)this.rulesEnabled=!1,this.debugger={},this.debugger.agentid="debugger";else if(!0===this.master){let t=e.agentid||-1,n=new d.User(t,"me",e.profile||"master",{});this.users.set(n.name,n)}else if(void 0===this.master){let t=e.agentid||-1,n=new d.User(t,"me",e.profile||"broadcast",{});this.users.set(n.name,n)}else{let t=e.agentid||-1,n=new d.User(t,"me",e.profile||"slave",{});this.users.set(n.name,n)}e.url?(this.mappServ=(0,a.MappingService)(e.url,{maxTimeout:8e3}),this.privMappServ=(0,a.MappingService)(e.url,{maxTimeout:8e3})):this.mappServ=(0,a.MappingService)({maxTimeout:8e3}),this.setPublicConnection(e),!0===this.privateChannel&&this.setPrivateConnection(e)}onReady(){return this.readyObservable}setPublicConnection(e){""!==e.channel&&this.mappServ.getGroupMapping(e.channel).then((t=>{this.appCtx=(0,s.ApplicationContext)(t.group,{autoPresence:!0,autoClean:!0,agentid:e.agentid}),r.info("SharedState URL",t.group),r.info("Public connection init",new Date),this.appCtx.onready.subscribe((t=>{r.info("Public connection ready",new Date),this.timerObservable.subscribe((e=>{this.rules&&this.rules.forEach(((t,n)=>{if(!t.options.listenEvent||-1!=t.options.listenEvent.indexOf("timeline"))if(this.transitionsCbs.length>0){let n=this.transitionsCbs.find((e=>{if(!0===e.enable)return!0}));n&&n.plugin.render(),setTimeout((()=>{let n={type:h.TIMELINE_EVENT,time:e.target.currentTime,data:t.options.data};this.resolveConflict([{priority:0,decision:t.cb(n,this._ui.components,this.users,this.options)}]),this._ui.uiRender(e,"timeupdate")}),500)}else{let n={type:h.TIMELINE_EVENT,time:e.target.currentTime,data:t.options.data};this.resolveConflict([{priority:0,decision:t.cb(n,this._ui.components,this.users,this.options)}]),this._ui.uiRender(e,"timeupdate")}}))})),this.userObservable.subscribe((e=>{let t=[];this.isRuleEngineEnable()&&this.getMyAgentId()==e.data.agentid||"componentsStatus"==e.data.key&&this.getMyAgentId()!=e.data.agentid||(this.rules&&this.rules.forEach(((n,r)=>{t.push({priority:r,decision:n.cb(e,this._ui.components,this.getUsersForRules(this.users),f.Obj.combine(this.options,n.options))})})),"componentsStatus"==e.data.key&&e.data.value.from==this.getMyAgentId()?this.resolveConflictLocally(t):e.data.value&&"me"==e.data.value.from||this.resolveConflict(t),this._ui.uiRender(e,"userCtx"))})),this.appObservable.subscribe((e=>{var t=[];this.users.get("me")&&(this.rules&&this.rules.forEach(((n,r)=>{t.push({priority:r,decision:n.cb(e,this._ui.components,this.getUsersForRules(this.users),f.Obj.combine(this.options,n.options))})})),this.resolveConflict(t),this._ui.uiRender(e,"appCtx"))})),this.appCtx.on("agentchange",(e=>{this.onAgentChange(e)})),setTimeout((()=>{this.appCtx.me.load((0,u.ComponentsStatus)(this)),this.appCtx.me.load((0,u.UserProfile)(this)),this.appCtx.me.load((0,u.MasterSlaveProfile)(this)),this.appCtx.me.load((0,u.UserData)(this)),this.appCtx.me.load((0,u.Message)(this)),this.appCtx.me.load((0,u.DeviceProfile)(e.url)),setTimeout((()=>{this.readyObserver.next({status:"ready"})}),1e3)}),0),this.appCtx.keys().forEach((t=>{void 0!==e.listenAll&&!0!==e.listenAll||this.appCtx.on(t,this.onAppAttrChange.bind(this)),r.info("KEYS",t)})),this.appCtx.keys().forEach((t=>{void 0!==e.listenAll&&!0!==e.listenAll||(this.appData[t]=this.appCtx.getItem(t),this.appObserver.next({key:t,value:this.appData[t]}))})),this.appCtx.on("default",this.onNewAppAttr.bind(this))}))}))}setPrivateConnection(e){this.privGroup=f.URI.getUrlVar("group"),this.privGroup||(this.privGroup=f.URI.createToken()),this.privMappServ.getGroupMapping(e.channel+"_"+this.privGroup).then((t=>{this.appCtxPriv=(0,s.ApplicationContext)(t.group,{autoPresence:!0,autoClean:!0}),console.info("SharedState URL",t.group),console.info("Services connection init",new Date),this.appCtxPriv.onready.subscribe((t=>{console.info("Private connection ready",new Date),this.userPrivObservable.subscribe((e=>{var t=[];this.rules&&this.rules.forEach(((n,r)=>{t.push({priority:r,decision:n.cb(e,this._ui.components,this.users_priv,this.options)})})),this.resolveConflict(t),this._ui.uiRender(e,"userCtx")})),this.appCtxPriv.on("agentchange",(e=>{this.onAgentPrivChange(e)})),setTimeout((()=>{this.appCtxPriv.me.load((0,u.DeviceProfile)(e.url)),this.appCtxPriv.me.load((0,u.MasterSlaveProfile)(this)),this.appCtxPriv.me.load((0,u.UserProfile)(this))}),500)}))}))}useServiceHub(e){return new Promise(((t,n)=>{this.serviceHubName=e,this.appCtxServices&&this.appCtxServices.ready?t():this.privMappServ.getGroupMapping("services_"+e).then((e=>{this.appCtxServices&&this.appCtxServices.ready?t():(this.appCtxServices=(0,s.ApplicationContext)(e.group,{autoPresence:!0,autoClean:!0}),console.info("SharedState Service URL",e.group),console.info("Services connection init",new Date),this.appCtxServices.onready.subscribe((e=>{let n=this.appCtxServices.getItem(this.serviceHubName)||void 0;void 0===n&&this.appCtxServices.setItem(this.serviceHubName,[]),this.appCtxServices.on(this.serviceHubName,this.onServiceHubChange.bind(this)),setTimeout((()=>{this.onServiceHubChange({value:n,data:n})}),1e3),t(),setInterval((()=>{if(1==this.users.size){let e=this.appCtxServices.getItem(this.serviceHubName);n.filter((e=>{if(-1==e.indexOf(this.users.get("me").agentid))return!0})).length>0&&(n=n.filter((e=>{if(-1!=e.indexOf(this.users.get("me").agentid))return!0})),this.appCtxServices.setItem(this.serviceHubName,n)),r.debug("serviceHub",e)}}),25e3)})))}))}))}onServiceHubChange(e){r.debug("Service change",e),e.value.forEach((e=>{-1!=this.servicesSubs.map((e=>e.name)).indexOf(e)&&this.appCtxServices.on(e,this.onServiceChange.bind(this))})),setTimeout((()=>{this.serviceObserver.next({event:"update",data:e})}),2500)}onServiceChange(e){r.debug("data change",e),this.servicesSubs.forEach((t=>{t.name===e.key&&e.value.io==t.io&&t.cb(e)}))}subscribeToService(e,t,n){this.servicesSubs.find((t=>{if(t.name==e&&n==t.io)return!0}))||this.servicesSubs.push({name:e,cb:t,io:n})}publishService(e){let t=this.appCtxServices.getItem(this.serviceHubName)||[];-1===t.indexOf(e)&&t.push(e),this.appCtxServices.setItem(this.serviceHubName,t)}unPublishService(e){let t=this.appCtxServices.getItem(this.serviceHubName)||[];t=t.filter((t=>t!==e)),this.appCtxServices.setItem(this.serviceHubName,t)}cleanServiceHub(e){return this.appCtxServices.setItem(this.serviceHubName,[])}sendServiceData(e,t){this.appCtxServices.setItem(e,t)}getServices(e){return this.appCtxServices.getItem(this.serviceHubName)||[]}getAgentKeys(e){return this.users.get(e)}onAgentChange(e){if(!this.userObserver)return console.warn("There is not subscribed to receive agent change"),-1;if("debugger"!=e.agentid)if(e.agentContext){if(!this.existsAgent(e.agentid)){if(this.appCtx.getAgents().self.agentid===e.agentid){let t=this.users.get("me");t.agentid=e.agentid,t.context=e.agentContext}else{this.users.set(e.agentid,new d.User(e.agentid,e.agentid,"",{})),this.users.get(e.agentid).context=e.agentContext}this.userObserver.next({evt:h.AGENT_JOIN,type:"agentChange",data:e}),this.eventLogs[e.agentContext.agentid]=[]}e.diff.keys.length>0&&e.diff.keys.forEach((t=>{-1==this.eventLogs[e.agentContext.agentid].indexOf(t)&&(this.enableInstrument([t],e.agentContext,e,this.master),this.userObserver.next({evt:h.AGENT_CHANGE,type:"agentChange",data:e}),this.eventLogs[e.agentContext.agentid].push(t))}))}else this.users.delete(e.agentid),this.userObserver.next({evt:h.AGENT_LEFT,data:e})}onAgentPrivChange(e){if(r.debug("Priv agent change",e),!this.userPrivObserver)return console.warn("There is not subscribed to receive agent change"),-1;if("debugger"!=e.agentid)if(e.agentContext){if(!this.existsAgent(e.agentid,!0)){if(this.appCtxPriv.getAgents().self.agentid===e.agentid){let t=this.users_priv.get("me");t.agentid=e.agentid,t.context=e.agentContext}else{this.users_priv.set(e.agentid,new d.User(e.agentid,e.agentid,"",{})),this.users_priv.get(e.agentid).context=e.agentContext}this.userPrivObserver.next({evt:h.AGENT_JOIN,type:"agentChange",data:e})}e.diff.keys.length>0&&(this.enablePrivInstrument(e.diff.keys,e.agentContext,e,this.master),this.userPrivObserver.next({evt:h.AGENT_CHANGE,type:"agentChange",data:e}))}else this.users_priv.delete(e.agentid),this.userPrivObserver.next({evt:h.AGENT_LEFT,data:e})}onAppAttrChange(e){if(!this.appObserver)return r.warn("There is not subscribed to receive agent change"),-1;this.appData[e.key]=e.value,this.appObserver.next({type:"appAttrChange",key:e.key,data:e})}onNewAppAttr(e){-1===this.appCtx.keys().indexOf(e.key)&&this.subscribe(e.key),this.onAppAttrChange(e)}use(e,t){this.ruleEngineEnabled=!0,this.rules=this.rules||[],this.rules.push({name:e.name,cb:e(this),options:t})}ui(e,t){if(!e)return this._ui;this._ui.subscribe(e,t)}transitions(e){return this.transitionsCbs.push({plugin:e,enable:!0}),e}removeTransition(e){this.transitionsCbs=this.transitionsCbs.filter((t=>t.plugin.name!==e))}disableTransitions(){this.transitionsCbs.forEach((e=>{e.enable=!1}))}enableTransition(e){this.transitionsCbs.forEach((t=>{t.plugin.name==e&&(t.enable=!0)}))}disableTransition(e){this.transitionsCbs.forEach((t=>{t.plugin.name==e&&(t.enable=!1)}))}updateComponentStatus(e,t,n){let r=this.getUserContextData(e,"componentsStatus");if(r&&r.componentsStatus.length>0){let i=r.componentsStatus.find((e=>{if(e.cmp==t)return!0}));if(i){void 0===i.usrCmd&&(i.usrCmd=[]),-1!=i.usrCmd.map((e=>e.cmd)).indexOf(n.cmd)&&(i.usrCmd=i.usrCmd.filter((e=>{if(e.cmd==n.cmd)return!1}))),i.usrCmd.push(n),e===this.getMyAgentId()&&(e="me"),r.from=this.getMyAgentId(),this.users.get(e).context.setItem("componentsStatus",r)}}}updateUserData(e,t,n){let r="undefined"==this.getUserContextData(e,"userData")?{}:this.getUserContextData(e,"userData");if(r&&"string"!=typeof n&&"boolean"!=typeof n)for(let e in n)r[e]=n[e];else"string"==typeof n||"boolean"==typeof n?r[t]=n:r=n;e==this.getMyAgentId()&&"debugger"!==this.getMyAgentId()?this.users.get("me").context.setItem("userData",r):this.users.get(e).context.setItem("userData",r)}setUserContextData(e,t,n){let r=this.getUserContextData(e,t);if(void 0!==r&&"undefined"!==r&&"string"!=typeof r)for(let e in n)r[e]=n[e];else r=n;e==this.getMyAgentId()&&"debugger"!==this.getMyAgentId()?this.users.get("me").context.setItem(t,r):this.users.get(e).context.setItem(t,r)}getUserContextData(e,t){return e==this.getMyAgentId()&&"debugger"!==this.getMyAgentId()?this.users.get("me").context.getItem(t):this.users.get(e).context.getItem(t)||{}}getUsers(){return JSON.stringify(Array.from(this.users.entries()))}getUsersForRules(){let e=new Map;for(const[t,n]of this.users.entries())"controller"!=this.users.get(t).profile&&e.set(t,n);return e}getPrivateUsers(){return JSON.stringify(Array.from(this.users_priv.entries()))}getAppData(){return JSON.stringify(this.appData)}getUsersByProfile(){}data(e,t,n){var r=setInterval((()=>{this.appCtx&&this.appCtx.me&&(clearInterval(r),this.appCtx.me.load(t(n[0])))}),5)}isInteracive(e){return"debugger"!==this.getMyAgentId()&&(this.getMyAgentId()==e?!this.isRuleEngineEnable():void 0)}isRuleEngineEnable(){return this.rulesEnabled}existsAgent(e,t){return"debugger"==this.getMyAgentId()||!1===this.rulesEnabled?void 0!==this.users.get(e):t&&1==t?void 0!==this.users_priv.get(e)||this.appCtxPriv.me.agentid===this.users_priv.get("me").agentid:void 0!==this.users.get(e)||this.appCtx.me.agentid===this.users.get("me").agentid}setAppAttribute(e,t){-1===this.appCtx.keys().indexOf(e)&&this.subscribe(e),"object"==typeof t&&(t.timestamp=(new Date).getTime()),this.appCtx.setItem(e,t)}getAppAttribute(e){return this.appCtx.getItem(e)}subscribe(e){this.appCtx.on(e,this.onAppAttrChange.bind(this))}resolveConflict(e){for(var t=0,n=null,r=0;r<e.length;r++)e[r].priority>=t&&(t=e[r].priority,null===n?n=e[r].decision:n.forEach((t=>{e[r].decision.forEach((e=>{t.cmp===e.cmp&&(t.show=e.show,void 0!==e.usrCmd&&(t.usrCmd=e.usrCmd))}))})));n&&(n.forEach((e=>{!0===e.show?document.getElementById(e.cmp).style.display="block":document.getElementById(e.cmp).style.display="none"})),this.users.get("me")&&this.users.get("me").context&&this.setUserContextData(this.users.get("me").agentid,"componentsStatus",{componentsStatus:n,from:this.users.get("me").agentid}))}resolveConflictLocally(e){for(var t=0,n=null,r=0;r<e.length;r++)e[r].priority>=t&&(t=e[r].priority,null===n?n=e[r].decision:n.forEach((t=>{e[r].decision.forEach((e=>{t.cmp===e.cmp&&(t.show=e.show,void 0!==e.usrCmd&&(t.usrCmd=e.usrCmd))}))})));n&&(n.forEach((e=>{!0===e.show?document.getElementById(e.cmp).style.display="block":document.getElementById(e.cmp).style.display="none"})),this.users.get("me")&&this.users.get("me").context&&this.setUserContextData(this.users.get("me").agentid,"componentsStatus",{componentsStatus:n,from:"me"}))}getUserObservable(){return this.userObservable}me(){return this.appCtx.me}getMyAgentId(){return this.debugger?"debugger":this.users.get("me").agentid}enableInstrument(e,t,n,i){if(e.forEach((e=>{t.on(e,((e,n)=>{if(t.agentid==this.appCtx.getAgents().self.agentid){let i=this.users.get("me");i[e]=n,r.debug("me",i),this.userObserver.next({evt:h.CAP_CHANGE,data:{agentid:t.agentid,key:e,value:n}})}}))})),!0===i||void 0===i)e.forEach((e=>{t.on(e,((e,n)=>{let r="";r=t.agentid==this.appCtx.getAgents().self.agentid?this.users.get("me"):this.users.get(t.agentid),r.capacities[e]=n,"userProfile"===e&&"supported"!==n&&(r.profile=n),"userData"===e&&"supported"!==n&&(r=t.agentid==this.appCtx.getAgents().self.agentid?this.users.get("me"):this.users.get(t.agentid),r[e]=n),this.userObserver.next({evt:h.CAP_CHANGE,data:{agentid:t.agentid,key:e,value:n}})}))}));else{let n=e.indexOf("masterSlave");if(-1!==n){let r="";t.on(e[n],((e,n)=>{r=t.agentid==this.appCtx.getAgents().self.agentid?this.users.get("me"):this.users.get(t.agentid),r.capacities[e]=n,this.userObserver.next({evt:h.CAP_CHANGE,data:{key:e,value:n}}),"masterSlave"===e&&!0===n&&t.keys().forEach((e=>{t.on(e,((e,n)=>{let r="";r=t.agentid==this.appCtx.getAgents().self.agentid?this.users.get("me"):this.users.get(t.agentid),r.capacities[e]=n,this.userObserver.next({evt:h.CAP_CHANGE,data:{agentid:t.agentid,key:e,value:n}})}))})),"userProfile"===e&&"supported"!==n&&(r=t.agentid==this.appCtx.getAgents().self.agentid?this.users.get("me"):this.users.get(t.agentid),r.profile=n),"userData"===e&&"supported"!==n&&(r=t.agentid==this.appCtx.getAgents().self.agentid?this.users.get("me"):this.users.get(t.agentid),r[e]=n)}))}}}enablePrivInstrument(e,t,n,r){e.forEach((e=>{t.on(e,((e,n)=>{let r="";r=t.agentid==this.appCtxPriv.getAgents().self.agentid?this.users_priv.get("me"):this.users_priv.get(t.agentid),r.capacities[e]=n,this.userPrivObserver.next({evt:h.CAP_CHANGE,data:{agentid:t.agentid,key:e,value:n}})}))}))}syncObjects(e,t,n){let r=new l.Motion(n||this.options.url,t);return r.start(),r.addObject(e,0)}enableSequencer(e,t,n){let i=new l.Motion(n||this.options.url,t);i.start();let o=i.addObject(e,0),s=new Promise(((e,t)=>{let n=setTimeout((()=>{t("timeout enable sequencer")}),8e3);i.addEventListener("motionReady",(t=>{e("ready"),clearInterval(n),r.debug("MOTION SOCKET READY"),t.target={currentTime:t.value},this.timeObserver.next(t),o.addEventListener("timeupdate",(e=>{this.timeObserver.next(e)}))}))}));return this.sequencer=o,o.ready=s,o}getSequencer(){return this.sequencer}enableQRcode(e){let t=this.options.url.slice(0,-1);f.URI.shortURL(t,location.protocol+"//"+location.host+"/?master="+this.master+"&group="+this.privGroup).then((t=>{r.debug("SHORTURL",t.response);let n=document.createElement("div");document.querySelector(e).appendChild(n),new f.QRCode(n,{text:t.response,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:f.QRCode.CorrectLevel.H});let i=document.createElement("a");i.href=t.response,i.innerHTML=t.response,n.appendChild(i)}))}addDebugger(e){let t=document.querySelector("#debugger");t||(t=document.createElement("iframe"),t.src="/test/context/monitor.html?agent=debugger&session="+(e||this.options.channel),t.style="position:absolute;top:75%;left:1%;z-index:9999;width:100%;height:30%;background:white",document.addEventListener("DOMContentLoaded",(()=>document.body.appendChild(t))))}}},"./src/orkestra/rules/byTimeline.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Bytimeline:()=>o});var r=n("./node_modules/loglevel/lib/loglevel.js"),i=n.n(r);function o(){var e={name:"bytimeline",data:[]};e.time;return function(t,n,r,o){let s=[];void 0===t.key&&(t.key="");let a=t.key.split("_");if("timeline"==a[0]&&"change"!=a[1])if("appAttrChange"===t.type||void 0===t.type){let n=t.data?t.data.value:t.value;n.applyTo!==r.get("me").agentid&&"all"!==n.applyTo||(e.data=n.componentStatus),t.applyTo=n.applyTo}else a[1]===r.get("me").agentid&&(e.data=t.componentStatus);if("timeline_change"===t.type||t.key.indexOf("timeline")>-1){const r=null!=t.time&&t.time!=e.time;Array.from(n).forEach((e=>{e.unload(r)})),"timeline_change"===t.type&&(e.time=t.time),t.key.indexOf("timeline")>-1&&(t.time=e.time||0);let o=function(t){i().debug(t);let n="string"!=typeof e.data?e.data:[];void 0===n&&(n=[]);let r=Math.round(t.time),o=n.filter((e=>1===e.slots[r]));o.length>0&&(o=o.map((e=>({id:"v"+e.id,source:e.source,mutedScene:e.mutedScenes[r],order:e.order,loopVideo:e.loopVideo[r]}))));return o}(t);for(let e=0;e<n.length;e++){let t=n[e];if(!t.style)continue;let i=o.map((e=>e.id)).indexOf(t.id);if(i>-1){t.order=o[i].order,t.input=o[i].source,r||"none"!=t.style.display?t.load(r):t.load(),"true"==o[i].mutedScene?t.muteScene():t.unmuteScene();let e=o[i].source.substring(o[i].source.lastIndexOf("/")+1,o[i].source.length),n=e.substring(e.lastIndexOf("."),o[i].source.length);-1!=[".mp4",".ogv",".vp9",".vp8",".mpeg",".mpg",".mpd"].indexOf(n)&&("true"==o[i].loopVideo?t.changeLoop(!0):t.changeLoop(!1))}else t.unload(r);s.push({cmp:t.id,show:i>-1})}}return s}}},"./src/orkestra/rules/byname.js":(e,t,n)=>{"use strict";function r(){return function(e,t,n,r){let i=[];for(let e in t){let r=t[e];if(!r.style)return;"master"===n.get("me").profile&&"USER-TABLE"===r.nodeName||"APP-TABLE"===r.nodeName?r.style.display="block":r.style.display="none",i.push({cmp:r.id,show:"block"==r.style.display})}return i}}n.r(t),n.d(t,{Byname:()=>r})},"./src/orkestra/rules/explicit.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Explicit:()=>o});var r=n("./node_modules/loglevel/lib/loglevel.js"),i=n.n(r);function o(){var e={name:"explicit",data:[]};e.time;return function(e,t,n,r){const o=!r||!!r.reload;let s=[];i().debug(r);let a=function(e,t,n){if(i().debug(e,n,t),!t)return;if(!n.contexts)return void i().warn("NO explicit found, add config file to app.use");let r=n.contexts.find((e=>{if(e.session==n.channel)return!0})),o=Array.from(t).map((e=>e[1].agentid));return r.rules.find((e=>{if(o.sort(),e.condition.sort(),o.length===e.condition.length&&o.every(((t,n)=>t===e.condition[n])))return!0}))||void 0}(e,n,r);return i().debug("RULE",a),a?a.then.forEach((e=>{e.show?o&&document.querySelector("#"+e.comp).load():o&&document.querySelector("#"+e.comp).unload(),n.get("me").agentid===e.agentid&&s.push({cmp:e.comp,show:e.show})})):Array.from(t).forEach((e=>{s.push({cmp:e.id,show:!1})})),s}}},"./src/orkestra/rules/userPref.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserPref:()=>o});var r=n("./node_modules/loglevel/lib/loglevel.js"),i=n.n(r);function o(){var e={name:"userpref",data:[]};e.time;return function(e,t,n,r){const o=!r||!!r.reload;let s=[];if(e.data&&"componentsStatus"===e.data.key){i().debug("COMPONENTSSTATUS",e);let t=e.data.value;"undefined"!=t&&t.componentsStatus.forEach((e=>{if(void 0!==e.usrCmd){let t=e.usrCmd.find((t=>{if("show"==t.cmd)return o&&document.querySelector("#"+e.cmp).load(),!0}));t&&s.push({cmp:e.cmp,show:t.value,usrCmd:e.usrCmd})}}))}else if(n.get("me").capacities.componentsStatus&&n.get("me").capacities.componentsStatus.componentsStatus){i().debug("COMPONENTSSTATUS",n.get("me").capacities.componentsStatus.componentsStatus,e);let t=n.get("me").capacities.componentsStatus;"undefined"!=t&&t.componentsStatus.forEach((e=>{if(void 0!==e.usrCmd){let t=e.usrCmd.find((t=>{if("show"==t.cmd)return o&&document.querySelector("#"+e.cmp).load(),!0}));t&&s.push({cmp:e.cmp,show:t.value,usrCmd:e.usrCmd})}}))}return i().debug(s),s}}},"./src/orkestra/sharedstate.es6.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n("./node_modules/socket.io-client/build/esm/index.js"),i=n("./src/orkestra/utils/index.js");const o=function(e,t){var n=null,o=i.Logger.getLogger("SharedState"),s={},a=Object.freeze({CONNECTING:"connecting",OPEN:"open",CLOSED:"closed"}),u={change:[],remove:[],readystatechange:[],presence:[]},l={},d={},c=!1,f={},h=function(e,n){!0===t.logToConsole&&o.info(e,n)};(t=t||{})instanceof String&&(t={}),!1!==t.reconnection&&(t.reconnection=!0),t.agentid||(o.warn("SHAREDSTATE - agentID undefined, generating one for this session"),t.agentid=(999999999*Math.random()).toFixed(0)),!1!==t.getOnInit&&(t.getOnInit=!0),!1!==t.autoPresence&&(t.autoPresence=!0),!0!==t.autoClean&&(t.autoClean=!1),t.forceNew=!0,t.multiplex=!1,e=e||{},!0===t.logStateInterval&&setInterval((function(){h("SharedSate("+e+"):",l)}),5e3);var p,m=function(e){var n,r;n="SharedState-error",r=e,!0===t.logToConsole&&o.error(n,r)},g=function(){if(!0===n.connected){A.set("connecting");var e={agentID:t.agentid};t.userId&&(e.userId=t.userId),w("join",e)}},v=function(e,t,n){if(!u.hasOwnProperty(e))throw"Unsupported event "+e;var r;for(let i=0;i<u[e].length;i++){if(r=u[e][i],void 0===n){if(r._immediate_pending)continue}else{if(r!==n)continue;n._immediate_pending=!1}try{r._ctx?r.call(r._ctx,t):r.call(s,t)}catch(t){o.error("Error in "+e+": "+r+": "+t)}}},y=function(e){h('SHAREDSTATE - got "status"',e);for(var t=0;t<e.presence.length;t++)if(e.presence[t].key&&JSON.stringify(d[e.presence[t].key])!=JSON.stringify(e.presence[t].value||!d[e.presence[t].key])){var n={key:e.presence[t].key,value:e.presence[t].value||void 0};d[e.presence[t].key]=e.presence[t].value,v("presence",n)}else h('SHAREDSTATE - reveived "presence" already saved or something wrong',e.presence[t])},_=function(){A.set("connecting"),h('SHAREDSTATE - got "disconnected"')},E=function(e){h('SHAREDSTATE - got "changeState"',e),e=e||{};for(var t=0;t<e.length;t++)if("set"==e[t].type)if(e[t].key&&JSON.stringify(l[e[t].key])!=JSON.stringify(e[t].value)){var n={key:e[t].key,value:e[t].value,type:"add"};l[e[t].key]&&(n.type="update"),l[e[t].key]=e[t].value,v("change",n)}else h('SHAREDSTATE - reveived "set" already saved or something wrong',e[t]);else if("remove"==e[t].type&&e[t].key&&l[e[t].key]){n={key:e[t].key,value:l[e[t].key],type:"delete"};delete l[e[t].key],v("remove",n)}},b=function(e){(h('SHAREDSTATE - got "joined"',e),e.agentID==t.agentid)&&(!0===t.getOnInit?w("getInitState",e=[]):(A.set("open"),!0===t.autoPresence&&R("online")));t.autoClean&&setInterval((function(){for(var e in l)if(l.hasOwnProperty(e)&&0==e.indexOf("__meta__")){var t=e.substr(8);d[t]||S(t)}}),5e3)},T=function(e){h("INITSTATE",e);for(var n=0,r=e.length;n<r;n++)if("set"==e[n].type&&e[n].key&&e[n].value&&JSON.stringify(l[e[n].key])!=JSON.stringify(e[n].value)){var i={key:e[n].key,value:e[n].value,type:"add"};l[e[n].key]=e[n].value,v("change",i)}A.set("open"),!0===t.autoPresence&&R("online")},S=function(e){if(t.autoClean)for(var n in h("*** Cleaning agent ",e),l)l.hasOwnProperty(n)&&0==n.indexOf("__")&&n.indexOf("__"+e)>-1&&s.removeItem(n)},w=function(e,t){h("SHAREDSTATE - sending",t),n.emit(e,t)},A=(p=a.CONNECTING,{set:function(e){let t=!1;for(let n in a)a.hasOwnProperty(n)&&a[n]===e&&(t=!0);if(!t)throw"Illegal state value "+e;p!==a.CLOSED&&e!==p&&(p=e,v("readystatechange",e))},get:function(){return p}}),R=function(e){if(A.get()!=a.OPEN)throw"SHAREDSTATE - send not possible - connection status:"+A.get();if(!e)throw"SHAREDSTATE - params with error - state:"+e;var n={agentID:t.agentid,presence:e};return w("changePresence",n),s};return s.__defineGetter__("readyState",A.get),s.__defineGetter__("STATE",(function(){return a})),s.__defineGetter__("agentid",(function(){return t.agentid})),s.setItem=function(e,t,n){if(c){var r={type:"set",key:e,value:t};f[e]=r}else{if(A.get()!==a.OPEN)throw"SHAREDSTATE - setItem not possible - connection status:"+A.get();if(!e)throw"SHAREDSTATE - params with error - key:"+e+"value:"+t;w("changeState",[{type:"set",key:e,value:t}])}return s},s.removeItem=function(e,t){if(c){var n={type:"remove",key:e};f[e]=n}else{if(A.get()!=a.OPEN)throw"SHAREDSTATE - removeItem not possible - connection status:"+A.get();if(!l[e])throw"SHAREDSTATE - key with error - key:"+e;w("changeState",[{type:"remove",key:e}])}return s},s.request=function(){return c=!0,s},s.send=function(){if(A.get()!=a.OPEN)throw"SHAREDSTATE - send not possible - connection status:"+A.get();if(c=!1,Object.keys(f).length>0){for(var e=[],t=Object.keys(f),n=0;n<t.length;n++)e.push(f[t[n]]);w("changeState",e),f={}}return s},s.getItem=function(e,t){if(null!=e){if(l[e+=""])return JSON.parse(JSON.stringify(l[e]))}else{w("getState",[])}},s.keys=function(){return Object.keys(l)},s.on=function(e,t,n){if(!t||"function"!=typeof t)throw"Illegal handler";if(!u.hasOwnProperty(e))throw"Unsupported event "+e;return n&&(t._ctx=n),-1===u[e].indexOf(t)&&(u[e].push(t),t._immediate_pending=!0,setTimeout((function(){switch(e){case"change":if(0===(o=Object.keys(l)).length)t._immediate_pending=!1;else for(var n=0,r=o.length;n<r;n++){var i={key:o[n],value:l[o[n]],type:"update"};v("change",i,t)}break;case"presence":var o;if(0===(o=Object.keys(d)).length)t._immediate_pending=!1;else for(n=0,r=o.length;n<r;n++){var s={key:o[n],value:d[o[n]]};v("presence",s,t)}break;case"remove":t._immediate_pending=!1;break;case"readystatechange":v("readystatechange",A.get(),t)}}),100)),s},s.off=function(e,t){if(void 0!==u[e]){var n=u[e].indexOf(t);n>-1&&u[e].splice(n,1)}return s},s.setPresence=R,t.transport=["websocket","polling"],(n=(0,r.default)(e,t)).on("connect",g),n.on("disconnect",_),n.on("joined",b),n.on("status",y),n.on("changeState",E),n.on("initState",T),n.on("ssError",m),A.set("connecting"),!0===n.connected&&g(),s}},"./src/orkestra/transitions/simple.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Simple:()=>r});n("./src/orkestra/transitions/css/simple.css"),n("./src/orkestra/utils/index.js").Logger.getLogger("Transtiion Plugin Simple");function r(e){return{render:function(t){if(e&&e.background&&(document.body.style.background=e.background),document.body.className="ork_opacity_0",!t&&e&&e.time)t=e.time;setTimeout((()=>{document.body.className="ork_opacity_1"}),t||1500)},name:"Simple"}}},"./src/orkestra/ui/UI.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{UI:()=>o});var r=n("./src/orkestra/utils/index.js"),i=r.Logger.getLogger("UI");function o(e){var t={};"undefined"!=typeof document?t.components=document.querySelector("orkestra-ui")?document.querySelector("orkestra-ui").children:[]:t.components=[],t.callbacks=[],t.old=[],t.uiRender=function(o,s){switch(s){case"appCtx":-1!=o.key.indexOf("layout")?(i.info("changing layout"),o.value?!o.value.applyTo||"all"!=o.value.applyTo&&o.value.applyTo!=e.getMyAgentId()||("off"===o.value.status?t.useLayout(t.callbacks[0].name,o):t.useLayout(o.value.layout,o)):o.data&&(!o.data.value.applyTo||"all"!=o.data.value.applyTo&&o.data.value.applyTo!=e.getMyAgentId()||("off"===o.data.value.status?t.useLayout(t.callbacks[0].name,o):t.useLayout(o.data.value.layout,o)))):t.useLayout(t.activeLayout,o);break;case"userCtx":if(o.data.key&&"undefined"!==o.data.value&&"userData"===o.data.key&&"layout"in o.data.value&&o.data.agentid===e.getMyAgentId())if(-1!=o.data.value.layout.indexOf("FullScreen")){let e=o.data.value.layout.split("_")[1];o.cmp=e;let n=o.data.value.layout.split("_")[2],r=t.callbacks[0].name;r="off"===n?t.callbacks[0].name:"FullScreen",t.useLayout(r,o)}else t.useLayout(o.data.value.layout,o);if(o.data.key&&"componentsStatus"===o.data.key&&o.data.agentid===e.getMyAgentId()&&o.data.from!==e.getMyAgentId()){var a=r.Obj.getObjectDiff(o.data.value,t.old);if(i.debug(a),t.old=o.data.value,void 0!==a&&1==Object.keys(a).length&&a.componentsStatus){let e=Object.entries(a.componentsStatus).filter((e=>"usrCmd"in e[1]));if(0==e.length)return;let t=e[0][0],n=Object.keys(a.componentsStatus[t].usrCmd)[0];i.debug("CHANGE",o.data.value.componentsStatus[t].usrCmd[n]);let r=o.data.value.componentsStatus[t].usrCmd[n];if(!r)return;let s=document.querySelector("#"+r.cmp);s&&s.userCmdEvents?s.userCmdEvents({cmd:r.cmd,value:r.value}):console.warn("Webcomponent does not implements userCmdEvents function")}if(void 0!==a&&Object.keys(a).length>1&&a.componentsStatus){!1===Array.isArray(a.componentsStatus)&&(a.componentsStatus=[a.componentsStatus]);let e=a.componentsStatus.find((e=>{if(e.usrCmd)return!0}));if(!e)return;let t=e.usrCmd[0];if(!t)return;let n=document.querySelector("#"+t.cmp);n&&n.userCmdEvents?n.userCmdEvents({cmd:t.cmd,value:t.value}):console.warn("Webcomponent does not implements userCmdEvents function")}}n(o);break;case"timeupdate":case"timeline":n(o)}};var n=function(n){if(o(),"object"==typeof t.activeLayout){let r=e.sequencer.currentTime,i=t.activeLayout[r],o=t.callbacks.find((e=>e.name===i));o.callback(n,t.components,e,o.options)}else if(t.activeLayout){let r=t.callbacks.find((e=>e.name===t.activeLayout));r&&r.callback(n,t.components,e,r.options)}else t.callbacks.forEach((r=>{r.callback(n,t.components,e,r.options)}))},o=function(){if(t.oldLayout===t.activeLayout&&"object"!=typeof t.activeLayout)return;let n=[];if(Array.from(t.components).forEach((e=>{let t=e.style.display;n.push({component:e,status:t})})),"object"==typeof t.oldLayout){let r=e.sequencer.currentTime,i=t.oldLayout[r];t.callbacks.find((e=>e.name===i)).unload(t.components),n.forEach((e=>{e.component.style.display=e.status}))}else if(t.oldLayout){let e=t.callbacks.find((e=>e.name===t.oldLayout));e&&(e.unload(t.components),n.forEach((e=>{e.component.style.display=e.status})))}else t.callbacks.forEach((e=>{e.unload(t.components)})),n.forEach((e=>{e.component.style.display=e.status}))};return t.subscribe=function(e,n){let r=e();t.callbacks.push({name:e.name,callback:r.render,unload:r.unload,options:n}),i.info("registring UI",e.name)},t.unsubscribe=function(e){i.info("unregistring UI",e.name)},t.useLayout=function(e,r){t.oldLayout=t.activeLayout,t.activeLayout=e,n(r)},t.getUsingLayout=function(){return t.activeLayout},{subscribe:t.subscribe,components:t.components,layouts:t.callbacks,useLayout:t.useLayout,uiRender:t.uiRender,getUsingLayout:t.getUsingLayout}}},"./src/orkestra/ui/plugins/customLayout.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{CustomLayout:()=>CustomLayout});n("./src/orkestra/ui/plugins/css/custom.css");var r=n("./src/orkestra/utils/index.js").Logger.getLogger("UI Plugin Custom Layout");function CustomLayout(){return{render:function(e,t){Array.from(t).filter(((e,t,n)=>"none"!=e.style.display)).forEach(((e,t,n)=>{!function(e,t,n){document.querySelector("orkestra-ui").className="grid",r.info("parameters=>",e);let i=e.find((e=>{if(e.id==t.id)return!0}));i&&(t.style.top=i.top,t.style.left=i.left,t.style.width=i.width,t.style.height=i.height,t.style.zIndex=i.zindex,t.style.position="absolute")}(JSON.parse(localStorage.getItem("parameters")),e,n.length)}))},unload:function(e){Array.from(e).forEach((e=>{e.style="",e.className=""}))}}}},"./src/orkestra/ui/plugins/divided.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Divided:()=>Divided});n("./src/orkestra/ui/plugins/css/custom.css");var r=n("./src/orkestra/utils/index.js").Logger.getLogger("UI Plugin Divided");function Divided(){return{render:function(e,t,n){var i=n.sequencer?n.sequencer.currentTime:-1;Array.from(t).filter(((e,t,n)=>"none"!=e.style.display)).forEach(((e,t,n)=>{var o,s;void 0===e.order?e.style.order=0:e.style.order=e.order[i],o=e,s=n.length,document.querySelector("orkestra-ui").className="container",r.info("N=>",s),s>6?o.className="item79":5==s||6==s?o.className="item456":3==s||4==s?o.className="item34":2==s?o.className="item24":1==s&&(o.className="item21")}))},unload:function(e){Array.from(e).forEach((e=>{e.style="",e.className=""}))}}}},"./src/orkestra/ui/plugins/editLayout.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{EditLayout:()=>EditLayout});n("./src/orkestra/ui/plugins/css/custom.css");var r=n("./src/orkestra/utils/index.js");r.Logger.getLogger("UI Plugin Edit Layout");function EditLayout(){return{render:function(e,t){document.querySelector("orkestra-ui").className="grid";Array.from(t).filter(((e,t,n)=>(e.shadowRoot.querySelector("#"+e.id+"header")||(e.shadowRoot.innerHTML+="<div id='"+e.id+"header' style='width:100%;height:25px;background:red;position:absolute;top:0px;'> Move <span style='padding-left:68%;cursor:pointer;' id="+e.id+"_backzindex> Back</span><span style='cursor:pointer;' id="+e.id+"_frontzindex>/Front</span></div>",e.shadowRoot.querySelector("#"+e.id+"_backzindex").addEventListener("click",(e=>{console.log(e);let t=e.path[0].id.split("_")[0];document.querySelector("#"+t).style.zIndex-=1})),e.shadowRoot.querySelector("#"+e.id+"_frontzindex").addEventListener("click",(e=>{console.log(e);let t=e.path[0].id.split("_")[0];document.querySelector("#"+t).style.zIndex+=1}))),r.Obj.dragElement(e),"none"!=e.style.display))).forEach(((e,t,n)=>{var r;r=e,n.length,r.className+=-1==r.className.indexOf("resizable")?"resizable":"",r.style.width="400px",r.style.height="auto",r.style.position="absolute",r.style.top=Math.floor(500*Math.random())+100+"px",r.style.left=Math.floor(1e3*Math.random())+1+"px",r.style.zIndex=9999}));let n=document.createElement("button");n.innerHTML="Save",n.id="saveparams",n.addEventListener("click",(e=>{let n=[];Array.from(t).forEach((e=>{let t={};t.width=100*parseInt(e.style.width)/document.body.clientWidth+"%",t.height=100*parseInt(e.style.height)/document.body.clientHeight+"%",t.top=100*parseInt(e.style.top||0)/document.body.clientHeight+"%",t.left=100*parseInt(e.style.left||0)/document.body.clientWidth+"%",t.zindex=e.style.zIndex,t.id=e.id,n.push(t)})),console.log(n),localStorage.setItem("parameters",JSON.stringify(n))})),document.querySelector("#saveparams")||document.body.appendChild(n)},unload:function(e){Array.from(e).forEach((e=>{let t=e.shadowRoot.querySelector("#"+e.id+"header");t&&e.shadowRoot.removeChild(t),e.style="",e.className=""})),document.querySelector("#saveparams")&&document.body.removeChild(document.querySelector("#saveparams"))}}}},"./src/orkestra/ui/plugins/fullscreen.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{FullScreen:()=>i});var r=n("./src/orkestra/utils/index.js");function i(){var e=r.Logger.getLogger("UI Plugin Fullscreen");return{render:function(t,n,r,i){let o=r.getAppAttribute("layout");if(e.debug("Rendering"),t&&"appAttrChange"==t.type||"on"==o.status){let s=i,a=s.componentId;a=o.cmp,t&&t.data.value.cmp&&(a=t.data.value.cmp);let u=Array.from(n).find((e=>e.id==a));Array.from(n).forEach((e=>{e.id!=a&&(e.style.display="none")}));let l=s.agents.find((e=>e.agentid==r.getMyAgentId()));l||e.debug("Not agent's properties found"),u.style="position:absolute;z-index:999",u.style.width=l.screensize.width*s.cols,u.style.height=l.screensize.height*s.rows,u.style.left=-(l.col*l.screensize.width+l.offsetx),u.style.top=-(l.row*l.screensize.height+l.offsety),document.body.style="overflow:hidden"}else if(t.data&&"userData"==t.data.key&&t.data.value&&t.data&&t.data.agentid===r.getMyAgentId()){let e=i.componentId;t&&t.cmp&&(e=t.cmp);let r=Array.from(n).find((t=>t.id==e));Array.from(n).find((t=>{t.id!=e&&(t.style.display="none")})),r.style="position:absolute;z-index:999",r.style.width="100%",r.style.height="100%",r.style.left="0px",r.style.top="0px",document.body.style="overflow:hidden"}},unload:function(t){e.debug("Unloading"),Array.from(t).forEach((e=>{e.style="",e.className=""}))}}}},"./src/orkestra/ui/plugins/mosaic.js":(e,t,n)=>{"use strict";function Mosaic(){return{render:function(e,t,n){document.createElement("div").class="mosaic";var r=n.sequencer?n.sequencer.currentTime:-1,i=Array.from(t).filter(((e,t,n)=>(void 0===e.order&&(e.style.order=0),"none"!=e.style.display)));void 0!==t[0].order&&(i=i.sort(((e,t)=>e.order[r]<t.order[r]?-1:e.order[r]>t.order[r]?1:0))),i.forEach(((e,t,n)=>{var i,o,s;void 0!==e.order&&(e.style.order=e.order[r]),i=e,o=n.length,s=t,document.querySelector("orkestra-ui").className="container",document.querySelector("body").style.overflow="hidden",1==o?(i.style.width="99%",i.style.height="99%",i.style.left="0%",i.style.top="0%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):o<=5?0==s?(i.style.width="99%",i.style.height="69%",i.style.left="0%",i.style.top="30%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):(i.style.width=(100-o+1)/(o-1)+"%",i.style.height="29%",i.style.left=100/(o-1)*(s-1)+"%",i.style.top="0%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):o>5&&(0==s?(i.style.width="49%",i.style.height="49%",i.style.left="25%",i.style.top="25%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):1==s?(i.style.width="49%",i.style.height="24%",i.style.left="0%",i.style.top="0%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):2==s?(i.style.width="49%",i.style.height="24%",i.style.left="50%",i.style.top="0%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):3==s?(i.style.width="49%",i.style.height="24%",i.style.left="0%",i.style.top="75%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):4==s?(i.style.width="49%",i.style.height="24%",i.style.left="50%",i.style.top="75%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):5==s?(i.style.width="24%",i.style.height="24%",i.style.left="0%",i.style.top="25%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):6==s?(i.style.width="24%",i.style.height="24%",i.style.left="0%",i.style.top="50%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):7==s?(i.style.width="24%",i.style.height="24%",i.style.left="75%",i.style.top="25%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"):8==s&&(i.style.width="24%",i.style.height="24%",i.style.left="75%",i.style.top="50%",i.style.position="absolute",i.style.backgroundColor="black",i.style.transition="width 1s, height 1s"))}))},unload:function(e){Array.from(e).forEach((e=>{e.style="",e.className=""}))}}}n.r(t),n.d(t,{Mosaic:()=>Mosaic})},"./src/orkestra/ui/plugins/pipgrid.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{PipGrid:()=>r});n("./src/orkestra/ui/plugins/css/pipgrid.css");function r(){return{render:function(e,t,n){document.querySelector("orkestra-ui").className="containerpipgrid";const r=n.sequencer?n.sequencer.currentTime:-1;Array.from(t).filter(((e,t,n)=>"none"!=e.style.display)).forEach(((e,t,n)=>{void 0===e.order?e.style.order=0:e.style.order=e.order[r],function(e,t,n){if(e.shadowRoot){const t=e.shadowRoot.querySelector("video");t&&(t.style.background="black")}1==t?e.className="fullmain":0==n?(e.className="main",e.style.height="100%"):(e.className="secondary",e.style.height="calc(100% / "+(t-1)+")",e.style.top=100*(n-1)/(t-1)+"%")}(e,n.length,t)}))},unload:function(e){Array.from(e).forEach((e=>{e.style="",e.className=""}))}}}},"./src/orkestra/ui/plugins/tabs.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Tabs:()=>r});n("./src/orkestra/ui/plugins/css/tabs.css");function r(){return{render:function(e,t){var n=function(e){console.log(e),r.forEach((e=>{e.className="tabcontentNone"}));e.currentTarget.id.split("_")[1];document.querySelector("#"+e.currentTarget.data).className="tabcontentDisplay";let t=document.getElementsByClassName("tablinks");for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(" active","");e.currentTarget.className+=" active"},r=Array.from(t).filter(((e,t,n)=>"none"!=e.style.display));document.querySelector(".tablinks")||function(e){let t=document.createElement("div");r.forEach((e=>{e.className="tabcontentNone"})),t.className="tab",e.forEach(((e,r)=>{let i=document.createElement("button");i.className="tablinks",i.innerHTML=e.nodeName,i.data=e.id,i.addEventListener("click",n.bind(this)),t.appendChild(i)})),document.body.prepend(t)}(r)},unload:function(e){Array.from(e).forEach((e=>{e.style="",e.className=""})),document.querySelector(".tab")&&document.body.removeChild(document.querySelector(".tab"))}}}},"./src/orkestra/user.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{User:()=>r});class r{constructor(e,t="",n,r){this.agentid=e,this.name=t,this.profile=n,this.capacities=r}}},"./src/orkestra/utils/URI.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{URI:()=>r});var r={getUrlVar:function(e){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,n,r){t[n]=r}));return t[e]},createToken:function(){var e=function(){return Math.random().toString(36).substr(2)};return e()+e()},shortURL:function(e,t){return new Promise(((n,r)=>{fetch(e+"/api/shorten",{method:"POST",body:JSON.stringify({url:t}),headers:{"Content-Type":"application/json"}}).then((e=>{e.json().then((e=>{console.log("Shorten:"+e.shortUrl),n(JSON.parse('{"response":"'+e.shortUrl+'"}'))}))}))}))}}},"./src/orkestra/utils/hashes.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Hash:()=>r});var r={genRanHex:function(e){return[...Array(e)].map((()=>Math.floor(16*Math.random()).toString(16))).join("")}}},"./src/orkestra/utils/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{URI:()=>r.URI,QRCode:()=>i.QRCode,Hash:()=>o.Hash,Obj:()=>s.Obj,Logger:()=>a.Logger});var r=n("./src/orkestra/utils/URI.js"),i=n("./src/orkestra/utils/qrcode.js"),o=n("./src/orkestra/utils/hashes.js"),s=n("./src/orkestra/utils/object.js"),a=n("./src/orkestra/utils/logger.js")},"./src/orkestra/utils/logger.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Logger:()=>o});var r=n("./node_modules/loglevel/lib/loglevel.js"),i=n.n(r),o={default:{template:"[%t] %l:",levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||"root"},timestampFormatter:function(e){return e.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},getLogger:function(e){let t=i().getLogger(e);return t.setLevel(i().getLevel()),t},setLogLevel:function(e,t){i().setLevel(e),i().getLogger(t).setLevel(e)}}},"./src/orkestra/utils/object.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Obj:()=>i});var r=n("./node_modules/underscore/modules/index-all.js"),i={getObjectDiff:function(e,t){const n=(e,t)=>r.pick(r.mapObject(e,((e,i)=>r.isEqual(e,t[i])?null:r.isObject(e)&&r.isObject(t[i])?n(e,t[i]):e)),(e=>null!==e));return n(e,t)},combine:function(e,t){return Object.assign(e,t)},dragElement:function(e){var t=0,n=0,r=0,i=0;function o(e){(e=e||window.event).preventDefault(),r=e.clientX,i=e.clientY,document.onmouseup=a,document.onmousemove=s}function s(o){(o=o||window.event).preventDefault(),t=r-o.clientX,n=i-o.clientY,r=o.clientX,i=o.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function a(){document.onmouseup=null,document.onmousemove=null}e.shadowRoot.querySelector("#"+e.id+"header")?e.shadowRoot.querySelector("#"+e.id+"header").onmousedown=o:e.onmousedown=o}}},"./src/orkestra/utils/qrcode.js":(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{QRCode:()=>r}),function(){function e(e){this.mode=n.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var i=[],o=this.data.charCodeAt(t);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var n=new e(t);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,n),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=h.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,s=0;s<this.modules[i].length;s++){var a=1*s;this.modules[i][s]&&(r.beginFill(0,100),r.moveTo(a,o),r.lineTo(a+1,o),r.lineTo(a+1,o+1),r.lineTo(a,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=h.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[r+o][i+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},setupTypeNumber:function(e){for(var t=h.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=h.getBCHTypeInfo(n),i=0;i<15;i++){var o=!e&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,o=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var a=0;a<2;a++)if(null==this.modules[r][s-a]){var u=!1;o<e.length&&(u=1==(e[o]>>>i&1)),h.getMask(t,r,s-a)&&(u=!u),this.modules[r][s-a]=u,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){for(var i=v.getRSBlocks(e,n),o=new y,s=0;s<r.length;s++){var a=r[s];o.put(a.mode,4),o.put(a.getLength(),h.getLengthInBits(a.mode,e)),a.write(o)}var u=0;for(s=0;s<i.length;s++)u+=i[s].dataCount;if(o.getLengthInBits()>8*u)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*u+")");for(o.getLengthInBits()+4<=8*u&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*u||(o.put(t.PAD0,8),o.getLengthInBits()>=8*u));)o.put(t.PAD1,8);return t.createBytes(o,i)},t.createBytes=function(e,t){for(var n=0,r=0,i=0,o=new Array(t.length),s=new Array(t.length),a=0;a<t.length;a++){var u=t[a].dataCount,l=t[a].totalCount-u;r=Math.max(r,u),i=Math.max(i,l),o[a]=new Array(u);for(var d=0;d<o[a].length;d++)o[a][d]=255&e.buffer[d+n];n+=u;var c=h.getErrorCorrectPolynomial(l),f=new g(o[a],c.getLength()-1).mod(c);s[a]=new Array(c.getLength()-1);for(d=0;d<s[a].length;d++){var p=d+f.getLength()-s[a].length;s[a][d]=p>=0?f.get(p):0}}var m=0;for(d=0;d<t.length;d++)m+=t[d].totalCount;var v=new Array(m),y=0;for(d=0;d<r;d++)for(a=0;a<t.length;a++)d<o[a].length&&(v[y++]=o[a][d]);for(d=0;d<i;d++)for(a=0;a<t.length;a++)d<s[a].length&&(v[y++]=s[a][d]);return v};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},o=0,s=1,a=2,u=3,l=4,d=5,c=6,f=7,h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;h.getBCHDigit(t)-h.getBCHDigit(h.G15)>=0;)t^=h.G15<<h.getBCHDigit(t)-h.getBCHDigit(h.G15);return(e<<10|t)^h.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;h.getBCHDigit(t)-h.getBCHDigit(h.G18)>=0;)t^=h.G18<<h.getBCHDigit(t)-h.getBCHDigit(h.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return h.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case o:return(t+n)%2==0;case s:return t%2==0;case a:return n%3==0;case u:return(t+n)%3==0;case l:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case d:return t*n%2+t*n%3==0;case c:return(t*n%2+t*n%3)%2==0;case f:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new g([1],0),n=0;n<e;n++)t=t.multiply(new g([1,p.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var o=0,s=e.isDark(r,i),a=-1;a<=1;a++)if(!(r+a<0||t<=r+a))for(var u=-1;u<=1;u++)i+u<0||t<=i+u||0==a&&0==u||s==e.isDark(r+a,i+u)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var l=0;e.isDark(r,i)&&l++,e.isDark(r+1,i)&&l++,e.isDark(r,i+1)&&l++,e.isDark(r+1,i+1)&&l++,0!=l&&4!=l||(n+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var d=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&d++;return n+=10*(Math.abs(100*d/t/t-50)/5)}},p={glog:function(e){if(e<1)throw new Error("glog("+e+")");return p.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return p.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)p.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)p.EXP_TABLE[m]=p.EXP_TABLE[m-4]^p.EXP_TABLE[m-5]^p.EXP_TABLE[m-6]^p.EXP_TABLE[m-8];for(m=0;m<255;m++)p.LOG_TABLE[p.EXP_TABLE[m]]=m;function g(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function v(e,t){this.totalCount=e,this.dataCount=t}function y(){this.buffer=[],this.length=0}g.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=p.gexp(p.glog(this.get(n))+p.glog(e.get(r)));return new g(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=p.glog(this.get(0))-p.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<e.getLength();r++)n[r]^=p.gexp(p.glog(e.get(r))+t);return new g(n,0).mod(e)}},v.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v.getRSBlocks=function(e,t){var n=v.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var s=n[3*o+0],a=n[3*o+1],u=n[3*o+2],l=0;l<s;l++)i.push(new v(a,u));return i},v.getRsBlockTable=function(e,t){switch(t){case i.L:return v.RS_BLOCK_TABLE[4*(e-1)+0];case i.M:return v.RS_BLOCK_TABLE[4*(e-1)+1];case i.Q:return v.RS_BLOCK_TABLE[4*(e-1)+2];case i.H:return v.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},y.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var _=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function E(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var n=t.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(e=parseFloat(n[1]))}return e}var b=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){var t=this._htOption,n=this._el,r=e.getModuleCount();Math.floor(t.width/r),Math.floor(t.height/r);function i(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n}this.clear();var o=i("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:t.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(o),o.appendChild(i("rect",{fill:t.colorLight,width:"100%",height:"100%"})),o.appendChild(i("rect",{fill:t.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<r;s++)for(var a=0;a<r;a++)if(e.isDark(s,a)){var u=i("use",{x:String(a),y:String(s)});u.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(u)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),T="svg"===document.documentElement.tagName.toLowerCase()?b:"undefined"==typeof CanvasRenderingContext2D?function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,n=this._el,r=e.getModuleCount(),i=Math.floor(t.width/r),o=Math.floor(t.height/r),s=['<table style="border:0;border-collapse:collapse;">'],a=0;a<r;a++){s.push("<tr>");for(var u=0;u<r;u++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+"px;background-color:"+(e.isDark(a,u)?t.colorDark:t.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),n.innerHTML=s.join("");var l=n.childNodes[0],d=(t.width-l.offsetWidth)/2,c=(t.height-l.offsetHeight)/2;d>0&&c>0&&(l.style.margin=c+"px "+d+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}():function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function t(e,t){var n=this;if(n._fFail=t,n._fSuccess=e,null===n._bSupportDataURI){var r=document.createElement("img"),i=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)};return r.onabort=i,r.onerror=i,r.onload=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)},void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}var n=function(e,t){this._bIsPainted=!1,this._android=E(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(e){var t=this._elImage,n=this._oContext,r=this._htOption,i=e.getModuleCount(),o=r.width/i,s=r.height/i,a=Math.round(o),u=Math.round(s);t.style.display="none",this.clear();for(var l=0;l<i;l++)for(var d=0;d<i;d++){var c=e.isDark(l,d),f=d*o,h=l*s;n.strokeStyle=c?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=c?r.colorDark:r.colorLight,n.fillRect(f,h,o,s),n.strokeRect(Math.floor(f)+.5,Math.floor(h)+.5,a,u),n.strokeRect(Math.ceil(f)-.5,Math.ceil(h)-.5,a,u)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&t.call(this,e)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},n}();function S(e,t){for(var n=1,r=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),o=0,s=_.length;o<=s;o++){var a=0;switch(t){case i.L:a=_[o][0];break;case i.M:a=_[o][1];break;case i.Q:a=_[o][2];break;case i.H:a=_[o][3]}if(r<=a)break;n++}if(n>_.length)throw new Error("Too long data");return n}r=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"==typeof t&&(t={text:t}),t)for(var n in t)this._htOption[n]=t[n];"string"==typeof e&&(e=document.querySelector(e)),this._htOption.useSVG&&(T=b),this._android=E(),this._el=e,this._oQRCode=null,this._oDrawing=new T(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},r.prototype.makeCode=function(e){this._oQRCode=new t(S(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},r.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},r.prototype.clear=function(){this._oDrawing.clear()},r.CorrectLevel=i}()},"./src/wcs/app.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WCAppTable:()=>r});n("./src/wcs/css/apptable.css");class r extends HTMLElement{static get observedAttributes(){return["datos"]}attributeChangedCallback(e,t,n){this.__initialized&&t!==n&&("no-headers"===e?this.noHeaders=n:this[e]=n)}get datos(){return this.getAttribute("datos")}set datos(e){this.setAttribute("datos",e),this.render()}get value(){return this.__data}set value(e){this.setValue(e)}constructor(){super()}async connectedCallback(){this.__initialized=!0}setValue(e){this.__data=parse(e),this.render()}render(){if("undefined"===this.datos)return;this.__table||(this.__table=document.createElement("table"));const e=document.createElement("h2");if(e.innerHTML="APP DATA",e.id="app_div",this.__headers=["Key","Value"],this.__table.innerHTML="",this.__headers){const e=document.createElement("thead"),t=document.createElement("tr");this.__headers.forEach((e=>{const n=document.createElement("th");n.innerText=e,t.appendChild(n)})),e.append(t),this.__table.appendChild(e)}const t=document.createElement("tbody");var n=JSON.parse(this.datos);Object.keys(n).forEach((e=>{const r=document.createElement("tr"),i=document.createElement("td");i.innerText=e,r.appendChild(i);const o=document.createElement("td");o.innerHTML="<div>"+JSON.stringify(n[e])+"</div>",r.appendChild(o),t.appendChild(r)})),this.__table.id="table",this.__table.appendChild(t),this.querySelector("#app_div")||this.appendChild(e),this.querySelector("#table")||this.appendChild(this.__table)}}customElements.define("app-table",r)},"./src/wcs/css/webrtc.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{buttonClass:()=>r});let r=".btn{\ndisplay: inline-block;\n    font-weight: 400;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    border: 1px solid transparent;\n    padding: .5rem .75rem;\n    font-size: 1rem;\n    line-height: 1.25;\n    border-radius: .25rem;\n    transition: all .15s ease-in-out;\n    cursor:pointer;\n}\n\n.btn-primary {\n    color: #fff;\n    background-color: #007bff;\n    border-color: #007bff;\n}"},"./src/wcs/icons/config.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{svg:()=>r});let r='<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use class="ytp-svg-shadow" xlink:href="#ytp-id-18"></use><path d="m 23.94,18.78 c .03,-0.25 .05,-0.51 .05,-0.78 0,-0.27 -0.02,-0.52 -0.05,-0.78 l 1.68,-1.32 c .15,-0.12 .19,-0.33 .09,-0.51 l -1.6,-2.76 c -0.09,-0.17 -0.31,-0.24 -0.48,-0.17 l -1.99,.8 c -0.41,-0.32 -0.86,-0.58 -1.35,-0.78 l -0.30,-2.12 c -0.02,-0.19 -0.19,-0.33 -0.39,-0.33 l -3.2,0 c -0.2,0 -0.36,.14 -0.39,.33 l -0.30,2.12 c -0.48,.2 -0.93,.47 -1.35,.78 l -1.99,-0.8 c -0.18,-0.07 -0.39,0 -0.48,.17 l -1.6,2.76 c -0.10,.17 -0.05,.39 .09,.51 l 1.68,1.32 c -0.03,.25 -0.05,.52 -0.05,.78 0,.26 .02,.52 .05,.78 l -1.68,1.32 c -0.15,.12 -0.19,.33 -0.09,.51 l 1.6,2.76 c .09,.17 .31,.24 .48,.17 l 1.99,-0.8 c .41,.32 .86,.58 1.35,.78 l .30,2.12 c .02,.19 .19,.33 .39,.33 l 3.2,0 c .2,0 .36,-0.14 .39,-0.33 l .30,-2.12 c .48,-0.2 .93,-0.47 1.35,-0.78 l 1.99,.8 c .18,.07 .39,0 .48,-0.17 l 1.6,-2.76 c .09,-0.17 .05,-0.39 -0.09,-0.51 l -1.68,-1.32 0,0 z m -5.94,2.01 c -1.54,0 -2.8,-1.25 -2.8,-2.8 0,-1.54 1.25,-2.8 2.8,-2.8 1.54,0 2.8,1.25 2.8,2.8 0,1.54 -1.25,2.8 -2.8,2.8 l 0,0 z" fill="orange" id="ytp-id-18"></path></svg>'},"./src/wcs/libs/dash-video-element/dash-3.2.2.all.min.js":(e,t,n)=>{!function e(t,r,i){function o(a,u){if(!r[a]){if(!t[a]){var l=void 0;if(!u&&l)return undefined(a,!0);if(s)return s(a,!0);throw(l=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",n("./src/wcs/libs/dash-video-element sync recursive")}l=r[a]={exports:{}},t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,r,i)}return r[a].exports}for(var s=void 0,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";var r,i,o,u=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},l=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e[n++])<<12),r|=(63&e[n++])<<6),r|=63&e[n++]),t.push(String.fromCharCode(r))}return t.join("")},d={};function c(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var o=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(r.charAt(63&o>>18)),n.push(r.charAt(63&o>>12)),n.push(r.charAt(63&o>>6)),n.push(r.charAt(63&o))}return 2==e.length-t?(o=(e[t]<<16)+(e[t+1]<<8),n.push(r.charAt(63&o>>18)),n.push(r.charAt(63&o>>12)),n.push(r.charAt(63&o>>6)),n.push("=")):1==e.length-t&&(o=e[t]<<16,n.push(r.charAt(63&o>>18)),n.push(r.charAt(63&o>>12)),n.push("==")),n.join("")}function f(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var o=(i[e.charCodeAt(t)]<<18)+(i[e.charCodeAt(t+1)]<<12)+(i[e.charCodeAt(t+2)]<<6)+i[e.charCodeAt(t+3)];n.push(255&o>>16),n.push(255&o>>8),n.push(255&o),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n}r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(){for(var e=[],t=0;t<r.length;++t)e[r.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),o={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},d.decodeArray=function(e){return e=f(e),new Uint8Array(e)},d.encodeASCII=function(e){return c(e=o.encode(e))},d.decodeASCII=function(e){return e=f(e),o.decode(e)},d.encode=function(e){return c(e=u(e))},d.decode=function(e){return e=f(e),l(e)},void 0!==n&&(n.decode=d.decode,n.decodeArray=d.decodeArray,n.encode=d.encode,n.encodeASCII=d.encodeASCII)},{}],2:[function(e,t,n){"use strict";!function(e){function t(e){var t=e;return i.hasOwnProperty(e)&&(t=i[e]),String.fromCharCode(t)}function n(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function r(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var i={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},s={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}};function c(e,t,n,i,o,s){this.uchar=e||" ",this.penState=new r(t,n,i,o,s)}function f(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new c);this.pos=0,this.currPenState=new r}function h(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new f);this.currRow=14,this.nrRollUpRows=null,this.reset()}function p(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function m(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}r.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}},c.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}},f.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var n=t(e);32<=this.pos?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){for(var t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}},h.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];null!==e.indent&&(t=e.indent,t=Math.max(t-1,0),n.setCursor(e.indent),e.color=n.chars[t].penState.foreground),e={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1},this.setPen(e)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){var e;null!==this.nrRollUpRows?(d.log("TEXT",this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(e=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,e),d.log("INFO","Rolling up")):d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t,n=[],r="",i=0;i<15;i++){var o=this.rows[i].getTextString();o&&(t=i+1,e?n.push("Row "+t+': "'+o+'"'):n.push(o.trim()))}return 0<n.length&&(r=e?"["+n.join(" | ")+"]":n.join("\n")),r},getTextAndFormat:function(){return this.rows}},p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){var e;d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())),this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};t.underline=e%2==1,t.italics=46<=e,t.italics?t.foreground="white":(e=Math.floor(e/2)-16,t.foreground=["white","green","blue","cyan","red","yellow","magenta"][e]),d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}},m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var r,i=!1;this.lastTime=e,d.setTime(e);for(var o=0;o<t.length;o+=2){var s=127&t[o],a=127&t[o+1];16<=s&&s<=31&&s===this.lastCmdA&&a===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+n([s,a])+") is dropped")):0!=s||0!=a?(d.log("DATA","["+n([t[o],t[o+1]])+"] -> ("+n([s,a])+")"),(r=(r=(r=(r=this.parseCmd(s,a))||this.parseMidrow(s,a))||this.parsePAC(s,a))||this.parseBackgroundAttributes(s,a))||(i=this.parseChars(s,a))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(i):d.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:i?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+n([s,a])+" orig: "+n([t[o],t[o+1]])))):this.dataCounters.padding+=2}},parseCmd:function(e,t){var n;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var r=null;return(17===e||25===e)&&32<=t&&t<=47&&((r=17===e?1:2)!==this.currChNr?(d.log("ERROR","Mismatch channel in midrow parsing"),!1):((r=this.channels[r-1]).insertChars([32]),r.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+n([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0))},parsePAC:function(e,t){var n,r=null;return((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95)&&(n=e<=23?1:2,r=(64<=t&&t<=95?1==n?o:a:1==n?s:u)[e],r=this.interpretPAC(r,t),this.channels[n-1].setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0)},interpretPAC:function(e,t){var n=t;return(e={color:null,italics:!1,indent:null,underline:!1,row:e}).underline=1==(1&(n=95<t?t-96:t-64)),n<=13?e.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(e.italics=!0,e.color="white"):e.indent=4*Math.floor((n-16)/2),e},parseChars:function(e,r){var i,o,s=null,a=null;return 17<=(o=25<=e?(s=2,e-8):(s=1,e))&&o<=19?(r,i=17===o?r+80:18===o?r+112:r+144,d.log("INFO","Special char '"+t(i)+"' in channel "+s),a=[i],this.lastCmdA=e,this.lastCmdB=r):32<=e&&e<=127&&(a=0===r?[e]:[e,r],this.lastCmdA=null,this.lastCmdB=null),a&&(r=n(a),d.log("DEBUG","Char codes =  "+r.join(","))),a},parseBackgroundAttributes:function(e,t){var n,r;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=e<24?1:2,this.channels[r-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=d,e.PenState=r,e.CaptionScreen=h,e.Cea608Parser=m,e.findCea608Nalus=function(e,t,n){for(var r,i=t,o=[];i<t+n;){if(r=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var s=i+5,a=-1;s<i+4+r-1;){a=0;for(var u=255;255===u;)a+=u=e.getUint8(s),s++;var l=0;for(u=255;255===u;)l+=u=e.getUint8(s),s++;!function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r);e=n.getUint16(r+1),t=n.getUint32(r+3),r=n.getUint8(r+7);return 181==i&&49==e&&1195456820==t&&3==r}(a,l,e,s)||o.push([s,l]),s+=l}i+=r+4}return o},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var o=0;o<i;o++){var s=e.getUint8(n),a=4&s,u=3&s;n++;var l=e.getUint8(n);n++,s=e.getUint8(n),n++,a&&(127&l)+(127&s)!=0&&(0==u?(r[0].push(l),r[0].push(s)):1==u&&(r[1].push(l),r[1].push(s)))}return r}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1);var t=1,n=3,r=4,i=8,o=9;function s(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function a(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function u(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i];if("string"==typeof o){if(o==r)break}else if(o instanceof RegExp){if(o.test(r))break}else if("function"==typeof o&&o(t,n,r))break}return i!=e.length}function l(t,n,r){"property"===e.arrayAccessForm&&(t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]),!(t[n]instanceof Array)&&0<e.arrayAccessFormPaths.length&&u(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function d(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");return n.setHours(t[3],t[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),t[6]&&t[7]?(t=60*t[6]+Number(t[7]),t=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*t:t),n.setMinutes(n.getMinutes()-t-n.getTimezoneOffset())):-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))),n}function c(a,f){if(a.nodeType==o){for(var h=new Object,p=a.childNodes,m=0;m<p.length;m++)(v=p[m]).nodeType==t&&(e.ignoreRoot?h=c(v):(h={})[b=s(v)]=c(v));return h}if(a.nodeType==t){(h=new Object).__cnt=0;var g=[];for(p=a.childNodes,m=0;m<p.length;m++){var v,y,_,E,b=s(v=p[m]);v.nodeType!=i&&(D=h,M=b,N=y=f+"."+b,v.nodeType==t&&0<e.xmlElementsFilter.length&&!u(e.xmlElementsFilter,D,M,N)||(h.__cnt++,null==h[b]?(_=c(v,y),"#text"==b&&!/[^\s]/.test(_)||((E={})[b]=_,g.push(E)),h[b]=_,l(h,b,y)):(null!=h[b]&&(h[b]instanceof Array||(h[b]=[h[b]],l(h,b,y))),_=c(v,y),"#text"==b&&!/[^\s]/.test(_)||((E={})[b]=_,g.push(E)),h[b][h[b].length]=_)))}h.__children=g;for(var T=s(a),S=0;S<a.attributes.length;S++){var w=a.attributes[S];h.__cnt++;for(var A=w.value,R=0,C=e.matchers.length;R<C;R++){var I=e.matchers[R];I.test(w,T)&&(A=I.converter(w.value))}h[e.attributePrefix+w.name]=A}var O=a.prefix;return null!=O&&""!=O&&(h.__cnt++,h.__prefix=O),null!=h["#text"]&&(h.__text=h["#text"],h.__text instanceof Array&&(h.__text=h.__text.join("\n")),e.stripWhitespaces&&(h.__text=h.__text.trim()),delete h["#text"],"property"==e.arrayAccessForm&&delete h["#text_asArray"],h.__text=function(t,n,r){return 0<e.datetimeAccessFormPaths.length?(r=r.split(".#")[0],u(e.datetimeAccessFormPaths,t,n,r)?d(t):t):t}(h.__text,b,f+"."+b)),null!=h["#cdata-section"]&&(h.__cdata=h["#cdata-section"],delete h["#cdata-section"],"property"==e.arrayAccessForm&&delete h["#cdata-section_asArray"]),0==h.__cnt&&"text"==e.emptyNodeForm?h="":1==h.__cnt&&null!=h.__text?h=h.__text:1!=h.__cnt||null==h.__cdata||e.keepCData?1<h.__cnt&&null!=h.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==h.__text||""==h.__text.trim())&&delete h.__text:h=h.__cdata,delete h.__cnt,!e.enableToStringFunc||null==h.__text&&null==h.__cdata||(h.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),h}if(a.nodeType==n||a.nodeType==r)return a.nodeValue;var D,M,N}function f(t,n,r,i){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var s=0;s<r.length;s++){var u=r[s],l=t[u];e.escapeMode&&(l=a(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+(i?"/>":">")}function h(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function p(t,n){return"property"==e.arrayAccessForm&&(i="_asArray",-1!==(r=n.toString()).indexOf(i,r.length-i.length))||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var r,i}function m(e){var t=0;if(e instanceof Object)for(var n in e)p(e,n)||t++;return t}function g(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function v(t){var n,r,i="";return t instanceof Object?i+=(r="",null!=(n=t).__cdata&&(r+="<![CDATA["+n.__cdata+"]]>"),null!=n.__text&&(e.escapeMode?r+=a(n.__text):r+=n.__text),r):null!=t&&(e.escapeMode?i+=a(t):i+=t),i}function y(e,t){return""===e?t:e+"."+t}function _(t,n){var r,i,o,s="";if(0<m(t))for(var a in t)p(t,a)||""!=n&&(r=t,o=y(n,i=a),0!=e.jsonPropertiesFilter.length&&""!=o&&!u(e.jsonPropertiesFilter,r,i,o))||(o=g(i=t[a]),null==i||null==i?s+=f(i,a,o,!0):i instanceof Object?i instanceof Array?s+=function(e,t,n,r){var i="";if(0==e.length)i+=f(e,t,n,!0);else for(var o=0;o<e.length;o++)i+=f(e[o],t,g(e[o]),!1),i+=_(e[o],y(r,t)),i+=h(e[o],t);return i}(i,a,o,n):i instanceof Date?(s+=f(i,a,o,!1),s+=i.toISOString(),s+=h(i,a)):0<m(i)||null!=i.__text||null!=i.__cdata?(s+=f(i,a,o,!1),s+=_(i,y(n,a)),s+=h(i,a)):s+=f(i,a,o,!0):(s+=f(i,a,o,!1),s+=v(i),s+=h(i,a)));return s+v(t)}this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?d(e):e},this.xml2json=function(e){return c(e)},this.xml_str2json=function(e){return null!=(e=this.parseXmlString(e))?this.xml2json(e):null},this.json2xml_str=function(e){return _(e,"")},this.json2xml=function(e){return e=this.json2xml_str(e),this.parseXmlString(e)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),o=e(220),s=r(e(129)),a=r(e(166)),u=r(e(105));e=r(e(45));dashjs.Protection=a.default,dashjs.MetricsReporting=s.default,dashjs.MediaPlayerFactory=u.default,dashjs.Debug=e.default,dashjs.supportsMediaSource=o.supportsMediaSource,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=a.default,n.MetricsReporting=s.default,n.MediaPlayerFactory=u.default,n.Debug=e.default,n.supportsMediaSource=o.supportsMediaSource},{105:105,129:129,166:166,220:220,45:45,5:5}],5:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e(103)),o=n(e(47)),s=n(e(45)),a=e(50),u="undefined"!=typeof window&&window||t;(t=(t=u.dashjs)||(u.dashjs={})).MediaPlayer=i.default,t.FactoryMaker=o.default,t.Debug=s.default,t.Version=(0,a.getVersionString)(),r.default=t,r.MediaPlayer=i.default,r.FactoryMaker=o.default,r.Debug=s.default}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{103:103,45:45,47:47,50:50}],6:[function(e,t,n){"use strict";n.byteLength=function(e){var t;return 3*((e=(t=l(e))[0])+(t=t[1]))/4-t},n.toByteArray=function(e){for(var t,n=(r=l(e))[0],r=r[1],s=new o(function(e,t){return 3*(e+t)/4-t}(n,r)),a=0,u=0<r?n-4:n,d=0;d<u;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===r&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,s[a++]=255&t),1===r&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(e,t,n){for(var i,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(function(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}(i));return o.join("")}(e,s,a<s+16383?a:s+16383));return 1==i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return-1===(e=e.indexOf("="))&&(e=t),[e,e===t?0:4-e%4]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){"use strict";var r=e(6),i=e(13);n.Buffer=a,n.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(o<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');return(e=new Uint8Array(e)).__proto__=a.prototype,e}function a(e,t,n){if("number"!=typeof e)return u(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),r=s(n);return(t=r.write(e,t))!==n&&(r=r.slice(0,t)),r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');return(n=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=a.prototype,n}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);if(r=function(e){if(a.isBuffer(e)){var t=0|f(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||N(e.length)?s(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e),r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),s(e<0?0:0|f(e))}function c(e){for(var t=e.length<0?0:0|f(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(o<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(i)return r?-1:I(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var i,o,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return i=this,s=n,0===(o=t)&&s===i.length?r.fromByteArray(i):r.fromByteArray(i.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),N(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var l=-1,d=n;d<s;d++)if(u(e,d)===u(t,-1===l?0:d-l)){if(-1===l&&(l=d),d-l+1===a)return l*o}else-1!==l&&(d-=d-l),l=-1;else for(s<n+a&&(n=s-a),d=n;0<=d;d--){for(var c=!0,f=0;f<a;f++)if(u(e,d+f)!==u(t,f)){c=!1;break}if(c)return d}return-1}function y(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return D(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,r%=256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,l=e[i],d=null,c=239<l?4:223<l?3:191<l?2:1;if(i+c<=n)switch(c){case 1:l<128&&(d=l);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&l)<<6|63&o)&&(d=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&l)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(d=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(d=u)}null===d?(d=65533,c=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=b));return n}(r)}n.kMaxLength=o,(a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=u,a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return l(e),e<=0||void 0===t?s(e):"string"==typeof n?s(e).fill(t,n):s(e).fill(t)},a.allocUnsafe=d,a.allocUnsafeSlow=d,a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(M(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=a.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(M(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toLocaleString=a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):p.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(M(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),l=this.slice(r,i),d=e.slice(t,n),c=0;c<u;++c)if(l[c]!==d[c]){o=l[c],s=d[c];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i),(i=t.length)/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(N(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,D(I(e,(o=this).length-s),o,s,a);case"ascii":case"latin1":case"binary":return y(this,e,t,n);case"base64":return o=this,s=t,a=n,D(O(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function T(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function w(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,r,o){return t=+t,n>>>=0,o||w(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return t=+t,n>>>=0,o||w(e,0,n,8),i.write(e,t,n,r,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;return(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),(t=this.subarray(e,t)).__proto__=a.prototype,t},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||T(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},a.prototype.readInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||S(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||S(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var C=/[^+/0-9A-Za-z-_]/g;function I(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function O(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}},{13:13,6:6}],9:[function(e,t,n){var r={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){return e=o.create(e),t&&t.append(e,n),e},createFullBox:function(e,t,n){return(n=r.createBox(e,t,n)).version=0,n.flags=0,n},Utils:{}};r.Utils.dataViewToString=function(e,t){if(t=t||"utf-8","undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);var n=[],r=0;if("utf-8"===t)for(;r<e.byteLength;){var i=e.getUint8(r++);i<128||(i<224?i=(31&i)<<6:(i<240?i=(15&i)<<12:(i=(7&i)<<18,i|=(63&e.getUint8(r++))<<12),i|=(63&e.getUint8(r++))<<6),i|=63&e.getUint8(r++)),n.push(String.fromCharCode(i))}else for(;r<e.byteLength;)n.push(String.fromCharCode(e.getUint8(r++)));return n.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var o=0;o<e.boxes.length;o++)if(r===e.boxes[o].type){i=o+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},void 0!==n&&(n.parseBuffer=r.parseBuffer,n.addBoxProcessor=r.addBoxProcessor,n.createFile=r.createFile,n.createBox=r.createBox,n.createFullBox=r.createFullBox,n.Utils=r.Utils),r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){return(e=this.fetchAll(e,!0)).length?e[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){for(var e=0,t=0;t<this.boxes.length;t++)e+=this.boxes[t].getLength(!1);var n=new Uint8Array(e);for(this._rawo=new DataView(n.buffer),this.bytes=n,t=this._cursor.offset=0;t<this.boxes.length;t++)this.boxes[t].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new r.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n);n=this._raw.getInt32(4+n),t=r*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(2+i));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(4+i),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);return 0<t?(e=new Uint8Array(this._raw.buffer,this._cursor.offset,t),this._cursor.offset+=t,e):null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32));t=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(4+n,t)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(2+i,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t);t=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,t)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},o.prototype._boxProcessors.vtte=function(){}},{}],10:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(22)})},{22:22}],11:[function(e,t,n){var r=Object.create||function(e){function t(){}return t.prototype=e,new t},i=Object.keys||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return t},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._maxListeners=void 0;var a,u=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),a=0===l.x}catch(e){a=!1}function d(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=r(null),e._eventsCount=0),s?("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),s.warned||(i=d(e))&&0<i&&s.length>i&&(s.warned=!0,(i=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.')).name="MaxListenersExceededWarning",i.emitter=e,i.type=t,i.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",i.name,i.message))):(s=o[t]=n,++e._eventsCount),e}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=o.call(f,e)).listener=n,e.wrapFn=t}function p(e,t,n){return(e=e._events)&&(t=e[t])?"function"==typeof t?n?[t.listener||t]:[t]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):g(t,t.length):[]}function m(e){var t=this._events;if(t){if("function"==typeof(e=t[e]))return 1;if(e)return e.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):s.defaultMaxListeners=u,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(e,t,n,r){var i,o,s,a="error"===e,u=this._events;if(u)a=a&&null==u.error;else if(!a)return!1;if(a){if(1<arguments.length&&(i=t),i instanceof Error)throw i;throw(a=new Error('Unhandled "error" event. ('+i+")")).context=i,a}if(!(u=u[e]))return!1;var l;e="function"==typeof u;switch(l=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=g(e,r),o=0;o<r;++o)i[o].call(n)}(u,e,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=g(e,i),s=0;s<i;++s)o[s].call(n,r)}(u,e,this,t);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,s=g(e,o),a=0;a<o;++a)s[a].call(n,r,i)}(u,e,this,t,n);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var s=e.length,a=g(e,s),u=0;u<s;++u)a[u].call(n,r,i,o)}(u,e,this,t,n,r);break;default:for(o=new Array(l-1),s=1;s<l;s++)o[s-1]=arguments[s];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=g(e,i),s=0;s<i;++s)o[s].apply(n,r)}(u,e,this,o)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,i,o,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,s=n.length-1;0<=s;s--)if(n[s]===t||n[s].listener===t){a=n[s].listener,o=s;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){for(var o,s=i(n),a=0;a<s.length;++a)"removeListener"!==(o=s[a])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(a=t.length-1;0<=a;a--)this.removeListener(e,t[a]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],12:[function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s,a,u=r(t),l=r(n);if(u&&l){if((d=t.length)!=n.length)return!1;for(s=d;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(u!=l)return!1;if((u=t instanceof Date)!=(l=n instanceof Date))return!1;if(u&&l)return t.getTime()==n.getTime();if((u=t instanceof RegExp)!=(l=n instanceof RegExp))return!1;if(u&&l)return t.toString()==n.toString();var d,c=i(t);if((d=c.length)!==i(n).length)return!1;for(s=d;0!=s--;)if(!o.call(n,c[s]))return!1;for(s=d;0!=s--;)if(!e(t[a=c[s]],n[a]))return!1;return!0}return t!=t&&n!=n}},{}],13:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,d=-7,c=n?i-1:0,f=n?-1:1;n=e[t+c];for(c+=f,o=n&(1<<-d)-1,n>>=-d,d+=a;0<d;o=256*o+e[t+c],c+=f,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=r;0<d;s=256*s+e[t+c],c+=f,d-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=l}return(n?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,u=8*o-i-1,l=(1<<u)-1,d=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1;o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+d?c/r:c*Math.pow(2,1-d))*r&&(s++,r/=2),l<=s+d?(a=0,s=l):1<=s+d?(a=(t*r-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));8<=i;e[n+f]=255&a,f+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+f]=255&s,f+=h,s/=256,u-=8);e[n+f-h]|=128*o}},{}],14:[function(e,t,n){function r(e,t,n,i){var o=i&&"seq"===i.timeContainer,s=0;i&&(s=o&&n?n.end:i.begin),t.begin=t.explicit_begin?t.explicit_begin+s:s;var a,u=t.begin,l=null;for(a in t.sets)r(e,t.sets[a],l,t),u="seq"===t.timeContainer?t.sets[a].end:Math.max(u,t.sets[a].end),l=t.sets[a];if("contents"in t)for(var d in t.contents)r(e,t.contents[d],l,t),u="seq"===t.timeContainer?t.contents[d].end:Math.max(u,t.contents[d].end),l=t.contents[d];else u=o?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,s+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=s+t.explicit_end:t.end=u,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function i(e){this.node=e}function o(){this.events=[],this.head=null,this.body=null}function s(){this.styling=null,this.layout=null}function a(){this.styles={}}function u(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function l(){this.regions={}}function d(e){this.kind=e}function c(e){this.id=e}function f(e){this.regionID=e}function h(e){this.styleAttrs=e}function p(e){this.sets=e}function m(e){this.contents=e}function g(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function v(){d.call(this,"body")}function y(){d.call(this,"div")}function _(){d.call(this,"p")}function E(){d.call(this,"span")}function b(){d.call(this,"span")}function T(){d.call(this,"br")}function S(){}function w(){}function A(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function R(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function C(e,t){var n={};if(null!==e)for(var r in e.attributes){var i,o=e.attributes[r].uri+" "+e.attributes[r].local,s=F.byQName[o];void 0!==s&&(null!==(i=s.parse(e.attributes[r].value))?(n[o]=i,s===F.byName.zIndex&&N(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):P(t,"Cannot parse styling attribute "+o+" --\x3e "+e.attributes[r].value))}return n}function I(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function O(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function D(e,t,n,r){for(var i=t.length-1;0<=i;i--){var o=t[i];o in e.styles?M(e.styles[o].styleAttrs,n):P(r,"Non-existant style id referenced")}}function M(e,t){for(var n in e)n in t||(t[n]=e[n])}function N(e,t){if(e&&e.warn&&e.warn(t))throw t}function P(e,t){if(e&&e.error&&e.error(t))throw t}function x(e,t){throw e&&e.fatal&&e.fatal(t),t}function L(e,t){for(var n,r=0,i=e.length-1;r<=i;){var o=e[n=Math.floor((r+i)/2)];if(o<t)r=n+1;else{if(!(t<o))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}var k,j,F,U;n=void 0===n?this.imscDoc={}:n,k="undefined"==typeof sax?e(40):sax,j="undefined"==typeof imscNames?e(18):imscNames,F="undefined"==typeof imscStyles?e(19):imscStyles,U="undefined"==typeof imscUtils?e(20):imscUtils,n.fromXML=function(e,t,n){var d=k.parser(!0,{xmlns:!0}),c=[],f=[],h=[],p=0,m=null;d.onclosetag=function(e){if(c[0]instanceof a)for(var r in c[0].styles)!function e(t,n,r){for(;0<n.styleRefs.length;){var i=n.styleRefs.pop();i in t.styles?(e(t,t.styles[i],r),M(t.styles[i].styleAttrs,n.styleAttrs)):P(r,"Non-existant style id referenced")}}(c[0],c[0].styles[r],t);else if(c[0]instanceof _||c[0]instanceof E){if(1<c[0].contents.length){for(var o=[c[0].contents[0]],s=1;s<c[0].contents.length;s++)c[0].contents[s]instanceof b&&o[o.length-1]instanceof b?o[o.length-1].text+=c[0].contents[s].text:o.push(c[0].contents[s]);c[0].contents=o}c[0]instanceof E&&1===c[0].contents.length&&c[0].contents[0]instanceof b&&(c[0].text=c[0].contents[0].text,delete c[0].contents)}else c[0]instanceof i&&(c[0].node.uri===j.ns_tt&&"metadata"===c[0].node.local?p--:0<p&&n&&"onCloseTag"in n&&n.onCloseTag());h.shift(),f.shift(),c.shift()},d.ontext=function(e){var r;void 0===c[0]||(c[0]instanceof E||c[0]instanceof _?((r=new b).initFromText(m,c[0],e,h[0],t),c[0].contents.push(r)):c[0]instanceof i&&0<p&&n&&"onText"in n&&n.onText(e))},d.onopentag=function(e){var r,d,g,b,A;if((A=e.attributes["xml:space"])?h.unshift(A.value):0===h.length?h.unshift("default"):h.unshift(h[0]),(A=e.attributes["xml:lang"])?f.unshift(A.value):0===f.length?f.unshift(""):f.unshift(f[0]),e.uri===j.ns_tt?"tt"===e.local?(null!==m&&x(t,"Two <tt> elements at ("+this.line+","+this.column+")"),(m=new o).initFromNode(e,t),c.unshift(m)):"head"===e.local?(c[0]instanceof o||x(t,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==m.head&&x("Second <head> element at ("+this.line+","+this.column+")"),m.head=new s,c.unshift(m.head)):"styling"===e.local?(c[0]instanceof s||x(t,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==m.head.styling&&x("Second <styling> element at ("+this.line+","+this.column+")"),m.head.styling=new a,c.unshift(m.head.styling)):"style"===e.local?c[0]instanceof a?((r=new u).initFromNode(e,t),r.id?m.head.styling.styles[r.id]=r:P(t,"<style> element missing @id attribute"),c.unshift(r)):c[0]instanceof S?((r=new u).initFromNode(e,t),M(r.styleAttrs,c[0].styleAttrs),c.unshift(r)):x(t,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")"):"layout"===e.local?(c[0]instanceof s||x(t,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==m.head.layout&&x(t,"Second <layout> element at "+this.line+","+this.column+")"),m.head.layout=new l,c.unshift(m.head.layout)):"region"===e.local?(c[0]instanceof l||x(t,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")"),(r=new S).initFromNode(m,e,t),!r.id||r.id in m.head.layout.regions?P(t,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):m.head.layout.regions[r.id]=r,c.unshift(r)):"body"===e.local?(c[0]instanceof o||x(t,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==m.body&&x(t,"Second <body> element at "+this.line+","+this.column+")"),(d=new v).initFromNode(m,e,t),m.body=d,c.unshift(d)):"div"===e.local?(c[0]instanceof y||c[0]instanceof v||x(t,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")"),(d=new y).initFromNode(m,c[0],e,t),c[0].contents.push(d),c.unshift(d)):"p"===e.local?(c[0]instanceof y||x(t,"Parent of <p> element is not <div> at "+this.line+","+this.column+")"),(g=new _).initFromNode(m,c[0],e,t),c[0].contents.push(g),c.unshift(g)):"span"===e.local?(c[0]instanceof E||c[0]instanceof _||x(t,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")"),(g=new E).initFromNode(m,c[0],e,h[0],t),c[0].contents.push(g),c.unshift(g)):"br"===e.local?(c[0]instanceof E||c[0]instanceof _||x(t,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")"),(b=new T).initFromNode(m,c[0],e,t),c[0].contents.push(b),c.unshift(b)):"set"===e.local?(c[0]instanceof E||c[0]instanceof _||c[0]instanceof y||c[0]instanceof v||c[0]instanceof S||c[0]instanceof T||x(t,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")"),(b=new w).initFromNode(m,c[0],e,t),c[0].sets.push(b),c.unshift(b)):c.unshift(new i(e)):c.unshift(new i(e)),c[0]instanceof i)if(e.uri===j.ns_tt&&"metadata"===e.local)p++;else if(0<p&&n&&"onOpenTag"in n){var R,C=[];for(R in e.attributes)C[e.attributes[R].uri+" "+e.attributes[R].local]={uri:e.attributes[R].uri,local:e.attributes[R].local,value:e.attributes[R].value};n.onOpenTag(e.uri,e.local,C)}},d.write(e).close(),null!==m.head?delete m.head.styling:m.head=new s,null===m.head.layout&&(m.head.layout=new l);var g,A,R=!1;for(g in m.head.layout.regions){R=!0;break}for(A in R||(e=S.prototype.createDefaultRegion(),m.head.layout.regions[e.id]=e),m.head.layout.regions)r(m,m.head.layout.regions[A],null,null);return m.body&&r(m,m.body,null,null),m},o.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=I(e,j.ns_ttp,"cellResolution"),r=15;e=32;return null!==n&&(null!==(n=/(\d+) (\d+)/.exec(n))?(e=parseInt(n[1]),r=parseInt(n[2])):N(t,"Malformed cellResolution value (using initial value instead)")),{w:e,h:r}}(e,t);var n=function(e,t){var n,r=I(e,j.ns_ttp,"frameRate"),i=30;null!==r&&(null!==(n=/(\d+)/.exec(r))?i=parseInt(n[1]):N(t,"Malformed frame rate attribute (using initial value instead)"));var o=I(e,j.ns_ttp,"frameRateMultiplier"),s=1;return null!==o&&(null!==(n=/(\d+) (\d+)/.exec(o))?s=parseInt(n[1])/parseInt(n[2]):N(t,"Malformed frame rate multiplier attribute (using initial value instead)")),s*=i,i=1,null===(e=I(e,j.ns_ttp,"tickRate"))?null!==r&&(i=s):null!==(n=/(\d+)/.exec(e))?i=parseInt(n[1]):N(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:s,tickRate:i}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=I(e,j.ns_ittp,"aspectRatio"),r=null;return null!==n&&(null!==(e=/(\d+) (\d+)/.exec(n))?(n=parseInt(e[1]),e=parseInt(e[2]),0!==n&&0!==e?r=n/e:P(t,"Illegal aspectRatio values (ignoring)")):P(t,"Malformed aspectRatio attribute (ignoring)")),r}(e,t),null!==(n=I(e,j.ns_ttp,"timeBase"))&&"media"!==n&&x(t,"Unsupported time base"),e=function(e,t){var n=I(e,j.ns_tts,"extent");return null===n?null:2!==(e=n.split(" ")).length?(N(t,"Malformed extent (ignoring)"),null):(n=U.parseLength(e[0]),(e=U.parseLength(e[1]))&&n?{h:e,w:n}:(N(t,"Malformed extent values (ignoring)"),null))}(e,t),null===e?this.pxDimensions={h:480,w:640}:("px"===e.h.unit&&"px"===e.w.unit||x(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:e.h.value,w:e.w.value})},o.prototype._registerEvent=function(e){var t;e.end<=e.begin||((t=L(this.events,e.begin)).found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY&&((t=L(this.events,e.end)).found||this.events.splice(t.index,0,e.end)))},o.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},o.prototype.getMediaTimeEvents=function(){return this.events},u.prototype.initFromNode=function(e,t){this.id=A(e),this.styleAttrs=C(e,t),this.styleRefs=R(e)},c.prototype.initFromNode=function(e,t,n,r){this.id=A(n)},f.prototype.initFromNode=function(e,t,n,r){this.regionID=n&&"region"in n.attributes?n.attributes.region.value:""},h.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=C(n,r),null!==e.head&&null!==e.head.styling&&D(e.head.styling,R(n),this.styleAttrs,r)},p.prototype.initFromNode=function(e,t,n,r){this.sets=[]},m.prototype.initFromNode=function(e,t,n,r){this.contents=[]},g.prototype.initFromNode=function(e,t,n,r){e=function(e,t,n){var r=null;t&&"begin"in t.attributes&&null===(r=O(e.tickRate,e.effectiveFrameRate,t.attributes.begin.value))&&N(n,"Malformed begin value "+t.attributes.begin.value+" (using 0)");var i=null;t&&"dur"in t.attributes&&null===(i=O(e.tickRate,e.effectiveFrameRate,t.attributes.dur.value))&&N(n,"Malformed dur value "+t.attributes.dur.value+" (ignoring)");var o=null;return t&&"end"in t.attributes&&null===(o=O(e.tickRate,e.effectiveFrameRate,t.attributes.end.value))&&N(n,"Malformed end value (ignoring)"),{explicit_begin:r,explicit_end:o,explicit_dur:i}}(e,n,r),this.explicit_begin=e.explicit_begin,this.explicit_end=e.explicit_end,this.explicit_dur=e.explicit_dur,this.timeContainer=function(e,t){return(e=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null)&&"par"!==e?"seq"===e?"seq":(P(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},v.prototype.initFromNode=function(e,t,n){h.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),p.prototype.initFromNode.call(this,e,null,t,n),f.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n)},y.prototype.initFromNode=function(e,t,n,r){h.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),f.prototype.initFromNode.call(this,e,t,n,r),m.prototype.initFromNode.call(this,e,t,n,r)},_.prototype.initFromNode=function(e,t,n,r){h.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),f.prototype.initFromNode.call(this,e,t,n,r),m.prototype.initFromNode.call(this,e,t,n,r)},E.prototype.initFromNode=function(e,t,n,r,i){h.prototype.initFromNode.call(this,e,t,n,i),g.prototype.initFromNode.call(this,e,t,n,i),p.prototype.initFromNode.call(this,e,t,n,i),f.prototype.initFromNode.call(this,e,t,n,i),m.prototype.initFromNode.call(this,e,t,n,i),this.space=r},b.prototype.initFromText=function(e,t,n,r,i){g.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},T.prototype.initFromNode=function(e,t,n,r){f.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r)},S.prototype.createDefaultRegion=function(){var e=new S;return c.call(e,""),h.call(e,{}),p.call(e,[]),g.call(e,0,Number.POSITIVE_INFINITY,null),e},S.prototype.initFromNode=function(e,t,n){c.prototype.initFromNode.call(this,e,null,t,n),h.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),p.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&D(e.head.styling,R(t),this.styleAttrs,n)},w.prototype.initFromNode=function(e,t,n,r){g.prototype.initFromNode.call(this,e,t,n,r);var i,o=C(n,r);for(i in this.qname=null,this.value=null,o){if(this.qname){P(r,"More than one style specified on set");break}this.qname=i,this.value=o[i]}}},{18:18,19:19,20:20,40:40}],15:[function(e,t,n){!function(e,t){function n(e,t,n){for(var r in e){var i=e[r].elements.length,o=e[r].elements[e[r].start_elem],s=e[r].elements[e[r].end_elem],a=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=a,o.node.style.marginLeft=u):"rl"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=a,o.node.style.marginRight=u):"tb"===n.ipd&&(o.node.style.borderTopColor=o.bgcolor||"#00000000",o.node.style.borderTopStyle="solid",o.node.style.borderTopWidth=a,o.node.style.marginTop=u),"lr"===n.ipd?(s.node.style.borderRightColor=s.bgcolor||"#00000000",s.node.style.borderRightStyle="solid",s.node.style.borderRightWidth=a,s.node.style.marginRight=u):"rl"===n.ipd?(s.node.style.borderLeftColor=s.bgcolor||"#00000000",s.node.style.borderLeftStyle="solid",s.node.style.borderLeftWidth=a,s.node.style.marginLeft=u):"tb"===n.ipd&&(s.node.style.borderBottomColor=s.bgcolor||"#00000000",s.node.style.borderBottomStyle="solid",s.node.style.borderBottomWidth=a,s.node.style.marginBottom=u))}}function r(e){for(var t=0;t<e.length-1;t++){var n,r=e[t].elements.length;0!==r&&!1===e[t].br&&(n=document.createElement("br"),(r=e[t].elements[r-1].node).parentElement.insertBefore(n,r.nextSibling))}}function i(e,t,n,r){for(var i=Math.sign(n-t),o=0;o<=e.length;o++){var s,a,u=0===o?t:o===e.length?n:(e[o].before+e[o-1].after)/2;if(0<o)for(var l=0;l<e[o-1].elements.length;l++)null!==e[o-1].elements[l].bgcolor&&i*((a=e[o-1].elements[l]).after-u)<0&&(s=Math.ceil(Math.abs(u-a.after))+"px",a.node.style.backgroundColor=a.bgcolor,"lr"===r.bpd?a.node.style.paddingRight=s:"rl"===r.bpd?a.node.style.paddingLeft=s:"tb"===r.bpd&&(a.node.style.paddingBottom=s));if(o<e.length)for(var d=0;d<e[o].elements.length;d++)null!==(a=e[o].elements[d]).bgcolor&&0<i*(a.before-u)&&(s=Math.ceil(Math.abs(a.before-u))+"px",a.node.style.backgroundColor=a.bgcolor,"lr"===r.bpd?a.node.style.paddingLeft=s:"rl"===r.bpd?a.node.style.paddingRight=s:"tb"===r.bpd&&(a.node.style.paddingTop=s))}}function o(e,t){this.id=e,this.plist=t}function s(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function a(e,t,n,r){var i=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var o=t.getBoundingClientRect();if(0===o.height||0===o.width)return;var u,l,d=s(o,e);0!==n.length&&(u=d.before,r=d.after,l=n[n.length-1].before,r<(o=n[n.length-1].after)&&l<u||o<=r&&u<=l)?(u=Math.sign(d.after-d.before),l=Math.sign(d.end-d.start),u*(d.before-n[n.length-1].before)<0&&(n[n.length-1].before=d.before),0<u*(d.after-n[n.length-1].after)&&(n[n.length-1].after=d.after),l*(d.start-n[n.length-1].start)<0&&(n[n.length-1].start=d.start,n[n.length-1].start_elem=n[n.length-1].elements.length),0<l*(d.end-n[n.length-1].end)&&(n[n.length-1].end=d.end,n[n.length-1].end_elem=n[n.length-1].elements.length)):n.push({before:d.before,after:d.after,start:d.start,end:d.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1}),n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:i,before:d.before,after:d.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var c=t.firstChild;c;)c.nodeType===Node.ELEMENT_NODE&&a(e,c,n,i),c=c.nextSibling}function u(e,t){this.qname=e,this.map=t}e.render=function(e,u,l,c,h,p,m,g,v){var y=c||u.clientHeight;c=h||u.clientWidth;null!==e.aspectRatio&&(c<(h=y*e.aspectRatio)?y=Math.round(c/e.aspectRatio):c=h);var _=document.createElement("div");_.style.position="relative",_.style.width=c+"px",_.style.height=y+"px",_.style.margin="auto",_.style.top=0,_.style.bottom=0,_.style.left=0,_.style.right=0,_.style.zIndex=0;var E,b={h:y,w:c,regionH:null,regionW:null,imgResolver:l,displayForcedOnlyMode:p||!1,isd:e,errorHandler:m,previousISDState:g,enableRollUp:v||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(E in u.appendChild(_),e.contents)!function e(u,l,c){var h;if("region"===c.kind?(h=document.createElement("div")).style.position="absolute":"body"===c.kind||"div"===c.kind?h=document.createElement("div"):"p"===c.kind?h=document.createElement("p"):"span"===c.kind?h=document.createElement("span"):"br"===c.kind&&(h=document.createElement("br")),h){for(var p in h.style.margin="0",d){var m=d[p],g=c.styleAttrs[m.qname];void 0!==g&&null!==m.map&&m.map(u,h,c,g)}var v=h;"region"===c.kind&&("lrtb"===(y=c.styleAttrs[t.byName.writingMode.qname])||"lr"===y?(u.ipd="lr",u.bpd="tb"):"rltb"===y||"rl"===y?(u.ipd="rl",u.bpd="tb"):"tblr"===y?(u.ipd="tb",u.bpd="lr"):"tbrl"!==y&&"tb"!==y||(u.ipd="tb",u.bpd="rl"));var y=c.styleAttrs[t.byName.linePadding.qname];y&&0<y&&(E=Math.ceil(y*u.h)+"px","tb"===u.bpd?(v.style.paddingLeft=E,v.style.paddingRight=E):(v.style.paddingTop=E,v.style.paddingBottom=E),u.lp=y);var _,E=c.styleAttrs[t.byName.multiRowAlign.qname];if(E&&"auto"!==E&&((y=document.createElement("span")).style.display="inline-block",y.style.textAlign=E,h.appendChild(y),v=y,u.mra=E),c.styleAttrs[t.byName.fillLineGap.qname]&&(u.flg=!0),"span"===c.kind&&c.text)if(u.lp||u.mra||u.flg)for(var b="",T=0;T<c.text.length;T++){b+=c.text.charAt(T);var S=c.text.charCodeAt(T);(S<55296||56319<S||T===c.text.length)&&((S=document.createElement("span")).textContent=b,h.appendChild(S),b="")}else h.textContent=c.text;for(var w in l.appendChild(h),c.contents)e(u,v,c.contents[w]);l=[],(u.lp||u.mra||u.flg)&&"p"===c.kind&&(a(u,v,l,null),u.mra&&(r(l),u.mra=null),u.lp&&(n(l,u.lp*u.h,u),u.lp=null),u.flg&&(i(l,(_=s(v.getBoundingClientRect(),u)).before,_.after,u),u.flg=null)),"region"===c.kind&&(a(u,v,l),"tb"===u.bpd&&u.enableRollUp&&0<c.contents.length&&"after"===c.styleAttrs[t.byName.displayAlign.qname]&&(_=new o(_=""===c.id?"_":c.id,l),u.currentISDState[_.id]=_,u.previousISDState&&_.id in u.previousISDState&&0<u.previousISDState[_.id].plist.length&&1<_.plist.length&&_.plist[_.plist.length-2].text===u.previousISDState[_.id].plist[u.previousISDState[_.id].plist.length-1].text&&(l=h.firstElementChild,_=_.plist[_.plist.length-1].after-_.plist[_.plist.length-1].before,l.style.bottom="-"+_+"px",l.style.transition="transform 0.4s",l.style.position="relative",l.style.transform="translateY(-"+_+"px)")))}else f(u.errorHandler,"Error processing ISD element kind: "+c.kind)}(b,_,e.contents[E]);return b.currentISDState};var l,d=[new u("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new u("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new u("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,r){t.style.direction=r})),new u("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,r){})),new u("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")})),new u("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0;r=0;(n=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"])&&(i=(n[0]+n[2])*e.h,r=(n[1]+n[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-r+"px"})),new u("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,r){var i,o=[];for(i in r)"monospaceSerif"===r[i]?(o.push("Courier New"),o.push('"Liberation Mono"'),o.push("Courier"),o.push("monospace")):"proportionalSansSerif"===r[i]?(o.push("Arial"),o.push("Helvetica"),o.push('"Liberation Sans"'),o.push("sans-serif")):"monospace"===r[i]?o.push("monospace"):"sansSerif"===r[i]?o.push("sans-serif"):"serif"===r[i]?o.push("serif"):"monospaceSansSerif"===r[i]?(o.push("Consolas"),o.push("monospace")):"proportionalSerif"===r[i]?o.push("serif"):o.push(r[i]);t.style.fontFamily=o.join(",")})),new u("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,r){t.style.fontSize=r*e.h+"px"})),new u("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,r){t.style.fontStyle=r})),new u("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,r){t.style.fontWeight=r})),new u("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"})),new u("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,r){t.style.opacity=r})),new u("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"})),new u("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,r){t.style.overflow=r})),new u("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")})),new u("http://www.w3.org/ns/ttml#styling showBackground",null),new u("http://www.w3.org/ns/ttml#styling textAlign",(function(e,n,r,i){r=r.styleAttrs[t.byName.direction.qname],i="start"===i?"rtl"===r?"right":"left":"end"===i?"rtl"===r?"left":"right":i,n.style.textAlign=i})),new u("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new u("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"})),new u("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,r){r="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=r})),new u("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,r){t.style.visibility=r})),new u("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new u("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")})),new u("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,r){t.style.zIndex=r})),new u("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(e,t,n,r){var i;null!==e.imgResolver&&null!==r&&(i=document.createElement("img"),(r=e.imgResolver(r,i))&&(i.src=r),i.height=e.regionH,i.width=e.regionW,t.appendChild(i))})),new u("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")}))],c={};for(l in d)c[d[l].qname]=d[l];function f(e,t){if(e&&e.error&&e.error(t))throw t}}(void 0===n?this.imscHTML={}:n,("undefined"==typeof imscNames&&e(18),"undefined"==typeof imscStyles?e(19):imscStyles))},{18:18,19:19}],16:[function(e,t,n){function r(e,t){if("contents"in e)for(var n in e.contents)r(e.contents[n],t);else t.push(e)}function i(e){if("br"!==e.kind){if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)i(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}}function o(e){this.contents=[],this.aspectRatio=e.aspectRatio}function s(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function a(e,t){if(e&&e.error&&e.error(t))throw t}var u;n=void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames&&e(18),u="undefined"==typeof imscStyles?e(19):imscStyles,n.generateISD=function(e,t,n){var l,d=new o(e),c={};for(l in e.head.layout.regions){var f=function e(t,n,o,l,d,c,f,h,p){if(n<f.begin||n>=f.end)return null;var m="regionID"in f&&""!==f.regionID?f.regionID:c;if(null!==d&&m!==o.id&&(!("contents"in f)||"contents"in f&&0===f.contents.length||""!==m))return null;var g=new s(f);for(var v in f.sets)n<f.sets[v].begin||n>=f.sets[v].end||(g.styleAttrs[f.sets[v].qname]=f.sets[v].value);var y,_={};for(var E in g.styleAttrs){var b;_[E]=!0,E!==u.byName.writingMode.qname||u.byName.direction.qname in g.styleAttrs||("lrtb"===(b=g.styleAttrs[E])||"lr"===b?g.styleAttrs[u.byName.direction.qname]="ltr":"rltb"!==b&&"rl"!==b||(g.styleAttrs[u.byName.direction.qname]="rtl"))}if(null!==d)for(var T in u.all){var S,w,A,R=u.all[T];R.qname===u.byName.textDecoration.qname?(S=d.styleAttrs[R.qname],A=[],void 0===(w=g.styleAttrs[R.qname])?A=S:-1===w.indexOf("none")?((-1===w.indexOf("noUnderline")&&-1!==S.indexOf("underline")||-1!==w.indexOf("underline"))&&A.push("underline"),(-1===w.indexOf("noLineThrough")&&-1!==S.indexOf("lineThrough")||-1!==w.indexOf("lineThrough"))&&A.push("lineThrough"),(-1===w.indexOf("noOverline")&&-1!==S.indexOf("overline")||-1!==w.indexOf("overline"))&&A.push("overline")):A.push("none"),g.styleAttrs[R.qname]=A):R.inherit&&R.qname in d.styleAttrs&&!(R.qname in g.styleAttrs)&&(g.styleAttrs[R.qname]=d.styleAttrs[R.qname])}for(var C in u.all){var I=u.all[C];I.qname in g.styleAttrs||("region"===g.kind||!1===I.inherit&&null!==I.initial)&&(g.styleAttrs[I.qname]=I.parse(I.initial),_[I.qname]=!0)}for(var O in u.all){var D,M=u.all[O];M.qname in _&&null!==M.compute&&(null!==(D=M.compute(t,d,g,g.styleAttrs[M.qname],p))?g.styleAttrs[M.qname]=D:a(h,"Style '"+M.qname+"' on element '"+g.kind+"' cannot be computed"))}if("none"===g.styleAttrs[u.byName.display.qname])return null;for(var N in null===d?y=null===l?[]:[l]:"contents"in f&&(y=f.contents),y){var P=e(t,n,o,l,g,m,y[N],h,p);null!==P&&g.contents.push(P.element)}for(var x in g.styleAttrs){-1===u.byQName[x].applies.indexOf(g.kind)&&delete g.styleAttrs[x]}if("span"===g.kind&&g.text&&"default"===g.space&&(c=g.text.replace(/\s+/g," "),g.text=c),"p"===g.kind){var L=[];r(g,L);for(var k=0,j="after_br",F=0;;)if("after_br"===j)k>=L.length||"br"===L[k].kind?(j="before_br",F=k,k--):("preserve"!==L[k].space&&(L[k].text=L[k].text.replace(/^\s+/g,"")),0<L[k].text.length?(j="looking_br",k++):L.splice(k,1));else if("before_br"===j)if(k<0||"br"===L[k].kind){if(j="after_br",(k=F+1)>=L.length)break}else if("preserve"!==L[k].space&&(L[k].text=L[k].text.replace(/\s+$/g,"")),0<L[k].text.length){if(j="after_br",(k=F+1)>=L.length)break}else L.splice(k,1),k--;else k>=L.length||"br"===L[k].kind?(j="before_br",F=k,k--):k++;i(g)}return"div"===g.kind&&u.byName.backgroundImage.qname in g.styleAttrs||"br"===g.kind||"contents"in g&&0<g.contents.length||"span"===g.kind&&null!==g.text||"region"===g.kind&&"always"===g.styleAttrs[u.byName.showBackground.qname]?{region_id:m,element:g}:null}(e,t,e.head.layout.regions[l],e.body,null,"",e.head.layout.regions[l],n,c);null!==f&&d.contents.push(f.element)}return d}},{18:18,19:19}],17:[function(e,t,n){n.generateISD=e(16).generateISD,n.fromXML=e(14).fromXML,n.renderHTML=e(15).render},{14:14,15:15,16:16}],18:[function(e,t,n){(n=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",n.ns_tts="http://www.w3.org/ns/ttml#styling",n.ns_ttp="http://www.w3.org/ns/ttml#parameter",n.ns_xml="http://www.w3.org/XML/1998/namespace",n.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",n.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",n.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",n.ns_ebutts="urn:ebu:tt:style"},{}],19:[function(e,t,n){!function(e,t,n){function r(e,t,n,r,i,o,s,a){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=o,this.initial=n,this.applies=r,this.parse=s,this.compute=a}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");return 2!==t.length?null:(e=n.parseLength(t[0]),(t=n.parseLength(t[1]))&&e?{h:t,w:e}:null)}),(function(e,t,n,r,i){var o,s;if("auto"===r)o=1;else if("%"===r.h.unit)o=r.h.value/100;else{if("px"!==r.h.unit)return null;o=r.h.value/e.pxDimensions.h}if("auto"===r)s=1;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/e.pxDimensions.w}return{h:o,w:s}})),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e){var t,n=e.split(","),r=[];for(t in n)"'"!==n[t].charAt(0)&&'"'!==n[t].charAt(0)&&"default"===n[t]?r.push("monospaceSerif"):r.push(n[t]);return r}),null),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(t,n,r,i,o){var s;if("%"===i.unit)s=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value/100:i.value/100/t.cellResolution.h;else if("em"===i.unit)s=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value:i.value/t.cellResolution.h;else if("c"===i.unit)s=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/t.pxDimensions.h}return s})),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:n.parseLength(e)}),(function(t,n,r,i,o){var s;if("normal"===i)s=i;else if("%"===i.unit)s=r.styleAttrs[e.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)s=r.styleAttrs[e.byName.fontSize.qname]*i.value;else if("c"===i.unit)s=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/t.pxDimensions.h}return s})),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");return 2!==t.length?null:(e=n.parseLength(t[0]),(t=n.parseLength(t[1]))&&e?{h:t,w:e}:null)}),(function(e,t,n,r,i){var o,s;if("auto"===r)o=0;else if("%"===r.h.unit)o=r.h.value/100;else{if("px"!==r.h.unit)return null;o=r.h.value/e.pxDimensions.h}if("auto"===r)s=0;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/e.pxDimensions.w}return{h:o,w:s}})),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(4<t.length)return null;var r,i=[];for(r in t){var o=n.parseLength(t[r]);if(!o)return null;i.push(o)}return i}),(function(t,n,r,i,o){var s;if(1===i.length)s=[i[0],i[0],i[0],i[0]];else if(2===i.length)s=[i[0],i[1],i[0],i[1]];else if(3===i.length)s=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;s=[i[0],i[1],i[2],i[3]]}if("lrtb"===(i=r.styleAttrs[e.byName.writingMode.qname])||"lr"===i)s=[s[0],s[3],s[2],s[1]];else if("rltb"===i||"rl"===i)s=[s[0],s[1],s[2],s[3]];else if("tblr"===i)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==i&&"tb"!==i)return null;s=[s[3],s[2],s[1],s[0]]}var a,u=[];for(a in s)if(0===s[a].value)u[a]=0;else if("%"===s[a].unit)u[a]="0"===a||"2"===a?r.styleAttrs[e.byName.extent.qname].h*s[a].value/100:r.styleAttrs[e.byName.extent.qname].w*s[a].value/100;else if("em"===s[a].unit)u[a]=r.styleAttrs[e.byName.fontSize.qname]*s[a].value;else if("c"===s[a].unit)u[a]=s[a].value/t.cellResolution.h;else{if("px"!==s[a].unit)return null;u[a]="0"===a||"2"===a?s[a].value/t.pxDimensions.h:s[a].value/t.pxDimensions.w}return u})),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){if("none"===e)return e;var t={},r=e.split(" ");return 0===r.length||2<r.length?null:(e=n.parseColor(r[0]),null!==(t.color=e)&&r.shift(),1!==r.length?null:(r=n.parseLength(r[0]))?(t.thickness=r,t):null)}),(function(t,n,r,i,o){if("none"===i)return i;var s={};if(null===i.color?s.color=r.styleAttrs[e.byName.color.qname]:s.color=i.color,"%"===i.thickness.unit)s.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)s.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)s.thickness=i.thickness.value/t.cellResolution.h;else{if("px"!==i.thickness.unit)return null;s.thickness=i.thickness.value/t.pxDimensions.h}return s})),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(e,t,n,r,i){return"c"===r.unit?r.value/e.cellResolution.h:null})),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var o in e.byName={},e.all)e.byName[e.all[o].name]=e.all[o]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(18):imscNames,"undefined"==typeof imscUtils?e(20):imscUtils)},{18:18,20:20}],20:[function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var o=null,s=i[e.toLowerCase()];return void 0!==s?o=s:null!==(s=t.exec(e))?o=[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16),void 0!==s[4]?parseInt(s[4],16):255]:null!==(s=n.exec(e))?o=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),255]:null!==(s=r.exec(e))&&(o=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),parseInt(s[4])]),o};var o=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t=null;return null!==(e=o.exec(e))&&(t={value:parseFloat(e[1]),unit:e[2]}),t}}(void 0===n?this.imscUtils={}:n)},{}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],23:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],24:[function(e,t,n){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,e(25))},{25:25}],25:[function(e,t,n){var r,i;t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,l=[],d=!1,c=-1;function f(){d&&u&&(d=!1,u.length?l=u.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=a(f);d=!0;for(var t=l.length;t;){for(u=l,l=[];++c<t;)u&&u[c].run();c=-1,t=l.length}u=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||d||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],26:[function(e,t,n){t.exports=e(27)},{27:27}],27:[function(e,t,n){"use strict";var r=e(24),i=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n};t.exports=d,(t=e(10)).inherits=e(21);var o=e(29),s=e(31);t.inherits(d,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var l=a[u];d.prototype[l]||(d.prototype[l]=s.prototype[l])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{10:10,21:21,24:24,29:29,31:31}],28:[function(e,t,n){"use strict";t.exports=i;var r=e(30);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}(t=e(10)).inherits=e(21),t.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{10:10,21:21,30:30}],29:[function(e,t,r){(function(n,r){"use strict";var i=e(24);t.exports=v;var o,s=e(23);function a(e,t){return e.listeners(t).length}v.ReadableState=g,e(11).EventEmitter;var u=e(34),l=e(39).Buffer,d=r.Uint8Array||function(){},c=e(10);c.inherits=e(21);r=e(7);var f,h=void 0,p=(h=r&&r.debuglog?r.debuglog("stream"):function(){},e(32));r=e(33);c.inherits(v,u);var m=["error","close","destroy","pause","resume"];function g(t,n){t=t||{};var r=n instanceof(o=o||e(27));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark;n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(f=f||e(42).StringDecoder,this.decoder=new f(t.encoding),this.encoding=t.encoding)}function v(t){if(o=o||e(27),!(this instanceof v))return new v(t);this._readableState=new g(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function y(e,t,n,r,i){var o,s=e._readableState;return null===t?(s.reading=!1,function(e,t){var n;t.ended||(!t.decoder||(n=t.decoder.end())&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length),t.ended=!0,T(e))}(e,s)):(i||(o=function(e,t){var n;return function(e){return l.isBuffer(e)||e instanceof d}(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,t)),o?e.emit("error",o):s.objectMode||t&&0<t.length?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(o=t,t=l.from(o)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):w(e,s)):_(e,s,t,!1))):r||(s.reading=!1)),!s.ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function _(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),w(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=r.destroy,v.prototype._undestroy=r.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),y(this,e,t,!1,n)},v.prototype.unshift=function(e){return y(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return f=f||e(42).StringDecoder,this._readableState.decoder=new f(t),this._readableState.encoding=t,this};var E=8388608;function b(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(E<=(n=e)?n=E:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(S,e):S(e))}function S(e){h("emit readable"),e.emit("readable"),I(e)}function w(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function R(e){h("readable nexttick read 0"),e.read(0)}function C(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function O(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():(n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0==(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=o.slice(s);break}++r}return t.length-=r,i}:function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0==(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=o.slice(s);break}++i}return t.length-=i,n})(e,t),r}(e,t.buffer,t.decoder),n);var n}function D(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}v.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?D:T)(this),null;if(0===(e=b(e,t))&&t.ended)return 0===t.length&&D(this),null;var r=t.needReadable;return h("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",r=!0),t.ended||t.reading?h("reading or ended",r=!1):r&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=b(n,t))),null===(r=0<e?O(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}function u(){h("onend"),e.end()}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,t),t=t&&!1===t.end||e===n.stdout||e===n.stderr?y:u,o.endEmitted?i.nextTick(t):r.once("end",t),e.on("unpipe",(function t(n,i){h("onunpipe"),n===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),e.removeListener("close",g),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",m),e.removeListener("unpipe",t),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",p),c=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}));var l,d=(l=r,function(){var e=l._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(l,"data")&&(e.flowing=!0,I(l))});e.on("drain",d);var c=!1,f=!1;function p(t){h("ondata"),(f=!1)!==e.write(t)||f||((1===o.pipesCount&&o.pipes===e||1<o.pipesCount&&-1!==N(o.pipes,e))&&!c&&(h("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function m(t){h("onerror",t),y(),e.removeListener("error",m),0===a(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",v),y()}function v(){h("onfinish"),e.removeListener("close",g),y()}function y(){h("unpipe"),r.unpipe(e)}return r.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",g),e.once("finish",v),e.emit("pipe",r),o.flowing||(h("pipe resume"),r.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=N(t.pipes,e);return-1===s||(t.pipes.splice(s,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},v.prototype.addListener=v.prototype.on=function(e,t){return t=u.prototype.on.call(this,e,t),"data"===e?!1!==this._readableState.flowing&&this.resume():"readable"===e&&((e=this._readableState).endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&T(this):i.nextTick(R,this))),t},v.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,this,e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(C,this,e))),this},v.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t,n=this,r=this._readableState,i=!1;for(t in e.on("end",(function(){var e;h("wrapped end"),!r.decoder||r.ended||(e=r.decoder.end())&&e.length&&n.push(e),n.push(null)})),e.on("data",(function(t){h("wrapped data"),r.decoder&&(t=r.decoder.write(t)),r.objectMode&&null==t||(r.objectMode||t&&t.length)&&(n.push(t)||(i=!0,e.pause()))})),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<m.length;o++)e.on(m[o],this.emit.bind(this,m[o]));return this._read=function(t){h("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=O}).call(this,e(25),void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{10:10,11:11,21:21,23:23,24:24,25:25,27:27,32:32,33:33,34:34,39:39,42:42,7:7}],30:[function(e,t,n){"use strict";t.exports=i;var r=e(27);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e),(e=this._readableState).reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){s(e,t,n)})):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}(t=e(10)).inherits=e(21),t.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n,r.writechunk=e,r.writeencoding=t,r.transforming||(t=this._readableState,(r.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark))},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},{10:10,21:21,27:27}],31:[function(e,t,r){(function(n,r,i){"use strict";var o=e(24);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=g;var a,u=!n.browser&&-1<["v0.10","v0.9."].indexOf(n.version.slice(0,5))?i:o.nextTick;g.WritableState=m,(i=e(10)).inherits=e(21);var l,d={deprecate:e(44)},c=e(34),f=e(39).Buffer,h=r.Uint8Array||function(){};r=e(33);function p(){}function m(t,n){a=a||e(27),t=t||{};var r=n instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,d=(this.destroyed=!1)===t.decodeStrings,this.decodeStrings=!d,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0})(n),t?function(e,t,n,r,i){--t.pendingcb,n?(o.nextTick(i,r),o.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}(e,n,r,t,i):((t=E(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?u(y,e,n,t,i):y(e,n,t,i))}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function g(t){if(a=a||e(27),!(l.call(g,this)||this instanceof a))return new g(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function v(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function y(e,t,n,r){var i;n||(i=e,0===(n=t).length&&n.needDrain&&(n.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),T(e,t)}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r);(r=t.corkedRequestsFree).entry=n;for(var o=0,a=!0;n;)(i[o]=n).isBuf||(a=!1),n=n.next,o+=1;i.allBuffers=a,v(e,t,!0,t.length,i,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(v(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var n,r,i=E(t);return i&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,o.nextTick(b,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}i.inherits(g,c),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===g&&e&&e._writableState instanceof m}})):l=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r,i,s,a,u,l=this._writableState,d=!1,c=!l.objectMode&&(r=e,f.isBuffer(r)||r instanceof h);return c&&!f.isBuffer(e)&&(i=e,e=f.from(i)),"function"==typeof t&&(n=t,t=null),t=c?"buffer":t||l.defaultEncoding,"function"!=typeof n&&(n=p),l.ended?(s=this,a=n,u=new Error("write after end"),s.emit("error",u),o.nextTick(a,u)):(c||(this,r=l,i=n,a=!(s=!0),null===(u=e)?a=new TypeError("May not write null values to stream"):"string"==typeof u||void 0===u||r.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(this.emit("error",a),o.nextTick(i,a),s=!1),s))&&(l.pendingcb++,d=function(e,t,n,r,i,o){n||(a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}(t,r,i),r!==a&&(n=!0,i="buffer",r=a));var s=t.objectMode?1:r.length;t.length+=s;var a,u=t.length<t.highWaterMark;return u||(t.needDrain=!0),t.writing||t.corked?(a=t.lastBufferedRequest,t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):v(e,t,!1,s,r,i,o),u}(this,l,c,e,t,n)),d},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?o.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=r.destroy,g.prototype._undestroy=r.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e(25),void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e(43).setImmediate)},{10:10,21:21,24:24,25:25,27:27,33:33,34:34,39:39,43:43,44:44}],32:[function(e,t,n){"use strict";var r=e(39).Buffer,i=e(7);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.head=null,this.tail=null,this.length=0}t.exports=(o.prototype.push=function(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},o.prototype.unshift=function(e){e={data:e,next:this.head},0===this.length&&(this.tail=e),this.head=e,++this.length},o.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},o.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=r.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=i,n=s,o.data.copy(t,n),s+=o.data.length,o=o.next;return i},o),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{39:39,7:7}],33:[function(e,t,n){"use strict";var r=e(24);function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{24:24}],34:[function(e,t,n){t.exports=e(11).EventEmitter},{11:11}],35:[function(e,t,n){t.exports=e(36).PassThrough},{36:36}],36:[function(e,t,n){(((n=t.exports=e(29)).Stream=n).Readable=n).Writable=e(31),n.Duplex=e(27),n.Transform=e(30),n.PassThrough=e(28)},{27:27,28:28,29:29,30:30,31:31}],37:[function(e,t,n){t.exports=e(36).Transform},{36:36}],38:[function(e,t,n){t.exports=e(31)},{31:31}],39:[function(e,t,n){var r=e(8),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");return e=i(e),void 0!==t?"string"==typeof n?e.fill(t,n):e.fill(t):e.fill(0),e},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{8:8}],40:[function(e,t,n){(function(t){!function(n){n.parser=function(e,t){return new o(e,t)},n.SAXParser=o,n.SAXStream=a,n.createStream=function(e,t){return new a(e,t)},n.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,t){if(!(this instanceof o))return new o(e,t);var r=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(r),r.q=r.c="",r.bufferCheckPosition=n.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=R.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(p)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),C(r,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),o.prototype={end:function(){N(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return M(t,"Cannot write after close. Assign an onready handler.");if(null===e)return N(t);"object"==typeof e&&(e=e.toString());for(var r,o,s=0,a="";a=U(e,s++),t.c=a;)switch(t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++),t.state){case R.BEGIN:if(t.state=R.BEGIN_WHITESPACE,"\ufeff"===a)continue;F(t,a);continue;case R.BEGIN_WHITESPACE:F(t,a);continue;case R.TEXT:if(t.sawRoot&&!t.closedRoot){for(var f=s-1;a&&"<"!==a&&"&"!==a;)(a=U(e,s++))&&t.trackPosition&&(t.position++,"\n"===a?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(f,s-1)}"<"!==a||t.sawRoot&&t.closedRoot&&!t.strict?(!T(m,a)||t.sawRoot&&!t.closedRoot||P(t,"Text data outside of root node."),"&"===a?t.state=R.TEXT_ENTITY:t.textNode+=a):(t.state=R.OPEN_WAKA,t.startTagPosition=t.position);continue;case R.SCRIPT:"<"===a?t.state=R.SCRIPT_ENDING:t.script+=a;continue;case R.SCRIPT_ENDING:"/"===a?t.state=R.CLOSE_TAG:(t.script+="<"+a,t.state=R.SCRIPT);continue;case R.OPEN_WAKA:"!"===a?(t.state=R.SGML_DECL,t.sgmlDecl=""):b(m,a)||(b(g,a)?(t.state=R.OPEN_TAG,t.tagName=a):"/"===a?(t.state=R.CLOSE_TAG,t.tagName=""):"?"===a?(t.state=R.PROC_INST,t.procInstName=t.procInstBody=""):(P(t,"Unencoded <"),t.startTagPosition+1<t.position&&(f=t.position-t.startTagPosition,a=new Array(f).join(" ")+a),t.textNode+="<"+a,t.state=R.TEXT));continue;case R.SGML_DECL:(t.sgmlDecl+a).toUpperCase()===d?(I(t,"onopencdata"),t.state=R.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+a==="--"?(t.state=R.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+a).toUpperCase()===c?(t.state=R.DOCTYPE,(t.doctype||t.sawRoot)&&P(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===a?(I(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=R.TEXT):(b(u,a)&&(t.state=R.SGML_DECL_QUOTED),t.sgmlDecl+=a);continue;case R.SGML_DECL_QUOTED:a===t.q&&(t.state=R.SGML_DECL,t.q=""),t.sgmlDecl+=a;continue;case R.DOCTYPE:">"===a?(t.state=R.TEXT,I(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=a,"["===a?t.state=R.DOCTYPE_DTD:b(u,a)&&(t.state=R.DOCTYPE_QUOTED,t.q=a));continue;case R.DOCTYPE_QUOTED:t.doctype+=a,a===t.q&&(t.q="",t.state=R.DOCTYPE);continue;case R.DOCTYPE_DTD:t.doctype+=a,"]"===a?t.state=R.DOCTYPE:b(u,a)&&(t.state=R.DOCTYPE_DTD_QUOTED,t.q=a);continue;case R.DOCTYPE_DTD_QUOTED:t.doctype+=a,a===t.q&&(t.state=R.DOCTYPE_DTD,t.q="");continue;case R.COMMENT:"-"===a?t.state=R.COMMENT_ENDING:t.comment+=a;continue;case R.COMMENT_ENDING:"-"===a?(t.state=R.COMMENT_ENDED,t.comment=D(t.opt,t.comment),t.comment&&I(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+a,t.state=R.COMMENT);continue;case R.COMMENT_ENDED:">"!==a?(P(t,"Malformed comment"),t.comment+="--"+a,t.state=R.COMMENT):t.state=R.TEXT;continue;case R.CDATA:"]"===a?t.state=R.CDATA_ENDING:t.cdata+=a;continue;case R.CDATA_ENDING:"]"===a?t.state=R.CDATA_ENDING_2:(t.cdata+="]"+a,t.state=R.CDATA);continue;case R.CDATA_ENDING_2:">"===a?(t.cdata&&I(t,"oncdata",t.cdata),I(t,"onclosecdata"),t.cdata="",t.state=R.TEXT):"]"===a?t.cdata+="]":(t.cdata+="]]"+a,t.state=R.CDATA);continue;case R.PROC_INST:"?"===a?t.state=R.PROC_INST_ENDING:b(m,a)?t.state=R.PROC_INST_BODY:t.procInstName+=a;continue;case R.PROC_INST_BODY:if(!t.procInstBody&&b(m,a))continue;"?"===a?t.state=R.PROC_INST_ENDING:t.procInstBody+=a;continue;case R.PROC_INST_ENDING:">"===a?(I(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=R.TEXT):(t.procInstBody+="?"+a,t.state=R.PROC_INST_BODY);continue;case R.OPEN_TAG:b(v,a)?t.tagName+=a:(function(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,I(e,"onopentagstart",n)}(t),">"===a?k(t):"/"===a?t.state=R.OPEN_TAG_SLASH:(T(m,a)&&P(t,"Invalid character in tag name"),t.state=R.ATTRIB));continue;case R.OPEN_TAG_SLASH:">"===a?(k(t,!0),j(t)):(P(t,"Forward-slash in opening tag not followed by >"),t.state=R.ATTRIB);continue;case R.ATTRIB:if(b(m,a))continue;">"===a?k(t):"/"===a?t.state=R.OPEN_TAG_SLASH:b(g,a)?(t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case R.ATTRIB_NAME:"="===a?t.state=R.ATTRIB_VALUE:">"===a?(P(t,"Attribute without value"),t.attribValue=t.attribName,L(t),k(t)):b(m,a)?t.state=R.ATTRIB_NAME_SAW_WHITE:b(v,a)?t.attribName+=a:P(t,"Invalid attribute name");continue;case R.ATTRIB_NAME_SAW_WHITE:if("="===a)t.state=R.ATTRIB_VALUE;else{if(b(m,a))continue;P(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",I(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===a?k(t):b(g,a)?(t.attribName=a,t.state=R.ATTRIB_NAME):(P(t,"Invalid attribute name"),t.state=R.ATTRIB)}continue;case R.ATTRIB_VALUE:if(b(m,a))continue;b(u,a)?(t.q=a,t.state=R.ATTRIB_VALUE_QUOTED):(P(t,"Unquoted attribute value"),t.state=R.ATTRIB_VALUE_UNQUOTED,t.attribValue=a);continue;case R.ATTRIB_VALUE_QUOTED:if(a!==t.q){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=a;continue}L(t),t.q="",t.state=R.ATTRIB_VALUE_CLOSED;continue;case R.ATTRIB_VALUE_CLOSED:b(m,a)?t.state=R.ATTRIB:">"===a?k(t):"/"===a?t.state=R.OPEN_TAG_SLASH:b(g,a)?(P(t,"No whitespace between attributes"),t.attribName=a,t.attribValue="",t.state=R.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case R.ATTRIB_VALUE_UNQUOTED:if(T(l,a)){"&"===a?t.state=R.ATTRIB_VALUE_ENTITY_U:t.attribValue+=a;continue}L(t),">"===a?k(t):t.state=R.ATTRIB;continue;case R.CLOSE_TAG:if(t.tagName)">"===a?j(t):b(v,a)?t.tagName+=a:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=R.SCRIPT):(T(m,a)&&P(t,"Invalid tagname in closing tag"),t.state=R.CLOSE_TAG_SAW_WHITE);else{if(b(m,a))continue;T(g,a)?t.script?(t.script+="</"+a,t.state=R.SCRIPT):P(t,"Invalid tagname in closing tag."):t.tagName=a}continue;case R.CLOSE_TAG_SAW_WHITE:if(b(m,a))continue;">"===a?j(t):P(t,"Invalid characters in closing tag");continue;case R.TEXT_ENTITY:case R.ATTRIB_VALUE_ENTITY_Q:case R.ATTRIB_VALUE_ENTITY_U:switch(t.state){case R.TEXT_ENTITY:r=R.TEXT,o="textNode";break;case R.ATTRIB_VALUE_ENTITY_Q:r=R.ATTRIB_VALUE_QUOTED,o="attribValue";break;case R.ATTRIB_VALUE_ENTITY_U:r=R.ATTRIB_VALUE_UNQUOTED,o="attribValue"}";"===a?(t[o]+=function(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(t=parseInt(n,16)).toString(16)):(n=n.slice(1),(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()===n?String.fromCodePoint(t):(P(e,"Invalid character entity"),"&"+e.entity+";"))}(t),t.entity="",t.state=r):b(t.entity.length?_:y,a)?t.entity+=a:(P(t,"Invalid character in entity name"),t[o]+="&"+t.entity+a,t.entity="",t.state=r);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,o=0,s=i.length;o<s;o++){var a=e[i[o]].length;if(t<a)switch(i[o]){case"textNode":O(e);break;case"cdata":I(e,"oncdata",e.cdata),e.cdata="";break;case"script":I(e,"onscript",e.script),e.script="";break;default:M(e,"Max buffer length exceeded: "+i[o])}r=Math.max(r,a)}var u=n.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;O(e=this),""!==e.cdata&&(I(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(I(e,"onscript",e.script),e.script="")}};try{r=e(41).Stream}catch(E){r=function(){}}var s=n.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function a(e,t){if(!(this instanceof a))return new a(e,t);r.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,s.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t;n.on(e,t)},enumerable:!0,configurable:!1})}))}(a.prototype=Object.create(r.prototype,{constructor:{value:a}})).write=function(n){var r;return"function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)&&(this._decoder||(r=e(42).StringDecoder,this._decoder=new r("utf8")),n=this._decoder.write(n)),this._parser.write(n.toString()),this.emit("data",n),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===s.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var u="'\"",l=(m="\r\n\t ")+">",d="[CDATA[",c="DOCTYPE",f="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",p={xml:f,xmlns:h},m=E(m),g=(E("0124356789"),E("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function E(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function b(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?t.match(e):e[t];var n}function T(e,t){return!b(e,t)}u=E(u),l=E(l);var S,w,A,R=0;for(S in n.STATE={BEGIN:R++,BEGIN_WHITESPACE:R++,TEXT:R++,TEXT_ENTITY:R++,OPEN_WAKA:R++,SGML_DECL:R++,SGML_DECL_QUOTED:R++,DOCTYPE:R++,DOCTYPE_QUOTED:R++,DOCTYPE_DTD:R++,DOCTYPE_DTD_QUOTED:R++,COMMENT_STARTING:R++,COMMENT:R++,COMMENT_ENDING:R++,COMMENT_ENDED:R++,CDATA:R++,CDATA_ENDING:R++,CDATA_ENDING_2:R++,PROC_INST:R++,PROC_INST_BODY:R++,PROC_INST_ENDING:R++,OPEN_TAG:R++,OPEN_TAG_SLASH:R++,ATTRIB:R++,ATTRIB_NAME:R++,ATTRIB_NAME_SAW_WHITE:R++,ATTRIB_VALUE:R++,ATTRIB_VALUE_QUOTED:R++,ATTRIB_VALUE_CLOSED:R++,ATTRIB_VALUE_UNQUOTED:R++,ATTRIB_VALUE_ENTITY_Q:R++,ATTRIB_VALUE_ENTITY_U:R++,CLOSE_TAG:R++,CLOSE_TAG_SAW_WHITE:R++,SCRIPT:R++,SCRIPT_ENDING:R++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach((function(e){var t="number"==typeof(t=n.ENTITIES[e])?String.fromCharCode(t):t;n.ENTITIES[e]=t})),n.STATE)n.STATE[n.STATE[S]]=S;function C(e,t,n){e[t]&&e[t](n)}function I(e,t,n){e.textNode&&O(e),C(e,t,n)}function O(e){e.textNode=D(e.opt,e.textNode),e.textNode&&C(e,"ontext",e.textNode),e.textNode=""}function D(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function M(e,t){return O(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,C(e,"onerror",t),e}function N(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==R.BEGIN&&e.state!==R.BEGIN_WHITESPACE&&e.state!==R.TEXT&&M(e,"Unexpected end"),O(e),e.c="",e.closed=!0,C(e,"onend"),o.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&M(e,t)}function x(e,t){var n=(r=e.indexOf(":")<0?["",e]:e.split(":"))[0],r=r[1];return t&&"xmlns"===e&&(n="xmlns",r=""),{prefix:n,local:r}}function L(e){var t,n,r;e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName)||(e.opt.xmlns?(r=(n=x(e.attribName,!0)).prefix,t=n.local,"xmlns"===r&&("xml"===t&&e.attribValue!==f?P(e,"xml: prefix must be bound to "+f+"\nActual: "+e.attribValue):"xmlns"===t&&e.attribValue!==h?P(e,"xmlns: prefix must be bound to "+h+"\nActual: "+e.attribValue):(n=e.tag,r=e.tags[e.tags.length-1]||e,n.ns===r.ns&&(n.ns=Object.create(r.ns)),n.ns[t]=e.attribValue)),e.attribList.push([e.attribName,e.attribValue])):(e.tag.attributes[e.attribName]=e.attribValue,I(e,"onattribute",{name:e.attribName,value:e.attribValue}))),e.attribName=e.attribValue=""}function k(e,t){if(e.opt.xmlns){var n=e.tag,r=x(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix),r=e.tags[e.tags.length-1]||e,n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){I(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var i=0,o=e.attribList.length;i<o;i++){var s,a=(d=e.attribList[i])[0],u=d[1],l=(s=x(a,!0)).prefix,d={name:a,value:u,prefix:l,local:d=s.local,uri:s=""!==l&&n.ns[l]||""};l&&"xmlns"!==l&&!s&&(P(e,"Unbound namespace prefix: "+JSON.stringify(l)),d.uri=l),e.tag.attributes[a]=d,I(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),I(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=R.TEXT:e.state=R.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function j(e){if(!e.tagName)return P(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=R.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=R.SCRIPT);I(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)P(e,"Unexpected close tag");if(t<0)return P(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=R.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,I(e,"onclosetag",e.tagName);var s,a={};for(s in o.ns)a[s]=o.ns[s];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==u.ns&&Object.keys(o.ns).forEach((function(t){var n=o.ns[t];I(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=R.TEXT}function F(e,t){"<"===t?(e.state=R.OPEN_WAKA,e.startTagPosition=e.position):T(m,t)&&(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=R.TEXT)}function U(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function B(){var e,t=[],n=-1,r=arguments.length;if(!r)return"";for(var i="";++n<r;){var o=Number(arguments[n]);if(!isFinite(o)||o<0||1114111<o||A(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?t.push(o):(e=55296+((o-=65536)>>10),o=o%1024+56320,t.push(e,o)),(n+1===r||16384<t.length)&&(i+=w.apply(null,t),t.length=0)}return i}R=n.STATE,String.fromCodePoint||(w=String.fromCharCode,A=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:B,configurable:!0,writable:!0}):String.fromCodePoint=B)}(void 0===n?this.sax={}:n)}).call(this,e(8).Buffer)},{41:41,42:42,8:8}],41:[function(e,t,n){t.exports=i;var r=e(11).EventEmitter;function i(){r.call(this)}e(21)(i,r),i.Readable=e(36),i.Writable=e(38),i.Duplex=e(26),i.Transform=e(37),i.PassThrough=e(35),(i.Stream=i).prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",l),e.on("error",l),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},{11:11,21:21,26:26,35:35,36:36,37:37,38:38}],42:[function(e,t,n){"use strict";var r=e(39).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);return n&&55296<=(t=n.charCodeAt(n.length-1))&&t<=56319?(this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)):n}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?(e=this.lastTotal-this.lastNeed,t+this.lastChar.toString("utf16le",0,e)):t}function d(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}(n.StringDecoder=o).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+"�":e},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return 0<=i?(0<i&&(e.lastNeed=i-1),i):--r<n||-2===i?0:0<=(i=s(t[r]))?(0<i&&(e.lastNeed=i-2),i):--r<n||-2===i?0:0<=(i=s(t[r]))?(0<i&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);return this.lastNeed?(this.lastTotal=n,n=e.length-(n-this.lastNeed),e.copy(this.lastChar,0,n),e.toString("utf8",t,n)):e.toString("utf8",t)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{39:39}],43:[function(e,t,n){(function(t,r){var i=e(25).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},u=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=u++,r=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,i((function(){a[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete a[e]}}).call(this,e(43).setImmediate,e(43).clearImmediate)},{25:25,43:43}],44:[function(e,t,r){(function(e){function n(t){try{if(!e.localStorage)return}catch(t){return}return null!=(t=e.localStorage[t])&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(54)),s=r(e(47)),a=1,u=2,l=3,d=4,c=5;function f(e){e=e||{};var t=this.context,n=(0,i.default)(t).getInstance(),r=e.settings,s=[],f=(e=void 0,void 0),h=void 0,p=void 0;function m(e){return(e&&e.bind?e:window.console.log).bind(window.console)}function g(e,t){var i,a="";f&&(i=(new Date).getTime(),a+="["+(i-p)+"]"),h&&t&&t.getClassName&&(a+="["+t.getClassName()+"]",t.getType&&(a+="["+t.getType()+"]")),0<a.length&&(a+=" ");for(var u=arguments.length,l=Array(2<u?u-2:0),d=2;d<u;d++)l[d-2]=arguments[d];Array.apply(null,l).forEach((function(e){a+=e+" "})),s[e]&&r.get().debug.logLevel>=e&&s[e](a),r&&r.get().debug.dispatchEvent&&n.trigger(o.default.LOG,{message:a,level:e})}return e={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];g.apply(void 0,[a,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];g.apply(void 0,[u,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];g.apply(void 0,[l,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];g.apply(void 0,[d,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];g.apply(void 0,[c,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){f=e},setCalleeNameVisible:function(e){h=e}},h=f=!0,p=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(s[a]=m(window.console.error),s[u]=m(window.console.error),s[l]=m(window.console.warn),s[d]=m(window.console.info),s[c]=m(window.console.debug)),e}f.__dashjs_factory_name="Debug",(e=s.default.getSingletonFactory(f)).LOG_LEVEL_NONE=0,e.LOG_LEVEL_FATAL=a,e.LOG_LEVEL_ERROR=u,e.LOG_LEVEL_WARNING=l,e.LOG_LEVEL_INFO=d,e.LOG_LEVEL_DEBUG=c,s.default.updateSingletonFactory(f.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{46:46,47:47,54:54}],46:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(104));function s(){var e={};function t(t,n,r){var i=-1;return e[t]&&e[t].some((function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0})),i}return{on:function(n,r,i){var o=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);var s,a=o.priority||0;0<=t(n,r,i)||(e[n]=e[n]||[],s={callback:r,scope:i,priority:a},i&&i.getStreamId&&(s.streamId=i.getStreamId()),i&&i.getType&&(s.mediaType=i.getType()),o&&o.mode&&(s.mode=o.mode),e[n].some((function(t,r){if(t&&a>t.priority)return e[n].splice(r,0,s),!0}))||e[n].push(s))},off:function(n,r,i){n&&r&&e[n]&&((i=t(n,r,i))<0||(e[n][i]=null))},trigger:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(t&&e[t]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,r.streamId&&(n.streamId=r.streamId),r.mediaType&&(n.mediaType=r.mediaType),e[t].filter((function(e){return!(!e||r.streamId&&e.streamId&&e.streamId!==r.streamId||r.mediaType&&e.mediaType&&e.mediaType!==r.mediaType||r.mode&&e.mode&&e.mode!==r.mode||!e.mode&&r.mode&&r.mode===o.default.EVENT_MODE_ON_RECEIVE)})).forEach((function(e){return e&&e.callback.call(e.scope,n)}))}},reset:function(){e={}}}}s.__dashjs_factory_name="EventBus",(e=i.default.getSingletonFactory(s)).EVENT_PRIORITY_LOW=0,e.EVENT_PRIORITY_HIGH=5e3,i.default.updateSingletonFactory(s.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{104:104,47:47}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,o,s,a=(void 0,i=[],o={},s={},r={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:u,setSingletonInstance:function(e,t,n){for(var r in i){var o=i[r];if(o.context===e&&o.name===t)return void(i[r].instance=n)}i.push({name:t,context:e,instance:n})},deleteSingletonInstances:function(e){i=i.filter((function(t){return t.context!==e}))},getSingletonFactory:function(e){var t=l(e.__dashjs_factory_name,o);return t||(t=function(t){var n=void 0;return void 0===t&&(t={}),{getInstance:function(){return(n=n||u(t,e.__dashjs_factory_name))||(n=c(e,t,arguments),i.push({name:e.__dashjs_factory_name,context:t,instance:n})),n}}},o[e.__dashjs_factory_name]=t),t},getSingletonFactoryByName:function(e){return o[e]},updateSingletonFactory:function(e,t){d(e,t,o)},getClassFactory:function(e){var t=l(e.__dashjs_factory_name,s);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return c(e,t,arguments)}}},s[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return s[e]},updateClassFactory:function(e,t){d(e,t,s)}});function u(e,t){for(var n in i){var r=i[n];if(r.context===e&&r.name===t)return r.instance}return null}function l(e,t){return t[e]}function d(e,t,n){e in n&&(n[e]=t)}function c(e,t,n){var i=void 0,o=e.__dashjs_factory_name,s=t[o];if(s){var a,u=s.instance;if(!s.override)return u.apply({context:t,factory:r},n);for(a in i=e.apply({context:t},n),u=u.apply({context:t,factory:r,parent:i},n))i.hasOwnProperty(a)&&(i[a]=u[a])}else i=e.apply({context:t},n);return i.getClassName=function(){return o},i}n.default=a,t.exports=n.default},{}],48:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(47)),s=r(e(49)),a=r(e(45)),u=r(e(112)),l=e(255);function d(){var e,t={debug:{logLevel:a.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:NaN,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,flushBufferAtTrackSwitch:!1,calcSegmentAvailabilityRangeFromTimeline:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!0,useAppendWindow:!0,manifestUpdateRetryInterval:100,stallThreshold:.5,filterUnsupportedEssentialProperties:!0,eventControllerRefreshDelay:100,utcSynchronization:{backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"}},liveCatchup:{minDrift:.02,maxDrift:0,playbackRate:.5,latencyThreshold:60,playbackBufferMin:.5,enabled:!1,mode:u.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:u.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:u.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE,fragmentRequestTimeout:0,retryIntervals:(i(e={},l.HTTPRequest.MPD_TYPE,500),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,500),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),i(e,l.HTTPRequest.OTHER_TYPE,1e3),i(e,"lowLatencyReductionFactor",10),e),retryAttempts:(i(e={},l.HTTPRequest.MPD_TYPE,3),i(e,l.HTTPRequest.XLINK_EXPANSION_TYPE,1),i(e,l.HTTPRequest.MEDIA_SEGMENT_TYPE,3),i(e,l.HTTPRequest.INIT_SEGMENT_TYPE,3),i(e,l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),i(e,l.HTTPRequest.INDEX_SEGMENT_TYPE,3),i(e,l.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),i(e,l.HTTPRequest.OTHER_TYPE,3),i(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:u.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:u.default.ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:u.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:u.default.CMCD_MODE_QUERY}}},n=s.default.clone(t);return{get:function(){return n},update:function(e){"object"==typeof e&&function e(t,n,r){for(var i in t)t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&("object"==typeof t[i]&&null!==t[i]?e(t[i],n[i],r.slice()+i+"."):n[i]=s.default.clone(t[i]))}(e,n,"")},reset:function(){n=s.default.clone(t)}}}d.__dashjs_factory_name="Settings",o=o.default.getSingletonFactory(d),n.default=o,t.exports=n.default},{112:112,255:255,45:45,47:47,49:49}],49:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){n&&r(e,n)}(o,0,[{key:"mixin",value:function(e,t,n){var r,i={};if(e)for(var s in t)t.hasOwnProperty(s)&&(r=t[s],s in e&&(e[s]===r||s in i&&i[s]===r)||("object"==typeof e[s]&&null!==e[s]?e[s]=o.mixin(e[s],r,n):e[s]=n(r)));return e}},{key:"clone",value:function(e){if(!e||"object"!=typeof e)return e;var t=void 0;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;++n)n in e&&t.push(o.clone(e[n]))}else t={};return o.mixin(t,e,o.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{var n=function(){if(!t||0===t.length)return{v:e};var n=new URL(e);return t.forEach((function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)})),{v:n.href}}();if("object"==typeof n)return n.v}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var o=n[r],s=o.indexOf(": ");0<s&&(t[o.substring(0,s)]=o.substring(s+2))}return t}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=i,t.exports=n.default},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return r};var r="3.2.2"},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o),n.default=e,t.exports=n.default},{52:52}],52:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,i=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||i&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=i,t.exports=n.default},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(i,((r=e(55))&&r.__esModule?r:{default:r}).default),e=i;function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INBAND_EVENTS="inbandEvents",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATE_STARTED="representationUpdateStarted",this.REPRESENTATION_UPDATE_COMPLETED="representationUpdateCompleted",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEGMENTBASE_INIT_REQUEST_NEEDED="segmentBaseInitRequestNeeded",this.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED="segmentBaseSegmentsListRequestNeeded",this.SEEK_TARGET="seekTarget"}n.default=e,t.exports=n.default},{55:55}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1;null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}},o=e(53);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i(Object.getPrototypeOf(s.prototype),"constructor",this).apply(this,arguments)}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,((r=o)&&r.__esModule?r:{default:r}).default),s),n.default=e,t.exports=n.default},{53:53}],55:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"extend",value:function(e,t){if(e){var n,r=!!t&&t.override,i=!!t&&t.publicOnly;for(n in e)!e.hasOwnProperty(n)||this[n]&&!r||i&&-1===e[n].indexOf("public_")||(this[n]=e[n])}}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=i,t.exports=n.default},{}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(61)),o=r(e(95)),s=r(e(90)),a=r(e(98)),u=r(e(89)),l=r(e(87)),d=r(e(47)),c=r(e(65)),f=r(e(66));function h(){var e,t=void 0,n=void 0,r=void 0,d=void 0,h=void 0,p=void 0,m=void 0,g=this.context;function v(e,n,o){var s,a=t.getAdaptationsForType(r[0].mpd.manifest,e,n);if(!a||0===a.length)return null;if(1<a.length&&o){var u=y(o,n);if(h[o.id]&&h[o.id][n])for(var l=0,d=a.length;l<d;l++)if(function(e,t){if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),s=e.accessibility.toString()===t.accessibility.toString();t=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&o&&s&&t}(h[o.id][n],u[l]))return a[l];for(l=0,d=a.length;l<d;l++)if(s=a[l],t.getRolesForAdaptation(s).filter((function(e){return e.value===i.default.MAIN}))[0])return a[l]}return a[0]}function y(e,n,i){var o,s,a,u=r,l=i,c=[],f=void 0,h=void 0,m=void 0,g=void 0;if(l)I(),u=_(l);else{if(!(0<r.length))return c;l=r[0].mpd.manifest}(u=w(e,u))&&(g=u.id);var v=t.getAdaptationsForType(l,e?e.index:null,n!==p.EMBEDDED_TEXT?n:p.VIDEO);if(!v||0===v.length)return c;for(d[g]=d[g]||t.getAdaptationsForPeriod(u),h=0,a=v.length;h<a;h++)if(o=v[h],s=t.getIndexForAdaptation(o,l,e.index),f=A(d[g][s]),n===p.EMBEDDED_TEXT){var y=f.accessibility.length;for(m=0;m<y;m++)if(f){var E=f.accessibility[m];if(0===E.indexOf("cea-608:")){var b=E.substring(8).split(";");if("CC"===b[0].substring(0,2))for(m=0;m<b.length;m++)R(f=f||A.call(this,d[g][s]),b[m].substring(0,3),b[m].substring(4)),c.push(f),f=null;else for(m=0;m<b.length;m++)R(f=f||A.call(this,d[g][s]),"CC"+(m+1),b[m]),c.push(f),f=null}else 0===E.indexOf("cea-608")&&(R(f,p.CC1,"eng"),c.push(f),f=null)}}else n===p.IMAGE?(f.type=p.IMAGE,c.push(f),f=null):f&&c.push(f);return c}function _(e){return e=E(e),t.getRegularPeriods(e)}function E(e){return e=T(e),t.getMpd(e)}function b(){r=[],d={},h={}}function T(e){return e||(0<r.length?r[0].mpd.manifest:null)}function S(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&d[e.streamInfo.id]?d[e.streamInfo.id][e.index]:null}function w(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function A(e){if(!e)return null;var n,r=new s.default,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=C(e.period),r.representationCount=t.getRepresentationCount(i),r.labels=t.getLabelsForAdaptation(i),r.lang=t.getLanguageForAdaptation(i),n=t.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=t.getAccessibilityForAdaptation(i).map((function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==m&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n})),r.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(i).map((function(e){return e.value})),0===r.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&0<i.Representation_asArray.length&&(r.audioChannelConfiguration=t.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map((function(e){return e.value}))),r.roles=t.getRolesForAdaptation(i).map((function(e){return e.value})),r.codec=t.getCodec(i),r.mimeType=t.getMimeType(i),r.contentProtection=t.getContentProtectionData(i),r.bitrateList=t.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach((function(e){e.KID=t.getKID(e)})),r.isText=t.getIsTextTrack(r.mimeType),r.supplementalProperties=t.getSupplementalPropperties(i),r}function R(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=p.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function C(e){var n,r,i=new a.default;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(n=e.mpd,(r=new u.default).DVRWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=t.getDuration(n.manifest),r.isDynamic=t.getIsDynamic(n.manifest),r.serviceDescriptions=t.getServiceDescriptions(n.manifest),r.protocol=n.manifest.protocol,r),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function I(){if(!p)throw new Error("setConfig function has to be called previously")}function O(e){return 0<r.length?r[0].mpd.manifest.Period_asArray[e]:null}function D(e,t,n){var r,i,o,s=void 0,a=void 0;if(e)for(r=e.AdaptationSet_asArray,s=0;s<r.length;s+=1)for(o=r[s].Representation_asArray,a=0;a<o.length;a+=1)if(t===(i=o[a]).id)return n?a:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return(n=D(O(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){return null!==(t=D(e,t,!0))?t:-1}(O(t),e)},getMaxIndexForBufferType:function(e,n){return function(e,n){var r,i=void 0,o=void 0,s=void 0;if(!e||!n)return-1;for(r=e.AdaptationSet_asArray,s=0;s<r.length;s+=1)if(o=(i=r[s]).Representation_asArray,t.getIsTypeOf(i,n))return o.length;return-1}(O(n),e)},convertDataToRepresentationInfo:function(e){if(e){var n=new o.default,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index];r=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(r),n.DVRWindow=e.segmentAvailabilityRange,n.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.mediaInfo=A(e.adaptation),n}return null},getDataForMedia:S,getStreamsInfo:function(e,t){var n=[],i=r;if(e&&(I(),i=_(e)),0<i.length){(!t||t>i.length)&&(t=i.length);for(var o=0;o<t;o++)n.push(C(i[o]))}return n},getMediaInfoForType:function(e,n){if(0===r.length||!e)return null;var i=w(e,r);if(!i)return null;var o=i.id;return d[o]=d[o]||t.getAdaptationsForPeriod(i),(n=v(e.index,n,e))?(e=t.getIndexForAdaptation(n,r[0].mpd.manifest,e.index),A(d[o][e])):null},getAllMediaInfoForType:y,getAdaptationForType:v,getRealAdaptation:function(e,n){var i=void 0,o=(e=w(e,r),n?n.id:null);return 0<r.length&&e&&(i=o?t.getAdaptationForId(o,r[0].mpd.manifest,e.index):t.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,e.index)),i},getRealPeriodByIndex:function(e){return t.getRealPeriodForIndex(e,r[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){return e=S(e),t.getRepresentationsForAdaptation(e)},getEventsFor:function(e,n){var i,u=[];return 0<r.length&&(i=r[0].mpd.manifest,e instanceof a.default?u=t.getEventsForPeriod(w(e,r)):e instanceof s.default?u=t.getEventStreamForAdaptationSet(i,S(e)):e instanceof o.default&&(u=t.getEventStreamForRepresentation(i,n))),u},getEvent:function(e,t,n,r){try{if(!e||!t||isNaN(n)||!r)return null;var i=e.scheme_id_uri,o=e.value;if(!t[i+"/"+o])return null;var s=new l.default,a=e.timescale||1,u=r.adaptation.period.start,d=t[i+"/"+o],c=isNaN(r.presentationTimeOffset)?isNaN(d.presentationTimeOffset)?0:d.presentationTimeOffset:r.presentationTimeOffset,f=e.presentation_time_delta/a,h=0===e.version?u+n-c+f:u-c+f;i=e.event_duration,u=e.id,c=e.message_data;return s.eventStream=d,s.eventStream.value=o,s.eventStream.timescale=a,s.duration=i,s.id=u,s.calculatedPresentationTime=h,s.messageData=c,s.presentationTimeDelta=f,s}catch(e){return null}},getMpd:E,setConfig:function(e){e&&(e.constants&&(p=e.constants),e.cea608parser&&(m=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;I(),r=_(e),d={}},getIsTextTrack:function(e){return t.getIsTextTrack(e)},getUTCTimingSources:function(){var e=T();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=0<r.length?r[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){return e=E(e),t.getAvailabilityStartTime(e)},getIsTypeOf:function(e,n){return t.getIsTypeOf(e,n)},getIsDynamic:function(e){return e=T(e),t.getIsDynamic(e)},getDuration:function(e){return e=T(e),t.getDuration(e)},getRegularPeriods:_,getLocation:function(e){return t.getLocation(e)},getPatchLocation:function(e){var n=t.getPatchLocation(e),r=t.getPublishTime(e);return n&&r?n.hasOwnProperty("ttl")&&r&&(e=1e3*parseFloat(n.ttl),r.getTime()+e<=(new Date).getTime())?null:n.__text:null},getManifestUpdatePeriod:function(e){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return t.getManifestUpdatePeriod(e,n)},getPublishTime:function(e){return t.getPublishTime(e)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return n.getIsPatch(e)},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,n,r){return t.getCodec(e,n,r)},getVoAdaptations:function(){return d},getVoPeriods:function(){return r},getPeriodById:function(e){if(!e||0===r.length)return null;var t=r.filter((function(t){return t.id===e}));return t&&0<t.length?t[0]:null},setCurrentMediaInfo:function(e,t,n){h[e]=h[e]||{},h[e][t]=h[e][t]||{},h[e][t]=n},isPatchValid:function(e,r){var i=t.getId(e),o=n.getMpdId(r),s=t.getPublishTime(e);e=n.getPublishTime(r),r=n.getOriginalPublishTime(r);return!!(i&&o&&i==o&&s&&r&&s.getTime()==r.getTime()&&e&&s.getTime()<e.getTime())},applyPatchToManifest:function(e,t){n.getPatchOperations(t).forEach((function(t){if(null!==(i=t.getMpdTarget(e))){var n=i.name,r=i.target,i=i.leaf;if(t.xpath.findsAttribute())switch(t.action){case"add":case"replace":r[n]=t.value;break;case"remove":delete r[n]}else{var o=(r[n+"_asArray"]||[]).indexOf(i),s="prepend"===t.position||"before"===t.position;"remove"!==t.action&&"replace"!==t.action||(delete r[n],-1!=o&&((i=r[n+"_asArray"]).splice(o,1),1<i.length?r[n]=i:1==i.length?r[n]=i[0]:delete r[n+"_asArray"])),"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach((function(e){var i,a=t.value[e],u=r[e+"_asArray"]||[];0===u.length&&r[e]&&u.push(r[e]),0===u.length?u=a:(i=u.length,i=e==n&&-1!=o?o+(s?0:1)+("replace"==t.action?-1:0):s?0:u.length,u.splice.apply(u,[i,0].concat(a))),r[e+"_asArray"]=u,r[e]=1==u.length?u[0]:u}))}}}))},reset:b},t=(0,c.default)(g).getInstance(),n=(0,f.default)(g).getInstance(),b(),e}h.__dashjs_factory_name="DashAdapter",n.default=d.default.getSingletonFactory(h),t.exports=n.default},{47:47,61:61,65:65,66:66,87:87,89:89,90:90,95:95,98:98}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(241)),o=e(255),s=r(e(47)),a=e(81),u=r(e(64));function l(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,s=e.debug,l=e.dashConstants,d=e.urlUtils,c=e.type,f=e.streamInfo,h=e.timelineConverter,p=e.dashMetrics,m=e.baseURLController,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0;function A(){y=-1,_=null}function R(){A(),S=w=E=null}function C(e,t,n){var r=m.resolve(n.path),i=void 0;n=void 0;return r&&t!==r.url&&d.isRelative(t)?(i=r.url,n=r.serviceLocation,t&&(i=d.resolve(t,i))):i=t,!d.isRelative(i)&&(e.url=i,e.serviceLocation=n,1)}function I(e){var t,i;i=(t=e.representation).hasInitialization(),e=t.hasSegments(),i&&e?n.trigger(r.REPRESENTATION_UPDATE_COMPLETED,{representation:t},{streamId:f.id,mediaType:c}):w.update(t,S,i,e)}function O(e,t){if(null==t)return null;var n=new i.default,r=t.representation,s=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,u=t.media;u=(0,a.replaceTokenForTemplate)(u,"Number",t.replacementNumber);return u=(0,a.replaceTokenForTemplate)(u,"Time",t.replacementTime),u=(0,a.replaceTokenForTemplate)(u,"Bandwidth",s),u=(0,a.replaceIDForTemplate)(u,r.id),u=(0,a.unescapeDollarsInTemplate)(u),n.mediaType=c,n.type=o.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=r.index,n.index=t.availabilityIdx,n.mediaInfo=e,n.adaptationIndex=r.adaptation.index,n.representationId=r.id,C(n,u,r)?n:void 0}function D(e){var t,n=!1;return e&&(b?T?n=!0:_&&(t=parseFloat((_.presentationStartTime-e.adaptation.period.start).toFixed(5)),t=0<_.duration?t+1.5*_.duration:t,n=e.adaptation.period.duration<=t):y>=e.availableSegmentsNumber&&(n=!0)),n}function M(e){(e=e.representation).segments&&n.trigger(r.REPRESENTATION_UPDATE_COMPLETED,{representation:e},{streamId:f.id,mediaType:c})}function N(e){if(!e.error){for(var t,i,o=e.segments,s=e.representation,u=[],l=0,d=void 0,m=(d=0,o?o.length:0);d<m;d++)t=o[d],(i=(0,a.getTimeBasedSegment)(h,b,s,t.startTime,t.duration,t.timescale,t.media,t.mediaRange,l))&&(u.push(i),l++);0<u.length&&(s.segmentAvailabilityRange={start:u[0].presentationStartTime,end:u[u.length-1].presentationStartTime},s.availableSegmentsNumber=u.length,s.segments=u,b&&(e=u[u.length-1].presentationStartTime-8,h.setExpectedLiveEdge(e),p.updateManifestUpdateInfo({presentationStartTime:e}))),s.hasInitialization()&&n.trigger(r.REPRESENTATION_UPDATE_COMPLETED,{representation:s},{streamId:f.id,mediaType:c})}}function P(){v.debug("Dynamic stream complete"),T=!0}return g={initialize:function(e){b=e,T=!1,w.initialize(e)},getStreamId:function(){return f.id},getType:function(){return c},getStreamInfo:function(){return f},getInitRequest:function(e,t){return t?function(e,t,n){var r=new i.default,s=t.adaptation.period,u=s.start;if(r.mediaType=n,r.type=o.HTTPRequest.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=h.calcAvailabilityStartTimeFromPresentationTime(u,s.mpd,b),r.availabilityEndTime=h.calcAvailabilityEndTimeFromPresentationTime(u+s.duration,s.mpd,b),r.quality=t.index,r.mediaInfo=e,r.representationId=t.id,C(r,t.initialization,t))return r.url=(0,a.replaceTokenForTemplate)(r.url,"Bandwidth",t.bandwidth),r}(e,t,c):null},getRequestForSegment:O,getSegmentRequestForTime:function(e,t,n,r){var o=null;if(!t||!t.segmentInfoType)return o;var s=y,a=!!r&&r.keepIdx,u=!(!r||!r.ignoreIsFinished);return E!==n&&(E=n,v.debug("Getting the request for time : "+n)),(r=w.getSegmentByTime(t,n))?(y=r.availabilityIdx,_=r,v.debug("Index for time "+n+" is "+y),o=O(e,r)):!u&&D(t)&&((o=new i.default).action=i.default.ACTION_COMPLETE,o.index=y-1,o.mediaType=c,o.mediaInfo=e,v.debug("Signal complete in getSegmentRequestForTime")),a&&0<=s&&(y=t.segmentInfoType===l.SEGMENT_TIMELINE&&b?y:s),o},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;E=null;var r=y+1;v.debug("Getting the next request at index: "+r);var o=w.getSegmentByIndex(t,r,_?_.mediaStartTime:-1);return o||isFinite(t.adaptation.period.duration)||T?(y=o?(n=O(e,o),o.availabilityIdx):b?r-1:r,o?_=o:D(t)&&((n=new i.default).action=i.default.ACTION_COMPLETE,n.index=y-1,n.mediaType=c,n.mediaInfo=e,v.debug("Signal complete")),n):(v.debug(c+" No segment found at index: "+r+". Wait for next loop"),null)},setCurrentIndex:function(e){y=e},getCurrentIndex:function(){return y},isMediaFinished:D,reset:function(){R(),n.off(r.INITIALIZATION_LOADED,M,g),n.off(r.SEGMENTS_LOADED,N,g),n.off(r.REPRESENTATION_UPDATE_STARTED,I,g),n.off(r.DYNAMIC_TO_STATIC,P,g)},resetIndex:A,setMimeType:function(e){S=e},getNextSegmentRequestIdempotent:function(e,t){var n=y+1;return(n=w.getSegmentByIndex(t,n,_?_.mediaStartTime:-1))?O(e,n):null}},v=s.getLogger(g),R(),w=(0,u.default)(t).create(e),n.on(r.INITIALIZATION_LOADED,M,g),n.on(r.SEGMENTS_LOADED,N,g),n.on(r.REPRESENTATION_UPDATE_STARTED,I,g),n.on(r.DYNAMIC_TO_STATIC,P,g),g}l.__dashjs_factory_name="DashHandler",n.default=s.default.getClassFactory(l),t.exports=n.default},{241:241,255:255,47:47,64:64,81:81}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=e(255),s=r(e(47)),a=r(e(113)),u=r(e(79)),l=r(e(157)),d=r(e(49)),c=e(257);function f(e){e=e||{};var t,n=this.context,r=void 0,s=void 0,f=void 0,h=e.metricsModel;function p(e){if(!(e=h.getMetricsFor(e,!0)))return null;var t=e.HttpList,n=null,r=void 0;if(!t||t.length<=0)return null;for(r=t.length-1;0<=r;){if(t[r].responsecode){n=t[r];break}r--}return n}function m(e){return(e=h.getMetricsFor(e,!0))&&e.HttpList?e.HttpList:[]}function g(e,t){return e&&(t=e[t])&&0!==t.length?t[t.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return g(h.getMetricsFor(e,!0),a.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return g(h.getMetricsFor(e,!0),a.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){return(e=g(h.getMetricsFor(e,!0),a.default.BUFFER_LEVEL))?u.default.round10(e.level/1e3,-3):0},getCurrentHttpRequest:p,getHttpRequests:m,getCurrentDroppedFrames:function(){return g(h.getMetricsFor(i.default.VIDEO,!0),a.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return g(h.getMetricsFor(e,!0),a.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return g(e?h.getMetricsFor(e,!0):h.getMetricsFor(i.default.VIDEO,!0)||h.getMetricsFor(i.default.AUDIO,!0),a.default.DVR_INFO)},getCurrentManifestUpdate:function(){return g(h.getMetricsFor(i.default.STREAM),a.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={};return(e=p(e))&&(n=d.default.parseHttpHeaders(e._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){var t,n,r={},s=void 0;for(s=(n=m(i.default.STREAM)).length-1;0<=s;s--)if((t=n[s]).type===o.HTTPRequest.MPD_TYPE){r=d.default.parseHttpHeaders(t._responseHeaders);break}return void 0===r[e]?null:r[e]},addRepresentationSwitch:function(e,t,n,r,i){h.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){h.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){var t;e&&(t=this.getCurrentManifestUpdate(),h.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration))},addManifestUpdateRepresentationInfo:function(e,t){var n;e&&(n=this.getCurrentManifestUpdate(),h.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType))},addManifestUpdate:function(e){h.addManifestUpdate(i.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,r,i){h.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i)},addSchedulingInfo:function(e,t){h.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){h.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){h.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){h.addBufferState(e,t,n)},addDroppedFrames:function(e){h.addDroppedFrames(i.default.VIDEO,e)},addPlayList:function(){f&&(h.addPlayList(f),f=null)},addDVBErrors:function(e){h.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(f=new c.PlayList).start=new Date,f.mstart=e,f.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===r&&(r=!1,(s=new c.PlayListTrace).representationid=e,s.start=new Date,s.mstart=t,s.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(e){if(s)for(var t in s)s[t]=e[t]},pushPlayListTraceMetrics:function(e,t){var n;!1===r&&f&&s&&s.start&&(n=s.start,n=e.getTime()-n.getTime(),s.duration=n,s.stopreason=t,f.trace.push(s),r=!0)},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||(0,l.default)(n).getInstance({settings:e.settings}),r=!0,f=s=null,t}f.__dashjs_factory_name="DashMetrics",n.default=s.default.getSingletonFactory(f),t.exports=n.default},{112:112,113:113,157:157,255:255,257:257,47:47,49:49,79:79}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(96)),o=r(e(239)),s=r(e(47)),a=r(e(241)),u=r(e(163));function l(){var e=this.context,t=void 0,n=void 0,r=void 0,s=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0;function b(){if(!E||!E.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function T(e){if(e.url){var t=new a.default;return t.setInfo(e),t}}function S(e,t,n,r){m.trigger(p.SEGMENTS_LOADED,{segments:n,representation:r,error:n?void 0:new o.default(g.SEGMENT_BASE_LOADER_ERROR_CODE,g.SEGMENT_BASE_LOADER_ERROR_MESSAGE)},{streamId:e,mediaType:t})}return t={setConfig:function(e){e.baseURLController&&(E=e.baseURLController),e.dashMetrics&&(d=e.dashMetrics),e.mediaPlayerModel&&(f=e.mediaPlayerModel),e.errHandler&&(r=e.errHandler),e.settings&&(c=e.settings),e.boxParser&&(s=e.boxParser),e.events&&(p=e.events),e.eventBus&&(m=e.eventBus),e.debug&&(n=e.debug.getLogger(t)),e.requestModifier&&(l=e.requestModifier),e.errors&&(g=e.errors),e.urlUtils&&(_=e.urlUtils),e.constants&&(v=e.constants),e.dashConstants&&(y=e.dashConstants)},initialize:function(){h=(0,u.default)(e).create({errHandler:r,dashMetrics:d,mediaPlayerModel:f,requestModifier:l,useFetch:c?c.get().streaming.lowLatencyEnabled:null,boxParser:s,errors:g,urlUtils:_,constants:v,dashConstants:y})},loadInitialization:function e(t,r,i,o){b();var a,u=i?E.resolve(i.path):null,l=o||{init:!0,url:u?u.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};n.debug("Start searching for initialization."),u=T(l),h.load({request:u,success:function(n){l.bytesLoaded=l.range.end,(a=s.findInitRange(n))?(i.range=a,m.trigger(p.INITIALIZATION_LOADED,{representation:i},{streamId:t,mediaType:r})):(l.range.end=l.bytesLoaded+l.bytesToLoad,e(t,r,i,l))},error:function(){m.trigger(p.INITIALIZATION_LOADED,{representation:i},{streamId:t,mediaType:r})}}),n.debug("Perform init search: "+l.url)},loadSegments:function e(t,r,o,a,u,l){b(),!a||void 0!==a.start&&void 0!==a.end||(a=(p=a?a.toString().split("-"):null)?{start:parseFloat(p[0]),end:parseFloat(p[1])}:null),u=u||S;var d,c=null,f=!!a,p=o?E.resolve(o.path):null,m={init:!1,url:p?p.url:void 0,range:f?a:{start:0,end:1500},searching:!f,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:r};l=T(m);h.load({request:l,success:function(a){var l=m.bytesToLoad,f=a.byteLength;if(m.bytesLoaded=m.range.end-m.range.start,c=s.parse(a),(d=c.getBox("sidx"))&&d.isComplete){var h=d.references,p=void 0;a=void 0;null!=h&&0<h.length&&(p=1===h[0].reference_type),p?function(){n.debug("Initiate multiple SIDX load."),m.range.end=m.range.start+d.size;var i,s,a=void 0,l=void 0,c=[],f=0,p=(d.offset||m.range.start)+d.size,g=function(e,t,n){n?(c=c.concat(n),l<=++f&&(c.sort((function(e,t){return e.startTime-t.startTime<0?-1:0})),u(e,t,c,o))):u(e,t,null,o)};for(a=0,l=h.length;a<l;a++)s=(i=p)+h[a].referenced_size-1,p+=h[a].referenced_size,e(t,r,o,{start:i,end:s},g,m)}():(n.debug("Parsing segments from SIDX. representation "+r+" - id: "+o.id+" for range : "+m.range.start+" - "+m.range.end),a=function(e,t){for(var n=e.references,r=n.length,o=e.timescale,s=e.earliest_presentation_time,a=t.range.start+e.offset+e.first_offset+e.size,u=[],l=void 0,d=void 0,c=void 0,f=void 0,h=0;h<r;h++)c=n[h].subsegment_duration,f=n[h].referenced_size,(l=new i.default).duration=c,l.startTime=s,l.timescale=o,d=a+f-1,l.mediaRange=a+"-"+d,u.push(l),s+=c,a+=f;return u}(d,m),u(t,r,a,o))}else{if(d)m.range.start=d.offset||m.range.start,m.range.end=m.range.start+(d.size||l);else{if(f<m.bytesLoaded)return void u(t,r,null,o);(f=c.getLastBox())&&f.size?(m.range.start=f.offset+f.size,m.range.end=m.range.start+l):m.range.end+=l}e(t,r,o,m.range,u,m)}},error:function(){u(t,r,null,o)}}),n.debug("Perform SIDX load: "+m.url+" with range : "+m.range.start+" - "+m.range.end)},reset:function(){h.abort(),l=s=r=h=null}}}l.__dashjs_factory_name="SegmentBaseLoader",n.default=s.default.getSingletonFactory(l),t.exports=n.default},{163:163,239:239,241:241,47:47,96:96}],60:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(225)),o=r(e(112)),s=r(e(47)),a=r(e(96)),u=r(e(241)),l=r(e(163)),d=r(e(239));function c(){var e=this.context,t=void 0,n=void 0,r=void 0,s=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0;function E(){if(!_||!_.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function b(e,t,n,r){g.trigger(v.SEGMENTS_LOADED,{segments:n,representation:r,error:n?void 0:new d.default(y.SEGMENT_BASE_LOADER_ERROR_CODE,y.SEGMENT_BASE_LOADER_ERROR_MESSAGE)},{streamId:e,mediaType:t})}function T(e){var t=new u.default;return t.setInfo(e),t}return t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(o.default.MISSING_CONFIG_ERROR);_=e.baseURLController,f=e.dashMetrics,h=e.mediaPlayerModel,s=e.errHandler,m=e.settings,v=e.events,g=e.eventBus,y=e.errors,n=e.debug.getLogger(t),c=e.requestModifier},initialize:function(){p=(0,l.default)(e).create({errHandler:s,dashMetrics:f,mediaPlayerModel:h,requestModifier:c,useFetch:m?m.get().streaming.lowLatencyEnabled:null,errors:y})},loadInitialization:function(e,t,r,i){E();var o=null,s=r?_.resolve(r.path):null,a=r?r.range.split("-"):null;s=i||{range:{start:a?parseFloat(a[0]):null,end:a?parseFloat(a[1]):null},request:o,url:s?s.url:void 0,init:!0,mediaType:t};n.info("Start loading initialization."),o=T(s),p.load({request:o,success:function(){g.trigger(v.INITIALIZATION_LOADED,{representation:r},{streamId:e,mediaType:t})},error:function(){g.trigger(v.INITIALIZATION_LOADED,{representation:r},{streamId:e,mediaType:t})}}),n.debug("Perform init load: "+s.url)},loadSegments:function(t,o,s,u,l){E();var d=null,c=s?_.resolve(s.path):null,f=c?c.url:void 0;l=l||b,d=T({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:d,url:f,init:!1,mediaType:o}),n.debug("Parsing ebml header"),p.load({request:d,success:function(d){!function(t,o,s,u){if(t&&0!==t.byteLength){var l,d,c,f=(0,i.default)(e).create({data:t}),h=void 0,m=(t=s?s.split("-"):null,s=null,{url:o,range:{start:t?parseFloat(t[0]):null,end:t?parseFloat(t[1]):null},request:s});for(n.debug("Parse EBML header: "+m.url),f.skipOverElement(r.EBML),f.consumeTag(r.Segment),d=f.getMatroskaCodedNum(),d+=f.getPos(),c=f.getPos();f.moreData()&&!f.consumeTagAndSize(r.Segment.Info,!0);)if(!(f.skipOverElement(r.Segment.SeekHead,!0)||f.skipOverElement(r.Segment.Tracks,!0)||f.skipOverElement(r.Segment.Cues,!0)||f.skipOverElement(r.Void,!0)))throw new Error("no valid top level element found");for(;void 0===h;){var g=f.getMatroskaCodedNum(!0),v=f.getMatroskaCodedNum();g===r.Segment.Info.Duration.tag?h=f[r.Segment.Info.Duration.parse](v):f.setPos(f.getPos()+v)}s=T(m),p.load({request:s,success:function(t){l=function(t,o,s,u){for(var l,d,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=(f=[],p=0,(d=function(t){var n=[],o=(0,i.default)(e).create({data:t}),s=void 0,a=void 0;for(o.consumeTagAndSize(r.Segment.Cues);o.moreData()&&o.consumeTagAndSize(r.Segment.Cues.CuePoint,!0);){for((s={}).CueTime=o.parseTag(r.Segment.Cues.CuePoint.CueTime),s.CueTracks=[];o.moreData()&&o.consumeTag(r.Segment.Cues.CuePoint.CueTrackPositions,!0);){var u=o.getMatroskaCodedNum(),l=o.getPos();if((a={}).Track=o.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===a.Track)throw new Error("Cue track cannot be 0");a.ClusterPosition=o.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),s.CueTracks.push(a),o.setPos(l+u)}if(0===s.CueTracks.length)throw new Error("Mandatory cuetrack not found");n.push(s)}if(0===n.length)throw new Error("mandatory cuepoint not found");return n}(t)).length);p<g;p+=1)h=new a.default,c=0,c=p<d.length-1?d[p+1].CueTime-d[p].CueTime:u-d[p].CueTime,h.duration=c,h.startTime=d[p].CueTime,h.timescale=1e3,l=d[p].CueTracks[0].ClusterPosition+o,m=p<d.length-1?d[p+1].CueTracks[0].ClusterPosition+o-1:s-1,h.mediaRange=l+"-"+m,f.push(h);return n.debug("Parsed cues: "+f.length+" cues."),f}(t,c,d,h),u(l)},error:function(){n.error("Download Error: Cues "+m.url),u(null)}}),n.debug("Perform cues load: "+m.url+" bytes="+m.range.start+"-"+m.range.end)}else u(null)}(d,f,u,(function(e){l(t,o,e,s)}))},error:function(){l(t,o,null,s)}})},reset:function(){c=s=null}},r={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}c.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=s.default.getSingletonFactory(c),t.exports=n.default},{112:112,163:163,225:225,239:239,241:241,47:47,96:96}],61:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&r(e.prototype,t)}(i,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId"}}]),i);n.default=o,t.exports=n.default},{}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(239));e=r(e(47));function s(e){var t=(e=e||{}).eventBus,n=e.events,r=e.errors,s=e.abrController,a=e.dashMetrics,u=e.playbackController,l=e.timelineConverter,d=e.type,c=e.streamInfo,f=e.dashConstants,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0;function y(){if(!(s&&a&&u&&l))throw new Error(i.default.MISSING_CONFIG_ERROR)}function _(){m=!(p=null),g=[]}function E(){y();var e=new Date,t=v,n=1e3*u.getTime();t&&a.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function b(e){return null==e||e>=g.length?null:g[e]}function T(e,t){e.segmentAvailabilityRange=l.calcSegmentAvailabilityRange(e,t),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start?A(new o.default(r.SEGMENTS_UNAVAILABLE_ERROR_CODE,r.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end})):t&&(e=e.segmentAvailabilityRange.end,l.setExpectedLiveEdge(e),a.updateManifestUpdateInfo({presentationStartTime:e}))}function S(e,r){y();for(var i=0,o=g.length;i<o;i++)T(g[i],e),r&&t.trigger(n.REPRESENTATION_UPDATE_STARTED,{representation:g[i]},{streamId:c.id,mediaType:d})}function w(){m=!0,t.trigger(n.DATA_UPDATE_STARTED,{},{streamId:c.id,mediaType:d})}function A(e){m=!1,t.trigger(n.DATA_UPDATE_COMPLETED,{data:p,currentRepresentation:v,error:e},{streamId:c.id,mediaType:d})}function R(e){t.trigger(n.AST_IN_FUTURE,{delay:e}),setTimeout((function(){m||(w(),g.forEach((function(e){e.segmentAvailabilityRange=null})),S(u.getIsDynamic(),!0))}),e)}function C(e){if(m)if(e.error)A(e.error);else{var t,n=e.representation,i=a.getCurrentManifestUpdate(),l=!1;e=0;if(n.adaptation.period.mpd.manifest.type===f.DYNAMIC&&!n.adaptation.period.mpd.manifest.ignorePostponeTimePeriod&&u.getStreamController().getStreams().length<=1&&(e=function(e){try{var t=u.getStreamController().getActiveStreamInfo(),n=e.segmentAvailabilityRange.start;return t&&t.id&&t.id!==c.id&&(n=Math.min(u.getTime(),n)),n=e.segmentAvailabilityRange.end-n,1e3*(u.getLiveDelay()-n)}catch(e){return 0}}(n)),0<e)return R(e),void A(new o.default(r.SEGMENTS_UPDATE_FAILED_ERROR_CODE,r.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));if(i){for(var h=0;h<i.representationInfo.length;h++)if((t=i.representationInfo[h]).index===n.index&&t.mediaType===d){l=!0;break}l||a.addManifestUpdateRepresentationInfo(n,d)}!function(){for(var e=0,t=g.length;e<t;e++){var n=g[e].segmentInfoType;if(null===g[e].segmentAvailabilityRange||!g[e].hasInitialization()||(n===f.SEGMENT_BASE||n===f.BASE_URL)&&!g[e].segments)return}return 1}()||(s.setPlaybackQuality(d,c,(e=v,g.indexOf(e))),a.updateManifestUpdateInfo({latency:v.segmentAvailabilityRange.end-u.getTime()}),a.getCurrentRepresentationSwitch(v.adaptation.type)||E(),A())}}function I(e){e.isDynamic&&S(e.isDynamic)}function O(e){v=b(e.newQuality),E()}function D(e){e.newDuration&&v&&v.adaptation.period&&(v.adaptation.period.duration=e.newDuration)}return h={getStreamId:function(){return c.id},getType:function(){return d},getData:function(){return p},isUpdating:function(){return m},updateData:function(e,t,n,r){y(),w(),g=t,v=b(r),p=e,n===i.default.VIDEO||n===i.default.AUDIO||n===i.default.FRAGMENTED_TEXT?S(u.getIsDynamic(),!0):A()},updateRepresentation:T,getCurrentRepresentation:function(){return v},getRepresentationForQuality:b,reset:function(){t.off(n.QUALITY_CHANGE_REQUESTED,O,h),t.off(n.REPRESENTATION_UPDATE_COMPLETED,C,h),t.off(n.WALLCLOCK_TIME_UPDATED,I,h),t.off(n.MANIFEST_VALIDITY_CHANGED,D,h),_()}},_(),t.on(n.QUALITY_CHANGE_REQUESTED,O,h),t.on(n.REPRESENTATION_UPDATE_COMPLETED,C,h),t.on(n.WALLCLOCK_TIME_UPDATED,I,h),t.on(n.MANIFEST_VALIDITY_CHANGED,D,h),h}s.__dashjs_factory_name="RepresentationController",n.default=e.default.getClassFactory(s),t.exports=n.default},{112:112,239:239,47:47}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(59)),s=r(e(60));function a(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,i=e.dashMetrics,a=e.mediaPlayerModel,u=e.errHandler,l=e.baseURLController,d=e.debug,c=e.boxParser,f=e.requestModifier,h=e.errors,p=void 0,m=void 0,g=void 0;function v(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}function y(e){(v(e.mimeType)?g:m).loadInitialization(e.streamId,e.mediaType,e.representation)}function _(e){(v(e.mimeType)?g:m).loadSegments(e.streamId,e.mediaType,e.representation,e.representation?e.representation.indexRange:null,e.callback)}return p={initialize:function(){n.on(r.SEGMENTBASE_INIT_REQUEST_NEEDED,y,p),n.on(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,_,p),m.initialize(),g.initialize()},reset:function(){n.off(r.SEGMENTBASE_INIT_REQUEST_NEEDED,y,p),n.off(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,_,p)}},m=(0,o.default)(t).getInstance(),g=(0,s.default)(t).getInstance(),m.setConfig({baseURLController:l,dashMetrics:i,mediaPlayerModel:a,errHandler:u,eventBus:n,events:r,errors:h,debug:d,boxParser:c,requestModifier:f}),g.setConfig({baseURLController:l,dashMetrics:i,mediaPlayerModel:a,errHandler:u,eventBus:n,events:r,errors:h,debug:d,requestModifier:f}),p}a.__dashjs_factory_name="SegmentBaseController",i=i.default.getSingletonFactory(a),n.default=i,t.exports=n.default},{47:47,59:59,60:60}],64:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(84)),s=r(e(82)),a=r(e(78)),u=r(e(80));function l(e){e=e||{};var t,n=this.context,r=e.events,i=e.eventBus,l=e.dashConstants,d=e.streamInfo,c=e.type,f=void 0;function h(e){return e?e.segments?f[l.SEGMENT_BASE]:f[e.segmentInfoType]:null}return t={initialize:function(t){f[l.SEGMENT_TIMELINE]=(0,o.default)(n).create(e,t),f[l.SEGMENT_TEMPLATE]=(0,s.default)(n).create(e,t),f[l.SEGMENT_LIST]=(0,a.default)(n).create(e,t),f[l.SEGMENT_BASE]=(0,u.default)(n).create(e,t)},update:function(e,t,n,o){n||i.trigger(r.SEGMENTBASE_INIT_REQUEST_NEEDED,{streamId:d.id,mediaType:c,mimeType:t,representation:e}),o||i.trigger(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{streamId:d.id,mediaType:c,mimeType:t,representation:e})},getSegmentByIndex:function(e,t,n){var r=h(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=h(e);return n?n.getSegmentByTime(e,t):null}},f={},t}l.__dashjs_factory_name="SegmentsController",i=i.default.getClassFactory(l),n.default=i,t.exports=n.default},{47:47,78:78,80:80,82:82,84:84}],65:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(61)),s=r(e(94)),a=r(e(85)),u=r(e(93)),l=r(e(91)),d=r(e(99)),c=r(e(87)),f=r(e(86)),h=r(e(88)),p=r(e(230)),m=r(e(234)),g=r(e(47)),v=r(e(45)),y=r(e(239)),_=r(e(51)),E=e(217);function b(){var e,t=void 0,n=void 0,r=void 0,g=this.context,b=(0,m.default)(g).getInstance(),T=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function S(e,t){var n,r=void 0,s=void 0,a=void 0,u=void 0,l=void 0,d=!1,c=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),u=t!==i.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var f=D(e.Representation_asArray[0]);if(f&&0<f.length&&0<=E.THUMBNAILS_SCHEME_ID_URIS.indexOf(f[0].schemeIdUri))return t===i.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(o.default.CODECS)&&(0===(l=e.Representation_asArray[0].codecs).search(i.default.STPP)||0===l.search(i.default.WVTT)))return t===i.default.FRAGMENTED_TEXT}if(a){if(1<a.length)return t===i.default.MUXED;a[0]&&a[0].contentType===t&&(c=d=!0)}if(e.hasOwnProperty(o.default.MIME_TYPE)&&(d=u.test(e.mimeType),c=!0),!c)for(r=0,n=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!c&&r<n;)(s=e.Representation_asArray[r]).hasOwnProperty(o.default.MIME_TYPE)&&(d=u.test(s.mimeType),c=!0),r++;return d}function w(e){return"text/vtt"===e||"application/ttml+xml"===e}function A(){return function(e,t){return e.bandwidth-t.bandwidth}}function R(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function C(e,t){return e&&e.Period_asArray&&T(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function I(e){return e&&e.Period_asArray?e.Period_asArray:[]}function O(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===o.default.DYNAMIC),t}function D(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function M(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var s=new h.default;if(s.timescale=1,s.representation=t,!e[r].hasOwnProperty(i.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");s.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(o.default.TIMESCALE)&&(s.timescale=e[r].timescale),e[r].hasOwnProperty(o.default.VALUE)&&(s.value=e[r].value),n.push(s)}return n}function N(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some((function(n){if(n){var i=new f.default,s=n.__text||n;return b.isRelative(s)&&(r=!0,e.baseUri&&(s=b.resolve(s,e.baseUri))),i.url=s,n.hasOwnProperty(o.default.SERVICE_LOCATION)&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=s,n.hasOwnProperty(o.default.DVB_PRIORITY)&&(i.dvb_priority=n[o.default.DVB_PRIORITY]),n.hasOwnProperty(o.default.DVB_WEIGHT)&&(i.dvb_weight=n[o.default.DVB_WEIGHT]),n.hasOwnProperty(o.default.AVAILABILITY_TIME_OFFSET)&&(i.availabilityTimeOffset=n[o.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(o.default.AVAILABILITY_TIME_COMPLETE)&&(i.availabilityTimeComplete="false"!==n[o.default.AVAILABILITY_TIME_COMPLETE]),t.push(i),r}})),t}return e={getIsTypeOf:S,getIsTextTrack:w,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(o.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(o.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(o.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){return 0<(n=C(t,n)).length&&T(e)?n[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;for(var r=C(t,n),i=0;i<r.length;i++)if((0,p.default)(g).getInstance().areEqual(r[i],e))return i;return-1},getAdaptationForId:function(e,t,n){for(var r=C(t,n),i=void 0,s=(i=0,r.length);i<s;i++)if(r[i].hasOwnProperty(o.default.ID)&&r[i].id===e)return r[i];return null},getAdaptationsForType:function(e,t,n){for(var r=C(e,t),i=void 0,o=[],s=(i=0,r.length);i<s;i++)S(r[i],n)&&o.push(R(r[i]));return o},getRealPeriods:I,getRealPeriodForIndex:function(e,t){return 0<(t=I(t)).length&&T(e)?t[e]:null},getCodec:function(e,t,n){var r=null;return e&&e.Representation_asArray&&0<e.Representation_asArray.length&&(e=T(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0])&&(r=e.mimeType+';codecs="'+e.codecs+'"',n&&void 0!==e.width&&(r+=';width="'+e.width+'";height="'+e.height+'"')),r&&r.replace(/\sprofiles=[^;]*/g,"")},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(o.default.CENC_DEFAULT_KID)?e[o.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(o.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:O,getId:function(e){return e&&e[o.default.ID]||null},hasProfile:function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(o.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(o.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(o.default.PUBLISH_TIME)?new Date(e[o.default.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return((e=R(e))&&Array.isArray(e.Representation_asArray)?e.Representation_asArray:[]).map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}}))},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&T(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,i=[],a=function(e){if(e&&e.period&&T(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&T(e.index))return R(t.AdaptationSet_asArray[e.index])}}(e),u=void 0,l=void 0;if(a&&a.Representation_asArray){e&&e.period&&T(e.period.index)&&(t=N(e.period.mpd.manifest))&&(l=t[0]);for(var d=0,c=a.Representation_asArray.length;d<c;++d){var f,h=a.Representation_asArray[d],p=new s.default;p.index=d,p.adaptation=e,h.hasOwnProperty(o.default.ID)&&(p.id=h.id),h.hasOwnProperty(o.default.CODECS)&&(p.codecs=h.codecs),h.hasOwnProperty(o.default.CODEC_PRIVATE_DATA)&&(p.codecPrivateData=h.codecPrivateData),h.hasOwnProperty(o.default.BANDWITH)&&(p.bandwidth=h.bandwidth),h.hasOwnProperty(o.default.WIDTH)&&(p.width=h.width),h.hasOwnProperty(o.default.HEIGHT)&&(p.height=h.height),h.hasOwnProperty(o.default.SCAN_TYPE)&&(p.scanType=h.scanType),h.hasOwnProperty(o.default.MAX_PLAYOUT_RATE)&&(p.maxPlayoutRate=h.maxPlayoutRate),h.hasOwnProperty(o.default.SEGMENT_BASE)?(u=h.SegmentBase,p.segmentInfoType=o.default.SEGMENT_BASE):h.hasOwnProperty(o.default.SEGMENT_LIST)?(u=h.SegmentList).hasOwnProperty(o.default.SEGMENT_TIMELINE)?p.segmentInfoType=o.default.SEGMENT_TIMELINE:p.segmentInfoType=o.default.SEGMENT_LIST:h.hasOwnProperty(o.default.SEGMENT_TEMPLATE)?((u=h.SegmentTemplate).hasOwnProperty(o.default.SEGMENT_TIMELINE)?p.segmentInfoType=o.default.SEGMENT_TIMELINE:p.segmentInfoType=o.default.SEGMENT_TEMPLATE,u.hasOwnProperty(o.default.INITIALIZATION_MINUS)&&(p.initialization=u.initialization.split("$Bandwidth$").join(h.bandwidth).split("$RepresentationID$").join(h.id))):p.segmentInfoType=o.default.BASE_URL,p.essentialProperties=D(h),u&&(u.hasOwnProperty(o.default.INITIALIZATION)?((f=u.Initialization).hasOwnProperty(o.default.SOURCE_URL)&&(p.initialization=f.sourceURL),f.hasOwnProperty(o.default.RANGE)&&(p.range=f.range)):h.hasOwnProperty(o.default.MIME_TYPE)&&w(h.mimeType)&&(p.range=0),u.hasOwnProperty(o.default.TIMESCALE)&&(p.timescale=u.timescale),u.hasOwnProperty(o.default.DURATION)?p.segmentDuration=u.duration/p.timescale:h.hasOwnProperty(o.default.SEGMENT_TEMPLATE)&&(u=h.SegmentTemplate).hasOwnProperty(o.default.SEGMENT_TIMELINE)&&(p.segmentDuration=(r=void 0,r=(n=u.SegmentTimeline).S_asArray[0],n=n.S_asArray[1],(r.hasOwnProperty("d")?r.d:n.t-r.t)/p.timescale)),u.hasOwnProperty(o.default.MEDIA)&&(p.media=u.media),u.hasOwnProperty(o.default.START_NUMBER)&&(p.startNumber=u.startNumber),u.hasOwnProperty(o.default.INDEX_RANGE)&&(p.indexRange=u.indexRange),u.hasOwnProperty(o.default.PRESENTATION_TIME_OFFSET)&&(p.presentationTimeOffset=u.presentationTimeOffset/p.timescale),u.hasOwnProperty(o.default.AVAILABILITY_TIME_OFFSET)?p.availabilityTimeOffset=u.availabilityTimeOffset:l&&void 0!==l.availabilityTimeOffset&&(p.availabilityTimeOffset=l.availabilityTimeOffset),u.hasOwnProperty(o.default.AVAILABILITY_TIME_COMPLETE)?p.availabilityTimeComplete="false"!==u.availabilityTimeComplete:l&&void 0!==l.availabilityTimeComplete&&(p.availabilityTimeComplete=l.availabilityTimeComplete)),p.MSETimeOffset=(n=void 0,n=(r=p).presentationTimeOffset,r.adaptation.period.start-n),p.path=[e.period.index,e.index,d],i.push(p)}}return i},getAdaptationsForPeriod:function(e){var t=e&&T(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,s=void 0,u=void 0;if(t&&t.AdaptationSet_asArray)for(u=0;u<t.AdaptationSet_asArray.length;u++)s=t.AdaptationSet_asArray[u],r=new a.default,s.hasOwnProperty(o.default.ID)&&(r.id=s.id),r.index=u,r.period=e,S(s,i.default.MUXED)?r.type=i.default.MUXED:S(s,i.default.AUDIO)?r.type=i.default.AUDIO:S(s,i.default.VIDEO)?r.type=i.default.VIDEO:S(s,i.default.FRAGMENTED_TEXT)?r.type=i.default.FRAGMENTED_TEXT:S(s,i.default.IMAGE)?r.type=i.default.IMAGE:r.type=i.default.TEXT,n.push(r);return n},getRegularPeriods:function(e){for(var r=!!e&&O(e.manifest),s=[],a=null,l=null,d=null,c=null,f=void 0,h=(f=0,e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0);f<h;f++)(l=e.manifest.Period_asArray[f]).hasOwnProperty(o.default.START)?(c=new u.default).start=l.start:null!==a&&a.hasOwnProperty(o.default.DURATION)&&null!==d?(c=new u.default).start=parseFloat((d.start+d.duration).toFixed(5)):0!==f||r||((c=new u.default).start=0),null!==d&&isNaN(d.duration)&&(null!==c?d.duration=parseFloat((c.start-d.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==c&&(c.id=function(e,t){if(!e)throw new Error("Period cannot be null or undefined");return t=u.default.DEFAULT_ID+"_"+t,e.hasOwnProperty(o.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(t=e.id),t}(l,f),c.index=f,c.mpd=e,l.hasOwnProperty(o.default.DURATION)&&(c.duration=l.duration),s.push(c),a=l,d=c),c=l=null;return 0===s.length||null!==d&&isNaN(d.duration)&&(d.duration=parseFloat((function(e){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(i.default.MISSING_CONFIG_ERROR)}();var t=O(e.mpd.manifest),r=void 0;return e.mpd.manifest.mediaPresentationDuration?r=e.mpd.manifest.mediaPresentationDuration:e.duration?r=e.duration:t?r=Number.POSITIVE_INFINITY:n.error(new y.default(_.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),r}(d)-d.start).toFixed(5))),s},getMpd:function(e){var t=new l.default;return e&&((t.manifest=e).hasOwnProperty(o.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(o.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(o.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(o.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(o.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(o.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(o.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=(t=t?t.Period_asArray:null)&&e&&T(e.index)?t[e.index].EventStream_asArray:null,s=[],a=void 0,u=void 0;if(n)for(a=0;a<n.length;a++){var l=new h.default;if(l.period=e,l.timescale=1,!n[a].hasOwnProperty(i.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=n[a][i.default.SCHEME_ID_URI],n[a].hasOwnProperty(o.default.TIMESCALE)&&(l.timescale=n[a][o.default.TIMESCALE]),n[a].hasOwnProperty(o.default.VALUE)&&(l.value=n[a][o.default.VALUE]),n[a].hasOwnProperty(o.default.PRESENTATION_TIME_OFFSET)&&(l.presentationTimeOffset=n[a][o.default.PRESENTATION_TIME_OFFSET]),u=0;n[a].Event_asArray&&u<n[a].Event_asArray.length;u++){var d,f=n[a].Event_asArray[u],p=new c.default;p.presentationTime=0,p.eventStream=l,f.hasOwnProperty(o.default.PRESENTATION_TIME)&&(p.presentationTime=f.presentationTime,d=l.presentationTimeOffset?l.presentationTimeOffset/l.timescale:0,p.calculatedPresentationTime=p.presentationTime/l.timescale+e.start-d),f.hasOwnProperty(o.default.DURATION)&&(p.duration=f.duration/l.timescale),f.hasOwnProperty(o.default.ID)&&(p.id=f.id),f.Signal&&f.Signal.Binary?p.messageData=r.decodeArray(f.Signal.Binary.toString()):p.messageData=f.messageData||f.__text,s.push(p)}}return s},getEssentialPropertiesForRepresentation:D,getEventStreamForAdaptationSet:function(e,t){var n,r,i=void 0;return e&&e.Period_asArray&&t&&t.period&&T(t.period.index)&&(n=e.Period_asArray[t.period.index])&&n.AdaptationSet_asArray&&T(t.index)&&(r=n.AdaptationSet_asArray[t.index])&&(i=r.InbandEventStream_asArray),M(i,null)},getEventStreamForRepresentation:function(e,t){var n,r,i,o=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&T(t.adaptation.period.index)&&(n=e.Period_asArray[t.adaptation.period.index])&&n.AdaptationSet_asArray&&T(t.adaptation.index)&&(r=n.AdaptationSet_asArray[t.adaptation.index])&&r.Representation_asArray&&T(t.index)&&(i=r.Representation_asArray[t.index])&&(o=i.InbandEventStream_asArray),M(o,t)},getUTCTimingSources:function(e){var t=O(e),n=!!e&&e.hasOwnProperty(o.default.AVAILABILITY_START_TIME),r=(e=e?e.UTCTiming_asArray:null,[]);return(t||n)&&e&&e.forEach((function(e){var t=new d.default;e.hasOwnProperty(i.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(o.default.VALUE)&&(t.value=e.value.toString(),r.push(t)))})),r},getBaseURLsFromElement:N,getRepresentationSortFunction:A,getLocation:function(e){if(e&&e.hasOwnProperty(i.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getPatchLocation:function(e){if(e&&e.hasOwnProperty(o.default.PATCH_LOCATION))return e.PatchLocation=e.PatchLocation_asArray[0],e.PatchLocation},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(o.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(o.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(o.default.SERVICE_DESCRIPTION)){var n=!0,r=!1,s=void 0;try{for(var a,u=e.ServiceDescription_asArray[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l,d=a.value,c=void 0,f=void 0,h=void 0,p=void 0;for(l in d)d.hasOwnProperty(l)&&(l===o.default.ID?c=d[l]:l===o.default.SERVICE_DESCRIPTION_SCOPE?f=d[l].schemeIdUri:l===o.default.SERVICE_DESCRIPTION_LATENCY?h={target:d[l].target,max:d[l].max,min:d[l].min}:l===o.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(p={max:d[l].max,min:d[l].min}));f===i.default.SERVICE_DESCRIPTION_LL_SCHEME&&(h||p)&&t.push({id:c,schemeIdUri:f,latency:h,playbackRate:p})}}catch(e){r=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw s}}}return t},getSupplementalPropperties:function(e){var t={};if(e&&e.hasOwnProperty(o.default.SUPPLEMENTAL_PROPERTY)){var n=!0,r=!1,s=void 0;try{for(var a=e.SupplementalProperty_asArray[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var u=u.value;u.hasOwnProperty(i.default.SCHEME_ID_URI)&&u.hasOwnProperty(o.default.VALUE)&&(t[u[i.default.SCHEME_ID_URI]]=u[o.default.VALUE])}}catch(e){r=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}}return t},setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64&&(r=e.BASE64))}},t=(0,v.default)(g).getInstance().getLogger(e),e}b.__dashjs_factory_name="DashManifestModel",n.default=g.default.getSingletonFactory(b),t.exports=n.default},{112:112,217:217,230:230,234:234,239:239,45:45,47:47,51:51,61:61,85:85,86:86,87:87,88:88,91:91,93:93,94:94,99:99}],66:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(61)),o=r(e(47)),s=r(e(45)),a=r(e(97)),u=r(e(92));function l(){var e,t=void 0,n=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(i.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(i.default.PUBLISH_TIME)?new Date(e[i.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(i.default.ORIGINAL_PUBLISH_TIME)?new Date(e[i.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[i.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map((function(e){var n=Object.keys(e)[0];if("add"!==n&&"remove"!==n&&"replace"!==n)return t.warn("Ignoring node of invalid action: "+n),null;var r=e[n],i=r.sel;if("add"===n&&r.type){if(!r.type.startsWith("@"))return t.warn("Ignoring add action for prefixed namespace declaration: "+r.type+"="+r.__text),null;i=i+"/"+r.type}return(e=new a.default(i)).isValid()?(i=null,e.findsAttribute()?i=r.__text||"":"remove"!==n&&(i=r.__children.reduce((function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e}),{})),i=new u.default(n,e,i),"add"===n&&(i.position=r.pos),i):(t.warn("Ignoring action with invalid selector: "+n+" - "+i),null)})).filter((function(e){return!!e})):[]}},t=(0,s.default)(n).getInstance().getLogger(e),e}l.__dashjs_factory_name="PatchManifestModel",n.default=o.default.getSingletonFactory(l),t.exports=n.default},{45:45,47:47,61:61,92:92,97:97}],67:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(77)),s=r(e(3)),a=r(e(76)),u=r(e(74)),l=r(e(73)),d=r(e(75)),c=r(e(70)),f=r(e(71));function h(e){e=e||{};var t,n=this.context,r=e.debug,i=void 0,h=void 0,p=void 0,m=void 0;return t={parse:function(e){var t=void 0,n=window.performance.now();if(!(t=p.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now();return t.Patch?((t=t.Patch).add_asArray&&t.add_asArray.forEach((function(e){return m.run(e)})),t.replace_asArray&&t.replace_asArray.forEach((function(e){return m.run(e)}))):(t=t.MPD,m.run(t)),e=window.performance.now(),i.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(e-r).toPrecision(3)+"ms, total: "+((e-n)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return h},getIron:function(){return m}},i=r.getLogger(t),h=[new u.default,new l.default,new d.default,new a.default],p=new s.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:h}),m=(0,o.default)(n).create({adaptationset:new c.default,period:new f.default}),t}h.__dashjs_factory_name="DashParser",n.default=i.default.getClassFactory(h),t.exports=n.default},{3:3,47:47,70:70,71:71,73:73,74:74,75:75,76:76,77:77}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}n.default=i,t.exports=n.default},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,s=(o=e(68))&&o.__esModule?o:{default:o};r(a,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),r=a;function a(e,t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach((function(e){r._properties.push(new s.default(e))}))}n.default=r,t.exports=n.default},{68:68}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(69)),o=r(e(61));(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,i.default),e=s;function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[o.default.PROFILES,o.default.WIDTH,o.default.HEIGHT,o.default.SAR,o.default.FRAMERATE,o.default.AUDIO_SAMPLING_RATE,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.MAXIMUM_SAP_PERIOD,o.default.START_WITH_SAP,o.default.MAX_PLAYOUT_RATE,o.default.CODING_DEPENDENCY,o.default.SCAN_TYPE,o.default.FRAME_PACKING,o.default.AUDIO_CHANNEL_CONFIGURATION,o.default.CONTENT_PROTECTION,o.default.ESSENTIAL_PROPERTY,o.default.SUPPLEMENTAL_PROPERTY,o.default.INBAND_EVENT_STREAM];(function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}})(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,o.default.ADAPTATION_SET,e,[new i.default(o.default.REPRESENTATION,e,[new i.default(o.default.SUB_REPRESENTATION,e)])])}n.default=e,t.exports=n.default},{61:61,69:69}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(69)),o=r(e(61));(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(s,i.default),e=s;function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[o.default.SEGMENT_BASE,o.default.SEGMENT_TEMPLATE,o.default.SEGMENT_LIST];(function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}})(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,o.default.PERIOD,e,[new i.default(o.default.ADAPTATION_SET,e,[new i.default(o.default.REPRESENTATION,e)])])}n.default=e,t.exports=n.default},{61:61,69:69}],72:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),o);function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._test=e,this._converter=t}n.default=i,t.exports=n.default},{}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(r=e(72))&&r.__esModule?r:{default:r};var r,i=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(o,e.default),e=o;function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,(function(e){return i.test(e.value)}),(function(e){var t=i.exec(e),n=void 0;n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0);return t[9]&&t[10]&&(e=60*parseInt(t[9],10)+parseInt(t[10],10),n+=("+"===t[8]?-1:1)*e*60*1e3),new Date(n)}))}n.default=e,t.exports=n.default},{72:72}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(72)),o=r(e(112)),s=r(e(61)),a=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(u,i.default),i=u;function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,(function(e){for(var t=[s.default.MIN_BUFFER_TIME,s.default.MEDIA_PRESENTATION_DURATION,s.default.MINIMUM_UPDATE_PERIOD,s.default.TIMESHIFT_BUFFER_DEPTH,s.default.MAX_SEGMENT_DURATION,s.default.MAX_SUBSEGMENT_DURATION,s.default.SUGGESTED_PRESENTATION_DELAY,s.default.START,o.default.START_TIME,s.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return a.test(e.value);return!1}),(function(e){var t=a.exec(e);e=31536e3*parseFloat(t[3]||0)+2592e3*parseFloat(t[5]||0)+86400*parseFloat(t[7]||0)+3600*parseFloat(t[9]||0)+60*parseFloat(t[11]||0)+parseFloat(t[13]||0);return void 0!==t[1]&&(e=-e),e}))}n.default=i,t.exports=n.default},{112:112,61:61,72:72}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e=(r=e(72))&&r.__esModule?r:{default:r};var r,i=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(o,e.default),e=o;function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this,(function(e){return i.test(e.value)}),(function(e){return parseFloat(e)}))}n.default=e,t.exports=n.default},{72:72}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=r(e(72)),s=r(e(61));(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(a,o.default),o=a;function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this,(function(e,t){var n=(i(n={},s.default.MPD,[s.default.ID,s.default.PROFILES]),i(n,s.default.PERIOD,[s.default.ID]),i(n,s.default.BASE_URL,[s.default.SERVICE_LOCATION,s.default.BYTE_RANGE]),i(n,s.default.SEGMENT_BASE,[s.default.INDEX_RANGE]),i(n,s.default.INITIALIZATION,[s.default.RANGE]),i(n,s.default.REPRESENTATION_INDEX,[s.default.RANGE]),i(n,s.default.SEGMENT_LIST,[s.default.INDEX_RANGE]),i(n,s.default.BITSTREAM_SWITCHING,[s.default.RANGE]),i(n,s.default.SEGMENT_URL,[s.default.MEDIA_RANGE,s.default.INDEX_RANGE]),i(n,s.default.SEGMENT_TEMPLATE,[s.default.INDEX_RANGE,s.default.MEDIA,s.default.INDEX,s.default.INITIALIZATION_MINUS,s.default.BITSTREAM_SWITCHING_MINUS]),i(n,s.default.ASSET_IDENTIFIER,[s.default.VALUE,s.default.ID]),i(n,s.default.EVENT_STREAM,[s.default.VALUE]),i(n,s.default.ADAPTATION_SET,[s.default.PROFILES,s.default.MIME_TYPE,s.default.SEGMENT_PROFILES,s.default.CODECS,s.default.CONTENT_TYPE]),i(n,s.default.FRAME_PACKING,[s.default.VALUE,s.default.ID]),i(n,s.default.AUDIO_CHANNEL_CONFIGURATION,[s.default.VALUE,s.default.ID]),i(n,s.default.CONTENT_PROTECTION,[s.default.VALUE,s.default.ID]),i(n,s.default.ESSENTIAL_PROPERTY,[s.default.VALUE,s.default.ID]),i(n,s.default.SUPPLEMENTAL_PROPERTY,[s.default.VALUE,s.default.ID]),i(n,s.default.INBAND_EVENT_STREAM,[s.default.VALUE,s.default.ID]),i(n,s.default.ACCESSIBILITY,[s.default.VALUE,s.default.ID]),i(n,s.default.ROLE,[s.default.VALUE,s.default.ID]),i(n,s.default.RATING,[s.default.VALUE,s.default.ID]),i(n,s.default.VIEWPOINT,[s.default.VALUE,s.default.ID]),i(n,s.default.CONTENT_COMPONENT,[s.default.CONTENT_TYPE]),i(n,s.default.REPRESENTATION,[s.default.ID,s.default.DEPENDENCY_ID,s.default.MEDIA_STREAM_STRUCTURE_ID]),i(n,s.default.SUBSET,[s.default.ID]),i(n,s.default.METRICS,[s.default.METRICS_MINUS]),i(n,s.default.REPORTING,[s.default.VALUE,s.default.ID]),n);return!!n.hasOwnProperty(t)&&(void 0!==(t=n[t])&&0<=t.indexOf(e.name))}),(function(e){return String(e)}))}n.default=o,t.exports=n.default},{61:61,72:72}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){function t(e,t,n){for(var r=0,i=e.length;r<i;++r){var o,s,a=e[r];t[a.name]&&(n[a.name]?a.merge&&(o=t[a.name],s=n[a.name],"object"==typeof o&&"object"==typeof s?function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(o,s):n[a.name]=o+s):n[a.name]=t[a.name])}}function n(e,r){for(var i=0,o=e.children.length;i<o;++i){var s=e.children[i],a=r[s.name+"_asArray"];if(a)for(var u=0,l=a.length;u<l;++u){var d=a[u];t(e.properties,r,d),n(s,d)}}}return{run:function(t){if(null===t||"object"!=typeof t)return t;if(t.Period_asArray&&"period"in e)for(var r=e.period,i=t.Period_asArray,o=0,s=i.length;o<s;++o){var a=i[o];if(n(r,a),"adaptationset"in e){var u=a.AdaptationSet_asArray;if(u)for(var l=e.adaptationset,d=0,c=u.length;d<c;++d)n(l,u[d])}}return t}}}i.__dashjs_factory_name="ObjectIron",e=e.default.getClassFactory(i),n.default=e,t.exports=n.default},{47:47}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112)),s=e(81);function a(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function i(e,i){if(r(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,a=o.SegmentURL_asArray.length,u=e&&!isNaN(e.startNumber)?e.startNumber:1,l=Math.max(u-1,0),d=Math.max(i-l,0);l=null;return d<a&&(d=o.SegmentURL_asArray[d],(l=(0,s.getIndexBasedSegment)(n,t,e,i))&&(l.replacementTime=(u+i-1)*e.segmentDuration,l.media=d.media?d.media:"",l.mediaRange=d.mediaRange,l.index=i,l.indexRange=d.indexRange)),e.availableSegmentsNumber=a,l}return{getSegmentByIndex:i,getSegmentByTime:function(e,t){if(r(),!e)return null;var o=e.segmentDuration;return isNaN(o)?null:(t=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),i(e,Math.floor(t/o)))}}}a.__dashjs_factory_name="ListSegmentsGetter",i=i.default.getClassFactory(a),n.default=i,t.exports=n.default},{112:112,47:47,81:81}],79:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){n&&r(e,n)}(o,0,[{key:"round10",value:function(e,t){return n="round",void 0!==t&&0!=+t?(t=+t,null===(e=+e)||isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math[n](+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t)))):Math[n](e);var n}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=i,t.exports=n.default},{}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112));function s(e){var t=(e=e||{}).timelineConverter;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function r(e,t){if(n(),!e)return null;var r=e.segments?e.segments.length:-1,i=void 0;if(t<r&&(i=e.segments[t])&&i.availabilityIdx===t)return i;for(var o=0;o<r;o++)if((i=e.segments[o])&&i.availabilityIdx===t)return i;return null}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){return n(),r(e,function(e,t){if(!e)return-1;var n=e.segments,r=n?n.length:null,i=-1,o=void 0,s=void 0,a=void 0,u=void 0,l=void 0;if(n&&0<r)for(l=0;l<r;l++)if((a=(s=n[l]).presentationStartTime)<=t+(o=(u=s.duration)/2)&&t-o<a+u){i=s.availabilityIdx;break}return i}(e,t))}}}s.__dashjs_factory_name="SegmentBaseGetter",i=i.default.getClassFactory(s),n.default=i,t.exports=n.default},{112:112,47:47}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){return t&&e&&-1!==e.indexOf("$RepresentationID$")?(t=t.toString(),e.split("$RepresentationID$").join(t)):e},n.replaceTokenForTemplate=s,n.getIndexBasedSegment=function(e,t,n,r){var i,o,s=void 0;return s=n.segmentDuration,isNaN(s)&&(s=n.adaptation.period.duration),i=parseFloat((n.adaptation.period.start+r*s).toFixed(5)),o=parseFloat((i+s).toFixed(5)),r=a(n,s,i,e.calcMediaTimeFromPresentationTime(i,n),e.calcAvailabilityStartTimeFromPresentationTime(i,n.adaptation.period.mpd,t),e,o,t,r),u(e,n,r,t)?r:null},n.getTimeBasedSegment=function(e,t,n,r,i,o,l,d,c,f){var h,p=r/o,m=Math.min(i/o,n.adaptation.period.mpd.maxSegmentDuration);i=void 0,o=void 0;return i=(h=e.calcPresentationTimeFromMediaTime(p,n))+m,u(e,n,o=a(n,m,h,p,n.adaptation.period.mpd.manifest.loadedTime,e,i,t,c),t)?(o.replacementTime=f||r,l=s(l,"Number",o.replacementNumber),l=s(l,"Time",o.replacementTime),o.media=l,o.mediaRange=d,o):null};var r,i=(r=e(96))&&r.__esModule?r:{default:r};function o(e,t){for(;e.length<t;)e="0"+e;return e}function s(e,t,n){var r,i,s,a,u,l=void 0,d=t.length,c="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+d))<0)return e;if(r<(s=e.indexOf("%0",r+d))&&s<i)switch(a=e.charAt(i-1),u=parseInt(e.substring(s+c,i-1),10),a){case"d":case"i":case"u":l=o(n.toString(),u);break;case"x":l=o(n.toString(16),u);break;case"X":l=o(n.toString(16),u).toUpperCase();break;case"o":l=o(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(i+1)}}function a(e,t,n,r,o,s,a,u,l){var d=new i.default;return d.representation=e,d.duration=t,d.presentationStartTime=n,d.mediaStartTime=r,d.availabilityStartTime=o,d.availabilityEndTime=s.calcAvailabilityEndTimeFromPresentationTime(a,e.adaptation.period.mpd,u),d.wallStartTime=s.calcWallTimeForSegment(d,u),d.replacementNumber=(u=l,d.representation.startNumber+u),d.availabilityIdx=l,d}function u(e,t,n,r){var i=e.getPeriodEnd(t,r);if(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,i)<=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,n.presentationStartTime)){if(!r)return;if(t.segmentAvailabilityRange&&n.presentationStartTime>=t.segmentAvailabilityRange.end)return}return 1}},{96:96}],82:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112)),s=e(81);function a(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function i(e,i){if(r(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;i=Math.max(i,0);var a=(0,s.getIndexBasedSegment)(n,t,e,i);a&&(a.replacementTime=Math.round((i-1)*e.segmentDuration*e.timescale,10),u=o.media,u=(0,s.replaceTokenForTemplate)(u,"Number",a.replacementNumber),u=(0,s.replaceTokenForTemplate)(u,"Time",a.replacementTime),a.media=u);o=e.segmentDuration;var u=e.segmentAvailabilityRange;return isNaN(o)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((u.end-u.start)/o),a}return{getSegmentByIndex:i,getSegmentByTime:function(e,t){if(r(),!e)return null;var o=e.segmentDuration;return isNaN(o)?null:(t=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t),i(e,Math.floor(t/o)))}}}a.__dashjs_factory_name="TemplateSegmentsGetter",i=i.default.getClassFactory(a),n.default=i,t.exports=n.default},{112:112,47:47,81:81}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(54)),s=r(e(47)),a=r(e(61)),u=r(e(65)),l=r(e(48));function d(){var e,t=this.context,n=(0,i.default)(t).getInstance(),r=(0,l.default)(t).getInstance(),s=void 0,d=void 0,c=void 0,f=void 0;function h(e){d=e}function p(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-d)):t.availabilityStartTime}function m(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*d)/1e3}function g(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function v(e){void 0!==e.offset&&(h(e.offset/1e3),c=!0)}function y(){d=0,c=!1,f=NaN}function _(){n.off(o.default.UPDATE_TIME_SYNC_OFFSET,v,this),y()}return e={initialize:function(){y(),n.on(o.default.UPDATE_TIME_SYNC_OFFSET,v,this)},getClientTimeOffset:function(){return d},setClientTimeOffset:h,getExpectedLiveEdge:function(){return f},setExpectedLiveEdge:function(e){f=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return p.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return p.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:m,calcPresentationTimeFromMediaTime:g,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,i={start:n.start,end:n.start+n.duration};if(!t)return i;if(!c&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var o=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);if(e.segmentInfoType===a.default.SEGMENT_TIMELINE&&r.get().streaming.calcSegmentAvailabilityRangeFromTimeline)return function(e){var t,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=s.getRepresentationFor(e.index,n),i=(n=r.SegmentTemplate.SegmentTimeline,r.SegmentTemplate.timescale),o=n.S_asArray,a=0,u=void 0,l=void 0,d=void 0;for((n={start:0,end:0}).start=g(o[0].t/i,e),d=0,t=o.length;d<t;d++)l=0,(u=o[d]).hasOwnProperty("r")&&(l=u.r),a+=u.d/i*(1+l);return n.end=n.start+a,n}(e);var u=m(new Date,n);t=n.start+n.duration;return i.start=Math.max(u-n.mpd.timeShiftBufferDepth,n.start),o=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<o?o-e.availabilityTimeOffset:o,i.end=t<=u&&u-o<t?t:u-o,i},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!c&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0);t=m(new Date,n),n=n.start+n.duration,r=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<r?r-e.availabilityTimeOffset:r;return Math.min(t-r,n)},calcWallTimeForSegment:function(e,t){var n=void 0;return t&&(t=e.representation.adaptation.period.mpd.suggestedPresentationDelay,t=e.presentationStartTime+t,n=new Date(e.availabilityStartTime.getTime()+1e3*t)),n},reset:_},s=(0,u.default)(t).getInstance(),_(),e}d.__dashjs_factory_name="TimelineConverter",n.default=s.default.getSingletonFactory(d),t.exports=n.default},{46:46,47:47,48:48,54:54,61:61,65:65}],84:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112)),s=e(81);function a(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcMediaTimeFromPresentationTime")||!n.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function i(e,r){for(var i,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=o.SegmentTimeline,a=o.SegmentURL_asArray,u=0,l=0,d=-1,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=e.timescale,y=!1,_=(f=0,(i=s.S_asArray).length);f<_&&!y;f++){var E;p=0;for((c=i[f]).hasOwnProperty("r")&&(p=c.r),c.hasOwnProperty("t")&&(l=(u=c.t)/v),p<0&&((g=i[f+1])&&g.hasOwnProperty("t")?m=g.t/v:(E=(e.segmentAvailabilityRange?e.segmentAvailabilityRange:n.calcSegmentAvailabilityRange(e,t)).end,m=n.calcMediaTimeFromPresentationTime(E,e),e.segmentDuration=c.d/v),p=Math.ceil((m-l)/(c.d/v))-1),h=0;h<=p&&!y;h++)(y=r(u,l,o,a,c,v,++d,f))&&(e.segmentDuration=c.d/v,(h<p-1||f<_-1)&&d++),l=(u+=c.d)/v}e.availableSegmentsNumber=d}return{getSegmentByIndex:function(e,o,a){if(r(),!e)return null;var u=null,l=!1;return i(e,(function(r,i,o,d,c,f,h,p){if(l||a<0){var m=o.media;o=c.mediaRange;return d&&(m=d[p].media||"",o=d[p].mediaRange),u=(0,s.getTimeBasedSegment)(n,t,e,r,c.d,f,m,o,h,c.tManifest),!0}return i>=a-.5*c.d/f&&(l=!0),!1})),u},getSegmentByTime:function(e,o){if(r(),!e)return null;void 0===o&&(o=null);var a=null,u=n.calcMediaTimeFromPresentationTime(o,e);return i(e,(function(r,i,o,l,d,c,f,h){return u<i+d.d/c&&(i=o.media,o=d.mediaRange,l&&(i=l[h].media||"",o=l[h].mediaRange),a=(0,s.getTimeBasedSegment)(n,t,e,r,d.d,c,i,o,f,d.tManifest),!0)})),a}}}a.__dashjs_factory_name="TimelineSegmentsGetter",i=i.default.getClassFactory(a),n.default=i,t.exports=n.default},{112:112,47:47,81:81}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],86:[function(e,t,n){"use strict";function r(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}Object.defineProperty(n,"__esModule",{value:!0}),r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,n.default=r,t.exports=n.default},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},t.exports=n.default},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null},t.exports=n.default},{}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],92:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}]),o);function o(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.action=e,this.xpath=t,this.value=n,this.position=null}n.default=i,t.exports=n.default},{}],93:[function(e,t,n){"use strict";function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null}Object.defineProperty(n,"__esModule",{value:!0}),r.DEFAULT_ID="defaultId",n.default=r,t.exports=n.default},{}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,s=(o=e(61))&&o.__esModule?o:{default:o};r(a,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==s.default.BASE_URL&&this.segmentInfoType!==s.default.SEGMENT_BASE&&!this.indexRange}}]),r=a;function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}n.default=r,t.exports=n.default},{61:61}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],97:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(e,t){for(var n=null,r=e,i=1,o="MPD";i<this.path.length&&null!==r;){n=r;var s,a=this.path[i];o=a.name;i===this.path.length-1&&o.startsWith("@")||(0===(s=n[o+"_asArray"]||[]).length&&n[o]&&s.push(n[o]),a.position?r=s[a.position]||null:a.attribute?function(){var e=a.attribute;r=s.filter((function(t){return t[e.name]==e.value}))[0]||null}():r=s[0]||null),i++}return null===r?null:o.startsWith("@")?{name:o.substring(1),leaf:r,target:r}:{name:o,leaf:r,target:t?n:r}}}]),o);function o(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.valid="/"==e[0],this.path=e.split("/").filter((function(e){return 0!==e.length})).map((function(e){var n={name:e},r=e.indexOf("[");return-1!=r&&(n.name=e.substring(0,r),r=e.substring(r+1,e.length-1),t.valid=t.valid&&-1==r.indexOf("["),-1!=(e=r.indexOf("="))?(n.attribute={name:r.substring(1,e),value:r.substring(e+1)},-1!=["'",'"'].indexOf(n.attribute.value[0])&&(n.attribute.value=n.attribute.value.substring(1,n.attribute.value.length-1))):n.position=parseInt(r,10)-1),n}))}n.default=i,t.exports=n.default},{}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=n.default},{}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(163)),s=r(e(242)),a=r(e(239));e=r(e(47));function u(e){e=e||{};var t=this.context,n=e.eventBus,r=e.events,u=e.urlUtils,l=e.errors,d=void 0,c=void 0;return d={checkForExistence:function(e){function t(t){n.trigger(r.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})}var i;e?(i=new s.default(e.url),c.load({request:i,success:function(){t(!0)},error:function(){t(!1)}})):t(!1)},load:function(e){function t(t,i){n.trigger(r.LOADING_COMPLETED,{request:e,response:t||null,error:i||null,sender:d})}e?c.load({request:e,progress:function(t){n.trigger(r.LOADING_PROGRESS,{request:e,stream:t.stream}),t.data&&n.trigger(r.LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:d})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new a.default(l.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,n))},abort:function(e){e&&n.trigger(r.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:d})}}):t(void 0,new a.default(l.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,l.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){c&&c.abort()},reset:function(){c&&(c.abort(),c=null)}},c=(0,o.default)(t).create({errHandler:e.errHandler,errors:l,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:u,constants:i.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),d}u.__dashjs_factory_name="FragmentLoader",n.default=e.default.getClassFactory(u),t.exports=n.default},{112:112,163:163,239:239,242:242,47:47}],101:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(61)),s=r(e(128)),a=r(e(163)),u=r(e(234)),l=r(e(246)),d=r(e(239)),c=e(255),f=r(e(46)),h=r(e(54)),p=r(e(51)),m=r(e(47)),g=r(e(67));function v(e){e=e||{};var t=this.context,n=e.debug,r=(0,f.default)(t).getInstance(),m=(0,u.default)(t).getInstance(),v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=e.mssHandler,S=e.errHandler;function w(e){r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return v={load:function(e){var o=new l.default(e,c.HTTPRequest.MPD_TYPE);_.load({request:o,success:function(o,s,a){if(E){var u=void 0,l=void 0,c=void 0;if(a&&a!==e?(l=m.parseBaseUrl(a),u=a):(m.isRelative(e)&&(e=m.resolve(e,window.location.href)),l=m.parseBaseUrl(e)),"No Content"!=s)if(null===b&&(a=null,b=-1<(s=o).indexOf("SmoothStreamingMedia")?(T&&(a=T.createMssParser(),T.registerEvents()),a):-1<s.indexOf("MPD")||-1<s.indexOf("Patch")?(0,g.default)(t).create({debug:n}):a),null!==b){E.setMatchers(b.getMatchers()),E.setIron(b.getIron());try{c=b.parse(o)}catch(o){return void r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(p.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,p.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}c?(c.url=u||e,c.originalUrl||(c.originalUrl=c.url),c.hasOwnProperty(i.default.LOCATION)&&(l=m.parseBaseUrl(c.Location_asArray[0]),y.debug("BaseURI set by Location to: "+l)),c.baseUri=l,c.loadedTime=new Date,E.resolveManifestOnLoad(c),r.trigger(h.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:o})):r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(p.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,p.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(p.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,p.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)});else r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null})}},error:function(t,n,i){r.trigger(h.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new d.default(p.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,p.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+i)})}})},reset:function(){r.off(h.default.XLINK_READY,w,v),T&&T.reset(),E&&(E.reset(),E=null),_&&(_.abort(),_=null)}},y=n.getLogger(v),r.on(h.default.XLINK_READY,w,v),_=(0,a.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings.get().streaming.lowLatencyEnabled,urlUtils:m,constants:i.default,dashConstants:o.default,errors:p.default}),E=(0,s.default)(t).create({errHandler:S,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),b=null,v}v.__dashjs_factory_name="ManifestLoader",m=m.default.getClassFactory(v),n.default=m,t.exports=n.default},{112:112,128:128,163:163,234:234,239:239,246:246,255:255,46:46,47:47,51:51,54:54,61:61,67:67}],102:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(54)),s=r(e(47)),a=r(e(45)),u=r(e(51)),l=r(e(61)),d=r(e(234));function c(){var e,t=this.context,n=(0,i.default)(t).getInstance(),r=(0,d.default)(t).getInstance(),s=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0;function b(){c=NaN,p=!(h=!(m=!1)),T()}function T(){null!==f&&(clearTimeout(f),f=null)}function S(e){T(),p||(isNaN(e)&&!isNaN(c)&&(e=1e3*c),isNaN(e)||(s.debug("Refresh manifest in "+e+" milliseconds."),f=setTimeout(R,e)))}function w(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];m=!0;var t=v.getValue(),n=t.url,i=y.getPatchLocation(t),o=y.getLocation(t);i&&!e?n=i:o&&(n=o),r.isRelative(n)&&(n=r.resolve(n,t.url)),g.load(n)}function A(e){if(e){if(y.getIsPatch(e)){var t=e;e=v.getValue();var r=y.isPatchValid(e,t),i=r;if(r&&(r=y.getPublishTime(e),i=y.applyPatchToManifest(e,t),a=y.getPublishTime(e),i=r.getTime()!=a.getTime()),!i)return s.debug("Patch provided is invalid, performing full manifest refresh"),void w(!0);e.loadedTime=new Date}}else(e=v.getValue()).loadedTime=new Date;if(v.getValue()&&v.getValue().type===l.default.DYNAMIC&&e.type===l.default.STATIC)return n.trigger(o.default.DYNAMIC_TO_STATIC),void(p=!(m=!1));v.setValue(e);var a=new Date;i=(a.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(c=y.getManifestUpdatePeriod(e,i))&&(c=2147483.647),n.trigger(o.default.MANIFEST_UPDATED,{manifest:e}),s.info("Manifest has been refreshed at "+a+"["+a.getTime()/1e3+"] "),h||S()}function R(){h||(m?S(E.get().streaming.manifestUpdateRetryInterval):w())}function C(e){e.error?e.error.code===u.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&_.error(e.error):A(e.manifest)}function I(){h=!1,S()}function O(){(h=!E.get().streaming.scheduleWhilePaused)&&T()}function D(){m=!1}return e={initialize:function(){b(),n.on(o.default.STREAMS_COMPOSED,D,this),n.on(o.default.PLAYBACK_STARTED,I,this),n.on(o.default.PLAYBACK_PAUSED,O,this),n.on(o.default.INTERNAL_MANIFEST_LOADED,C,this)},setManifest:function(e){A(e)},refreshManifest:w,setConfig:function(e){e&&(e.manifestModel&&(v=e.manifestModel),e.adapter&&(y=e.adapter),e.manifestLoader&&(g=e.manifestLoader),e.errHandler&&(_=e.errHandler),e.settings&&(E=e.settings))},reset:function(){n.off(o.default.PLAYBACK_STARTED,I,this),n.off(o.default.PLAYBACK_PAUSED,O,this),n.off(o.default.STREAMS_COMPOSED,D,this),n.off(o.default.INTERNAL_MANIFEST_LOADED,C,this),b()}},s=(0,a.default)(t).getInstance().getLogger(e),e}c.__dashjs_factory_name="ManifestUpdater",n.default=s.default.getClassFactory(c),t.exports=n.default},{234:234,45:45,46:46,47:47,51:51,54:54,61:61}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(2)),o=r(e(112)),s=r(e(61)),a=r(e(113)),u=r(e(124)),l=r(e(126)),d=r(e(121)),c=r(e(122)),f=r(e(116)),h=r(e(101)),p=r(e(226)),m=r(e(220)),g=r(e(221)),v=r(e(215)),y=r(e(231)),_=r(e(213)),E=r(e(158)),b=r(e(155)),T=r(e(156)),S=r(e(115)),w=r(e(162)),A=r(e(159)),R=r(e(153)),C=r(e(223)),I=r(e(45)),O=r(e(51)),D=r(e(46)),M=r(e(54)),N=r(e(104)),P=r(e(47)),x=r(e(48)),L=e(50),k=r(e(63)),j=r(e(56)),F=r(e(58)),U=r(e(83)),B=e(255),G=r(e(1)),q=r(e(9)),H=r(e(239)),V=e(232),Y=r(e(102)),K=r(e(234)),z=r(e(219));function W(){var e,t="You must first call initialize() and set a source before calling this method",n="You must first call initialize() and set a valid source and view before calling this method",r="You must first call attachView() to set the video element before calling this method",W="You must first call attachSource() with a valid source before calling this method",J="MediaPlayer not initialized!",X=this.context,Q=(0,D.default)(X).getInstance(),$=(0,x.default)(X).getInstance(),Z=(0,I.default)(X).getInstance({settings:$}),ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,oe=void 0,se=void 0,ae=void 0,ue=void 0,le=void 0,de=void 0,ce=void 0,fe=void 0,he=void 0,pe=void 0,me=void 0,ge=void 0,ve=void 0,ye=void 0,_e=void 0,Ee=void 0,be=void 0,Te=void 0,Se=void 0,we=void 0,Ae=void 0,Re=void 0,Ce=void 0,Ie=void 0,Oe=void 0,De=void 0,Me=void 0,Ne=void 0,Pe=void 0,xe=void 0;function Le(){We(null),Ye(null),ne=null,ce&&(ce.reset(),ce=null),fe&&(fe.reset(),fe=null),Me.reset(),$.reset(),pe&&(pe.reset(),pe=null)}function ke(){return!!te&&!!Ce.getElement()}function je(){return(0,L.getVersionString)()}function Fe(){if(!oe)throw n;return Se.isPaused()}function Ue(e){var t=we.getCurrentDVRInfo();if(!t)return 0;var n=Se.getLiveDelay();return(e=t.range.start+e)>t.range.end-n&&(e=t.range.end-n),e}function Be(e){if(!oe)throw n;var t=Ve().currentTime;return void 0!==e?t=be.getTimeRelativeToStreamId(t,e):Se.getIsDynamic()&&(t=null===(e=we.getCurrentDVRInfo())||0===t?0:Math.max(0,t-e.range.start)),t}function Ge(){if(!oe)throw n;var e,t=Ve().duration;return Se.getIsDynamic()&&(t=(e=we.getCurrentDVRInfo())?e.range.end-e.range.start:0),t}function qe(e){(0,V.checkParameterType)(e,"boolean"),se=e}function He(){ge.restoreDefaultUTCTimingSources()}function Ve(){if(!Ce.getElement())throw r;return Ce.getElement()}function Ye(e){if(!re)throw J;Ce.setElement(e),e&&($e(),function(){if(!fe){var e=dashjs.MetricsReporting;"function"==typeof e&&(e=e(X).create(),fe=e.createMetricsReporting({debug:Z,eventBus:Q,mediaElement:Ve(),adapter:me,dashMetrics:we,events:M.default,constants:o.default,metricsConstants:a.default}))}}(),function(){if(!he){var e=dashjs.MssHandler;"function"==typeof e&&(O.default.extend(e.errors),he=e(X).create({eventBus:Q,mediaPlayerModel:ge,dashMetrics:we,manifestModel:Ae,playbackController:Se,streamController:be,protectionController:ce,baseURLController:ye,errHandler:ve,events:M.default,constants:o.default,debug:Z,initSegmentType:B.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:G.default,ISOBoxer:q.default,settings:$}))}}(),be&&be.switchToVideoElement()),oe&&Xe(),tt()}function Ke(e){if(!ie)throw t;var n=be.getActiveStreamInfo();return de.getTracksFor(e,n)}function ze(e,t){var n=-1;e.some((function(e,r){if(e===t)return n=r,!0})),n<0||e.splice(n,1)}function We(e){if(!re)throw J;"string"==typeof e&&Oe.initialize(e),te=e,(ie||oe)&&Xe(),ke()&&tt()}function Je(){if(!ie)throw t;var e=be.getActiveStreamInfo();return e?be.getStreamById(e.id):null}function Xe(){ie=oe=!1,me.reset(),be.reset(),Te.reset(),Se.reset(),ae.reset(),de.reset(),Ie.reset(),ce&&($.get().streaming.keepProtectionMediaKeys?ce.stop():(ce.reset(),ce=null,$e())),Re.reset()}function Qe(){return(0,h.default)(X).create({debug:Z,errHandler:ve,dashMetrics:we,mediaPlayerModel:ge,requestModifier:(0,y.default)(X).getInstance(),mssHandler:he,settings:$})}function $e(){if(ce)return ce;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(X).create();return M.default.extend(e.events),N.default.extend(e.events,{publicOnly:!0}),O.default.extend(e.errors),_e=_e||(0,m.default)(X).getInstance(),(ce=t.createProtectionSystem({debug:Z,errHandler:ve,videoModel:Ce,capabilities:_e,eventBus:Q,events:M.default,BASE64:G.default,constants:o.default,cmcdModel:Re,settings:$}))&&(ce.setLicenseRequestFilters(Ne),ce.setLicenseResponseFilters(Pe)),ce}function Ze(){if(!re)throw J;if(pe)return pe;var e=dashjs.OfflineController;if("function"!=typeof e)return null;M.default.extend(e.events),N.default.extend(e.events,{publicOnly:!0}),O.default.extend(e.errors);var t=Qe(),n=(0,Y.default)(X).create();return n.setConfig({manifestModel:Ae,adapter:me,manifestLoader:t,errHandler:ve}),pe=e(X).create({debug:Z,manifestUpdater:n,baseURLController:ye,manifestLoader:t,manifestModel:Ae,mediaPlayerModel:ge,abrController:ae,playbackController:Se,adapter:me,errHandler:ve,dashMetrics:we,timelineConverter:le,schemeLoaderFactory:ue,eventBus:Q,events:M.default,errors:O.default,constants:o.default,settings:$,dashConstants:s.default,urlUtils:(0,K.default)(X).getInstance()})}function et(e){var t=we.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function tt(){var e;pe&&pe.resetRecords(),!ie&&te&&(ie=!0,ee.info("Streaming Initialized"),e=Qe(),be=be||(0,l.default)(X).getInstance(),Ee.setConfig({capabilities:_e,adapter:me,settings:$}),Ee.setCustomCapabilitiesFilters(xe),be.setConfig({capabilities:_e,capabilitiesFilter:Ee,manifestLoader:e,manifestModel:Ae,mediaPlayerModel:ge,protectionController:ce,adapter:me,dashMetrics:we,errHandler:ve,timelineConverter:le,videoModel:Ce,playbackController:Se,abrController:ae,mediaController:de,textController:Ie,settings:$,baseURLController:ye}),Te.setConfig({settings:$,playbackController:Se,streamController:be,videoModel:Ce,timelineConverter:le,adapter:me}),Se.setConfig({streamController:be,dashMetrics:we,mediaPlayerModel:ge,adapter:me,videoModel:Ce,timelineConverter:le,uriFragmentModel:Oe,settings:$}),ae.setConfig({streamController:be,domStorage:De,mediaPlayerModel:ge,dashMetrics:we,adapter:me,videoModel:Ce,settings:$}),Ie.setConfig({errHandler:ve,manifestModel:Ae,adapter:me,mediaController:de,streamController:be,videoModel:Ce}),Re.setConfig({abrController:ae,dashMetrics:we,playbackController:Se}),be.initialize(se,ne),Te.initialize(),Re.initialize(),"string"==typeof te?be.load(te):be.loadWithManifest(te)),!oe&&ke()&&(oe=!0,ee.info("Playback Initialized"))}return e={initialize:function(e,t,n){_e=_e||(0,m.default)(X).getInstance(),ve=(0,p.default)(X).getInstance(),_e.supportsMediaSource()?re||(re=!0,le=(0,U.default)(X).getInstance(),ae||(ae=(0,S.default)(X).getInstance()).setConfig({settings:$}),ue=ue||(0,w.default)(X).getInstance(),Se=Se||(0,u.default)(X).getInstance(),de=de||(0,c.default)(X).getInstance(),be=be||(0,l.default)(X).getInstance(),Te=Te||(0,d.default)(X).getInstance(),Ee=Ee||(0,g.default)(X).getInstance(),me=(0,j.default)(X).getInstance(),Ae=(0,b.default)(X).getInstance(),Re=(0,R.default)(X).getInstance(),we=(0,F.default)(X).getInstance({settings:$}),Ie=(0,_.default)(X).getInstance(),De=(0,C.default)(X).getInstance({settings:$}),me.setConfig({constants:o.default,cea608parser:i.default,errHandler:ve,BASE64:G.default}),(ye=ye||(0,f.default)(X).create()).setConfig({adapter:me}),(Me=(0,k.default)(X).getInstance({dashMetrics:we,mediaPlayerModel:ge,errHandler:ve,baseURLController:ye,events:M.default,eventBus:Q,debug:Z,boxParser:(0,z.default)(X).getInstance(),requestModifier:(0,y.default)(X).getInstance(),errors:O.default})).initialize(),de.setConfig({domStorage:De,settings:$}),He(),qe(void 0===n||n),Ze(),e&&Ye(e),t&&We(t),ee.info("[dash.js "+je()+"] MediaPlayer has been initialized")):ve.error(new H.default(O.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,O.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(_e=e.capabilities),e.capabilitiesFilter&&(Ee=e.capabilitiesFilter),e.streamController&&(be=e.streamController),e.gapController&&(Te=e.gapController),e.playbackController&&(Se=e.playbackController),e.mediaPlayerModel&&(ge=e.mediaPlayerModel),e.abrController&&(ae=e.abrController),e.schemeLoaderFactory&&(ue=e.schemeLoaderFactory),e.mediaController&&(de=e.mediaController),e.settings&&($=e.settings))},on:function(e,t,n,r){Q.on(e,t,n,r)},off:function(e,t,n){Q.off(e,t,n)},extend:function(e,t,n){P.default.extend(e,t,n,X)},attachView:Ye,attachSource:We,isReady:ke,preload:function(){if(Ce.getElement()||ie)return!1;if(!te)throw W;tt()},play:function(){if(!oe)throw n;(!se||Fe()&&oe)&&Se.play()},isPaused:Fe,pause:function(){if(!oe)throw n;Se.pause()},isSeeking:function(){if(!oe)throw n;return Se.isSeeking()},isDynamic:function(){if(!oe)throw n;return Se.getIsDynamic()},seek:function(e){if(!oe)throw n;if((0,V.checkParameterType)(e,"number"),isNaN(e))throw o.default.BAD_ARGUMENT_ERROR;e=Se.getIsDynamic()?Ue(e):e,Se.seek(e)},setPlaybackRate:function(e){Ve().playbackRate=e},getPlaybackRate:function(){return Ve().playbackRate},setMute:function(e){(0,V.checkParameterType)(e,"boolean"),Ve().muted=e},isMuted:function(){return Ve().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw o.default.BAD_ARGUMENT_ERROR;Ve().volume=e},getVolume:function(){return Ve().volume},time:Be,duration:Ge,timeAsUTC:function(){if(!oe)throw n;return Be()<0?NaN:et(Be())},durationAsUTC:function(){if(!oe)throw n;return et(Ge())},getActiveStream:Je,getDVRWindowSize:function(){var e=we.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:Ue,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60);e=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(e<10?"0"+e.toString():e.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e);e=i.toLocaleDateString(t),n=i.toLocaleTimeString(t,{hour12:n});return r?n+" "+e:n},getVersion:je,getDebug:function(){return Z},getBufferLength:function(e){var t,n=[o.default.VIDEO,o.default.AUDIO,o.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(ee.warn("getBufferLength requested for invalid type"),NaN):(t=we.getCurrentBufferLevel(e))||NaN:(t=n.map((function(e){return 0<Ke(e).length?we.getCurrentBufferLevel(e):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)})))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return Ce?Ce.getTTMLRenderingDiv():null},getVideoElement:Ve,getSource:function(){if(!te)throw W;return te},getCurrentLiveLatency:function(){if(!re)throw J;return oe?Se.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!ie)throw t;return ae.getTopBitrateInfoFor(e)},setAutoPlay:qe,getAutoPlay:function(){return se},getDashMetrics:function(){return we},getQualityFor:function(e){if(!ie)throw t;return e!==o.default.IMAGE?ae.getQualityFor(e):(e=Je())&&(e=e.getThumbnailController())?e.getCurrentTrackIndex():-1},setQualityFor:function(e,n){if(!ie)throw t;if(e===o.default.IMAGE){var r=Je();if(!r)return;(r=r.getThumbnailController())&&r.setTrackByIndex(n)}ae.setPlaybackQuality(e,be.getActiveStreamInfo(),n)},updatePortalSize:function(){ae.setElementSize(),ae.setWindowResizeEventCalled(!0)},setTextDefaultLanguage:function(e){ee.warn('setTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use setInitialMediaSettingsFor("fragmentedText", { lang: lang }) instead'),void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return ee.warn('getTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use getInitialMediaSettingsFor("fragmentedText").lang instead'),void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.getTextDefaultEnabled()},enableText:function(e){void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.enableText(e)},enableForcedTextStreaming:function(e){void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.isTextEnabled()},setTextTrack:function(e){if(!oe)throw n;void 0===Ie&&(Ie=(0,_.default)(X).getInstance()),Ie.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!ie)throw t;var n=Je();return n?n.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!ie)throw t;return me.getStreamsInfo(e)},getTracksFor:Ke,getTracksForTypeFromManifest:function(e,n,r){if(!ie)throw t;return(r=r||me.getStreamsInfo(n,1)[0])?me.getAllMediaInfoForType(r,e,n):[]},getCurrentTrackFor:function(e){if(!ie)throw t;var n=be.getActiveStreamInfo();return de.getCurrentTrackFor(e,n)},setInitialMediaSettingsFor:function(e,t){if(!re)throw J;de.setInitialSettings(e,t),e===o.default.FRAGMENTED_TEXT&&Ie.setInitialSettings(t)},getInitialMediaSettingsFor:function(e){if(!re)throw J;return de.getInitialSettings(e)},setCurrentTrack:function(e){if(!ie)throw t;de.setTrack(e)},getTrackSwitchModeFor:function(e){if(!re)throw J;return de.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!re)throw J;de.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!re)throw J;de.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!re)throw J;return de.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,n){ge.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){ge.removeABRCustomRule(e)},removeAllABRCustomRule:function(){ge.removeABRCustomRule()},getAverageThroughput:function(e){var t=ae.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,t){var n=Qe(),r=this;Q.on(M.default.INTERNAL_MANIFEST_LOADED,(function e(i){i.error?t(null,i.error):t(i.manifest),Q.off(M.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()}),r),Oe.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){ge.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){ge.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){ge.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:He,setXHRWithCredentialsForType:function(e,t){ge.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return ge.getXHRWithCredentialsForType(e)},getProtectionController:$e,attachProtectionController:function(e){ce=e},setProtectionData:function(e){ne=e,be&&be.setProtectionData(ne)},registerLicenseRequestFilter:function(e){Ne.push(e),ce&&ce.setLicenseRequestFilters(Ne)},registerLicenseResponseFilter:function(e){Pe.push(e),ce&&ce.setLicenseResponseFilters(Pe)},unregisterLicenseRequestFilter:function(e){ze(Ne,e),ce&&ce.setLicenseRequestFilters(Ne)},unregisterLicenseResponseFilter:function(e){ze(Pe,e),ce&&ce.setLicenseResponseFilters(Pe)},registerCustomCapabilitiesFilter:function(e){xe.push(e),Ee&&Ee.setCustomCapabilitiesFilters(xe)},unregisterCustomCapabilitiesFilter:function(e){ze(xe,e),Ee&&Ee.setCustomCapabilitiesFilters(xe)},displayCaptionsOnTop:function(e){var t=(0,v.default)(X).getInstance();t.setConfig({videoModel:Ce}),t.initialize(),t.setDisplayCConTop(e)},attachTTMLRenderingDiv:function(e){if(!Ce.getElement())throw r;Ce.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return Ie&&(e=Ie.getCurrentTrackIdx()),e},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var n=Se.getIsDynamic()?Ue(e):e,r=be.getStreamForTime(n);if(null!==r){if(e=r.getThumbnailController())return r=be.getTimeRelativeToStreamId(n,r.getId()),e.provide(r,t);t(null)}else t(null)}},getDashAdapter:function(){return me},getOfflineController:Ze,getSettings:function(){return $.get()},updateSettings:function(e){$.update(e)},resetSettings:function(){$.reset()},reset:Le,destroy:function(){Le(),Ne=[],Pe=[],xe=[],P.default.deleteSingletonInstances(X)}},ee=Z.getLogger(e),se=!(ie=oe=re=!1),Me=me=ne=pe=ce=null,M.default.extend(N.default),ge=(0,T.default)(X).getInstance(),Ce=(0,A.default)(X).getInstance(),Oe=(0,E.default)(X).getInstance(),Ne=[],Pe=[],xe=[],e}W.__dashjs_factory_name="MediaPlayer",(e=P.default.getClassFactory(W)).events=N.default,e.errors=O.default,P.default.updateClassFactory(W.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{1:1,101:101,102:102,104:104,112:112,113:113,115:115,116:116,121:121,122:122,124:124,126:126,153:153,155:155,156:156,158:158,159:159,162:162,2:2,213:213,215:215,219:219,220:220,221:221,223:223,226:226,231:231,232:232,234:234,239:239,255:255,45:45,46:46,47:47,48:48,50:50,51:51,54:54,56:56,58:58,61:61,63:63,83:83,9:9}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.GAP_CAUSED_SEEK_TO_PERIOD_END="gapCausedSeekToPeriodEnd",this.GAP_CAUSED_INTERNAL_SEEK="gapCausedInternalSeek",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o),n.default=e,t.exports=n.default},{55:55}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,o,s=(r=e(103))&&r.__esModule?r:{default:r},a=(i="application/dash+xml",{create:u,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),o=0;o<r.length;o++){var s=u(r[o],null);n.push(s)}var a=t.querySelectorAll('source[type="'+i+'"]');for(o=0;o<a.length;o++)s=u(function(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}(a[o]),null),n.push(s);return n}});function u(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=void 0,a=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter((function(e){return e.type==i}))[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(r=(0,s.default)(n).create()).initialize(e,t.src,e.autoplay),(o=o||r.getDebug().getLogger()).debug("Converted "+a+" to dash.js player and added content: "+t.src),e._dashjs_player=r}var l=o=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?a.createAll():l=window.setInterval((function(){window.dashjs&&(window.clearInterval(l),a.createAll())}),500):window.addEventListener("load",(function e(){window.removeEventListener("load",e),a.createAll()}))),n.default=a,t.exports=n.default},{103:103}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45));e=r(e(47));function o(e){var t,n=this.context,r=void 0,o=void 0,s=[],a=e;function u(e,t){s=s.filter((function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))}))}return t={getAllBufferRanges:function(){for(var e=[],t=0;t<s.length;t++){var n=s[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var r={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(r,"length",{get:function(){return e.length}}),r},append:function(e){o="InitializationSegment"!==e.segmentType?(s.push(e),s.sort((function(e,t){return e.start-t.start})),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),a&&a({chunk:e})},remove:u,abort:function(){},discharge:function(e,t){var n,r,i=(n=e,r=t,s.filter((function(e){return(isNaN(r)||e.start<r)&&(isNaN(n)||e.end>n)})));return o&&(i.push(o),o=null),u(e,t),i},reset:function(){s=[],a=o=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},r=(0,i.default)(n).getInstance().getLogger(t),t}o.__dashjs_factory_name="PreBufferSink",e=e.default.getClassFactory(o),n.default=e,t.exports=n.default},{45:45,47:47}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),o=r(e(239)),s=r(e(46)),a=r(e(54)),u=r(e(47)),l=r(e(213)),d=r(e(51));function c(e,t,n,r){var u,c=this.context,f=(0,s.default)(c).getInstance(),h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=[],_=[],E=n;function b(){try{return m.buffered}catch(e){return p.error("getAllBufferRanges exception: "+e.message),null}}function T(t){m&&I((function(){try{var n=e.duration,r=0;t&&!isNaN(t.start)&&!isNaN(t.duration)&&isFinite(t.duration)&&(n=t.start+t.duration),t&&!isNaN(t.start)&&(r=t.start),m.appendWindowStart=0,m.appendWindowEnd=n,m.appendWindowStart=r,p.debug("Updated append window. Set start to "+m.appendWindowStart+" and end to "+m.appendWindowEnd)}catch(n){p.warn("Failed to set append window")}}))}function S(){var e=this,t=this;0<_.length&&function(){g=!0;var n=_[0];function r(){var e,r,o,s=b();e=t,r=s,o=n,(s=i)&&0<s.length&&s.length<r.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}(s,o)&&f.trigger(a.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:r.end(r.length-2),to:r.start(r.length-1),unintended:!0}),0<_.length?S.call(this):(g=!1,E&&E({chunk:n}))}_.splice(0,1);var i=[];try{0===n.bytes.length?r.call(e):(i=b(),m.appendBuffer?m.appendBuffer(n.bytes):m.append(n.bytes,n),I(r.bind(e)))}catch(r){p.fatal('SourceBuffer append failed "'+r+'"'),0<_.length?S():g=!1,E&&E({chunk:n,error:new o.default(r.code,r.message)})}}()}function w(){var e;0<y.length&&(e=y.shift(),m.updating?I(e):(e(),w()))}function A(){m.updating||w()}function R(){m.updating||w()}function C(){p.error("SourceBufferSink error")}function I(e){y.push(e),m.updating||w()}return u={getType:function(){return h},getAllBufferRanges:b,getBuffer:function(){return m},append:function(e){e?(_.push(e),g||I(S.bind(this))):E({chunk:e,error:new o.default(d.default.APPEND_ERROR_CODE,d.default.APPEND_ERROR_MESSAGE)})},remove:function(t,n,r){var i=this;I((function(){try{0<=t&&t<n&&(r||"ended"!==e.readyState)&&m.remove(t,n),I((function(){f.trigger(a.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:i,from:t,to:n,unintended:!1})}))}catch(e){f.trigger(a.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:i,from:t,to:n,unintended:!1,error:new o.default(e.code,e.message)})}}))},abort:function(){try{("open"===e.readyState||m.setTextTrack&&"ended"===e.readyState)&&m.abort()}catch(e){p.error('SourceBuffer append abort failed: "'+e+'"')}_=[]},reset:function(t){if(m){if("function"==typeof m.removeEventListener&&(m.removeEventListener("updateend",R,!1),m.removeEventListener("error",C,!1),m.removeEventListener("abort",C,!1)),clearInterval(v),y=[],!t){try{m.getClassName&&"TextSourceBuffer"===m.getClassName()||(p.debug("Removing sourcebuffer from media source"),e.removeSourceBuffer(m))}catch(t){p.error("Failed to remove source buffer from media source.")}m=null}g=!1}_=[],E=null},updateTimestampOffset:function(e){m.timestampOffset===e||isNaN(e)||I((function(){e<0&&(e+=.001),m.timestampOffset=e}))},hasDiscontinuitiesAfter:function(e){try{var t=b();if(t&&1<t.length)for(var n=0,r=t.length;n<r;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return!0}catch(e){p.error("hasDiscontinuities exception: "+e.message)}return!1},waitForUpdateEnd:I,updateAppendWindow:T},function(){p=(0,i.default)(c).getInstance().getLogger(u),g=!1,h=t.type;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");if((m=r||e.addSourceBuffer(n)).changeType&&r&&(p.debug("Doing period transition with changeType"),m.changeType(n)),T(),"function"==typeof m.addEventListener)try{m.addEventListener("updateend",R,!1),m.addEventListener("error",C,!1),m.addEventListener("abort",C,!1)}catch(e){v=setInterval(A,50)}else v=setInterval(A,50)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;var o=(0,l.default)(c).getInstance();m=o.getTextSourceBuffer()}}(),u}c.__dashjs_factory_name="SourceBufferSink",u=u.default.getClassFactory(c),n.default=u,t.exports=n.default},{213:213,239:239,45:45,46:46,47:47,51:51,54:54}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(61)),s=r(e(109)),a=r(e(120)),u=r(e(216)),l=r(e(46)),d=r(e(54)),c=r(e(45)),f=r(e(51)),h=r(e(47)),p=r(e(239)),m=r(e(219)),g=r(e(234));function v(e){e=e||{};var t=this.context,n=(0,l.default)(t).getInstance(),r=(0,g.default)(t).getInstance(),h=e.manifestModel,v=e.mediaPlayerModel,y=e.manifestUpdater,_=e.adapter,E=e.capabilities,b=e.capabilitiesFilter,T=e.errHandler,S=e.timelineConverter,w=e.dashMetrics,A=e.abrController,R=e.playbackController,C=e.eventController,I=e.mediaController,O=e.textController,D=e.protectionController,M=e.videoModel,N=e.settings,P=e.streamInfo,x=void 0,L=void 0,k=void 0,j=void 0,F=void 0,U=void 0,B=void 0,G=void 0,q=void 0,H=void 0,V=void 0,Y=void 0,K=void 0,z=void 0,W=void 0,J=void 0,X=void 0,Q=void 0;function $(e){for(var t=k?k.length:0,r=0;r<t;r++)k[r].getFragmentModel().removeExecutedRequestsBeforeTime(ne()+te()),k[r].reset(!1,e);Ee(U=F=!(k=[])),n.off(d.default.CURRENT_TRACK_CHANGED,ae,x)}function Z(){$(),G=B=j=!1,X=W=H=!(q={})}function ee(){R&&R.pause(),V&&(V.reset(),V=null),P=null,Z(),n.off(d.default.DATA_UPDATE_COMPLETED,he,x),n.off(d.default.BUFFERING_COMPLETED,fe,x),n.off(d.default.INBAND_EVENTS,pe,x),D&&(n.off(d.default.KEY_ERROR,oe,x),n.off(d.default.SERVER_CERTIFICATE_UPDATED,oe,x),n.off(d.default.LICENSE_REQUEST_COMPLETE,oe,x),n.off(d.default.KEY_SYSTEM_SELECTED,oe,x),n.off(d.default.KEY_SESSION_CREATED,oe,x),n.off(d.default.KEY_STATUSES_CHANGED,oe,x)),Ee(!1)}function te(){return P?P.duration:NaN}function ne(){return P?P.start:NaN}function re(){return P?P.id:null}function ie(){if(!(M&&A&&A.hasOwnProperty("getBitrateList")&&_&&_.hasOwnProperty("getAllMediaInfoForType")&&_.hasOwnProperty("getEventsFor")))throw new Error(i.default.MISSING_CONFIG_ERROR)}function oe(e){e.error&&(T.error(e.error),L.fatal(e.error.message),ee())}function se(e){var t,n=e?e.type:null,r=void 0;if(n===i.default.MUXED)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",L.fatal(r),void T.error(new p.default(f.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,h.getValue()));if(n===i.default.TEXT||n===i.default.FRAGMENTED_TEXT||n===i.default.EMBEDDED_TEXT||n===i.default.IMAGE)return 1;if(t=e.codec,L.debug(n+" codec: "+t),e.contentProtection&&!E.supportsEncryptedMedia())T.error(new p.default(f.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,f.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!E.supportsCodec(t))return r=n+"Codec ("+t+") is not supported.",void L.error(r);return 1}function ae(e){var t,n,r,o;P&&e.newMediaInfo.streamInfo.id===P.id&&(t=e.newMediaInfo,n=h.getValue(),_.setCurrentMediaInfo(P.id,t.type,t),(r=me(t))&&(o=R.getTime(),L.info("Stream -  Process track changed at current time "+o),L.debug("Stream -  Update stream controller"),n.refreshManifestOnSwitchTrack?(L.debug("Stream -  Refreshing manifest for switch track"),Q=e,y.refreshManifest()):(r.selectMediaInfo(t),t.type!==i.default.FRAGMENTED_TEXT?(A.updateTopQualityIndex(t),r.switchTrackAsked(),r.getFragmentModel().abortRequests()):(r.getScheduleController().setSeekTarget(o),r.setBufferingTime(o),r.resetIndexHandler()))))}function ue(r,a){var l,c=_.getAllMediaInfoForType(P,r),f=null;if(c&&0!==c.length){r===i.default.VIDEO&&(B=!0),r===i.default.AUDIO&&(G=!0);for(var p=0,m=c.length;p<m;p++)f=c[p],r===i.default.EMBEDDED_TEXT?O.addEmbeddedTrack(f):se(f)&&I.addTrack(f);r!==i.default.EMBEDDED_TEXT&&0!==I.getTracksFor(r,P).length&&(r!==i.default.IMAGE?(I.checkInitialMediaSettingsForType(r,P),l=I.getCurrentTrackFor(r,P),n.trigger(d.default.STREAM_INITIALIZING,{streamInfo:P,mediaInfo:f}),function(n,r,o,a){var u=V.getModel(n?n.type:null),l=(0,s.default)(t).create({streamInfo:P,type:n?n.type:null,mimeType:n?n.mimeType:null,timelineConverter:S,adapter:_,manifestModel:h,mediaPlayerModel:v,fragmentModel:u,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,abrController:A,playbackController:R,mediaController:I,textController:O,errHandler:T,settings:N,boxParser:z});if(l.initialize(o,B),A.updateTopQualityIndex(n),k.push(l),!n||n.type!==i.default.TEXT&&n.type!==i.default.FRAGMENTED_TEXT)l.addMediaInfo(n,!0);else{for(var d=void 0,c=0;c<r.length;c++)r[c].index===n.index&&(d=c),l.addMediaInfo(r[c]);l.selectMediaInfo(r[d])}}(l,c,a)):Y=(0,u.default)(t).create({streamInfo:P,adapter:_,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:J,eventBus:n,events:d.default,dashConstants:o.default}))}else L.info("No "+r+" data.")}function le(){var e;C&&(e=_.getEventsFor(P),C.addInlineEvents(e))}function de(){for(var e=k.length,t=q.audio||q.video?new p.default(f.default.DATA_UPDATE_FAILED_ERROR_CODE,f.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,r=0;r<e;r++)if(k[r].isUpdating()||H)return;if(U){if(D)for(D.clearMediaInfoArrayByStreamId(re()),r=0;r<e&&k[r];r++){var o=k[r].getType();o!==i.default.AUDIO&&o!==i.default.VIDEO&&o!==i.default.FRAGMENTED_TEXT||(o=k[r].getMediaInfo())&&D.initializeForMedia(o)}for(t?T.error(t):j||(j=!0,n.trigger(d.default.STREAM_INITIALIZED,{streamInfo:P,liveStartTime:K?NaN:function(){if(!P.manifestInfo.isDynamic)return NaN;for(var e=0;e<k.length;e++)if(k[e].getType()===i.default.AUDIO||k[e].getType()===i.default.VIDEO)return k[e].getLiveStartTime();return NaN}()})),r=0;r<e&&k[r];r++)k[r].getScheduleController().start()}}function ce(e){for(var t={},n=0,r=k.length;n<r;n++){var i=k[n].createBuffer(e);i&&(t[k[n].getType()]=i.getBuffer())}return t}function fe(){var e=ge(),t=e.length;if(0!==t){for(var r=0;r<t;r++)if(!e[r].isBufferingCompleted()&&(e[r].getType()===i.default.AUDIO||e[r].getType()===i.default.VIDEO))return void L.warn("onBufferingCompleted - One streamProcessor has finished but",e[r].getType(),"one is not buffering completed");L.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),n.trigger(d.default.STREAM_BUFFERING_COMPLETED,{streamInfo:P})}else L.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function he(e){q[e.mediaType]=e.error,de()}function pe(e){e=e.events,C&&C.addInbandEvents(e)}function me(e){return e?ge().filter((function(t){return t.getType()===e.type}))[0]:null}function ge(){for(var e,t=[],n=void 0,r=0;r<k.length;r++)(e=(n=k[r]).getType())!==i.default.AUDIO&&e!==i.default.VIDEO&&e!==i.default.FRAGMENTED_TEXT&&e!==i.default.TEXT||t.push(n);return t}function ve(e,t,n){return n=arguments.length<=2||void 0===n?null:n,!!e&&(e=e.getStreamInfo(),n=n?n.getStreamInfo():P,!(!e||!n)&&(e=_.getAdaptationForType(e.index,t,e),n=_.getAdaptationForType(n.index,t,n),e&&n?!(!ye(n)&&ye(e)):!e&&!n))}function ye(e){return e&&(e.ContentProtection||e.Representation&&0<e.Representation.length&&e.Representation[0].ContentProtection)}function _e(e,t,n){if(n=arguments.length<=2||void 0===n?null:n,!e||!e.hasOwnProperty("getStreamInfo"))return!1;if(e=e.getStreamInfo(),n=n?n.getStreamInfo():P,!e||!n)return!1;if(e=_.getAdaptationForType(e.index,t,e),t=_.getAdaptationForType(n.index,t,n),!e||!t)return!e&&!t;n=e&&t&&e.mimeType===t.mimeType;var r=t.Representation_asArray.map((function(e){return e.codecs}));e=(t=e.Representation_asArray.map((function(e){return e.codecs}))).some((function(e){return-1<r.indexOf(e)})),t=t.some((function(e){return r.some((function(t){return E.codecRootCompatibleWithCodec(t,e)}))}));return e||t&&n}function Ee(e){K=e}return x={initialize:function(){n.on(d.default.BUFFERING_COMPLETED,fe,x),n.on(d.default.DATA_UPDATE_COMPLETED,he,x),n.on(d.default.INBAND_EVENTS,pe,x),D&&(n.on(d.default.KEY_ERROR,oe,x),n.on(d.default.SERVER_CERTIFICATE_UPDATED,oe,x),n.on(d.default.LICENSE_REQUEST_COMPLETE,oe,x),n.on(d.default.KEY_SYSTEM_SELECTED,oe,x),n.on(d.default.KEY_SESSION_CREATED,oe,x),n.on(d.default.KEY_STATUSES_CHANGED,oe,x)),n.trigger(d.default.STREAM_UPDATED,{streamInfo:P})},getStreamId:function(){return P?P.id:null},activate:function(e,t){if(F)return t;var r;return n.on(d.default.CURRENT_TRACK_CHANGED,ae,x),r=K?(function(){var e;H=!0,ie(),b.filterUnsupportedFeaturesOfPeriod(P),H=!(U=!0),0===k.length?(e="No streams to play.",T.error(new p.default(f.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,h.getValue())),L.debug(e)):de()}(),t):function(e,t){ie();var n=M.getElement();return le(),H=!0,b.filterUnsupportedFeaturesOfPeriod(P),(!n||n&&/^VIDEO$/i.test(n.nodeName))&&ue(i.default.VIDEO,e),ue(i.default.AUDIO,e),ue(i.default.TEXT,e),ue(i.default.FRAGMENTED_TEXT,e),ue(i.default.EMBEDDED_TEXT,e),ue(i.default.MUXED,e),ue(i.default.IMAGE,e),e=ce(t),H=!(U=!0),0===k.length?(t="No streams to play.",T.error(new p.default(f.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t,h.getValue())),L.fatal(t)):de(),e}(e,t),F=!0,r},deactivate:$,isActive:function(){return F},getDuration:te,getStartTime:ne,getId:re,getStreamInfo:function(){return P},getHasAudioTrack:function(){return G},getHasVideoTrack:function(){return B},preload:function(e,t){if(!K){le(),ue(i.default.VIDEO,e),ue(i.default.AUDIO,e),ue(i.default.TEXT,e),ue(i.default.FRAGMENTED_TEXT,e),ue(i.default.EMBEDDED_TEXT,e),ue(i.default.MUXED,e),ue(i.default.IMAGE,e),ce(t),n.on(d.default.CURRENT_TRACK_CHANGED,ae,x);for(var r=0;r<k.length&&k[r];r++)k[r].getScheduleController().start();Ee(!0)}},getThumbnailController:function(){return Y},getBitrateListFor:function(e){return ie(),e===i.default.IMAGE?Y?Y.getBitrateList():[]:(e=function(e){for(var t=null,n=0;n<k.length;n++)if((t=k[n]).getType()===e)return t.getMediaInfo();return null}(e),A.getBitrateList(e))},updateData:function(e){L.info("Manifest updated... updating data system wide."),H=!(F=!1),P=e,n.trigger(d.default.STREAM_UPDATED,{streamInfo:P}),C&&le(),b.filterUnsupportedFeaturesOfPeriod(P);for(var t=0,r=k.length;t<r;t++){var o,s=k[t];s.updateStreamInfo(P),(o=_.getMediaInfoForType(P,s.getType()))&&(A.updateTopQualityIndex(o),s.addMediaInfo(o,!0))}if(Q&&(o=Q.newMediaInfo).type!==i.default.FRAGMENTED_TEXT){if(!(e=me(Q.oldMediaInfo)))return;e.switchTrackAsked(),Q=void 0}H=!1,de()},reset:ee,getProcessors:ge,setMediaSource:function(e){for(var t=0;t<k.length;)se(k[t].getMediaInfo())?(k[t].setMediaSource(e),t++):(k[t].reset(),k.splice(t,1));var n;for(t=0;t<k.length;t++)k[t].dischargePreBuffer();0===k.length&&(n="No streams to play.",T.error(new p.default(f.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",h.getValue())),L.fatal(n))},isMediaCodecCompatible:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return _e(e,i.default.VIDEO,t)&&_e(e,i.default.AUDIO,t)},isProtectionCompatible:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return ve(e,i.default.VIDEO,t)&&ve(e,i.default.AUDIO,t)},getPreloaded:function(){return K},getPreloadingScheduled:function(){return W},setPreloadingScheduled:function(e){W=e},getIsEndedEventSignaled:function(){return X},setIsEndedEventSignaled:function(e){X=e}},J=(0,c.default)(t).getInstance(),L=J.getLogger(x),Z(),z=(0,m.default)(t).getInstance(),V=(0,a.default)(t).create({streamInfo:P,mediaPlayerModel:v,dashMetrics:w,errHandler:T,settings:N,boxParser:z,dashConstants:o.default,urlUtils:r}),x}v.__dashjs_factory_name="Stream",n.default=h.default.getClassFactory(v),t.exports=n.default},{109:109,112:112,120:120,216:216,219:219,234:234,239:239,45:45,46:46,47:47,51:51,54:54,61:61}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(61)),s=r(e(113)),a=r(e(154)),u=r(e(118)),l=r(e(212)),d=r(e(125)),c=r(e(62)),f=r(e(229)),h=r(e(47)),p=e(232),m=r(e(46)),g=r(e(54)),v=r(e(57)),y=r(e(51)),_=r(e(239)),E=r(e(45)),b=r(e(231)),T=r(e(234)),S=r(e(219)),w=r(e(241)),A=e(257);function R(e){e=e||{};var t=this.context,n=(0,m.default)(t).getInstance(),r=e.streamInfo,h=e.type,R=e.errHandler,C=e.mimeType,I=e.timelineConverter,O=e.adapter,D=e.manifestModel,M=e.mediaPlayerModel,N=e.fragmentModel,P=e.abrController,x=e.playbackController,L=e.mediaController,k=e.textController,j=e.dashMetrics,F=e.settings,U=e.boxParser,B=void 0,G=void 0,q=void 0,H=void 0,V=void 0,Y=void 0,K=void 0,z=void 0,W=void 0,J=void 0,X=void 0,Q=void 0;function $(){V=[],H=null,X=0}function Z(e){e.error||K.setCurrentRepresentation(O.convertDataToRepresentationInfo(e.currentRepresentation)),e.error&&e.error.code!==y.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE||x.getStreamController().getActiveStreamInfo().id===r.id&&ie()}function ee(e){e=se(e.newQuality),K.setCurrentRepresentation(e),j.pushPlayListTraceMetrics(new Date,A.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),j.createPlaylistTraceMetrics(e.id,1e3*x.getTime(),x.getPlaybackRate())}function te(e){j.addBufferLevel(h,new Date,1e3*e.bufferLevel),e=x.getStreamController().getActiveStreamInfo().id,D.getValue().doNotUpdateDVRWindowOnBufferUpdated||r.id!==e||ie()}function ne(e){j.addBufferState(h,e.state,K.getBufferTarget()),e.state!==s.default.BUFFER_EMPTY||x.isSeeking()||j.pushPlayListTraceMetrics(new Date,A.PlayListTrace.REBUFFERING_REASON)}function re(e){N.syncExecutedRequestsWithBufferedRange(Y.getBuffer().getAllBufferRanges(),r.duration),e.from>x.getTime()&&(X=e.from,Q=!0)}function ie(){var e=r.manifestInfo,t=e.isDynamic;t=I.calcSegmentAvailabilityRange(z.getCurrentRepresentation(),t);j.addDVRInfo(h,x.getTime(),e,t)}function oe(){return Y?Y.getBuffer():null}function se(e){var t=void 0!==e?((0,p.checkInteger)(e),z?z.getRepresentationForQuality(e):null):z?z.getCurrentRepresentation():null;return O.convertDataToRepresentationInfo(t)}function ae(e){e.sender&&(O.getIsTextTrack(C)&&!k.isTextEnabled()||Y&&e.representationId&&(Y.appendInitSegment(e.representationId)||(e=J?J.getInitRequest(H,z.getCurrentRepresentation()):null,K.processInitRequest(e))))}function ue(e){var t=void 0;Y.getIsPruningInProgress()||(t=function(e,t){var n,r=se(),o=!isNaN(e),s=x.getNormalizedTime(),a=o?e:X,u=!1,l=void 0;if(isNaN(a)||h===i.default.FRAGMENTED_TEXT&&!k.isTextEnabled())return null;if(Y&&(n=Y.getRangeAt(a),e=Y.getRangeAt(s),null===n&&null===e||o||(!n||e&&e.start!=n.start&&e.end!=n.end)&&Y.getBuffer().hasDiscontinuitiesAfter(s)&&h!==i.default.FRAGMENTED_TEXT&&(N.removeExecutedRequestsAfterTime(e.end),u=!0)),t)l=ce(r,a=t.startTime+t.duration/2,{timeThreshold:0,ignoreIsFinished:!0});else for(l=ce(r,(u=o||Q||u)?a:void 0,{keepIdx:!u}),Q=!1;l&&l.action!==w.default.ACTION_COMPLETE&&N.isFragmentLoaded(l);)l=ce(r);return l}(e.seekTarget,e.replacement))&&(K.setSeekTarget(NaN),e.replacement||(isNaN(t.startTime+t.duration)||(X=t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+K.getTimeToLoadDelay(),K.setTimeToLoadDelay(0))),K.processMediaRequest(t)}function le(e){var i=e.chunk,o=i.bytes,s=i.quality,u=se(s),l=z&&u?z.getRepresentationForQuality(u.quality):null;e=O.getEventsFor(u.mediaInfo),l=O.getEventsFor(u,l);(e&&0<e.length||l&&0<l.length)&&(l=function(e,n,r,i){try{for(var o={},s=[],a=r.concat(i),u=0,l=a.length;u<l;u++)o[a[u].schemeIdUri+"/"+a[u].value]=a[u];var d=(c=(0,S.default)(t).getInstance().parse(e)).getBoxes("emsg");if(!d||0===d.length)return s;var c=!(c=c.getBox("sidx"))||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?n&&!isNaN(n.mediaStartTime)?n.mediaStartTime:0:c.earliest_presentation_time/c.timescale,f=Math.max(c,0),h=z.getCurrentRepresentation();for(u=0,l=d.length;u<l;u++){var p=O.getEvent(d[u],o,f,h);p&&s.push(p)}return s}catch(e){return[]}}(o,N.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,quality:s,index:i.index})[0],e,l),n.trigger(g.default.INBAND_EVENTS,{events:l},{streamId:r.id}))}function de(e){X=e.time,K.setSeekTarget(e.time)}function ce(e,t,n){var r=null;return J&&(e=z&&e?z.getRepresentationForQuality(e.quality):null,r=void 0!==t&&void 0!==n?J.getSegmentRequestForTime(H,e,t,n):J.getNextSegmentRequest(H,e)),r}return B={initialize:function(s,a){J=(0,v.default)(t).create({streamInfo:r,type:h,timelineConverter:I,dashMetrics:j,mediaPlayerModel:M,baseURLController:e.baseURLController,errHandler:R,settings:F,boxParser:U,events:g.default,eventBus:n,errors:y.default,debug:(0,E.default)(t).getInstance(),requestModifier:(0,b.default)(t).getInstance(),dashConstants:o.default,constants:i.default,urlUtils:(0,T.default)(t).getInstance()}),(q=r.manifestInfo.isDynamic)&&(W=(0,f.default)(t).create({timelineConverter:I})),J.initialize(q),P.registerStreamType(h,B),z=(0,c.default)(t).create({streamInfo:r,type:h,abrController:P,dashMetrics:j,playbackController:x,timelineConverter:I,dashConstants:o.default,events:g.default,eventBus:n,errors:y.default}),(Y=function(e){return e?e===i.default.VIDEO||e===i.default.AUDIO?(0,u.default)(t).create({streamInfo:r,type:e,mediaPlayerModel:M,manifestModel:D,fragmentModel:N,errHandler:R,mediaController:L,representationController:z,adapter:O,textController:k,abrController:P,playbackController:x,settings:F}):(0,l.default)(t).create({streamInfo:r,type:e,mimeType:C,mediaPlayerModel:M,manifestModel:D,fragmentModel:N,errHandler:R,mediaController:L,representationController:z,adapter:O,textController:k,abrController:P,playbackController:x,settings:F}):(R.error(new _.default(y.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,y.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(h))&&Y.initialize(s),(K=(0,d.default)(t).create({streamInfo:r,type:h,mimeType:C,adapter:O,dashMetrics:j,mediaPlayerModel:M,fragmentModel:N,abrController:P,playbackController:x,textController:k,mediaController:L,bufferController:Y,settings:F})).initialize(a),X=0,Q=!1},getStreamId:function(){return r.id},getType:function(){return h},isUpdating:function(){return!!z&&z.isUpdating()},getBufferController:function(){return Y},getFragmentModel:function(){return N},getScheduleController:function(){return K},getRepresentationController:function(){return z},getRepresentationInfo:se,getBufferLevel:function(){return Y?Y.getBufferLevel():0},isBufferingCompleted:function(){return!!Y&&Y.getIsBufferingCompleted()},createBuffer:function(e){return oe()||Y?Y.createBuffer(V,e):null},updateStreamInfo:function(e){r=e,F.get().streaming.useAppendWindow&&Y.updateAppendWindow()},getStreamInfo:function(){return r},selectMediaInfo:function(e){e===H||e&&H&&e.type!==H.type||(H=e);var t,n,o,s,a=O.getRealAdaptation(r,H),u=O.getVoRepresentations(H);z&&(t=z.getData(),n=P.getTopQualityIndexFor(h,r.id),o=P.getMinAllowedIndexFor(h),s=void 0,s=(e=null)!==t&&t.id==a.id||h===i.default.FRAGMENTED_TEXT?P.getQualityFor(h):(e=P.getThroughputHistory().getAverageThroughput(h)||P.getInitialBitrateFor(h),P.getQualityForBitrate(H,e)),void 0!==o&&s<o&&(s=o),n<s&&(s=n),J.setMimeType(H?H.mimeType:null),z.updateData(a,u,h,s))},addMediaInfo:function(e,t){-1===V.indexOf(e)&&V.push(e),t&&this.selectMediaInfo(e)},getLiveStartTime:function(){if(!q)return NaN;if(!W)return NaN;var e=NaN,t=se(),n=W.getLiveEdge(t);return isNaN(n)?NaN:((t=function(e,t){try{var n=null,i=x.getLiveDelay(),o=isNaN(r.manifestInfo.DVRWindowSize)?i:r.manifestInfo.DVRWindowSize,s=.1*o,a=void 0;if(!isFinite(o)||ce(t,e-o+s,{ignoreIsFinished:!0}))for(;!n&&i<=o;)(n=ce(t,a=e-i,{ignoreIsFinished:!0}))||(i+=1);return n&&x.setLiveDelay(i,!0),G.debug("live edge: "+e+", live delay: "+i+", live target: "+a),n}catch(e){return null}}(n,t))&&(e=!F.get().streaming.lowLatencyEnabled||t.duration<M.getLiveDelay()?t.startTime:t.startTime+t.duration-M.getLiveDelay()),e)},switchTrackAsked:function(){K.switchTrackAsked()},getMediaInfoArr:function(){return V},getMediaInfo:function(){return H},getMediaSource:function(){return Y.getMediaSource()},setMediaSource:function(e){Y.setMediaSource(e,V)},dischargePreBuffer:function(){Y.dischargePreBuffer()},getBuffer:oe,setBuffer:function(e){Y.setBuffer(e)},setBufferingTime:function(e){X=e},resetIndexHandler:function(){J&&J.resetIndex()},getInitRequest:function(e){return(0,p.checkInteger)(e),e=z?z.getRepresentationForQuality(e):null,J?J.getInitRequest(H,e):null},getFragmentRequest:ce,finalisePlayList:function(e,t){j.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=se();e=z&&e?z.getRepresentationForQuality(e.quality):null;return J.getNextSegmentRequestIdempotent(H,e)},reset:function(e,t){J&&J.reset(),Y&&(Y.reset(e,t),Y=null),K&&(K.reset(),K=null),z&&(z.reset(),z=null),W&&(W.reset(),W=null),P&&!t&&P.unRegisterStreamType(h),n.off(g.default.DATA_UPDATE_COMPLETED,Z,B),n.off(g.default.QUALITY_CHANGE_REQUESTED,ee,B),n.off(g.default.INIT_FRAGMENT_NEEDED,ae,B),n.off(g.default.MEDIA_FRAGMENT_NEEDED,ue,B),n.off(g.default.MEDIA_FRAGMENT_LOADED,le,B),n.off(g.default.BUFFER_LEVEL_UPDATED,te,B),n.off(g.default.BUFFER_LEVEL_STATE_CHANGED,ne,B),n.off(g.default.BUFFER_CLEARED,re,B),n.off(g.default.SEEK_TARGET,de,B),$(),r=h=null}},G=(0,E.default)(t).getInstance().getLogger(B),$(),n.on(g.default.DATA_UPDATE_COMPLETED,Z,B,{priority:m.default.EVENT_PRIORITY_HIGH}),n.on(g.default.QUALITY_CHANGE_REQUESTED,ee,B),n.on(g.default.INIT_FRAGMENT_NEEDED,ae,B),n.on(g.default.MEDIA_FRAGMENT_NEEDED,ue,B),n.on(g.default.MEDIA_FRAGMENT_LOADED,le,B),n.on(g.default.BUFFER_LEVEL_UPDATED,te,B),n.on(g.default.BUFFER_LEVEL_STATE_CHANGED,ne,B),n.on(g.default.BUFFER_CLEARED,re,B),n.on(g.default.QUOTA_EXCEEDED,(function(e){X=e.quotaExceededTime,Q=!0}),B),n.on(g.default.SEEK_TARGET,de,B),B}R.__dashjs_factory_name="StreamProcessor",n.default=h.default.getClassFactory(R),t.exports=n.default},{112:112,113:113,118:118,125:125,154:154,212:212,219:219,229:229,231:231,232:232,234:234,239:239,241:241,257:257,45:45,46:46,47:47,51:51,54:54,57:57,61:61,62:62}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(239)),o=r(e(163)),s=e(255),a=r(e(246)),u=r(e(46)),l=r(e(54)),d=r(e(47)),c=r(e(51));function f(e){e=e||{};var t=this.context,n=(0,u.default)(t).getInstance(),r=(0,o.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.settings?e.settings.get().streaming.lowLatencyEnabled:null,errors:c.default});return{load:function(e,t,o){function u(r,s){t.resolved=!0,t.resolvedContent=r||null,n.trigger(l.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:o,error:r||s?null:new i.default(c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})}var d;"urn:mpeg:dash:resolve-to-zero:2013"===e?u(null,!0):(d=new a.default(e,s.HTTPRequest.XLINK_EXPANSION_TYPE),r.load({request:d,success:function(e){u(e)},error:function(){u(null)}}))},reset:function(){r&&(r.abort(),r=null)}}}f.__dashjs_factory_name="XlinkLoader",n.default=d.default.getClassFactory(f),t.exports=n.default},{163:163,239:239,246:246,255:255,46:46,47:47,51:51,54:54}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'}}},t.exports=n.default},{}],112:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&r(e.prototype,t)}(i,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability"}}]),i);n.default=o,t.exports=n.default},{}],113:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&r(e.prototype,t)}(i,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),i);n.default=o,t.exports=n.default},{}],114:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var o=new(function(e,t,n){t&&r(e.prototype,t)}(i,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),i);n.default=o,t.exports=n.default},{}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(196)),o=r(e(112)),s=r(e(113)),a=r(e(238)),u=r(e(154)),l=r(e(46)),d=r(e(54)),c=r(e(47)),f=r(e(192)),h=r(e(193)),p=r(e(194)),m=r(e(191)),g=r(e(195)),v=r(e(45)),y=e(255),_=e(232);function E(){var e=this.context,t=(0,v.default)(e).getInstance(),n=(0,l.default)(e).getInstance(),r=void 0,c=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0,D=void 0,M=void 0,N=void 0,P=void 0,x=void 0,L=void 0,k=void 0,j=void 0,F=void 0,U=void 0,B=void 0,G=void 0,q=void 0;function H(){(E=(0,i.default)(e).create({dashMetrics:G,mediaPlayerModel:N,settings:q})).initialize()}function V(){T={},S={},A={},w={},L={},F={},U={},B={},void 0===C&&(C=!1),j=k=x=void 0,clearTimeout(R),R=null}function Y(e){e.mediaType===o.default.VIDEO&&(void 0!==x&&k.push(x,M.getPlaybackQuality()),x=e.newQuality)}function K(e){e.metric!==s.default.HTTP_REQUEST||!e.value||e.value.type!==y.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==o.default.AUDIO&&e.mediaType!==o.default.VIDEO||j.push(e.mediaType,e.value,q.get().streaming.abr.useDeadTimeLatency),e.metric!==s.default.BUFFER_LEVEL||e.mediaType!==o.default.AUDIO&&e.mediaType!==o.default.VIDEO||function(e,t){var n=q.get().streaming.abr.ABRStrategy;n===o.default.ABR_STRATEGY_L2A?(F[e]=!1,B[e]=!1,U[e]=!0):n===o.default.ABR_STRATEGY_LoLP?(F[e]=!1,B[e]=!0,U[e]=!1):n===o.default.ABR_STRATEGY_BOLA?(F[e]=!0,B[e]=!1,U[e]=!1):n===o.default.ABR_STRATEGY_THROUGHPUT?(F[e]=!1,B[e]=!1,U[e]=!1):function(e,t){var n,r=n=N.getStableBufferTime(),i=.5*n;r=((n=F[e])?i:r)<t;(F[e]=r)!==n&&(r?c.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):c.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e,t)}(e.mediaType,.001*e.value.level)}function z(e,t){return T[t]=T[t]||{},T[t].hasOwnProperty(e)||(T[t][e]=0),function(e,t){if(t!==o.default.VIDEO||!q.get().streaming.abr.limitBitrateByPortal||!w[t])return e;C||oe();var n=D.getAdaptationForType(0,t).Representation,r=e;if(0<I&&0<O){for(;0<r&&n[r]&&I<n[r].width&&I-n[r-1].width<n[r].width-I;)--r;for(;r<n.length-1&&n[r].width===n[r+1].width;)r+=1}return r}(function(e,t,n){return t=q.get().streaming.abr.maxRepresentationRatio[t],isNaN(t)||1<=t||t<0?e:Math.min(e,Math.round(n*t))}(function(e,t){var n=e;if(!w[t])return n;var r=J(t);return void 0!==r&&(n=Math.max(e,r)),void 0!==(t=W(t))&&(n=Math.min(n,t)),n}(T[t][e],e),e,T[t][e]),e)}function W(e){var t;return-1<(t=(t=e,q.get().streaming.abr.maxBitrate[t]))?Z(w[e].getMediaInfo(),t):void 0}function J(e){var t,n=(t=e,q.get().streaming.abr.minBitrate[t]);if(-1<n)return(e=ee(t=w[e].getMediaInfo()))[t=Z(t,n)]&&t<e.length-1&&e[t].bitrate<1e3*n&&t++,t}function X(e,t,n,r){var i=t.id;t=ie(e);(0,_.checkInteger)(n),i=z(e,i),n!==t&&0<=n&&n<=i&&Q(e,t,n,i,r)}function Q(e,t,r,i,o){var s,a,u;e&&w[e]&&(a=(s=w[e].getStreamInfo())?s.id:null,q.get().debug.logLevel===v.default.LOG_LEVEL_DEBUG&&(u=G.getCurrentBufferLevel(e),c.info("["+e+"] switch from "+t+" to "+r+"/"+i+" (buffer: "+u+") "+(o?JSON.stringify(o):"."))),i=e,u=r,S[a]=S[a]||{},S[a][i]=u,n.trigger(d.default.QUALITY_CHANGE_REQUESTED,{oldQuality:t,newQuality:r,reason:o},{streamId:s.id,mediaType:e}),s=j.getAverageThroughput(e),isNaN(s)||P.setSavedBitrateSettings(e,s))}function $(e,t){A[e].state=t}function Z(e,t,n){var r=e&&e.type?w[e.type].getRepresentationInfo():null;if(q.get().streaming.abr.useDeadTimeLatency&&n&&r&&r.fragmentDuration){if(n/=1e3,(r=r.fragmentDuration)<n)return 0;t*=1-n/r}for(var i=ee(e),o=i.length-1;0<=o;o--)if(1e3*t>=i[o].bitrate)return o;return 0}function ee(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,o=0,s=n.length;o<s;o++)(i=new a.default).mediaType=r,i.qualityIndex=o,i.bitrate=n[o].bandwidth,i.width=n[o].width,i.height=n[o].height,i.scanType=n[o].scanType,t.push(i);return t}function te(e){return F[e]}function ne(e){return U[e]}function re(e){return B[e]}function ie(e){var t;if(e&&w[e]&&(t=(t=w[e].getStreamInfo())?t.id:null))return S[t]=S[t]||{},S[t].hasOwnProperty(e)||(S[t][e]=0),S[t][e];return 0}function oe(){var e;M&&(e=q.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,I=M.getClientWidth()*e,O=M.getClientHeight()*e)}function se(t){var n=t.request.mediaType;if(q.get().streaming.abr.autoSwitchBitrate[n]){var i=w[n];if(!i)return;var o=(0,f.default)(e).create({abrController:r,streamProcessor:i,currentRequest:t.request,useBufferOccupancyABR:te(n),useL2AABR:ne(n),useLoLPABR:re(n),videoModel:M});(o=E.shouldAbandonFragment(o)).quality>h.default.NO_CHANGE&&(i=i.getFragmentModel()).getRequests({state:u.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(i.abortRequests(),$(n,s.default.ABANDON_LOAD),L[n].reset(),L[n].push({oldValue:ie(n),newValue:o.quality,confidence:1,reason:o.reason}),X(n,b.getActiveStreamInfo(),o.quality,o.reason),clearTimeout(R),R=setTimeout((function(){$(n,s.default.ALLOW_LOAD),R=null}),q.get().streaming.abandonLoadTimeout))}}return r={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=ie(o.default.AUDIO);e=ie(o.default.VIDEO);return n===z(o.default.AUDIO,t)&&e===z(o.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return e=t,t=r,T[n]=T[n]||{},T[n][e]=t,r},getThroughputHistory:function(){return j},getBitrateList:ee,getQualityForBitrate:Z,getTopBitrateInfoFor:function(e){if(e&&w&&w[e]){var t=w[e].getStreamInfo();if(t&&t.id)return t=z(e,t.id),(e=ee(w[e].getMediaInfo()))[t]?e[t]:null}return null},getMaxAllowedIndexFor:W,getMinAllowedIndexFor:J,getInitialBitrateFor:function(e){if(function(){if(!P||!P.hasOwnProperty("getSavedBitrateSettings"))throw new Error(o.default.MISSING_CONFIG_ERROR)}(),e===o.default.TEXT||e===o.default.FRAGMENTED_TEXT)return NaN;var t,n=P.getSavedBitrateSettings(e),r=q.get().streaming.abr.initialBitrate[e],i=q.get().streaming.abr.initialRepresentationRatio[e];return-1===r&&(r=-1<i?(t=D.getAdaptationForType(0,e).Representation,Array.isArray(t)?t[Math.max(Math.round(t.length*i)-1,0)].bandwidth:0):isNaN(n)?e===o.default.VIDEO?1e3:100:n),r},getQualityFor:ie,getAbandonmentStateFor:function(e){return A[e]?A[e].state:null},setPlaybackQuality:X,checkPlaybackQuality:function(t){var n,i,o,a,u;t&&w&&w[t]&&(u=(i=w[t].getStreamInfo())?i.id:null,n=ie(t),a=(0,f.default)(e).create({abrController:r,streamProcessor:w[t],currentValue:n,switchHistory:L[t],droppedFramesHistory:k,useBufferOccupancyABR:te(t),useL2AABR:ne(t),useLoLPABR:re(t),videoModel:M}),!k||(o=M.getPlaybackQuality())&&k.push(x,o),q.get().streaming.abr.autoSwitchBitrate[t]&&(i=J(t),o=z(t,u),a=(u=E.getMaxQuality(a)).quality,void 0!==i&&(a>h.default.NO_CHANGE?a:n)<i&&(a=i),o<a&&(a=o),L[t].push({oldValue:n,newValue:a}),a>h.default.NO_CHANGE&&a!=n?(A[t].state===s.default.ALLOW_LOAD||n<a)&&Q(t,n,a,o,u.reason):q.get().debug.logLevel===v.default.LOG_LEVEL_DEBUG&&(u=G.getCurrentBufferLevel(t,!0),c.debug("["+t+"] stay on "+n+"/"+o+" (buffer: "+u+")"))))},getTopQualityIndexFor:z,setElementSize:oe,setWindowResizeEventCalled:function(e){C=e},createAbrRulesCollection:H,registerStreamType:function(t,i){L[t]=L[t]||(0,p.default)(e).create(),w[t]=i,A[t]=A[t]||{},A[t].state=s.default.ALLOW_LOAD,F[t]=!1,U[t]=!1,B[t]=!1,n.on(d.default.LOADING_PROGRESS,se,r),t===o.default.VIDEO&&(n.on(d.default.QUALITY_CHANGE_RENDERED,Y,r),k=k||(0,m.default)(e).create(),oe()),n.on(d.default.METRIC_ADDED,K,r),n.on(d.default.PERIOD_SWITCH_COMPLETED,H,r),j=j||(0,g.default)(e).create({settings:q})},unRegisterStreamType:function(e){delete w[e]},setConfig:function(e){e&&(e.streamController&&(b=e.streamController),e.domStorage&&(P=e.domStorage),e.mediaPlayerModel&&(N=e.mediaPlayerModel),e.dashMetrics&&(G=e.dashMetrics),e.adapter&&(D=e.adapter),e.videoModel&&(M=e.videoModel),e.settings&&(q=e.settings))},reset:function(){V(),n.off(d.default.LOADING_PROGRESS,se,r),n.off(d.default.QUALITY_CHANGE_RENDERED,Y,r),n.off(d.default.METRIC_ADDED,K,r),n.off(d.default.PERIOD_SWITCH_COMPLETED,H,r),E&&E.reset()}},c=t.getLogger(r),V(),r}E.__dashjs_factory_name="AbrController",(e=c.default.getSingletonFactory(E)).QUALITY_DEFAULT=0,c.default.updateSingletonFactory(E.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{112:112,113:113,154:154,191:191,192:192,193:193,194:194,195:195,196:196,232:232,238:238,255:255,45:45,46:46,47:47,54:54}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(152)),o=r(e(218)),s=r(e(234)),a=r(e(86)),u=r(e(47)),l=r(e(46)),d=r(e(54));function c(){var e,t=void 0,n=this.context,r=(0,l.default)(n).getInstance(),u=(0,s.default)(n).getInstance(),c=void 0,f=void 0;return e={reset:function(){c.reset(),f.reset()},initialize:function(e){c.setConfig({adapter:t}),c.update(e),f.chooseSelector(t.getIsDVB(e))},resolve:function(e){if(e=c.getForPath(e).reduce((function(e,t){return(t=f.select(t))?(u.isRelative(t.url)?e.url=u.resolve(t.url,e.url):(e.url=t.url,e.serviceLocation=t.serviceLocation),e.availabilityTimeOffset=t.availabilityTimeOffset,e.availabilityTimeComplete=t.availabilityTimeComplete,e):new a.default}),new a.default),!u.isRelative(e.url))return e},setConfig:function(e){e.baseURLTreeModel&&(c=e.baseURLTreeModel),e.baseURLSelector&&(f=e.baseURLSelector),e.adapter&&(t=e.adapter)}},c=(0,i.default)(n).create(),f=(0,o.default)(n).create(),r.on(d.default.SERVICE_LOCATION_BLACKLIST_CHANGED,(function(e){c.invalidateSelectedIndexes(e.entry)}),e),e}c.__dashjs_factory_name="BaseURLController",n.default=u.default.getClassFactory(c),t.exports=n.default},{152:152,218:218,234:234,46:46,47:47,54:54,86:86}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(46));function s(e){e=e||{};var t,n=[],r=(0,o.default)(this.context).getInstance(),i=e.updateEventName,s=e.addBlacklistEventName;function a(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(i,{entry:e}))}return t={add:a,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},s&&r.on(s,(function(e){a(e.entry)}),t),t}s.__dashjs_factory_name="BlackListController",n.default=i.default.getClassFactory(s),t.exports=n.default},{46:46,47:47}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(113)),s=r(e(154)),a=r(e(107)),u=r(e(106)),l=r(e(115)),d=r(e(46)),c=r(e(54)),f=r(e(47)),h=r(e(45)),p=r(e(227)),m=r(e(239)),g=r(e(51)),v=e(255),y="BufferController";function _(e){e=e||{};var t,n=this.context,r=(0,d.default)(n).getInstance(),f=e.errHandler,_=e.fragmentModel,E=e.representationController,b=e.mediaController,T=e.adapter,S=e.textController,w=e.abrController,A=e.playbackController,R=e.streamInfo,C=e.type,I=e.settings,O=void 0,D=void 0,M=void 0,N=void 0,P=void 0,x=void 0,L=void 0,k=void 0,j=void 0,F=void 0,U=void 0,B=void 0,G=void 0,q=void 0,H=void 0,V=void 0,Y=void 0,K=void 0,z=void 0,W=void 0,J=void 0,X=void 0;function Q(e){return T.convertDataToRepresentationInfo(E.getRepresentationForQuality(e))}function $(e,t){if(!Y||!e)return null;var r=e[0];if(x)try{j=t&&t[C]?(0,a.default)(n).create(x,r,re.bind(this),t[C]):(0,a.default)(n).create(x,r,re.bind(this),null),I.get().streaming.useAppendWindow&&j.updateAppendWindow(R),"function"==typeof j.getBuffer().initialize&&j.getBuffer().initialize(C,R,e,_)}catch(e){O.fatal("Caught error on create SourceBuffer: "+e),f.error(new m.default(g.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,g.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+C))}else j=(0,u.default)(n).create(re.bind(this));return _e(Q(D)),j}function Z(e){O.info("Init fragment finished loading saving to",C+"'s init cache"),Y.save(e.chunk),O.debug("Append Init fragment",C," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),te(e.chunk)}function ee(e){var t=e.chunk;J?(X=t,(e=j&&j.getAllBufferRanges())&&0<e.length&&A.getTimeToStreamEnd()>I.get().streaming.stallThreshold&&(O.debug("Clearing buffer because track changed - "+(e.end(e.length-1)+.5)),ge([{start:0,end:e.end(e.length-1)+.5,force:!0}]))):te(t)}function te(e){j.append(e),e.mediaInfo.type===i.default.VIDEO&&Ie(c.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function ne(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)O.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",A.getTime())}function re(e){var t,n,r;if(e.error)return 22===e.error.code&&(V=!0,P=.8*Re(),O.warn("Quota exceeded, Critical Buffer: "+P),0<P&&(t=Math.max(.2*P,1),r=P-t,n=Math.min(I.get().streaming.bufferTimeAtTopQuality,.9*r),r=Math.min(I.get().streaming.bufferTimeAtTopQualityLongForm,.9*r),r={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferTimeAtTopQuality:parseFloat(n.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(r.toFixed(5))}},I.update(r))),void(22!==e.error.code&&Ce()||(O.warn("Clearing playback buffer to overcome quota exceed situation"),Ie(c.default.QUOTA_EXCEEDED,{criticalBufferLevel:P,quotaExceededTime:e.chunk.start}),ge(me())));V=!1,(G=e.chunk)&&!isNaN(G.index)&&(L=Math.max(G.index,L),fe()),e=j.getAllBufferRanges(),G.segmentType===v.HTTPRequest.MEDIA_SEGMENT_TYPE?(ne(e),ae(),function(){if((C===i.default.AUDIO||C===i.default.VIDEO)&&!isNaN(K)){var e=A.getTime(),t=de(K,0);if(e!==K||!t){var n=E.getCurrentRepresentation().segmentDuration;(t=de(K,n))&&(Math.abs(e-K)>n?K<=t.end&&(A.seek(Math.max(K,t.start),!1,!0),K=NaN):e<t.start&&(A.seek(t.start,!1,!0),K=NaN))}}}()):J&&(o=A.getTime(),O.debug("AppendToBuffer seek target should be "+o),Ie(c.default.SEEK_TARGET,{time:o}));var o=!1;U&&(0<U.indexOf(G)&&(o=!0),U=null),G&&!o&&Ie(G.endFragment?c.default.BYTES_APPENDED_END_FRAGMENT:c.default.BYTES_APPENDED,{quality:G.quality,startTime:G.start,index:G.index,bufferedRanges:e,mediaType:C})}function ie(e){D!==e.newQuality&&(_e(this.getRepresentationInfo(e.newQuality)),D=e.newQuality)}function oe(e){j&&(K=e.seekTime,M&&(M=!(z=!0),k=Number.POSITIVE_INFINITY),(C!==i.default.FRAGMENTED_TEXT?function(){j&&j.waitForUpdateEnd((function(){var e=function(){if(j){var e=[],t=j.getAllBufferRanges();if(!t||0===t.length)return e;var n,r=A.getTime(),i=t.end(t.length-1)+.5,o=_.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:r,threshold:.01})[0];return o?(n={start:0,end:o.startTime-I.get().streaming.stallThreshold},(r=_.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:o.startTime-o.duration/2,threshold:.01})[0])&&r.startTime!=o.startTime&&(n.end=r.startTime),n.start<n.end&&n.end>t.start(0)&&e.push(n),t={start:o.startTime+o.duration+I.get().streaming.stallThreshold,end:i},(n=_.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:o.startTime+o.duration+I.get().streaming.stallThreshold,threshold:.01})[0])&&n.startTime!==o.startTime&&(t.start=n.startTime+n.duration+I.get().streaming.stallThreshold),t.start<t.end&&t.start<i&&e.push(t)):(O.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -",i),e.push({start:0,end:i})),e}}();e&&0!==e.length||ae(),ge(e)}))}:ae)())}function se(){K=NaN}function ae(){(!J||C===i.default.FRAGMENTED_TEXT&&S.isTextEnabled())&&ce()}function ue(){he()}function le(){K=NaN,he()}function de(e,t){var n,r,i,o=j.getAllBufferRanges(),s=null,a=null,u=0,l=void 0,d=isNaN(t)?.15:t;if(null!=o){for(l=0,i=o.length;l<i;l++)if(n=o.start(l),r=o.end(l),null===s)u=Math.abs(n-e),(n<=e&&e<r||u<=d)&&(s=n,a=r);else{if(!((u=n-a)<=d))break;a=r}if(null!==s)return{start:s,end:a}}return null}function ce(){var e,t;A&&(e=(isNaN(K)?A.getTime():K)||0,I.get().streaming.jumpGaps&&(t=I.get().streaming.smallGapLimit),N=null===(t=de(e,t))?0:t.end-e,Ie(c.default.BUFFER_LEVEL_UPDATED,{bufferLevel:N}),he())}function fe(){k-1<=L&&!M&&void 0===j.discharge&&(M=!0,O.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for "+C),Ie(c.default.BUFFERING_COMPLETED))}function he(){C!==i.default.AUDIO&&C!==i.default.VIDEO||(z&&!M&&0<N&&A&&A.getTimeToStreamEnd()-N<.1&&(M=!(z=!1),O.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED for type "+C),Ie(c.default.BUFFERING_COMPLETED)),(!I.get().streaming.lowLatencyEnabled&&N<I.get().streaming.stallThreshold||0===N)&&!M?pe(o.default.BUFFER_EMPTY):(M||N>=R.manifestInfo.minBufferTime)&&pe(o.default.BUFFER_LOADED))}function pe(e){B===e||e===o.default.BUFFER_EMPTY&&0===A.getTime()||C===i.default.FRAGMENTED_TEXT&&!S.isTextEnabled()||(B=e,Ie(c.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),Ie(e===o.default.BUFFER_LOADED?c.default.BUFFER_LOADED:c.default.BUFFER_EMPTY),O.debug(e===o.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function me(){var e=[],t=j.getAllBufferRanges();if(!t||0===t.length)return e;var n=A.getTime(),r=Math.max(0,n-I.get().streaming.bufferToKeep),i=_.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&A.getIsDynamic())return[];if(t.start(0)<=r){for(var o={start:0,end:r},a=0;a<t.length&&t.end(a)<=r;a++)o.end=t.end(a);o.start<o.end&&e.push(o)}return e}function ge(e){e&&j&&0!==e.length&&(W.push.apply(W,e),H||ve())}function ve(){if(0===W.length||!j)return O.debug("Nothing to prune, halt pruning"),void(H=!(W=[]));var e=j.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return O.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(H=!(W=[]));e=W.shift(),O.debug("Removing buffer from:",e.start,"to",e.end),H=!0,A.getTime()<e.end&&(M=!1,L=0),j.remove(e.start,e.end,e.force)}function ye(e){j===e.buffer&&(O.debug("onRemoved buffer from:",e.from,"to",e.to),ne(j.getAllBufferRanges()),0===W.length&&(H=!1),e.unintended&&(O.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),Ie(c.default.SEEK_TARGET,{time:e.from,mediaType:C,streamId:R.id})),H?ve():(J?(J=!1,X&&te(X)):ce(),Ie(c.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Ce(),quotaExceeded:V})))}function _e(e){e&&void 0!==e.MSETimeOffset&&j&&j.updateTimestampOffset&&j.updateTimestampOffset(e.MSETimeOffset)}function Ee(e){e.error||M||_e(e.currentRepresentation)}function be(e){k=e.request.index,fe()}function Te(e){e.newMediaInfo.streamInfo.id!==R.id||e.newMediaInfo.type!==C||(e=j&&j.getAllBufferRanges())&&(O.info("Track change asked"),b.getSwitchMode(C)===i.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&e&&0<e.length&&A.getTimeToStreamEnd()>I.get().streaming.stallThreshold&&(M=!1,k=Number.POSITIVE_INFINITY))}function Se(){++q*(I.get().streaming.wallclockTimeUpdateInterval/1e3)>=I.get().streaming.bufferPruningInterval&&(q=0,j&&C!==i.default.FRAGMENTED_TEXT&&(M||ge(me())))}function we(){he()}function Ae(e,t){x=e,j&&t&&"function"==typeof j.discharge&&(F=j,$(t))}function Re(){var e,t=j.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function Ce(){return Re()<P}function Ie(e,t){t=t||{},r.trigger(e,t,{streamId:R.id,mediaType:C})}function Oe(e,t){P=Number.POSITIVE_INFINITY,B=void 0,D=l.default.QUALITY_DEFAULT,k=Number.POSITIVE_INFINITY,G=null,z=V=H=M=!1,q=N=L=0,W=[],K=NaN,j&&(e||j.abort(),j.reset(t),j=null),J=!1}return t={initialize:function(e){Ae(e),D=w.getQualityFor(C),r.on(c.default.DATA_UPDATE_COMPLETED,Ee,this),r.on(c.default.INIT_FRAGMENT_LOADED,Z,this),r.on(c.default.MEDIA_FRAGMENT_LOADED,ee,this),r.on(c.default.QUALITY_CHANGE_REQUESTED,ie,this),r.on(c.default.STREAM_COMPLETED,be,this),r.on(c.default.PLAYBACK_PLAYING,le,this),r.on(c.default.PLAYBACK_PROGRESS,ae,this),r.on(c.default.PLAYBACK_TIME_UPDATED,ae,this),r.on(c.default.PLAYBACK_RATE_CHANGED,we,this),r.on(c.default.PLAYBACK_SEEKING,oe,this),r.on(c.default.PLAYBACK_SEEKED,se,this),r.on(c.default.PLAYBACK_STALLED,ue,this),r.on(c.default.WALLCLOCK_TIME_UPDATED,Se,this),r.on(c.default.CURRENT_TRACK_CHANGED,Te,this,{priority:d.default.EVENT_PRIORITY_HIGH}),r.on(c.default.SOURCEBUFFER_REMOVE_COMPLETED,ye,this)},getStreamId:function(){return R.id},getType:function(){return C},getBufferControllerType:function(){return y},getRepresentationInfo:Q,createBuffer:$,dischargePreBuffer:function(){if(j&&F&&"function"==typeof F.discharge){var e=F.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+C+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";O.debug(t)}else O.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");U=[];for(var r=F.discharge(),i=null,o=0;o<r.length;o++){var s,a=r[o];"InitializationSegment"===a.segmentType||(s=Y.extract(a.streamId,a.representationId))&&i!==s&&(U.push(s),j.append(s),i=s),U.push(a),j.append(a)}F.reset(),F=null}},getBuffer:function(){return j},setBuffer:function(e){j=e},getBufferLevel:function(){return N},getRangeAt:de,setMediaSource:Ae,getMediaSource:function(){return x},appendInitSegment:function(e){return!!(e=Y.extract(R.id,e))&&(O.info("Append Init fragment",C," with representationId:",e.representationId," and quality:",e.quality,", data size:",e.bytes.byteLength),te(e),!0)},replaceBuffer:function(){J=!0},getIsBufferingCompleted:function(){return M},getIsPruningInProgress:function(){return H},reset:function(e,t){r.off(c.default.DATA_UPDATE_COMPLETED,Ee,this),r.off(c.default.INIT_FRAGMENT_LOADED,Z,this),r.off(c.default.MEDIA_FRAGMENT_LOADED,ee,this),r.off(c.default.QUALITY_CHANGE_REQUESTED,ie,this),r.off(c.default.STREAM_COMPLETED,be,this),r.off(c.default.PLAYBACK_PLAYING,le,this),r.off(c.default.PLAYBACK_PROGRESS,ae,this),r.off(c.default.PLAYBACK_TIME_UPDATED,ae,this),r.off(c.default.PLAYBACK_RATE_CHANGED,we,this),r.off(c.default.PLAYBACK_SEEKING,oe,this),r.off(c.default.PLAYBACK_SEEKED,se,this),r.off(c.default.PLAYBACK_STALLED,ue,this),r.off(c.default.WALLCLOCK_TIME_UPDATED,Se,this),r.off(c.default.CURRENT_TRACK_CHANGED,Te,this),r.off(c.default.SOURCEBUFFER_REMOVE_COMPLETED,ye,this),Oe(e,t)},updateAppendWindow:function(){j&&!M&&j.updateAppendWindow(R)}},O=(0,h.default)(n).getInstance().getLogger(t),Y=(0,p.default)(n).getInstance(),Oe(),t}_.__dashjs_factory_name=y,n.default=f.default.getClassFactory(_),t.exports=n.default},{106:106,107:107,112:112,113:113,115:115,154:154,227:227,239:239,255:255,45:45,46:46,47:47,51:51,54:54}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(46)),a=r(e(104)),u=r(e(164));function l(){var e,t="urn:mpeg:dash:event:2012",n="discarded",r="updated",i="added",l=this.context,d=(0,s.default)(l).getInstance(),c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0;function b(){if(!g||!v)throw new Error("setConfig function has to be called previously")}function T(){E=!1,f={},p=null,_=!(h={}),m=Date.now()/1e3}function S(e,t,o){var s=!(arguments.length<=2||void 0===o)&&o,a=e.eventStream.schemeIdUri,u=e.eventStream.value,l=e.id,d=n;return t[a]||(t[a]=[]),o=t[a].findIndex((function(e){return(!u||e.eventStream.value&&e.eventStream.value===u)&&e.id===l})),-1===o?(t[a].push(e),d=i):s&&(t[a][o]=e,d=r),d}function w(){try{var e,t;_||(_=!0,t=(e=v.getTime())-m,t=0<m?Math.max(0,t):0,A(h,t,e),A(f,t,e),m=e,_=!1)}catch(e){_=!1}}function A(e,t,n){try{C(e,(function(r){var i;void 0!==r&&(i=isNaN(r.duration)?0:r.duration,r.calculatedPresentationTime<=n&&r.calculatedPresentationTime+t+i>=n?I(r,e,a.default.EVENT_MODE_ON_START):(function(e,t,n){try{return n<e-t}catch(e){return!1}}(n,i+t,r.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return!1}}(r))&&(c.debug("Deleting event "+r.id+" as it is expired or invalid"),O(e,r)))}))}catch(e){}}function R(e){try{i=v.getTime(),C(e,(n=t.eventStream&&t.eventStream.period&&!isNaN(t.eventStream.period.duration)?t.eventStream.period.duration:NaN,r=t.eventStream&&t.eventStream.period&&!isNaN(t.eventStream.period.start)?t.eventStream.period.start:NaN,void(isNaN(n)||isNaN(r)||(r=t.calculatedPresentationTime,Math.abs(r-i)<300&&I(t,e,a.default.EVENT_MODE_ON_START)))))}catch(e){}var t,n,r,i}function C(e,t){try{if(e)for(var n=Object.keys(e),r=0;r<n.length;r++)e[n[r]].forEach((function(e){void 0!==e&&t(e)}))}catch(e){}}function I(e,n,r){try{var i=v.getTime(),o=e.id;if(r===a.default.EVENT_MODE_ON_RECEIVE)return c.debug("Received event "+o),void d.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r});e.eventStream.schemeIdUri===t&&1===e.eventStream.value?0===e.duration&&0===e.presentationTimeDelta||(c.debug("Starting manifest refresh event "+o+" at "+i),O(n,e),function(){try{b(),g.refreshManifest()}catch(e){}}()):"urn:mpeg:dash:event:callback:2015"===e.eventStream.schemeIdUri&&1===e.eventStream.value?(c.debug("Starting callback event "+o+" at "+i),O(n,e),function(e){try{(0,u.default)(l).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(e.messageData)):(c.debug("Starting event "+o+" at "+i),O(n,e),d.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r}))}catch(e){}}function O(e,t){var n=t.eventStream.schemeIdUri,r=t.eventStream.value,i=t.id;e[n]=e[n].filter((function(e){return r&&e.eventStream.value&&e.eventStream.value!==r||e.id!==i})),0===e[n].length&&delete e[n]}return e={addInlineEvents:function(e){try{if(b(),e)for(var t=0;t<e.length;t++){var n=e[t],o=S(n,f,!0);o===i?(c.debug("Added inline event with id "+n.id),I(n,e,a.default.EVENT_MODE_ON_RECEIVE)):o===r&&c.debug("Updated inline event with id "+n.id)}c.debug("Added "+e.length+" inline events")}catch(e){throw e}},addInbandEvents:function(e){try{b();for(var n=0;n<e.length;n++){var r=e[n];S(r,h,!1)===i?(r.eventStream.schemeIdUri===t&&void 0===h[r.id]&&function(e){try{var t,n;1==e.eventStream.value&&(t=e.calculatedPresentationTime,void 0,n=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,d.trigger(a.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:t,newDuration:n,newManifestValidAfter:NaN},{mode:a.default.EVENT_MODE_ON_START}))}catch(e){}}(r),c.debug("Added inband event with id "+r.id),I(r,e,a.default.EVENT_MODE_ON_RECEIVE)):c.debug("Inband event with scheme_id_uri "+r.eventStream.schemeIdUri+", value "+r.eventStream.value+" and id "+r.id+" was ignored because it has been added before.")}w()}catch(e){throw e}},getInbandEvents:function(){return h},getInlineEvents:function(){return f},start:function(){try{b(),c.debug("Start Event Controller");var e=y.get().streaming.eventControllerRefreshDelay;E||isNaN(e)||(E=!0,p=setInterval(w,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(g=e.manifestUpdater),e.playbackController&&(v=e.playbackController),e.settings&&(y=e.settings)}catch(e){throw e}},reset:function(){(function(){try{null!==p&&E&&(clearInterval(p),p=null,E=!1,function(){try{R(h),R(f)}catch(e){}}())}catch(e){throw e}})(),T()}},c=(0,o.default)(l).getInstance().getLogger(e),T(),e}l.__dashjs_factory_name="EventController",n.default=i.default.getSingletonFactory(l),t.exports=n.default},{104:104,164:164,45:45,46:46,47:47}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(240)),s=r(e(154)),a=r(e(100)),u=r(e(231)),l=r(e(46)),d=r(e(54)),c=r(e(51)),f=r(e(47)),h=r(e(45));function p(e){e=e||{};var t,n=this.context,r=(0,l.default)(n).getInstance(),f=e.errHandler,p=e.mediaPlayerModel,m=e.dashMetrics,g=(0,h.default)(n).getInstance(),v=e.streamInfo,y=void 0,_=void 0;function E(){for(var e in _)_[e].reset();_={}}function b(e){var t,n,s,a,u,l,c;e.sender&&(t=e.request,c=e.response,n=t.isInitializationRequest(),s=t.mediaInfo.streamInfo,e.error&&(t.mediaType!==i.default.AUDIO&&t.mediaType!==i.default.VIDEO&&t.mediaType!==i.default.FRAGMENTED_TEXT||r.trigger(d.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),c&&s?(a=c,u=t,l=v.id,c=e.type!==d.default.FRAGMENT_LOADING_PROGRESS,(e=new o.default).streamId=l,e.mediaInfo=u.mediaInfo,e.segmentType=u.type,e.start=u.startTime,e.duration=u.duration,e.end=e.start+e.duration,e.bytes=a,e.index=u.index,e.quality=u.quality,e.representationId=u.representationId,e.endFragment=c,r.trigger(n?d.default.INIT_FRAGMENT_LOADED:d.default.MEDIA_FRAGMENT_LOADED,{chunk:e,request:t},{streamId:s.id,mediaType:t.mediaType})):y.warn("No "+t.mediaType+" bytes to push or stream is inactive."))}return t={getStreamId:function(){return v.id},getModel:function(t){var i=_[t];return i||(i=(0,s.default)(n).create({streamInfo:v,type:t,dashMetrics:m,fragmentLoader:(0,a.default)(n).create({dashMetrics:m,mediaPlayerModel:p,errHandler:f,requestModifier:(0,u.default)(n).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:r,events:d.default,errors:c.default,dashConstants:e.dashConstants,urlUtils:e.urlUtils}),debug:g,eventBus:r,events:d.default}),_[t]=i),i},reset:function(){r.off(d.default.FRAGMENT_LOADING_COMPLETED,b,this),r.off(d.default.FRAGMENT_LOADING_PROGRESS,b,this),E()}},y=g.getLogger(t),E(),r.on(d.default.FRAGMENT_LOADING_COMPLETED,b,t),r.on(d.default.FRAGMENT_LOADING_PROGRESS,b,t),t}p.__dashjs_factory_name="FragmentController",n.default=f.default.getClassFactory(p),t.exports=n.default},{100:100,112:112,154:154,231:231,240:240,45:45,46:46,47:47,51:51,54:54}],121:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(54)),a=r(e(46));function u(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0,r=void 0,i=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0;function g(){m.debug("Stopping the gap controller"),l&&(clearInterval(l),l=null),function(){t.off(s.default.WALLCLOCK_TIME_UPDATED,_,this),t.off(s.default.PLAYBACK_SEEKING,y,this),t.off(s.default.BYTES_APPENDED_END_FRAGMENT,v,n)}(),d=NaN,u=0,p=l=null}function v(){l||function(){try{l||(m.debug("Starting the gap controller"),l=setInterval((function(){E()&&b(c.getTime())}),100))}catch(e){}}()}function y(){p&&(clearTimeout(p),p=null)}function _(){var e;E()&&30<=++u&&(e=c.getTime(),r===e?b(e,!0):(r=e,d=NaN),u=0)}function E(){return i.get().streaming.jumpGaps&&0<f.getActiveStreamProcessors().length&&(!c.isSeeking()||f.hasStreamFinishedBuffering(f.getActiveStream()))&&!c.isPaused()&&!f.getIsStreamSwitchInProgress()&&!f.getHasMediaOrIntialisationError()}function b(e,n){var r=!(arguments.length<=1||void 0===n)&&n,o=i.get().streaming.smallGapLimit,a=i.get().streaming.jumpLargeGaps,u=h.getBufferRange(),l=NaN,f=!1,g=function(e,t){try{if(!e||e.length<=1&&0<t)return NaN;for(var n=NaN,r=0;isNaN(n)&&r<e.length;){var i=0<r?e.end(r-1):0;t<e.start(r)&&i-t<.1&&(n=r),r+=1}return n}catch(e){return null}}(u,e);isNaN(g)||0<(n=(_=u.start(g))-e)&&(n<=o||a)&&(l=_);var v,y,_=c.getTimeToStreamEnd();isNaN(l)&&r&&isFinite(_)&&!isNaN(_)&&_<o&&(l=parseFloat(c.getStreamEndTime().toFixed(5)),f=!0),0<l&&d!==l&&e<l&&!p&&(y=l-e,f?(m.warn("Jumping to end of stream because of gap from "+e+" to "+l+". Gap duration: "+y),t.trigger(s.default.GAP_CAUSED_SEEK_TO_PERIOD_END,{seekTime:l,duration:y})):(f=c.getIsDynamic(),v=0<g?u.end(g-1):e,f=f?1e3*y:0,p=window.setTimeout((function(){c.seek(l,!0,!0),m.warn("Jumping gap starting at "+v+" and ending at "+l+". Jumping by: "+y),t.trigger(s.default.GAP_CAUSED_INTERNAL_SEEK,{seekTime:l,duration:y}),p=null}),f)),d=l)}return n={reset:g,setConfig:function(e){e&&(e.settings&&(i=e.settings),e.playbackController&&(c=e.playbackController),e.streamController&&(f=e.streamController),e.videoModel&&(h=e.videoModel),e.timelineConverter&&e.timelineConverter,e.adapter&&e.adapter)},initialize:function(){!function(){t.on(s.default.WALLCLOCK_TIME_UPDATED,_,this),t.on(s.default.PLAYBACK_SEEKING,y,this),t.on(s.default.BYTES_APPENDED_END_FRAGMENT,v,n)}()}},m=(0,o.default)(e).getInstance().getLogger(n),g(),n}u.__dashjs_factory_name="GapController",n.default=i.default.getSingletonFactory(u),t.exports=n.default},{45:45,46:46,47:47,54:54}],122:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(54)),s=r(e(46)),a=r(e(47)),u=r(e(45));function l(){var e,t=this.context,n=(0,s.default)(t).getInstance(),r=void 0,a=void 0,l=void 0,d=void 0,c=void 0,f=[i.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,i.default.TRACK_SWITCH_MODE_NEVER_REPLACE],h=[i.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE,i.default.TRACK_SELECTION_MODE_FIRST_TRACK,i.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,i.default.TRACK_SELECTION_MODE_WIDEST_RANGE];function p(e,t){return e&&t?(t=t.id,a[t]&&a[t][e]?a[t][e].list:[]):[]}function m(e,t){return!e||!t||t&&!a[t.id]?null:a[t.id][e].current}function g(e,t){if(e&&e.streamInfo){var r=e.type,s=(u=e.streamInfo).id,u=m(r,u);if(a[s]&&a[s][r]&&!T(e,u)&&(a[s][r].current=e,!a[s][r].current||t&&r===i.default.FRAGMENTED_TEXT||n.trigger(o.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:u,newMediaInfo:e,switchMode:_(r)}),!t)){if(!(e=function(e){return(e={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration}).lang||e.viewpoint||e.role&&0<e.role.length||e.accessibility&&0<e.accessibility.length||e.audioChannelConfiguration&&0<e.audioChannelConfiguration.length?e:null}(e))||!a[s][r].storeLastSettings)return;e.roles&&(e.role=e.roles[0],delete e.roles),e.accessibility&&(e.accessibility=e.accessibility[0]),e.audioChannelConfiguration&&(e.audioChannelConfiguration=e.audioChannelConfiguration[0]),c.setSavedMediaSettings(r,e)}}}function v(e,t){e&&t&&(d[e]=t)}function y(e){return e?d[e]:null}function _(e){return l.get().streaming.trackSwitchMode[e]}function E(){return l.get().streaming.selectionModeForInitialTrack}function b(e){return e===i.default.AUDIO||e===i.default.VIDEO||e===i.default.TEXT||e===i.default.FRAGMENTED_TEXT||e===i.default.IMAGE}function T(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),s=e.accessibility.toString()===t.accessibility.toString();t=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&o&&s&&t}function S(){a={},d={audio:null,video:null,fragmentedText:null}}function w(e,t){var n=!e.lang||t.lang.match(e.lang),r=void 0===e.index||null===e.index||t.index===e.index,i=!e.viewpoint||e.viewpoint===t.viewpoint,o=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],s=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0];t=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return n&&r&&i&&o&&s&&t}function A(e){var t,n=0,r=[];return e.forEach((function(e){t=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))),n<t?(n=t,r=[e]):t===n&&r.push(e)})),r}function R(e){var t,n=1/0,r=[];return e.forEach((function(e){var i=e.bitrateList.reduce((function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n}),0);(t=i/e.bitrateList.length)<n?(n=t,r=[e]):t===n&&r.push(e)})),r}function C(e){var t,n=0,r=[];return e.forEach((function(e){t=e.representationCount,n<t?(n=t,r=[e]):t===n&&r.push(e)})),r}return e={checkInitialMediaSettingsForType:function(e,t){var n=y(e),r=(t=p(e,t),[]);n||v(e,n=c.getSavedMediaSettings(e)),t&&0!==t.length&&(n&&t.forEach((function(e){w(n,e)&&r.push(e)})),0===r.length?g(this.selectInitialTrack(e,t),!0):1<r.length?g(this.selectInitialTrack(e,r)):g(r[0]))},addTrack:function(e){if(e){var t=e.type;if(b(t)){var n=e.streamInfo.id;a[n]||(a[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=a[n][t].list,i=0,o=r.length;i<o;++i)if(T(r[i],e))return;r.push(e),(n=y(t))&&w(n,e)&&!m(t,e.streamInfo)&&g(e)}}},getTracksFor:p,getCurrentTrackFor:m,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return a[n]&&a[n][t]&&T(a[n][t].current,e)},setTrack:g,setInitialSettings:v,getInitialSettings:y,setSwitchMode:function(e,t){var n;r.warn("deprecated: Please use updateSettings({streaming: { trackSwitchMode: mode } }) instead"),-1!==f.indexOf(t)?((n={})[e]=t,l.update({streaming:{trackSwitchMode:n}})):r.warn("Track switch mode is not supported: "+t)},getSwitchMode:_,selectInitialTrack:function(e,t){if(e===i.default.FRAGMENTED_TEXT)return t[0];var n=E();e=[];switch(n){case i.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:1<(e=A(t)).length&&(e=C(e));break;case i.default.TRACK_SELECTION_MODE_FIRST_TRACK:e.push(t[0]);break;case i.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:1<(e=R(t)).length&&(e=A(e));break;case i.default.TRACK_SELECTION_MODE_WIDEST_RANGE:1<(e=C(t)).length&&(e=A(t));break;default:r.warn("Track selection mode is not supported: "+n)}return e[0]},getTracksWithHighestBitrate:A,getTracksWithHighestEfficiency:R,getTracksWithWidestRange:C,setSelectionModeForInitialTrack:function(e){r.warn("deprecated: Please use updateSettings({streaming: { selectionModeForInitialTrack: mode } }) instead"),-1!==h.indexOf(e)?l.update({streaming:{selectionModeForInitialTrack:e}}):r.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:E,isMultiTrackSupportedByType:b,isTracksEqual:T,matchSettings:w,saveTextSettingsDisabled:function(){c.setSavedMediaSettings(i.default.FRAGMENTED_TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(c=e.domStorage),e.settings&&(l=e.settings))},reset:S},r=(0,u.default)(t).getInstance().getLogger(e),S(),e}l.__dashjs_factory_name="MediaController",e=a.default.getSingletonFactory(l),a.default.updateSingletonFactory(l.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{112:112,45:45,46:46,47:47,54:54}],123:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45));function s(){var e,t=void 0,n=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){return e=window.URL.createObjectURL(e),t.setSource(e),e},detachMediaSource:function(e){e.setSource(null)},setDuration:function e(n,r){n&&"open"===n.readyState&&(null===r&&isNaN(r)||n.duration!==r&&(function(e){for(var t=e.sourceBuffers,n=0;n<t.length;n++)if(t[n].updating)return!0;return!1}(n)?setTimeout(e.bind(null,n,r),50):(t.info("Set MediaSource duration:"+r),n.duration=r)))},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var n=e.sourceBuffers,r=0;r<n.length;r++){if(n[r].updating)return;if(0===n[r].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}},t=(0,o.default)(n).getInstance().getLogger(e),e}s.__dashjs_factory_name="MediaSourceController",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{45:45,47:47}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(113)),s=r(e(46)),a=r(e(54)),u=r(e(47)),l=r(e(45));function d(){var e,t=this.context,n=(0,s.default)(t).getInstance(),r=void 0,u=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0,D=void 0;function M(e){var t,i;p&&isNaN(m)||(t=m,isNaN(t)&&(_?(t=e.liveStartTime,(e=(e=d.getCurrentDVRInfo())?e.range:null)&&(i=Y(!0),isNaN(i)||(r.info("Start time from URI parameters: "+i),t=Math.max(Math.min(t,i),e.start)))):(t=y.start,i=Y(!1),!isNaN(i)&&i<t+y.duration&&(r.info("Start time from URI parameters: "+i),t=Math.max(t,i)))),isNaN(t)||t===f.getTime()||(n.trigger(a.default.PLAYBACK_SEEKING,{seekTime:t}),F(t,!1,!0)))}function N(){return parseFloat((P()-U()).toFixed(5))}function P(){return y.start+y.duration}function x(){y&&f&&f.getElement()?f.play():b=!0}function L(){return y&&f?f.isPaused():null}function k(){y&&f&&f.pause()}function j(){return y&&f?f.isSeeking():null}function F(e,t,i){y&&f&&e!==(isNaN(w)?f.getTime():w)&&((A=!0===i)||(w=e,n.trigger(a.default.PLAYBACK_SEEK_ASKED)),r.info("Requesting seek to time: "+e+(A?" (internal)":"")),f.setCurrentTime(e,t))}function U(){return y&&f?f.getTime():null}function B(){var e,t=U();return!_||isNaN(S)||(e=S/1e3)<t&&(t-=e),t}function G(){return y&&f?f.getPlaybackRate():null}function q(){return y&&f?f.getEnded():null}function H(){if(!_||isNaN(S))return NaN;var e=B();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*h.getClientTimeOffset();return Math.max(((t-S-1e3*e)/1e3).toFixed(3),0)}function V(){p=b=!1,S=v=0,w=m=NaN,f&&(n.off(a.default.STREAM_INITIALIZED,M,this),n.off(a.default.DATA_UPDATE_COMPLETED,J,this),n.off(a.default.BUFFER_LEVEL_STATE_CHANGED,ge,this),n.off(a.default.LOADING_PROGRESS,me,this),n.off(a.default.PLAYBACK_PROGRESS,de,this),n.off(a.default.PLAYBACK_TIME_UPDATED,de,this),n.off(a.default.PLAYBACK_ENDED,ue,this),n.off(a.default.STREAM_INITIALIZING,ye,this),z(),f.removeEventListener("canplay",X),f.removeEventListener("play",Q),f.removeEventListener("waiting",$),f.removeEventListener("playing",Z),f.removeEventListener("pause",ee),f.removeEventListener("error",le),f.removeEventListener("seeking",te),f.removeEventListener("seeked",ne),f.removeEventListener("timeupdate",re),f.removeEventListener("progress",ie),f.removeEventListener("ratechange",oe),f.removeEventListener("loadedmetadata",se),f.removeEventListener("stalled",ve),f.removeEventListener("ended",ae)),_=y=f=g=null}function Y(e){var t=O.getURIFragmentData();if(!t||!t.t)return NaN;var n=u.getStreams()[0].getStreamInfo().start;t.t=t.t.split(",")[0];var r=-1!==t.t.indexOf("posix:")?"now"===t.t.substring(6)?Date.now()/1e3:parseInt(t.t.substring(6)):NaN;return e&&!isNaN(r)?r-S/1e3:parseInt(t.t)+n}function K(){null===g&&(g=setInterval((function(){n.trigger(a.default.WALLCLOCK_TIME_UPDATED,{isDynamic:_,time:new Date}),_&&L()&&function(){var e=Date.now();(!T||T+500<e)&&(T=e,re())}()}),D.get().streaming.wallclockTimeUpdateInterval))}function z(){clearInterval(g),g=null}function W(e){var t,n;!L()&&_&&0!==f.getReadyState()&&(n=t=B(),n=(e=(e=d.getCurrentDVRInfo(e))?e.range:null)?(r.debug("Checking DVR window for at "+n+" with DVR window range "+e.start+" - "+e.end),n>e.end?Math.max(e.end-v,e.start):0<n&&n+.25<e.start&&Math.abs(n-e.start)<31536e4?e.start:n):NaN,isNaN(n)||n===t||j()||(r.debug("UpdateCurrentTime: Seek to actual time: "+n+" from currentTime: "+t),F(n)))}function J(e){e.error||null!==(e=(e=c.convertDataToRepresentationInfo(e.currentRepresentation))?e.mediaInfo.streamInfo:null)&&y.id===e.id&&(y=e,W())}function X(){n.trigger(a.default.CAN_PLAY)}function Q(){r.info("Native video element event: play"),W(),K(),n.trigger(a.default.PLAYBACK_STARTED,{startTime:U()})}function $(){r.info("Native video element event: waiting"),n.trigger(a.default.PLAYBACK_WAITING,{playingTime:U()})}function Z(){r.info("Native video element event: playing"),n.trigger(a.default.PLAYBACK_PLAYING,{playingTime:U()})}function ee(){r.info("Native video element event: pause"),n.trigger(a.default.PLAYBACK_PAUSED,{ended:q()})}function te(){var e;A?A=!1:(e=U(),isNaN(w)||w===e||(e=w),w=NaN,r.info("Seeking to: "+e),K(),n.trigger(a.default.PLAYBACK_SEEKING,{seekTime:e}))}function ne(){r.info("Native video element event: seeked"),n.trigger(a.default.PLAYBACK_SEEKED)}function re(){y&&n.trigger(a.default.PLAYBACK_TIME_UPDATED,{timeToEnd:N(),time:U()})}function ie(){n.trigger(a.default.PLAYBACK_PROGRESS)}function oe(){var e=G();r.info("Native video element event: ratechange: ",e),n.trigger(a.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function se(){r.info("Native video element event: loadedmetadata"),n.trigger(a.default.PLAYBACK_METADATA_LOADED),K()}function ae(){r.info("Native video element event: ended"),k(),z();var e=u?u.getActiveStreamInfo():null;e&&n.trigger(a.default.PLAYBACK_ENDED,{isLast:e.isLast})}function ue(e){g&&e.isLast&&(r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),e=e.seekTime?e.seekTime:P(),f.setCurrentTime(e),k(),z())}function le(e){e=e.target||e.srcElement,n.trigger(a.default.PLAYBACK_ERROR,{error:e.error})}function de(){_&&ce()&&0<D.get().streaming.liveCatchup.playbackRate&&!L()&&!j()&&(function(){try{if(ce()&&0<D.get().streaming.liveCatchup.playbackRate&&0<U()){var e=he(),t=H(),n=E.getLiveDelay(),r=E.getLiveCatchupLatencyThreshold(),o=D.get().streaming.liveCatchup.minDrift;return e!==i.default.LIVE_CATCHUP_MODE_LOLP?function(e,t,n,r){try{return r<Math.abs(e-t)&&(isNaN(n)||e<=n)}catch(e){return!1}}(t,n,r,o):function(e,t,n,r,i,o){try{var s=Math.abs(e-t);return(isNaN(o)||e<=o)&&(n<s||r<i)}catch(e){return!1}}(t,n,o,fe(),e=D.get().streaming.liveCatchup.playbackBufferMin,r)}}catch(e){return!1}}()?function(){var e,t,n,o,s,a;f&&(s=f.getPlaybackRate(),e=D.get().streaming.liveCatchup.playbackRate,t=H(),a=E.getLiveDelay(),n=fe(),(s=(he()===i.default.LIVE_CATCHUP_MODE_LOLP?(D.get().streaming.liveCatchup.minDrift,o=D.get().streaming.liveCatchup.playbackBufferMin,function(e,t,n,i,o,s){var a,u=e;e=void 0;return o<i?(a=5*(o-i),e=1-u+2*u/(1+Math.pow(Math.E,-a)),r.debug("[LoL+ playback control_buffer-based] bufferLevel: "+o+", newRate: "+e)):(e=Math.abs(t-n)<=.02*n?1:(a=5*(t-n),1-u+2*u/(1+Math.pow(Math.E,-a))),r.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+e)),C&&n/2<o&&(C=!1),Math.abs(s-e)<=I&&(e=null),{newRate:e}}(e,t,a,o,n,s)):function(e,t,n,r,i){var o=e;t=5*(e=t-n),t=1-o+(t=2*o/(1+Math.pow(Math.E,-t)));return C&&(n/2<r?C=!1:0<e&&(t=1)),Math.abs(i-t)<=I&&(t=null),{newRate:t}}(e,t,a,n,s)).newRate)&&f.setPlaybackRate(s),a=t-a,0<D.get().streaming.liveCatchup.maxDrift&&!R&&a>D.get().streaming.liveCatchup.maxDrift?(r.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),R=!0,function(){var e=d.getCurrentDVRInfo();F((e?e.range:null).end-E.getLiveDelay(),!0,!1)}()):R=!1)}:pe)()}function ce(){return D.get().streaming.liveCatchup.enabled||D.get().streaming.lowLatencyEnabled}function fe(){var e=null;return u.getActiveStreamProcessors().forEach((function(t){t=t.getBufferLevel(),e=null===e?t:Math.min(e,t)})),e}function he(){var e=D.get().streaming.liveCatchup.playbackBufferMin;return D.get().streaming.liveCatchup.mode!==i.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?i.default.LIVE_CATCHUP_MODE_DEFAULT:i.default.LIVE_CATCHUP_MODE_LOLP}function pe(){f&&f.setPlaybackRate(1)}function me(e){!1!==e.stream||!D.get().streaming.lowLatencyEnabled||isNaN(e.request.duration)||(e=1.2*e.request.duration)>E.getLiveDelay()&&(r.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",e.toFixed(2)),e={streaming:{liveDelay:e}},D.update(e))}function ge(e){e.streamId===y.id&&(ce()?e.state!==o.default.BUFFER_EMPTY||j()||C||(C=!0,pe()):f.setStallState(e.mediaType,e.state===o.default.BUFFER_EMPTY))}function ve(e){n.trigger(a.default.PLAYBACK_STALLED,{e})}function ye(e){!function(e,t){if(e&&e.manifestInfo&&e.manifestInfo.serviceDescriptions){for(var n=void 0,o=0;o<e.manifestInfo.serviceDescriptions.length;o++){var s=e.manifestInfo.serviceDescriptions[o];if(s.schemeIdUri===i.default.SERVICE_DESCRIPTION_LL_SCHEME){n=s;break}}n&&t&&t.supplementalProperties&&"true"===t.supplementalProperties[i.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&0<n.latency.target&&(r.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),D.update({streaming:{lowLatencyEnabled:!0,liveDelay:n.latency.target/1e3,liveCatchup:{minDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target)/1e3:void 0}}})),n.playbackRate&&1<n.playbackRate.max&&(r.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),D.update({streaming:{lowLatencyEnabled:!0,liveCatchup:{playbackRate:n.playbackRate.max-1}}})))}}(e.streamInfo,e.mediaInfo)}return e={initialize:function(e,t,r){y=e,f.addEventListener("canplay",X),f.addEventListener("play",Q),f.addEventListener("waiting",$),f.addEventListener("playing",Z),f.addEventListener("pause",ee),f.addEventListener("error",le),f.addEventListener("seeking",te),f.addEventListener("seeked",ne),f.addEventListener("timeupdate",re),f.addEventListener("progress",ie),f.addEventListener("ratechange",oe),f.addEventListener("loadedmetadata",se),f.addEventListener("stalled",ve),f.addEventListener("ended",ae),_=y.manifestInfo.isDynamic,p=!(C=R=!1)===t,m=r,A=!1,r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=/safari/.test(r)&&!/chrome/.test(r),I=r?.25:.02,n.on(a.default.STREAM_INITIALIZED,M,this),n.on(a.default.DATA_UPDATE_COMPLETED,J,this),n.on(a.default.LOADING_PROGRESS,me,this),n.on(a.default.BUFFER_LEVEL_STATE_CHANGED,ge,this),n.on(a.default.PLAYBACK_PROGRESS,de,this),n.on(a.default.PLAYBACK_TIME_UPDATED,de,this),n.on(a.default.PLAYBACK_ENDED,ue,this,{priority:s.default.EVENT_PRIORITY_HIGH}),n.on(a.default.STREAM_INITIALIZING,ye,this),b&&(b=!1,x())},setConfig:function(e){e&&(e.streamController&&(u=e.streamController),e.dashMetrics&&(d=e.dashMetrics),e.mediaPlayerModel&&(E=e.mediaPlayerModel),e.adapter&&(c=e.adapter),e.videoModel&&(f=e.videoModel),e.timelineConverter&&(h=e.timelineConverter),e.uriFragmentModel&&(O=e.uriFragmentModel),e.settings&&(D=e.settings))},getStartTimeFromUriParameters:Y,getTimeToStreamEnd:N,getTime:U,getNormalizedTime:B,getPlaybackRate:G,getPlayedRanges:function(){return y&&f?f.getPlayedRanges():null},getEnded:q,getIsDynamic:function(){return _},getStreamController:function(){return u},computeAndSetLiveDelay:function(e,t,n){var r,i,o=!isNaN(e)&&isFinite(e)?e:NaN,s=(e=c.getSuggestedPresentationDelay(),D.get().streaming.lowLatencyEnabled?0:E.getLiveDelay()?E.getLiveDelay():null===D.get().streaming.liveDelayFragmentCount||isNaN(D.get().streaming.liveDelayFragmentCount)||isNaN(o)?!0===D.get().streaming.useSuggestedPresentationDelay&&null!==e&&!isNaN(e)&&0<e?e:isNaN(o)?isNaN(n)?4*y.manifestInfo.minBufferTime:4*n:4*o:o*D.get().streaming.liveDelayFragmentCount);return null!==(i=c.getAvailabilityStartTime())&&(S=i),r=0<t?(t=Math.max(t-10,t/2),Math.min(s,t)):s,v=r},getLiveDelay:function(){return v},setLiveDelay:function(e){!(arguments.length<=1||void 0===arguments[1])&&arguments[1]&&e<v||(v=e)},getCurrentLiveLatency:H,play:x,isPaused:L,pause:k,isSeeking:j,getStreamEndTime:P,seek:F,updateCurrentTime:W,reset:V},r=(0,l.default)(t).getInstance().getLogger(e),V(),e}d.__dashjs_factory_name="PlaybackController",n.default=u.default.getSingletonFactory(d),t.exports=n.default},{112:112,113:113,45:45,46:46,47:47,54:54}],125:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(113)),s=r(e(209)),a=r(e(154)),u=r(e(46)),l=r(e(54)),d=r(e(47)),c=r(e(45));function f(e){e=e||{};var t=this.context,n=(0,u.default)(t).getInstance(),r=e.adapter,d=e.dashMetrics,f=e.mediaPlayerModel,h=e.fragmentModel,p=e.abrController,m=e.playbackController,g=e.textController,v=e.type,y=e.mimeType,_=e.mediaController,E=e.bufferController,b=e.settings,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0,D=void 0,M=void 0,N=void 0,P=void 0,x=void 0,L=void 0,k=void 0,j=void 0,F=void 0,U=void 0,B=void 0,G=void 0;function q(){return!1===R}function H(){S&&(q()||A&&!E.getIsBufferingCompleted()&&(w.debug("Schedule Controller starts"),R=!1,d.createPlaylistTraceMetrics(A.id,1e3*m.getTime(),m.getPlaybackRate()),K(0)))}function V(){R||(w.debug("Schedule Controller stops"),w.debug(v+" Schedule Controller stops"),R=!0,clearTimeout(O))}function Y(){var e,t,s;S&&(R||C||m.isPaused()&&!b.get().streaming.scheduleWhilePaused||(v===i.default.FRAGMENTED_TEXT||v===i.default.TEXT)&&!g.isTextEnabled()||E.getIsBufferingCompleted()?V():(function(){if(isNaN(D)&&L){var e=m.getTime(),t=1.5;isNaN(L.fragmentDuration)&&(t=(l=d.getCurrentSchedulingInfo(A.mediaInfo.type))?1.5*l.duration:1.5);var n,s,u,l,c=h.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];c&&-1===k.indexOf(c)&&!r.getIsTextTrack(y)&&(n=b.get().streaming.fastSwitchEnabled,s=E.getBufferLevel(),u=p.getAbandonmentStateFor(v),l=!_.isCurrentTrack(c.mediaInfo)&&_.getSwitchMode(c.mediaInfo.type)===i.default.TRACK_SWITCH_MODE_NEVER_REPLACE,e=c.quality<L.quality,n&&(l||e)&&t<=s&&u!==o.default.ABANDON_LOAD?(W(c),G=!0,w.debug("Reloading outdated fragment at index: ",c.index)):c.quality>L.quality&&!F&&le(m.getTime()+s))}}(),e=0<k.length,t=L?L.quality:NaN,F||isNaN(t)||j||e||function(e,t){x[t]=x[t]||{};var n=p.getTopQualityIndexFor(e,t);return x[t][e]!=n&&(w.info("Top quality "+e+" index has changed from "+x[t][e]+" to "+n),x[t][e]=n,1)}(v,S.id)||N.execute(v,A,M)?(z(!0),!e&&B&&p.checkPlaybackQuality(v),B=A.quality===t&&!j||F?(s=k.shift())&&s.isInitializationRequest()?(n.trigger(l.default.INIT_FRAGMENT_NEEDED,{representationId:s.representationId,sender:T},{streamId:S.id,mediaType:v}),!1):(n.trigger(l.default.MEDIA_FRAGMENT_NEEDED,{seekTarget:D,replacement:s},{streamId:S.id,mediaType:v}),!0):(j?(w.debug("Switch track for "+v+", representation id = "+A.id),(F=_.getSwitchMode(v)===i.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE)&&E.replaceBuffer&&E.replaceBuffer(),j=!1):w.debug("Quality has changed, get init request for representationid = "+A.id),n.trigger(l.default.INIT_FRAGMENT_NEEDED,{representationId:A.id,sender:T},{streamId:S.id,mediaType:v}),!1)):K(500)))}function K(e){clearTimeout(O),O=setTimeout(Y,e)}function z(e){C!==e?C=e:w.debug("isFragmentProcessingInProgress is already equal to",e)}function W(e){k.push(e)}function J(e){var t;m&&h&&(t=h.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:m.getTime(),threshold:0})[0])&&m.getTime()>=t.startTime&&((!P.mediaInfo||t.mediaInfo.type===P.mediaInfo.type&&t.mediaInfo.id!==P.mediaInfo.id)&&e&&n.trigger(l.default.TRACK_CHANGE_RENDERED,{mediaType:v,oldMediaInfo:P.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===P.quality&&t.adaptationIndex===P.adaptationIndex||!e||n.trigger(l.default.QUALITY_CHANGE_RENDERED,{mediaType:v,oldQuality:P.quality,newQuality:t.quality}),P={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}function X(){V(),z(!1),w.info("Stream "+S.id+" is complete")}function Q(e){e.request.mediaInfo.streamInfo.id===S.id&&e.request.mediaType===v&&(w.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),r.getIsTextTrack(y)&&z(!1),e.error&&e.request.serviceLocation&&!R&&(W(e.request),z(!1),K(0)),F&&(U=e.request))}function $(){J(!0)}function Z(e){var t,n;F&&!isNaN(e.startTime)&&(F=!1,h.addExecutedRequest(U)),z(!1),isNaN(e.index)&&(L=E.getRepresentationInfo(e.quality),w.info("["+v+"] lastInitializedRepresentationInfo changed to "+e.quality)),G&&!isNaN(e.startTime)?(t=m.getTime(),K((n=e.startTime+A.fragmentDuration)<=t+(e=1.5*A.fragmentDuration)?0:1e3*(n-(t+e))),G=!1):K(0)}function ee(e){w.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),m.isSeeking()||j||(w.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),W(e.request)),z(!1),K(0)}function te(){}function ne(){V()}function re(e){F&&b.get().streaming.flushBufferAtTrackSwitch&&m.seek(m.getTime()+.001,!1,!0),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&H()}function ie(){V(),z(!1)}function oe(){h.abortRequests(),V()}function se(){!R&&b.get().streaming.scheduleWhilePaused||H()}function ae(e){S&&(le(e.seekTime),de(0),R&&H(),e=A&&A.DVRWindow&&m?A.DVRWindow.end-m.getTime():NaN,d.updateManifestUpdateInfo({latency:e}),C?h.abortRequests():K(0))}function ue(e){d.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function le(e){D=e}function de(e){I=e}function ce(){P={mediaInfo:L=void(I=0),quality:D=NaN,adaptationIndex:NaN},x={},k=[],G=F=j=!(R=!(C=!(B=!(U=null))))}return T={initialize:function(e){M=e,N=(0,s.default)(t).create({abrController:p,dashMetrics:d,mediaPlayerModel:f,textController:g,settings:b}),n.on(l.default.DATA_UPDATE_STARTED,te,this),n.on(l.default.FRAGMENT_LOADING_COMPLETED,Q,this),n.on(l.default.STREAM_COMPLETED,X,this),n.on(l.default.BUFFER_CLEARED,re,this),n.on(l.default.BYTES_APPENDED_END_FRAGMENT,Z,this),n.on(l.default.QUOTA_EXCEEDED,ie,this),n.on(l.default.PLAYBACK_SEEKING,ae,this),n.on(l.default.PLAYBACK_STARTED,se,this),n.on(l.default.PLAYBACK_RATE_CHANGED,ue,this),n.on(l.default.PLAYBACK_TIME_UPDATED,$,this),n.on(l.default.URL_RESOLUTION_FAILED,oe,this),n.on(l.default.FRAGMENT_LOADING_ABANDONED,ee,this),n.on(l.default.BUFFERING_COMPLETED,ne,this)},getType:function(){return v},getStreamId:function(){return S.id},setCurrentRepresentation:function(e){A=e},setSeekTarget:le,setTimeToLoadDelay:de,getTimeToLoadDelay:function(){return I},switchTrackAsked:function(){j=!0},isStarted:q,start:H,stop:V,reset:function(){n.off(l.default.DATA_UPDATE_STARTED,te,this),n.off(l.default.FRAGMENT_LOADING_COMPLETED,Q,this),n.off(l.default.STREAM_COMPLETED,X,this),n.off(l.default.BUFFER_CLEARED,re,this),n.off(l.default.BYTES_APPENDED_END_FRAGMENT,Z,this),n.off(l.default.QUOTA_EXCEEDED,ie,this),n.off(l.default.PLAYBACK_SEEKING,ae,this),n.off(l.default.PLAYBACK_STARTED,se,this),n.off(l.default.PLAYBACK_RATE_CHANGED,ue,this),n.off(l.default.PLAYBACK_TIME_UPDATED,$,this),n.off(l.default.URL_RESOLUTION_FAILED,oe,this),n.off(l.default.FRAGMENT_LOADING_ABANDONED,ee,this),n.off(l.default.BUFFERING_COMPLETED,ne,this),V(),J(!1),ce(),S=null},getBufferTarget:function(){return N.getBufferTarget(v,A,M)},processInitRequest:function(e){e&&(z(!0),h.executeRequest(e))},processMediaRequest:function(e){e?(w.debug("Next fragment request url is "+e.url),h.executeRequest(e)):(m.getIsDynamic()&&w.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),z(!1),K(b.get().streaming.lowLatencyEnabled?100:500))},getPlaybackController:function(){return m}},w=(0,c.default)(t).getInstance().getLogger(T),ce(),S=e.streamInfo,T}f.__dashjs_factory_name="ScheduleController",n.default=d.default.getClassFactory(f),t.exports=n.default},{112:112,113:113,154:154,209:209,45:45,46:46,47:47,54:54}],126:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(113)),s=r(e(108)),a=r(e(102)),u=r(e(46)),l=r(e(54)),d=r(e(47)),c=e(257),f=r(e(45)),h=r(e(227)),p=r(e(234)),m=r(e(104)),g=r(e(127)),v=r(e(123)),y=r(e(239)),_=r(e(51)),E=r(e(119)),b=r(e(111));function T(){var e=this.context,t=(0,u.default)(e).getInstance(),n=void 0,r=void 0,d=void 0,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0,D=void 0,M=void 0,N=void 0,P=void 0,x=void 0,L=void 0,k=void 0,j=void 0,F=void 0,U=void 0,B=void 0,G=void 0,q=void 0,H=void 0,V=void 0,Y=void 0,K=void 0,z=void 0,W=void 0,J=void 0,X=void 0,Q=void 0,$=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0;function oe(){var e;!Ae()||(e=W.getPlaybackQuality())&&C.addDroppedFrames(e)}function se(e){var t=pe(e.seekTime);t===B&&ne&&0<ne.length&&ne.forEach((function(e){e.deactivate(!0)})),t&&t!==B?(Ce(c.PlayListTrace.END_OF_PERIOD_STOP_REASON),ye(t,B,e.seekTime)):Ce(c.PlayListTrace.USER_REQUEST_STOP_REASON),Ie(c.PlayList.SEEK_START_REASON)}function ae(e){var t=ve();Ce(c.PlayListTrace.END_OF_PERIOD_STOP_REASON),ye(t,B,e.seekTime),Ie(c.PlayList.SEEK_START_REASON)}function ue(){r.debug("[onPlaybackStarted]"),$?($=!1,Ie(c.PlayList.INITIAL_PLAYOUT_START_REASON)):Q&&(Q=!1,Ie(c.PlayList.RESUME_FROM_PAUSE_START_REASON))}function le(e){r.debug("[onPlaybackPaused]"),e.ended||(Q=!0,Ce(c.PlayListTrace.USER_REQUEST_STOP_REASON))}function de(){Z&&(clearInterval(Z),Z=null)}function ce(e){try{if(!e)return!1;var t=e.getProcessors().filter((function(e){return e.getType()===i.default.AUDIO||e.getType()===i.default.VIDEO}));return!(!t||0===t.length)&&(t=t.filter((function(e){return!e.isBufferingCompleted()})),t&&0===t.length)}catch(e){return!1}}function fe(){var e=De().isLast;z&&e&&(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),I.signalEndOfStream(z))}function he(e,t){try{return ie.get().streaming.reuseExistingSourceBuffers&&t.isProtectionCompatible(e,t)&&(re||t.isMediaCodecCompatible(e,t))&&!function(e){try{var t=e.getStreamInfo();return!!(t=R.getAdaptationForType(t.index,i.default.FRAGMENTED_TEXT,t))&&(-1!==t.codecs.indexOf("stpp")||-1!==t.codecs.indexOf("wvtt"))}catch(e){return!1}}(e)}catch(e){return!1}}function pe(e){if(isNaN(e))return null;var t=0,n=null,r=U.length;0<r&&(t+=U[0].getStartTime());for(var i=0;i<r;i++)if(n=U[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function me(){return B?B.getProcessors():[]}function ge(e){var t;B.getIsEndedEventSignaled()||(B.setIsEndedEventSignaled(!0),(t=ve())?(r.debug("StreamController onEnded, found next stream with id "+t.getStreamInfo().id),ye(t,B,NaN)):(r.debug("StreamController no next stream found"),B.setIsEndedEventSignaled(!1)),Ce(t?c.PlayListTrace.END_OF_PERIOD_STOP_REASON:c.PlayListTrace.END_OF_CONTENT_STOP_REASON)),e&&e.isLast&&de()}function ve(e){if(e=(t=arguments.length<=0||void 0===e?null:e)||B||null){for(var t=e.getStreamInfo().start,n=(e=e.getStreamInfo().duration,parseFloat((t+e).toFixed(5))),r=0,i=-1,o=NaN;r<U.length;){var s=U[r].getStreamInfo().start-n;0<=s&&(isNaN(o)||s<o)&&(o=s,i=r),r+=1}return 0<=i?U[i]:null}return null}function ye(e,n,i){var o;V||!e||n===e&&e.isActive()||(V=!0,t.trigger(l.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:e.getStreamInfo()}),o=!1,n&&(o=he(e,n),n.deactivate(o)),i=isNaN(i)?!o&&n?e.getStreamInfo().start:NaN:i,r.info("Switch to stream "+e.getId()+". Seektime is "+i+", current playback time is "+J.getTime()),r.info("Seamless period switch is set to "+o),B=e,ne=ne.filter((function(e){return e.getId()!==B.getId()})),J.initialize(De(),!!n,i),W.getElement()?_e(i,null===n,!1,o):Ee(i,o))}function _e(e,n,i,o){var s=void 0;function a(){z&&"open"===z.readyState&&(r.debug("MediaSource is open!"),window.URL.revokeObjectURL(s),z.removeEventListener("sourceopen",a),z.removeEventListener("webkitsourceopen",a),be(),n||t.trigger(l.default.SOURCE_INITIALIZED),i?B.setMediaSource(z):Ee(e,o))}z?o?(Ee(e,o),n||t.trigger(l.default.SOURCE_INITIALIZED)):(I.detachMediaSource(W),z.addEventListener("sourceopen",a,!1),z.addEventListener("webkitsourceopen",a,!1),s=I.attachMediaSource(z,W),r.debug("MediaSource attached to element.  Waiting on open...")):((z=I.createMediaSource()).addEventListener("sourceopen",a,!1),z.addEventListener("webkitsourceopen",a,!1),s=I.attachMediaSource(z,W),r.debug("MediaSource attached to element.  Waiting on open..."))}function Ee(e,n){!(te=B.activate(z,n?te:void 0))||0<(n=Object.keys(te)).length&&te[n[0]].changeType&&(re=!0),$||isNaN(e)||(e===J.getTime()?t.trigger(l.default.SEEK_TARGET,{time:e},{streamId:B.getId()}):J.seek(e)),!H&&$||J.play(),V=!1,t.trigger(l.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:De()})}function be(e){e=e||De().manifestInfo.duration,I.setDuration(z,e)}function Te(){try{!function(){var n=R.getStreamsInfo();if(0===n.length)throw new Error("There are no streams");C.updateManifestUpdateInfo({currentTime:J.getTime(),buffered:W.getBufferRange(),presentationStartTime:n[0].start,clientTimeOffset:F.getClientTimeOffset()}),0<U.length&&(U=U.filter((function(e){var t=0<n.filter((function(t){return t.id===e.getId()})).length||e.getId()===B.getId();return t||r.debug("Removing stream "+e.getId()),t})));for(var o,a,u=0,c=n.length;u<c;u++){var f=n[u],h=function(e){for(var t=0,n=U.length;t<n;t++)if(U[t].getId()===e.id)return U[t];return null}(f);h?h.updateData(f):(h=(0,s.default)(e).create({manifestModel:A,mediaPlayerModel:X,dashMetrics:C,manifestUpdater:S,adapter:R,timelineConverter:F,capabilities:d,capabilitiesFilter:T,errHandler:j,baseURLController:D,abrController:M,playbackController:J,eventController:P,mediaController:N,textController:x,protectionController:G,videoModel:W,streamInfo:f,settings:ie}),U.push(h),h.initialize()),C.addManifestUpdateStreamInfo(f)}B||(R.getIsDynamic()&&U.length&&(a=n[0].manifestInfo,o=function(e,t){try{var n=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:(e&&1===e.length&&function(){var t=e[0],r=[i.default.VIDEO,i.default.AUDIO,i.default.FRAGMENTED_TEXT].reduce((function(e,n){return(n=R.getMediaInfoForType(t,n))&&e.push(n),e}),[]).reduce((function(e,t){return(t=R.getVoRepresentations(t))&&0<t.length&&t.forEach((function(t){t&&e.push(t)})),e}),[]).reduce((function(e,t){return(t=R.convertDataToRepresentationInfo(t))&&t.fragmentDuration&&!isNaN(t.fragmentDuration)&&e.push(t.fragmentDuration),e}),[]);n=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))}(),isFinite(n)?n:NaN)}catch(t){return NaN}}(n,a),J.computeAndSetLiveDelay(o,a.DVRWindowSize,a.minBufferTime)),a=null,!(a=pe(J.getStartTimeFromUriParameters(R.getIsDynamic())))&&R.getIsDynamic()&&U.length&&(r.debug("Dynamic stream: Trying to find the correct starting period"),a=function(){try{return pe(F.calcPresentationTimeFromWallTime(new Date,R.getRegularPeriods()[0])-J.getLiveDelay())}catch(e){return null}}()),ye(null!==a?a:U[0],null,NaN),Z=Z||setInterval((function(){!V&&J.getTimeToStreamEnd()<=0&&t.trigger(l.default.PLAYBACK_ENDED,{isLast:De().isLast})}),200),ee=ee||setInterval((function(){!function(){if(B&&ce(B))for(var e=function(e){try{var t=e||B||null;if(t){var n=function(){var e=t.getStreamInfo().start;return{v:U.filter((function(t){return t.getStreamInfo().start>e}))}}();if("object"==typeof n)return n.v}}catch(e){return[]}}(B),t=0;t<e.length;)n();function n(){var n,o,s=e[t],a=0===t?B:e[t-1];!s.getPreloadingScheduled()&&ce(a)&&z&&(n=[i.default.VIDEO,i.default.AUDIO],o=!0,n.forEach((function(e){e=R.getMediaInfoForType(s.getStreamInfo(),e),R.getVoRepresentations(e).forEach((function(e){var t=R.getIsDynamic();(t=F.calcSegmentAvailabilityRange(e,t)).end<t.start&&(o=!1)}))})),o&&function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];z&&!e.getPreloaded()&&he(e,t)&&(e.setPreloadingScheduled(!0),r.info("[onStreamCanLoadNext] Preloading next stream with id "+e.getId()),e.preload(z,te),ne.push(e),e.getProcessors().forEach((function(t){t.setBufferingTime(e.getStartTime())})))}(s,a)),t+=1}}()}),500)),t.trigger(l.default.STREAMS_COMPOSED)}()}catch(e){j.error(new y.default(_.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",A.getValue())),K=!0,xe()}}function Se(){var e=A.getValue();G&&(t.trigger(l.default.PROTECTION_CREATED,{controller:G,manifest:e}),G.setMediaElement(W.getElement()),q&&G.setProtectionData(q)),Te()}function we(e){e.error?(K=!0,xe()):function(){var n=e.manifest;R.updatePeriods(n);var i=R.getUTCTimingSources();!R.getIsDynamic()||i&&0!==i.length||t.trigger(m.default.CONFORMANCE_VIOLATION,{level:b.default.LEVELS.WARNING,event:b.default.EVENTS.NO_UTC_TIMING_ELEMENT});i=R.getIsDynamic()?i.concat(X.getUTCTimingSources()):i;var o=k.isHTTPS(e.manifest.url);i.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===X.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),r.debug("Matching default timing source protocol to manifest protocol: ",e.value))})),D.initialize(n),O.attemptSync(i)}()}function Ae(){return!!B&&B.getHasVideoTrack()}function Re(){return!!B&&B.getHasAudioTrack()}function Ce(e,t){t=t||new Date,me().forEach((function(n){n.finalisePlayList(t,e)})),C.addPlayList()}function Ie(e){C.createPlaylistMetrics(1e3*J.getTime(),e)}function Oe(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}Y=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+t),e.error&&r.fatal(e.error),j.error(new y.default(e.error.code,t)),xe()}}function De(){return B?B.getStreamInfo():null}function Me(){if(!(w&&w.hasOwnProperty("load")&&F&&F.hasOwnProperty("initialize")&&F.hasOwnProperty("reset")&&F.hasOwnProperty("getClientTimeOffset")&&A&&j&&C&&J))throw new Error(i.default.MISSING_CONFIG_ERROR)}function Ne(e){isNaN(e.newDuration)||be(e.newDuration)}function Pe(){ee=Z=B=G=null,H=!(Q=!($=!(K=Y=V=!(U=[])))),ne=[]}function xe(){Me(),O.reset(),Ce(Y||K?c.PlayListTrace.FAILURE_STOP_REASON:c.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,r=U?U.length:0;e<r;e++)U[e].reset(Y);t.off(l.default.PLAYBACK_TIME_UPDATED,oe,n),t.off(l.default.PLAYBACK_SEEKING,se,n),t.off(l.default.GAP_CAUSED_SEEK_TO_PERIOD_END,ae,n),t.off(l.default.PLAYBACK_ERROR,Oe,n),t.off(l.default.PLAYBACK_STARTED,ue,n),t.off(l.default.PLAYBACK_PAUSED,le,n),t.off(l.default.PLAYBACK_ENDED,ge,n),t.off(l.default.MANIFEST_UPDATED,we,n),t.off(l.default.STREAM_BUFFERING_COMPLETED,fe,n),t.off(l.default.MANIFEST_VALIDITY_CHANGED,Ne,n),t.off(l.default.TIME_SYNCHRONIZATION_COMPLETED,Se,n),t.off(m.default.METRIC_ADDED,Le,n),D.reset(),S.reset(),P.reset(),C.clearAllCurrentMetrics(),A.setValue(null),w.reset(),F.reset(),L.reset(),z&&(I.detachMediaSource(W),z=null),W=null,G&&(G.setMediaElement(null),q=G=null,A.getValue()&&t.trigger(l.default.PROTECTION_DESTROYED,{data:A.getValue().url})),de(),clearInterval(ee),ee=null,t.trigger(l.default.STREAM_TEARDOWN_COMPLETE),Pe()}function Le(e){var t;e.metric===o.default.DVR_INFO&&(t=Re()?i.default.AUDIO:i.default.VIDEO,e.mediaType===t&&I.setSeekable(z,e.value.range.start,e.value.range.end))}return n={initialize:function(r,i){Me(),H=r,q=i,F.initialize(),(S=(0,a.default)(e).create()).setConfig({manifestModel:A,adapter:R,manifestLoader:w,errHandler:j,settings:ie}),S.initialize(),(P=(0,E.default)(e).getInstance()).setConfig({manifestUpdater:S,playbackController:J,settings:ie}),P.start(),O.setConfig({dashMetrics:C,baseURLController:D,settings:ie}),O.initialize(),t.on(l.default.PLAYBACK_TIME_UPDATED,oe,n),t.on(l.default.PLAYBACK_SEEKING,se,n),t.on(l.default.GAP_CAUSED_SEEK_TO_PERIOD_END,ae,n),t.on(l.default.PLAYBACK_ERROR,Oe,n),t.on(l.default.PLAYBACK_STARTED,ue,n),t.on(l.default.PLAYBACK_PAUSED,le,n),t.on(l.default.PLAYBACK_ENDED,ge,n,{priority:u.default.EVENT_PRIORITY_HIGH}),t.on(l.default.MANIFEST_UPDATED,we,n),t.on(l.default.STREAM_BUFFERING_COMPLETED,fe,n),t.on(l.default.MANIFEST_VALIDITY_CHANGED,Ne,n),t.on(l.default.TIME_SYNCHRONIZATION_COMPLETED,Se,n),t.on(m.default.METRIC_ADDED,Le,n)},getActiveStreamInfo:De,hasVideoTrack:Ae,hasAudioTrack:Re,switchToVideoElement:function(e){B&&(J.initialize(De()),_e(e,!1,!0,!1))},getStreamById:function(e){return U.filter((function(t){return t.getId()===e}))[0]},getStreamForTime:pe,getTimeRelativeToStreamId:function(e,t){for(var n,r,i=null,o=0,s=0;s<U.length;s++){if(n=(i=U[s]).getStartTime(),r=i.getDuration(),Number.isFinite(n)&&(o=n),i.getId()===t)return e-o;Number.isFinite(r)&&(o+=r)}return null},load:function(e){Me(),w.load(e)},loadWithManifest:function(e){!function(){if(!S||!S.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),S.setManifest(e)},getActiveStreamProcessors:me,setConfig:function(e){e&&(e.capabilities&&(d=e.capabilities),e.capabilitiesFilter&&(T=e.capabilitiesFilter),e.manifestLoader&&(w=e.manifestLoader),e.manifestModel&&(A=e.manifestModel),e.mediaPlayerModel&&(X=e.mediaPlayerModel),e.protectionController&&(G=e.protectionController),e.adapter&&(R=e.adapter),e.dashMetrics&&(C=e.dashMetrics),e.errHandler&&(j=e.errHandler),e.timelineConverter&&(F=e.timelineConverter),e.videoModel&&(W=e.videoModel),e.playbackController&&(J=e.playbackController),e.abrController&&(M=e.abrController),e.mediaController&&(N=e.mediaController),e.textController&&(x=e.textController),e.settings&&(ie=e.settings),e.baseURLController&&(D=e.baseURLController))},setProtectionData:function(e){q=e},getIsStreamSwitchInProgress:function(){return V},getHasMediaOrIntialisationError:function(){return Y||K},hasStreamFinishedBuffering:ce,getStreams:function(){return U},getActiveStream:function(){return B},reset:xe},r=(0,f.default)(e).getInstance().getLogger(n),O=(0,g.default)(e).getInstance(),I=(0,v.default)(e).getInstance(),L=(0,h.default)(e).getInstance(),k=(0,p.default)(e).getInstance(),Pe(),n}T.__dashjs_factory_name="StreamController",n.default=d.default.getSingletonFactory(T),t.exports=n.default},{102:102,104:104,108:108,111:111,112:112,113:113,119:119,123:123,127:127,227:227,234:234,239:239,257:257,45:45,46:46,47:47,51:51,54:54}],127:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(239)),o=e(255),s=r(e(46)),a=r(e(54)),u=r(e(51)),l=r(e(47)),d=r(e(45)),c=r(e(234));function f(){var e=this.context,t=(0,s.default)(e).getInstance(),n=(0,c.default)(e).getInstance(),r=void 0,l=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0;function A(){v=[],T=E=_=null,b=NaN,h=f=!(y=[]),S=p.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function R(){f||h||!T||!T.value||!T.schemeIdUri||isNaN(b)||isNaN(p.get().streaming.utcSynchronization.backgroundAttempts)||E&&(Date.now()-E)/1e3<30||(v=[],h=!0,function e(t){try{var n=function(){if(t<=0)return j(),{v:void 0};var n=Date.now();m[T.schemeIdUri](T.value,(function(r){var i=Date.now();r=C(n,i,r);v.push(r),e(t-1)}),(function(){j()}))}();if("object"==typeof n)return n.v}catch(n){j()}}(isNaN(p.get().streaming.utcSynchronization.backgroundAttempts)?2:p.get().streaming.utcSynchronization.backgroundAttempts))}function C(e,t,n){return n-(t-(t-e)/2)}function I(e){var t=arguments.length<=0||void 0===e?NaN:e;(e=isNaN(t))&&p.get().streaming.useManifestDateHeaderTimeSource?function(){var e=null!==(e=g.getLatestMPDRequestHeaderValueByID("Date"))?new Date(e).getTime():Number.NaN;isNaN(e)?k(!0):k(!1,e-Date.now())}():k(e,t)}function O(e){var t,n,r=Date.parse(e);return isNaN(r)&&(n=void 0,t=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(t=e),n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&(parseInt(t[6],10)||0),t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]&&(e=60*parseInt(t[9],10)+parseInt(t[10],10),n+=("+"===t[8]?-1:1)*e*60*1e3),r=new Date(n).getTime()),r}function D(e){return Date.parse(e)}function M(e){return Date.parse(e)}function N(e,t,n){n()}function P(e,t,n){e=O(e),isNaN(e)?n():t(e)}function x(e,t,r,i,s){var a,u,l,d=!1,c=new XMLHttpRequest,f=s?o.HTTPRequest.HEAD:o.HTTPRequest.GET,h=t.match(/\S+/g);t=h.shift(),a=function(){d||(d=!0,h.length?x(e,h.join(" "),r,i,s):i())},u=function(){var t,n;200===c.status&&(t=s?c.getResponseHeader("Date"):c.response,n=e(t),isNaN(n)||(r(n),d=!0))},!n.isRelative(t)||(l=w.resolve())&&(t=n.resolve(t,l.url)),c.open(f,t),c.timeout=5e3,c.onload=u,c.onloadend=a,c.send()}function L(e,t,n){x(M,e,t,n,!0)}function k(e,n){var r;isNaN(b)||isNaN(n)||e||function(e){try{var t=F(e),n=isNaN(S)?30:S,r=isNaN(p.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:p.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,i=isNaN(p.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:p.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,o=isNaN(p.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:p.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts,s=void 0;t?(s=Math.min(n*r,i),l.debug("Increasing timeBetweenSyncAttempts to "+s)):(s=Math.max(n/r,o),l.debug("Decreasing timeBetweenSyncAttempts to "+s)),S=s}catch(e){}}(n),e||isNaN(n)||(_=Date.now(),f=!1,r=isNaN(b),b=n,r&&R(),l.debug("Completed UTC sync. Setting client - server offset to "+n)),e&&(T=null),t.trigger(a.default.UPDATE_TIME_SYNC_OFFSET,{offset:n,error:e?new i.default(u.default.TIME_SYNC_FAILED_ERROR_CODE,u.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null}),t.trigger(a.default.TIME_SYNCHRONIZATION_COMPLETED)}function j(){var e;v&&0!==v.length&&(F(e=v.reduce((function(e,t){return e+t}),0)/v.length)?l.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(l.debug("Completed background UTC sync. Setting client - server offset to "+e),b=e,t.trigger(a.default.UPDATE_TIME_SYNC_OFFSET,{offset:b})),h=!1,E=Date.now())}function F(e){try{if(isNaN(b))return!0;var t=p.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(p.get().streaming.utcSynchronization.maximumAllowedDrift)?p.get().streaming.utcSynchronization.maximumAllowedDrift:100;return b-t<=e&&e<=b+t}catch(e){return!0}}return r={initialize:function(){A(),m={"urn:mpeg:dash:utc:http-head:2014":L,"urn:mpeg:dash:utc:http-xsdate:2014":x.bind(null,O),"urn:mpeg:dash:utc:http-iso:2014":x.bind(null,D),"urn:mpeg:dash:utc:direct:2014":P,"urn:mpeg:dash:utc:http-head:2012":L,"urn:mpeg:dash:utc:http-xsdate:2012":x.bind(null,O),"urn:mpeg:dash:utc:http-iso:2012":x.bind(null,D),"urn:mpeg:dash:utc:direct:2012":P,"urn:mpeg:dash:utc:http-ntp:2014":N,"urn:mpeg:dash:utc:ntp:2014":N,"urn:mpeg:dash:utc:sntp:2014":N}},attemptSync:function(e){y=e,f||(function(){try{var e=isNaN(S)?30:S;return!(_&&e&&!isNaN(e))||(Date.now()-_)/1e3>=e}catch(e){return!0}}()?(f=!0,function e(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0],n=t||0;if(!y||0===y.length||n>=y.length)I();else{var r=y[n];r?m.hasOwnProperty(r.schemeIdUri)?function(){var t=(new Date).getTime();m[r.schemeIdUri](r.value,(function(e){var n=(new Date).getTime();e=C(t,n,e);T=r,I(e)}),(function(){e(n+1)}))}():e(n+1):I()}}()):t.trigger(a.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(g=e.dashMetrics),e.baseURLController&&(w=e.baseURLController),e.settings&&(p=e.settings))},reset:function(){A(),t.off(a.default.ATTEMPT_BACKGROUND_SYNC,R,r)}},l=(0,d.default)(e).getInstance().getLogger(r),t.on(a.default.ATTEMPT_BACKGROUND_SYNC,R,r),r}f.__dashjs_factory_name="TimeSyncController",(e=l.default.getSingletonFactory(f)).HTTP_TIMEOUT_MS=5e3,l.default.updateSingletonFactory(f.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{234:234,239:239,255:255,45:45,46:46,47:47,51:51,54:54}],128:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(110)),o=r(e(46)),s=r(e(54)),a=r(e(47)),u=r(e(3)),l=r(e(234)),d=r(e(61)),c="onLoad";function f(e){e=e||{};var t=this.context,n=(0,o.default)(t).getInstance(),r=(0,l.default)(t).getInstance(),a=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0;function v(e,t,n){var i,o={},s=void 0;o.elements=e,o.type=t,o.resolveType=n,0===o.elements.length&&_(o);for(var a=0;a<o.elements.length;a++)i=o.elements[a],s=r.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,g.load(s,i,o)}function y(e){var t,n=void 0,r=(n=e.element,e.resolveObject);n.resolvedContent&&((e=0)===n.resolvedContent.indexOf("<?xml")&&(e=n.resolvedContent.indexOf("?>")+2),t=n.resolvedContent.substr(0,e)+"<response>"+n.resolvedContent.substr(e)+"</response>",n.resolvedContent=m.xml_str2json(t)),function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0}(r)&&_(r)}function _(e){var t=[],r=void 0,i=void 0;if(function(e){var t=[],n=void 0,r=void 0,i=void 0,o=void 0,s=void 0,a=void 0;for(o=e.elements.length-1;0<=o;o--){if(r=(n=e.elements[o]).type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(s=0;s<n.resolvedContent[r].length;s++)i=n.resolvedContent[r][s],t.push(i)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),a=0;a<t.length;a++)n.parentElement[r].splice(n.index+a,0,t[a]);t=[]}0<e.elements.length&&h.run(p)}(e),"onActuate"===e.resolveType&&n.trigger(s.default.XLINK_READY,{manifest:p}),e.resolveType===c)switch(e.type){case d.default.PERIOD:for(r=0;r<p[d.default.PERIOD+"_asArray"].length;r++)(i=p[d.default.PERIOD+"_asArray"][r]).hasOwnProperty(d.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(E(i[d.default.ADAPTATION_SET+"_asArray"],i,d.default.ADAPTATION_SET,c))),i.hasOwnProperty(d.default.EVENT_STREAM+"_asArray")&&(t=t.concat(E(i[d.default.EVENT_STREAM+"_asArray"],i,d.default.EVENT_STREAM,c)));v(t,d.default.ADAPTATION_SET,c);break;case d.default.ADAPTATION_SET:n.trigger(s.default.XLINK_READY,{manifest:p})}}function E(e,t,n,r){var i,o=[],s=void 0,a=void 0;for(a=e.length-1;0<=a;a--)(s=e[a]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===s["xlink:href"]&&e.splice(a,1);for(a=0;a<e.length;a++)(s=e[a]).hasOwnProperty("xlink:href")&&s.hasOwnProperty("xlink:actuate")&&s["xlink:actuate"]===r&&(i={url:s["xlink:href"],parentElement:t,type:n,index:a,resolveType:r,originalContent:s,resolvedContent:null,resolved:!1},o.push(i));return o}return a={resolveManifestOnLoad:function(e){m=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:f}),(p=e).Period_asArray?v(E(p.Period_asArray,p,d.default.PERIOD,c),d.default.PERIOD,c):n.trigger(s.default.XLINK_READY,{manifest:p})},setMatchers:function(e){e&&(f=e)},setIron:function(e){e&&(h=e)},reset:function(){n.off(s.default.XLINK_ELEMENT_LOADED,y,a),g&&(g.reset(),g=null)}},n.on(s.default.XLINK_ELEMENT_LOADED,y,a),g=(0,i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),a}f.__dashjs_factory_name="XlinkController",n.default=a.default.getClassFactory(f),t.exports=n.default},{110:110,234:234,3:3,46:46,47:47,54:54,61:61}],129:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(143)),o=r(e(130)),s=r(e(131)),a=r(e(136)),u=r(e(141));function l(){var e=this.context;return{createMetricsReporting:function(t){return(0,i.default)(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}),(0,s.default)(e).create(t)},getReportingFactory:function(){return(0,u.default)(e).getInstance()},getMetricsHandlerFactory:function(){return(0,a.default)(e).getInstance()}}}l.__dashjs_factory_name="MetricsReporting",(e=dashjs.FactoryMaker.getClassFactory(l)).events=o.default,dashjs.FactoryMaker.updateClassFactory(l.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{130:130,131:131,136:136,141:141,143:143}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o),n.default=e,t.exports=n.default},{55:55}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(132)),o=r(e(145)),s=r(e(130));function a(e){e=e||{};var t=void 0,n={},r=this.context,a=e.eventBus,u=e.events;function l(t){var u;t.error||(u=Object.keys(n),(0,o.default)(r).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach((function(t){var o=JSON.stringify(t);if(n.hasOwnProperty(o))u.splice(o,1);else try{var s=(0,i.default)(r).create(e);s.initialize(t),n[o]=s}catch(t){}})),u.forEach((function(e){n[e].reset(),delete n[e]})),a.trigger(s.default.METRICS_INITIALISATION_COMPLETE))}function d(){Object.keys(n).forEach((function(e){n[e].reset()})),n={}}return t={reset:function(){a.off(u.MANIFEST_UPDATED,l,t),a.off(u.STREAM_TEARDOWN_COMPLETE,d,t)}},a.on(u.MANIFEST_UPDATED,l,t),a.on(u.STREAM_TEARDOWN_COMPLETE,d,t),t}a.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{130:130,132:132,145:145}],132:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(134)),o=r(e(135)),s=r(e(133));function a(e){e=e||{};var t=void 0,n=void 0,r=void 0,a=this.context;function u(){t&&t.reset(),n&&n.reset(),r&&r.reset()}return{initialize:function(l){try{(r=(0,i.default)(a).create({mediaElement:e.mediaElement})).initialize(l.Range),(n=(0,o.default)(a).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(l.Reporting,r),(t=(0,s.default)(a).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(l.metrics,n)}catch(l){throw u(),l}},reset:u}}a.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{133:133,134:134,135:135}],133:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(136))&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=[],n=void 0,r=this.context,o=e.eventBus,s=e.events,a=(0,i.default)(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){t.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}return n={initialize:function(e,r){e.split(",").forEach((function(e,n,i){var o,s;-1===e.indexOf("(")||-1!==e.indexOf(")")||(s=i[n+1])&&-1===s.indexOf("(")&&-1!==s.indexOf(")")&&(e+=","+s,delete i[n+1]),(o=a.create(e,r))&&t.push(o)})),o.on(s.METRIC_ADDED,u,n),o.on(s.METRIC_UPDATED,u,n)},reset:function(){o.off(s.METRIC_ADDED,u,n),o.off(s.METRIC_UPDATED,u,n),t.forEach((function(e){return e.reset()})),t=[]}}}o.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{136:136}],134:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(222))&&r.__esModule?r:{default:r};function o(e){e=e||{};var t,n=!1,r=this.context,o=void 0,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime;e=t+e.duration;o.add(t,e)})),n=!!e[0]._useWallClockTime)},reset:function(){o.clear()},isEnabled:function(){var e,t=o.length;if(!t)return!0;e=n?(new Date).getTime()/1e3:s.currentTime;for(var r=0;r<t;r+=1){var i=o.start(r),a=o.end(r);if(i<=e&&e<a)return!0}return!1}},o=(0,i.default)(r).create(),t}o.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{222:222}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(141))&&r.__esModule?r:{default:r};function o(e){var t=[],n=(0,i.default)(this.context).getInstance(e);return{initialize:function(e,r){e.some((function(e){if(e=n.create(e,r))return t.push(e),!0}))},reset:function(){t.forEach((function(e){return e.reset()})),t=[]},report:function(e,n){t.forEach((function(t){return t.report(e,n)}))}}}o.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{141:141}],136:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(137)),o=r(e(138)),s=r(e(140)),a=r(e(139));function u(e){var t=void 0,n=(e=e||{}).debug?e.debug.getLogger(t):{},r=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,u=this.context,l={BufferLevel:i.default,DVBErrors:o.default,HttpList:s.default,PlayList:a.default,RepSwitchList:a.default,TcpList:a.default};return{create:function(t,i){var o,s=t.match(r);if(s){try{(o=l[s[1]](u).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(s[1],i,s[3],s[5])}catch(t){o=null,n.error("MetricsHandlerFactory: Could not create handler for type "+s[1]+" with args "+s[3]+", "+s[5]+" ("+t.message+")")}return o}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}u.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default},{137:137,138:138,139:139,140:140}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(144))&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=void 0,n=void 0,r=void 0,o=void 0,s=void 0,a=this.context,u=(0,i.default)(a).getInstance(),l=[],d=e.metricsConstants;function c(){var e=function(){try{return Object.keys(l).map((function(e){return l[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){return}}();e&&s!==e.t&&(s=e.t,t.report(r,e))}return{initialize:function(e,i,s){i&&(n=u.validateN(s),t=i,r=u.reconstructFullMetricName(e,s),o=setInterval(c,n))},reset:function(){clearInterval(o),n=0,s=t=o=null},handleNewMetric:function(e,t,n){e===d.BUFFER_LEVEL&&(l[n]=t)}}}o.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{144:144}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(130))&&r.__esModule?r:{default:r};n.default=dashjs.FactoryMaker.getClassFactory((function(e){var t=void 0,n=(e=e||{}).eventBus,r=e.metricsConstants;function o(){n.off(i.default.METRICS_INITIALISATION_COMPLETE,o,this),n.trigger(i.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,r){r&&(t=r,n.on(i.default.METRICS_INITIALISATION_COMPLETE,o,this))},reset:function(){t=null},handleNewMetric:function(e,n){e===r.DVB_ERRORS&&t&&t.report(e,n)}}})),t.exports=n.default},{130:130}],139:[function(e,t,n){"use strict";function r(){var e=void 0,t=void 0;return{initialize:function(n,r){e=n,t=r},reset:function(){t=null,e=void 0},handleNewMetric:function(n,r){n===e&&t&&t.report(e,r)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{}],140:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(144))&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=void 0,n=void 0,r=void 0,o=void 0,s=void 0,a=[],u=(0,i.default)(this.context).getInstance(),l=e.metricsConstants;function d(){a.length&&t&&t.report(o,a),a=[]}return{initialize:function(e,i,a,l){i&&(n=u.validateN(a),t=i,l&&l.length&&(r=l),o=u.reconstructFullMetricName(e,a,l),s=setInterval(d,n))},reset:function(){clearInterval(s),a=[],t=r=n=s=null},handleNewMetric:function(e,t){e===l.HTTP_REQUEST&&(r&&r!==t.type||a.push(t))}}}o.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{144:144}],141:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(142))&&r.__esModule?r:{default:r};function o(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":i.default},n=this.context,r=void 0,o=e.debug?e.debug.getLogger(r):{},s=e.metricsConstants;return{create:function(e,r){var i=void 0;try{(i=t[e.schemeIdUri](n).create({metricsConstants:s})).initialize(e,r)}catch(r){i=null,o.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+r.message+")")}return i},register:function(e,n){t[e]=n},unregister:function(e){delete t[e]}}}o.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{142:142}],142:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(146)),o=r(e(147));function s(e){e=e||{};var t,n=this.context,r=void 0,s=void 0,a=void 0,u=void 0,l=void 0,d=void 0,c=[],f=e.metricsConstants;function h(){u=a=!1,d=l=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),u&&d.isEnabled()&&t.forEach((function(t){t=r.serialise(t),e!==f.DVB_ERRORS&&(t="metricname="+e+"&"+t),function(e,t,n){function r(){var e=c.indexOf(i);-1!==e&&(c.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n())}var i=new XMLHttpRequest;c.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(e){i.onerror()}}(t=l+"?"+t,null,(function(){u=!1}))}))},initialize:function(e,t){if(d=t,!(l=e.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");a||((e=e.dvb_probability)&&(1e3===e||e/1e3>=s.random())&&(u=!0),a=!0)},reset:function(){h()}},r=(0,i.default)(n).getInstance(),s=(0,o.default)(n).getInstance(),h(),t}s.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(s),t.exports=n.default},{146:146,147:147}],143:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(148)),o=r(e(130));function s(e){var t=void 0,n=void 0,r=(e=e||{}).eventBus,s=e.dashMetrics,a=e.metricsConstants,u=e.events;function l(e){var t=new i.default;if(n){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),s.addDVBErrors(t)}}function d(e){e.error||(n=e.manifest)}function c(e){l({errorcode:i.default.BASE_URL_CHANGED,servicelocation:e.entry})}function f(){l({errorcode:i.default.BECAME_REPORTER})}function h(e){var t;e.metric===a.HTTP_REQUEST&&(0===(t=e.value).responsecode||400<=t.responsecode||t.responsecode<100||600<=t.responsecode)&&l({errorcode:t.responsecode||i.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}function p(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=i.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=i.default.CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:t})}function m(){r.on(u.MANIFEST_UPDATED,d,t),r.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),r.on(u.METRIC_ADDED,h,t),r.on(u.METRIC_UPDATED,h,t),r.on(u.PLAYBACK_ERROR,p,t),r.on(o.default.BECAME_REPORTING_PLAYER,f,t)}return t={initialise:m,reset:function(){r.off(u.MANIFEST_UPDATED,d,t),r.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),r.off(u.METRIC_ADDED,h,t),r.off(u.METRIC_UPDATED,h,t),r.off(u.PLAYBACK_ERROR,p,t),r.off(o.default.BECAME_REPORTING_PLAYER,f,t)}},m(),t}s.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{130:130,148:148}],144:[function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){return t&&(e+="("+t,n&&n.length&&(e+=","+n),e+=")"),e},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],145:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(149)),o=r(e(150)),s=r(e(151));function a(e){var t=(e=e||{}).adapter,n=e.constants;return{getMetrics:function(e){var r=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach((function(a){var u=new i.default,l=t.getIsDynamic(e);a.hasOwnProperty("metrics")&&(u.metrics=a.metrics,a.Range_asArray&&a.Range_asArray.forEach((function(r){var i,s,a,d,c=new o.default;c.starttime=(i=e,s=r,a=void 0,d=0,l?d=t.getAvailabilityStartTime(i)/1e3:(i=t.getRegularPeriods(i)).length&&(d=i[0].start),a=d,s&&s.hasOwnProperty(n.START_TIME)&&(a+=s.starttime),a),r.hasOwnProperty("duration")?c.duration=r.duration:c.duration=t.getDuration(e),c._useWallClockTime=l,u.Range.push(c)})),a.Reporting_asArray&&(a.Reporting_asArray.forEach((function(e){var t=new s.default;e.hasOwnProperty(n.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(n.DVB_REPORTING_URL)&&(t.dvb_reportingUrl=e[n.DVB_REPORTING_URL]),e.hasOwnProperty(n.DVB_PROBABILITY)&&(t.dvb_probability=e[n.DVB_PROBABILITY]),u.Reporting.push(t))})),r.push(u)))})),r}}}a.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{149:149,150:150,151:151}],146:[function(e,t,n){"use strict";function r(){return{serialise:function e(t){var n=[],r=[],i=void 0,o=void 0;for(i in t)if(t.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null==(o=t[i])&&(o=""),Array.isArray(o)){if(!o.length)continue;r=[],o.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);r.push(n?t:e(t))})),o=r.map(encodeURIComponent).join(",")}else"string"==typeof o?o=encodeURIComponent(o):o instanceof Date?o=o.toISOString():"number"==typeof o&&(o=Math.round(o));n.push(i+"="+o)}return n.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],147:[function(e,t,n){"use strict";function r(){var e,t=window.crypto||window.msCrypto,n=Uint32Array,r=Math.pow(2,8*n.BYTES_PER_ELEMENT)-1,i=void 0,o=void 0;function s(){t&&(i=i||new n(10),t.getRandomValues(i),o=0)}return e={random:function(e,n){var a=void 0;return e=e||0,n=n||1,t?(o===i.length&&s(),a=i[o]/r,o+=1):a=Math.random(),a*(n-e)+e}},s(),e}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],148:[function(e,t,n){"use strict";function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}Object.defineProperty(n,"__esModule",{value:!0}),r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n.default=r,t.exports=n.default},{}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3},t.exports=n.default},{}],152:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[]}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(230));e=r(e(47));function s(){var e,t=void 0,n=void 0,r=this.context,s=(0,o.default)(r).getInstance();function a(e,t,r){r=n.getBaseURLsFromElement(r),e[t]?s.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=NaN):e[t]=new i(r)}function u(){t=new i}return e={reset:u,update:function(e){!function(e){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var r=n.getBaseURLsFromElement(e);s.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach((function(e,r){a(t.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,i){a(t.children[r].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(e,n){a(t.children[r].children[i].children,n,e)}))}))}))}(e)},getForPath:function(e){var n=t,r=[n.data];return e&&e.forEach((function(e){(n=n.children[e])&&r.push(n.data)})),r.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(e){!function e(n,r){n((r=r||t).data),r.children&&r.children.forEach((function(t){return e(n,t)}))}((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=NaN)}))},setConfig:function(e){e.adapter&&(n=e.adapter)}},u(),e}s.__dashjs_factory_name="BaseURLTreeModel",n.default=e.default.getClassFactory(s),t.exports=n.default},{230:230,47:47}],153:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(104)),s=r(e(130)),a=r(e(47)),u=r(e(45)),l=r(e(48)),d=r(e(112)),c=e(255),f=r(e(65)),h=r(e(49));function p(){var e=void 0,t=void 0,n=void 0,r=void 0,a=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=this.context,E=(0,i.default)(_).getInstance(),b=(0,l.default)(_).getInstance();function T(){n={pr:1,nor:null,st:null,sf:null,sid:""+h.default.generateUuid(),cid:null},v={},g={},y={},w()}function S(){w()}function w(){var e;!p||(e=p.getStreamController())&&("function"!=typeof e.getActiveStream||(e=e.getActiveStream())&&(m=e.getProcessors()))}function A(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var a=a.value;e[a]&&(n[a]=e[a])}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}function R(e){try{return e.type===c.HTTPRequest.MPD_TYPE?((i=C()).ot="m",i):e.type===c.HTTPRequest.MEDIA_SEGMENT_TYPE?(function(e){y.hasOwnProperty(e)||(y[e]=!1),g.hasOwnProperty(e)||(g[e]=!1),v.hasOwnProperty(e)||(v[e]=!1)}(e.mediaType),function(e){var t=C(),i=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),o=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),s=function(e){try{return 100*parseInt(r.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(e.mediaType),u=function(e){try{var t=n.pr,r=a.getCurrentBufferLevel(e);return isNaN(t)||isNaN(r)?null:100*parseInt(r/t*10)}catch(e){return null}}(e.mediaType),l=I(e.mediaType),c=function(e){try{var t=r.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(e.mediaType),f=n.pr,h=function(e){if(m&&0!==m.length){var t=!0,n=!1,r=void 0;try{for(var i=m[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var o=o.value;if(o.getType()===e)return o.probeNextRequest()}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}}(e.mediaType),_=void 0;e.mediaType===d.default.VIDEO&&(_="v"),e.mediaType===d.default.AUDIO&&(_="a"),e.mediaType===d.default.FRAGMENTED_TEXT&&(_="application/mp4"===e.mediaInfo.mimeType?"tt":"c");var E=b.get().streaming.cmcd.rtp;return E=E||function(e){var t=p.getPlaybackRate();t=t||1;var n=e.quality,r=e.mediaType,i=e.mediaInfo;e=e.duration;return 0===(r=I(r))&&(r=500),r=i.bitrateList[n].bandwidth*e/1e3/(r/t/1e3),t=b.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(b.get().streaming.cmcd.rtpSafetyFactor)?b.get().streaming.cmcd.rtpSafetyFactor:5,100*(parseInt(r*t/100)+1)}(e),t.rtp=E,h&&(e.url!==h.url?(E=new URL(h.url),t.nor=E.pathname):h.range&&(t.nrr=h.range)),i&&(t.br=i),_&&(t.ot=_),isNaN(o)||(t.d=o),isNaN(s)||(t.mtp=s),isNaN(u)||(t.dl=u),isNaN(l)||(t.bl=l),isNaN(c)||(t.tb=c),isNaN(f)||1===f||(t.pr=f),v[e.mediaType]&&(t.bs=!0,v[e.mediaType]=!1),!g[e.mediaType]&&y[e.mediaType]||(t.su=!0,g[e.mediaType]=!1,y[e.mediaType]=!0),t}(e)):e.type===c.HTTPRequest.INIT_SEGMENT_TYPE?((i=C()).ot="i",i.su=!0,i):e.type===c.HTTPRequest.OTHER_TYPE||e.type===c.HTTPRequest.XLINK_EXPANSION_TYPE?((t=C()).ot="o",t):e.type===c.HTTPRequest.LICENSE?((t=C()).ot="k",t):null}catch(e){return null}var t,i}function C(){var e={},t=(b.get().streaming.cmcd.cid?b.get().streaming.cmcd:n).cid;return e.v=1,e.sid=(b.get().streaming.cmcd.sid?b.get().streaming.cmcd:n).sid,e.sid=""+e.sid,t&&(e.cid=""+t),isNaN(n.pr)||1===n.pr||null===n.pr||(e.pr=n.pr),n.st&&(e.st=n.st),n.sf&&(e.sf=n.sf),e}function I(e){try{var t=a.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function O(e){try{n.pr=e.playbackRate}catch(e){}}function D(t){try{var r=e.getIsDynamic(t.data)?"l":"v",i=t.protocol&&"MSS"===t.protocol?"s":"d";n.st=r,n.sf=i}catch(t){}}function M(e){try{e.state&&e.mediaType&&e.state===o.default.BUFFER_EMPTY&&(v[e.mediaType]||(v[e.mediaType]=!0),g[e.mediaType]||(g[e.mediaType]=!0))}catch(e){}}function N(){for(var e in v)v.hasOwnProperty(e)&&(v[e]=!0);for(var e in g)g.hasOwnProperty(e)&&(g[e]=!0)}function P(e){try{var t=function(){if(!e)return{v:null};var t=Object.keys(e).sort((function(e,t){return e.localeCompare(t)})),n=t.length;return{v:t.reduce((function(t,r,i){return"v"===r&&1===e[r]||("string"!=typeof e[r]||"ot"===r&&"sf"===r&&"st"===r?t+=r+"="+e[r]:t+=r+'="'+e[r].replace(/"/g,'"')+'"',i<n-1&&(t+=",")),t}),"").replace(/=true/g,"")}}();if("object"==typeof t)return t.v}catch(t){return null}}return t={getQueryParameter:function(e){try{if(b.get().streaming.cmcd&&b.get().streaming.cmcd.enabled){var t=R(e),n=P(t);return E.trigger(s.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(e){return null}},getHeaderParameters:function(e){try{if(b.get().streaming.cmcd&&b.get().streaming.cmcd.enabled){var t=R(e),n=A(t,["br","d","ot","tb"]),r=A(t,["bl","dl","mtp","nor","nrr","su"]),i=A(t,["bs","rtp"]),o=A(t,["cid","pr","sf","sid","st","v"]);o={"CMCD-Object":P(n),"CMCD-Request":P(r),"CMCD-Status":P(i),"CMCD-Session":P(o)};return E.trigger(s.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t}),o}return null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(r=e.abrController),e.dashMetrics&&(a=e.dashMetrics),e.playbackController&&(p=e.playbackController))},reset:function(){E.off(o.default.PLAYBACK_RATE_CHANGED,O,this),E.off(o.default.MANIFEST_LOADED,D,this),E.off(o.default.BUFFER_LEVEL_STATE_CHANGED,M,t),E.off(o.default.PLAYBACK_SEEKED,N,t),T()},initialize:function(){E.on(o.default.PLAYBACK_RATE_CHANGED,O,t),E.on(o.default.MANIFEST_LOADED,D,t),E.on(o.default.BUFFER_LEVEL_STATE_CHANGED,M,t),E.on(o.default.PLAYBACK_SEEKED,N,t),E.on(o.default.PERIOD_SWITCH_COMPLETED,S,t)}},(0,u.default)(_).getInstance().getLogger(t),e=(0,f.default)(_).getInstance(),T(),t}p.__dashjs_factory_name="CmcdModel",n.default=a.default.getSingletonFactory(p),t.exports=n.default},{104:104,112:112,130:130,255:255,45:45,46:46,47:47,48:48,49:49,65:65}],154:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(241)),s="loading",a="executed";function u(e){var t,n=(e=e||{}).eventBus,r=e.events,i=e.dashMetrics,u=e.fragmentLoader,l=e.debug,d=e.streamInfo,c=e.type,f=void 0,h=void 0,p=void 0;function m(e){var t;return!!e&&(t=!1,h.some((function(n){if(i=e,s=n,!isNaN(i.index)&&i.startTime===s.startTime&&i.adaptationIndex===s.adaptationIndex&&i.type===s.type||(s=e,r=n,isNaN(s.index)&&isNaN(r.index)&&s.quality===r.quality)||(r=n,(n=e).action===o.default.ACTION_COMPLETE&&n.action===r.action))return t=!0;var r,i,s})),t)}function g(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function v(e){h=h.filter((function(t){var n=g(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function y(e,t){t<=e+.5||(h=h.filter((function(n){var r=g(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r})))}function _(e,t){i.addSchedulingInfo(e,t),i.addRequestsQueue(e.mediaType,p,h)}function E(e){e.sender===u&&(p.splice(p.indexOf(e.request),1),e.response&&!e.error&&h.push(e.request),_(e.request,e.error?"failed":a),n.trigger(r.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:d.id,mediaType:c}))}function b(e){e.sender===u&&n.trigger(r.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:d.id,mediaType:c})}function T(e){e.sender===u&&n.trigger(r.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:d.id,mediaType:c})}function S(){h=[],p=[]}return t={getStreamId:function(){return d.id},getType:function(){return c},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach((function(t){t=function(e){var t=void 0;switch(e){case s:t=p;break;case a:t=h;break;default:t=[]}return t}(t),n=n.concat(function(e,t){return t.hasOwnProperty("time")?[function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],o=i.startTime,s=o+i.duration;if(n=isNaN(n)?g(i):n,!isNaN(o)&&!isNaN(s)&&o<=t+n&&t-n<s||isNaN(o)&&isNaN(t))return i}return null}(e,t.time,t.threshold)]:e.filter((function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}))}(t,e))})),n},isFragmentLoaded:m,isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;if(!(n=m(e)))for(r=0;r<p.length;r++)t=p[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:v,removeExecutedRequestsAfterTime:function(e){h=h.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)y(n,e.start(r)),n=e.end(r);0<t&&y(n,t)}else v()},abortRequests:function(){f.debug("abort requests"),u.abort(),p=[]},executeRequest:function(e){switch(e.action){case o.default.ACTION_COMPLETE:h.push(e),_(e,a),f.debug("STREAM_COMPLETED"),n.trigger(r.STREAM_COMPLETED,{request:e},{streamId:e.mediaInfo.streamInfo.id,mediaType:e.mediaType});break;case o.default.ACTION_DOWNLOAD:_(e,s),p.push(e),n.trigger(r.FRAGMENT_LOADING_STARTED,{request:e},{streamId:d.id,mediaType:c}),u.load(e);break;default:f.warn("Unknown request action.")}},reset:function(){n.off(r.LOADING_COMPLETED,E,this),n.off(r.LOADING_DATA_PROGRESS,b,this),n.off(r.LOADING_ABANDONED,T,this),u&&u.reset(),S()},addExecutedRequest:function(e){h.push(e)}},f=l.getLogger(t),S(),n.on(r.LOADING_COMPLETED,E,t),n.on(r.LOADING_DATA_PROGRESS,b,t),n.on(r.LOADING_ABANDONED,T,t),t}u.__dashjs_factory_name="FragmentModel",(e=i.default.getClassFactory(u)).FRAGMENT_MODEL_LOADING=s,e.FRAGMENT_MODEL_EXECUTED=a,e.FRAGMENT_MODEL_CANCELED="canceled",e.FRAGMENT_MODEL_FAILED="failed",i.default.updateClassFactory(u.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{241:241,47:47}],155:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(54));e=r(e(47));function s(){var e=this.context,t=(0,i.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(o.default.MANIFEST_LOADED,{data:e})}}}s.__dashjs_factory_name="ManifestModel",n.default=e.default.getSingletonFactory(s),t.exports=n.default},{46:46,47:47,54:54}],156:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(99)),o=r(e(47)),s=r(e(112)),a=r(e(196)),u=r(e(48)),l=e(232);function d(){var e,t=void 0,n=void 0,r=void 0,o=this.context,d=(0,u.default)(o).getInstance();function c(e){var t=void 0;for(t=0;t<r.length;t++)if(r[t].rulename===e)return t;return-1}function f(){return d.get().streaming.lowLatencyEnabled?d.get().streaming.liveDelay||3:d.get().streaming.liveDelay}function h(e,n){p(e,n);var r=new i.default;r.schemeIdUri=e,r.value=n,t.push(r)}function p(e,n){(0,l.checkParameterType)(e,"string"),(0,l.checkParameterType)(n,"string"),t.forEach((function(r,i){r.schemeIdUri===e&&r.value===n&&t.splice(i,1)}))}return e={getABRCustomRules:function(){return r},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==a.default.ABANDON_FRAGMENT_RULES&&e!==a.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw s.default.BAD_ARGUMENT_ERROR;var i=c(t);-1===i?r.push({type:e,rulename:t,rule:n}):(r[i].type=e,r[i].rule=n)},removeABRCustomRule:function(e){e?-1!==(e=c(e))&&r.splice(e,1):r=[]},getStableBufferTime:function(){if(d.get().streaming.lowLatencyEnabled)return.6*f();var e=d.get().streaming.stableBufferTime;return-1<e?e:d.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){var t=isNaN(d.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:d.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return d.get().streaming.lowLatencyEnabled?d.get().streaming.retryAttempts[e]*t:d.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(d.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:d.get().streaming.retryIntervals.lowLatencyReductionFactor;return d.get().streaming.lowLatencyEnabled?d.get().streaming.retryIntervals[e]/t:d.get().streaming.retryIntervals[e]},getLiveDelay:f,getLiveCatchupLatencyThreshold:function(){try{var e=d.get().streaming.liveCatchup.latencyThreshold,t=f();return null===e||isNaN(e)?(e=d.get().streaming.liveCatchup.minDrift,(e=!isNaN(t)&&t?isNaN(e)?f():d.get().streaming.liveCatchup.minDrift+f():NaN)&&!isNaN(e)?Math.max(4*e,5):NaN):Math.max(e,t)}catch(e){return NaN}},addUTCTimingSource:h,removeUTCTimingSource:p,getUTCTimingSources:function(){return t},clearDefaultUTCTimingSources:function(){t=[]},restoreDefaultUTCTimingSources:function(){var e=d.get().streaming.utcSynchronization.defaultTimingSource;h(e.scheme,e.value)},setXHRWithCredentialsForType:function e(t,r){t?n[t]=!!r:Object.keys(n).forEach((function(t){e(t,r)}))},getXHRWithCredentialsForType:function(e){return void 0===(e=n[e])?n.default:e},getDefaultUtcTimingSource:function(){return d.get().streaming.utcSynchronization.defaultTimingSource},reset:function(){}},n={default:!(t=[])},r=[],e}d.__dashjs_factory_name="MediaPlayerModel",n.default=o.default.getSingletonFactory(d),t.exports=n.default},{112:112,196:196,232:232,47:47,48:48,99:99}],157:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(113)),s=r(e(245)),a=e(255),u=r(e(258)),l=r(e(251)),d=r(e(252)),c=r(e(253)),f=r(e(254)),h=e(256),p=r(e(260)),m=r(e(46)),g=r(e(259)),v=r(e(54));e=r(e(47));function y(e){var t=(e=e||{}).settings,n=(e=this.context,(0,m.default)(e).getInstance()),r=(e=void 0,void 0);function y(){n.trigger(v.default.METRICS_CHANGED)}function _(e){n.trigger(v.default.METRIC_CHANGED,{mediaType:e}),y()}function E(e,t,r){n.trigger(v.default.METRIC_UPDATED,{mediaType:e,metric:t,value:r}),_(e)}function b(e,t,r){n.trigger(v.default.METRIC_ADDED,{mediaType:e,metric:t,value:r}),_(e)}function T(e,t){var n=null;return e&&(r.hasOwnProperty(e)?n=r[e]:t||(n=new s.default,r[e]=n)),n}function S(e,n,r){null!==(e=T(e))&&(e[n].push(r),e[n].length>t.get().streaming.metricsMaxListDepth&&e[n].shift())}function w(e,t,n){S(e,t,n),b(e,t,n)}return e={clearCurrentMetricsForType:function(e){delete r[e],_(e)},clearAllCurrentMetrics:function(){r={},y()},getMetricsFor:T,addHttpRequest:function e(t,n,r,i,s,u,l,d,c,f,h,p,m,g,v){var y=new a.HTTPRequest;u&&u!==i&&(e(t,null,r,i,s,null,null,d,c,null,null,null,m,null,null),y.actualurl=u),y.tcpid=n,y.type=r,y.url=i,y.range=d,y.trequest=c,y.tresponse=f,y.responsecode=p,y._tfinish=h,y._stream=t,y._mediaduration=m,y._quality=s,y._responseHeaders=g,y._serviceLocation=l,v?v.forEach((function(e){var t,n,r,i;t=y,n=e.s,r=e.d,i=e.b,(e=new a.HTTPRequestTrace).s=n,e.d=r,e.b=i,t.trace.push(e),t.interval||(t.interval=0),t.interval+=r})):(delete y.interval,delete y.trace),w(t,o.default.HTTP_REQUEST,y)},addRepresentationSwitch:function(e,t,n,r,i){var s=new u.default;s.t=t,s.mt=n,s.to=r,i?s.lto=i:delete s.lto,w(e,o.default.TRACK_SWITCH,s)},addBufferLevel:function(e,t,n){var r=new l.default;r.t=t,r.level=n,w(e,o.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new d.default;r.target=n,r.state=t,w(e,o.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var i=new c.default;i.time=t,i.range=r,i.manifestInfo=n,w(e,o.default.DVR_INFO,i)},addDroppedFrames:function(e,t){var n=new f.default,r=T(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||w(e,o.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,r,i,s,a,u,l){var d=new p.default;d.mediaType=e,d.t=t,d.type=n,d.startTime=r,d.availabilityStartTime=i,d.duration=s,d.quality=a,d.range=u,d.state=l,w(e,o.default.SCHEDULING_INFO,d)},addRequestsQueue:function(e,t,n){var r=new g.default;r.loadingRequests=t,r.executedRequests=n,T(e).RequestsQueue=r,b(e,o.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,r,s,a,u,l,d,c){var f=new h.ManifestUpdate;f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=r,f.availabilityStartTime=s,f.presentationStartTime=a,f.clientTimeOffset=u,f.currentTime=l,f.buffered=d,f.latency=c,S(i.default.STREAM,o.default.MANIFEST_UPDATE,f),b(e,o.default.MANIFEST_UPDATE,f)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];E(e.mediaType,o.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,i){var s;e&&((s=new h.ManifestUpdateStreamInfo).id=t,s.index=n,s.start=r,s.duration=i,e.streamInfo.push(s),E(e.mediaType,o.default.MANIFEST_UPDATE_STREAM_INFO,e))},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,s,a,u){var l;e&&e.representationInfo&&((l=new h.ManifestUpdateRepresentationInfo).id=t,l.index=n,l.streamIndex=r,l.mediaType=i,l.startNumber=a,l.fragmentInfoType=u,l.presentationTimeOffset=s,e.representationInfo.push(l),E(e.mediaType,o.default.MANIFEST_UPDATE_TRACK_INFO,e))},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,w(i.default.STREAM,o.default.PLAY_LIST,e)},addDVBErrors:function(e){w(i.default.STREAM,o.default.DVB_ERRORS,e)}},r={},e}y.__dashjs_factory_name="MetricsModel",n.default=e.default.getSingletonFactory(y),t.exports=n.default},{112:112,113:113,245:245,251:251,252:252,253:253,254:254,255:255,256:256,258:258,259:259,260:260,46:46,47:47,54:54}],158:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(250));e=r(e(47));function o(){var e=void 0;return{initialize:function(t){if(e=new i.default,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var r=t.substr(n+1).split("&"),o=0,s=r.length;o<s;++o){var a,u=r[o],l=u.indexOf("=");-1!==l&&(a=u.substring(0,l),e.hasOwnProperty(a)&&(e[a]=u.substr(l+1)))}},getURIFragmentData:function(){return e}}}o.__dashjs_factory_name="URIFragmentModel",n.default=e.default.getSingletonFactory(o),t.exports=n.default},{250:250,47:47}],159:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(46)),s=r(e(54)),a=r(e(45));function u(){var e,t=void 0,n=void 0,r=void 0,i=void 0,u=this.context,l=(0,o.default)(u).getInstance(),d=[];function c(){n&&(n.playbackRate=i||1,n.removeEventListener("canplay",c))}function f(e){n&&(n.readyState<=2&&0<e?n.addEventListener("canplay",c):n.playbackRate=e)}function h(){return 0<d.length}function p(){var e;n&&h()&&0===n.playbackRate&&((e=document.createEvent("Event")).initEvent("waiting",!0,!1),n.dispatchEvent(e))}function m(){return n?n.buffered:null}function g(e,t,r,i,o){if(n)for(var s=0;s<n.textTracks.length;s++)if(n.textTracks[s].kind===e&&(!t||n.textTracks[s].label==t)&&n.textTracks[s].language===r&&n.textTracks[s].isTTML===i&&n.textTracks[s].isEmbedded===o)return n.textTracks[s];return null}return e={initialize:function(){l.on(s.default.PLAYBACK_PLAYING,p,this)},setCurrentTime:function(e,t){if(n){if(n.currentTime==e)return;try{e=t?function(e){var t=m(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var o=t.start(i),s=t.end(i),a=Math.abs(o-e),u=Math.abs(s-e);if(o<=e&&e<=s)return e;a<r&&(r=a,n=o),u<r&&(r=u,n=s)}return n}(e):e,n.currentTime=e}catch(t){0===n.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=e}),400)}}},play:function(){var e;n&&(n.autoplay=!0,(e=n.play())&&e.catch&&"undefined"!=typeof Promise&&e.catch((function(e){"NotAllowedError"===e.name&&l.trigger(s.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")})))},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isStalled:h,isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:f,getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(e,t){(t?function(e){var t=void 0;null!==e&&n&&!n.seeking&&-1===d.indexOf(e)&&(d.push(e),n&&1===d.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),i=n.playbackRate,f(0),n.dispatchEvent(t)))}:function(e){var t=d.indexOf(e),r=void 0;null!==e&&(-1!==t&&d.splice(t,1),n&&!1===h()&&0===n.playbackRate&&(f(i||1),n.paused||((r=document.createEvent("Event")).initEvent("playing",!0,!1),n.dispatchEvent(r))))})(e)},getElement:function(){return n},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(n=e)&&(n.preload="auto")},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return r},setTTMLRenderingDiv:function(e){(r=e).style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0},getPlaybackQuality:function(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null;return"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){n&&n.addEventListener(e,t)},removeEventListener:function(e,t){n&&n.removeEventListener(e,t)},getReadyState:function(){return n?n.readyState:NaN},getBufferRange:m,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:g,addTextTrack:function(e,t,r,i,o){if(!n)return null;var s=g(e,t,r,i,o);return s||((s=n.addTextTrack(e,t,r)).isEmbedded=o,s.isTTML=i),s},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){n&&n.removeChild(e)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},reset:function(){l.off(s.default.PLAYBACK_PLAYING,p,this)}},t=(0,a.default)(u).getInstance().getLogger(e),e}u.__dashjs_factory_name="VideoModel",n.default=i.default.getSingletonFactory(u),t.exports=n.default},{45:45,46:46,47:47,54:54}],160:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(48)),s=r(e(112));function a(e){e=e||{};var t=this.context,n=e.requestModifier,r=e.boxParser,i=(0,o.default)(t).getInstance();function a(e,t){e.reader.read().then(t).catch((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function u(e,t,n,r,i){switch(e){case s.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING:return function(e,t){try{var n,r;n=e.filter((function(t,n){return 0<n&&n<e.length-1})),r=t.filter((function(e,n){return 0<n&&n<t.length-1}));var i=0;if(1<n.length){for(var o=0;o<n.length;o++)n[o]&&r[o]&&(i+=r[o].ts-n[o].ts);return i}return null}catch(n){return null}}(t,n);case s.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA:default:return function(e,t){try{if(1<(e=e.filter((function(n){return n.bytes>t/4/e.length}))).length){var n=(r=0,i=(e[e.length-1].ts-e[0].ts)/e.length,e.forEach((function(t,n){(n=e[n+1])&&(t=n.ts-t.ts,r+=t<i?t:0)})),{v:r});if("object"==typeof n)return n.v}return null}catch(n){return null}var r,i}(r,i)}}return{load:function(e){var t=new Date,o=e.request,l=new Headers;if(o.range&&l.append("Range","bytes="+o.range),e.headers)for(var d in e.headers){var c=e.headers[d];c&&l.append(d,c)}o.requestStartDate||(o.requestStartDate=t),n&&n.modifyRequestHeader({setRequestHeader:function(e,t){l.append(e,t)}}),t=void 0,"function"==typeof window.AbortController&&(t=new AbortController,(e.abortController=t).signal.onabort=e.onabort),t={method:e.method,headers:l,credentials:e.withCredentials?"include":void 0,signal:t?t.signal:void 0},fetch(e.url,t).then((function(t){e.response||(e.response={}),e.response.status=t.status,e.response.statusText=t.statusText,e.response.responseURL=t.url,t.ok||e.onerror();var n="",o=!0,l=!1,d=void 0;try{for(var c=t.headers.keys()[Symbol.iterator]();!(o=(f=c.next()).done);o=!0){var f=f.value;n+=f+": "+t.headers.get(f)+"\r\n"}}catch(t){l=!0,d=t}finally{try{!o&&c.return&&c.return()}finally{if(l)throw d}}if(e.response.responseHeaders=n,!t.body)return t.arrayBuffer().then((function(t){t={loaded:(e.response.response=t).byteLength,total:t.byteLength,stream:!1},e.progress(t),e.onload(),e.onend()}));var h=parseInt(t.headers.get("Content-Length"),10),p=0,m=!1,g=new Uint8Array,v=0;e.reader=t.body.getReader();var y=[],_=[],E=[],b=!0,T=i.get().streaming.abr.fetchThroughputCalculationMode;d=function t(n){var i,o=n.value;if(n.done)return g&&(e.progress({loaded:p,total:isNaN(h)?p:h,lengthComputable:!0,time:u(T,_,E,y,p),stream:!0}),e.response.response=g.buffer),e.onload(),void e.onend();o&&0<o.length&&(g=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(g,o),p+=o.length,y.push({ts:Date.now(),bytes:o.length}),T===s.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&b&&r.findLastTopIsoBoxCompleted(["moof"],g,v).found&&(b=!1,_.push({ts:performance.now(),bytes:o.length})),(i=r.findLastTopIsoBoxCompleted(["moov","mdat"],g,v)).found?(n=i.lastCompletedOffset+i.size,T===s.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(b=!0,E.push({ts:performance.now(),bytes:g.length})),o=void 0,g=n===g.length?(o=g,new Uint8Array):(o=new Uint8Array(g.subarray(0,n)),g.subarray(n)),e.progress({data:o.buffer,lengthComputable:!1,noTrace:!0}),v=0):(v=i.lastCompletedOffset,m||(e.progress({lengthComputable:!1,noTrace:!0}),m=!0))),a(e,t)};a(e,d)})).catch((function(t){e.onerror&&e.onerror(t)}))},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:u}}a.__dashjs_factory_name="FetchLoader",i=i.default.getClassFactory(a),n.default=i,t.exports=n.default},{112:112,47:47,48:48}],161:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(164)),s=r(e(160)),a=e(255),u=r(e(47)),l=r(e(239)),d=r(e(153)),c=r(e(49)),f=r(e(45)),h=r(e(46)),p=r(e(54)),m=r(e(48)),g=r(e(112));function v(e){e=e||{};var t,n,r=this.context,u=e.errHandler,v=e.dashMetrics,y=e.mediaPlayerModel,_=e.requestModifier,E=e.boxParser,b=e.useFetch||!1,T=e.errors,S=e.requestTimeout||0,w=(0,h.default)(r).getInstance(),A=(0,m.default)(r).getInstance(),R=void 0,C=void 0,I=void 0,O=void 0,D=void 0,M=void 0;function N(e,t){var n=e.request,i=[],d=!0,f=!0,h=new Date,m=h,T=0,P=void 0;if(!_||!v||!u)throw new Error("config object is not correct or missing");function x(e){f=!1,n.requestStartDate=h,n.requestEndDate=new Date,n.firstByteDate=n.firstByteDate||h,n.checkExistenceOnly||(v.addHttpRequest(n,P.response?P.response.responseURL:null,P.response?P.response.status:null,P.response&&P.response.getAllResponseHeaders?P.response.getAllResponseHeaders():P.response?P.response.responseHeaders:[],e?i:null),n.type===a.HTTPRequest.MPD_TYPE&&v.addManifestUpdate(n))}function L(){if(-1!==R.indexOf(P)&&(R.splice(R.indexOf(P),1),f))if(x(!1),0<t)!function(){try{A.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&n.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&y.getRetryAttemptsForType(a.HTTPRequest.MEDIA_SEGMENT_TYPE)===t&&w.trigger(p.default.ATTEMPT_BACKGROUND_SYNC)}catch(r){}t--;var r={config:e};I.push(r),r.timeout=setTimeout((function(){-1!==I.indexOf(r)&&(I.splice(I.indexOf(r),1),N(e,t))}),y.getRetryIntervalsForType(n.type))}();else{if(n.type===a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;u.error(new l.default(O[n.type],n.url+" is not available",{request:n,response:P.response})),e.error&&e.error(n,"error",P.response.statusText),e.complete&&e.complete(n,P.response.statusText)}}var k,j,F=void 0,U=(F=b&&window.fetch&&"arraybuffer"===n.responseType&&n.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,s.default)(r).create({requestModifier:_,boxParser:E}):(0,o.default)(r).create({requestModifier:_}),null),B=_.modifyRequestURL(n.url);A.get().streaming.cmcd&&A.get().streaming.cmcd.enabled&&((k=A.get().streaming.cmcd.mode)===g.default.CMCD_MODE_QUERY?(j=function(e){try{var t=[],n=D.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(n),B=c.default.addAditionalQueryParameterToUrl(B,j)):k===g.default.CMCD_MODE_HEADER&&(U=D.getHeaderParameters(n)));var G;P={url:B,method:n.checkExistenceOnly?a.HTTPRequest.HEAD:a.HTTPRequest.GET,withCredentials:y.getXHRWithCredentialsForType(n.type),request:n,onload:function(){200<=P.response.status&&P.response.status<=299&&(x(!0),e.success&&e.success(P.response.response,P.response.statusText,P.response.responseURL),e.complete&&e.complete(n,P.response.statusText))},onend:L,onerror:L,progress:function(t){var r=new Date;d&&(d=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(n.firstByteDate=r)),t.lengthComputable&&(n.bytesLoaded=t.loaded,n.bytesTotal=t.total),t.noTrace||(i.push({s:m,d:t.time?t.time:r.getTime()-m.getTime(),b:[t.loaded?t.loaded-T:0]}),m=r,T=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(n)},ontimeout:function(e){var t,n;n=e.lengthComputable?(t=e.loaded/e.total*100,"Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+t.toFixed(3)+"% Completed"):"Request timeout: non-computable download size",M.warn(n)},loader:F,timeout:S,headers:U},U=(new Date).getTime();isNaN(n.delayLoadingTime)||U>=n.delayLoadingTime?(R.push(P),F.load(P)):(G={httpRequest:P},C.push(G),G.delayTimeout=setTimeout((function(){if(-1!==C.indexOf(G)){C.splice(C.indexOf(G),1);try{h=new Date,m=h,R.push(G.httpRequest),F.load(G.httpRequest)}catch(e){G.httpRequest.onerror()}}}),n.delayLoadingTime-U))}return n={load:function(e){e.request?N(e,y.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){I.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),I=[],C.forEach((function(e){return clearTimeout(e.delayTimeout)})),C=[],R.forEach((function(e){e.request.type!==a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))})),R=[]}},M=(0,f.default)(r).getInstance().getLogger(n),R=[],C=[],I=[],D=(0,d.default)(r).getInstance(),i(t={},a.HTTPRequest.MPD_TYPE,T.DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(t,a.HTTPRequest.XLINK_EXPANSION_TYPE,T.DOWNLOAD_ERROR_ID_XLINK_CODE),i(t,a.HTTPRequest.INIT_SEGMENT_TYPE,T.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(t,a.HTTPRequest.MEDIA_SEGMENT_TYPE,T.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,a.HTTPRequest.INDEX_SEGMENT_TYPE,T.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,T.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(t,a.HTTPRequest.OTHER_TYPE,T.DOWNLOAD_ERROR_ID_CONTENT_CODE),O=t,n}v.__dashjs_factory_name="HTTPLoader",u=u.default.getClassFactory(v),n.default=u,t.exports=n.default},{112:112,153:153,160:160,164:164,239:239,255:255,45:45,46:46,47:47,48:48,49:49,54:54}],162:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(161));function s(){var e=void 0;function t(){e={}}function n(){t()}return n(),{getLoader:function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.startsWith(n))return e[n];return o.default},registerLoader:function(t,n){e[t]=n},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:n}}s.__dashjs_factory_name="SchemeLoaderFactory",i=i.default.getSingletonFactory(s),n.default=i,t.exports=n.default},{161:161,47:47}],163:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(162));function s(e){e=e||{};var t=this.context,n=void 0,r=void 0;return n=(0,o.default)(t).getInstance(),{load:function(i){var o=n.getLoader(i&&i.request?i.request.url:null);(r=o(t).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,useFetch:e.useFetch||null,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})).load(i)},abort:function(){r&&r.abort()}}}s.__dashjs_factory_name="URLLoader",i=i.default.getClassFactory(s),n.default=i,t.exports=n.default},{162:162,47:47}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){var t=(e=e||{}).requestModifier;return{load:function(e){var n=new Date,r=e.request,i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&(i=t.modifyRequestHeader(i)),e.headers)for(var o in e.headers){var s=e.headers[o];s&&i.setRequestHeader(o,s)}i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.ontimeout=e.ontimeout,i.timeout=e.timeout,i.send(),e.response=i},abort:function(e){(e=e.response).onloadend=e.onerror=e.onprogress=void 0,e.abort()}}}i.__dashjs_factory_name="XHRLoader",e=e.default.getClassFactory(i),n.default=e,t.exports=n.default},{47:47}],165:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){n&&r(e,n)}(o,0,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){return t=o.parsePSSHList(t),e&&t.hasOwnProperty(e.uuid.toLowerCase())?t[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,o,s=void 0,a=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(o=t.getUint8(r))||1===o){r++,r+=3,s="";var u=void 0,l=void 0;for(u=0;u<4;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,s+="-",u=0;u<2;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<2;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<2;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<6;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,s=s.toLowerCase(),t.getUint32(r),r+=4,n[s]=t.buffer.slice(a,i),r=i}else r=i;else r=i}return n}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.default=i,t.exports=n.default},{}],166:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(168)),o=r(e(169)),s=r(e(167)),a=r(e(174)),u=r(e(176)),l=r(e(177)),d=r(e(175)),c=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],f=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function h(){var e=void 0,t=this.context;function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:function(r){var s=null,a=(0,o.default)(t).getInstance();a.setConfig({debug:r.debug,BASE64:r.BASE64}),a.initialize();var h,p,m,g,v,y=(p=(h=(y=r).debug).getLogger(e),m=y.eventBus,g=y.errHandler,(v=y.videoModel?y.videoModel.getElement():null)&&void 0===v.onencrypted||v&&void 0===v.mediaKeys?n(v,f)?(p.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,l.default)(t).create({debug:h,eventBus:m,events:y.events,api:n(v,f)})):n(v,c)?(p.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,d.default)(t).create({debug:h,eventBus:m,errHandler:g,events:y.events,api:n(v,c)})):(p.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(p.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,u.default)(t).create({debug:h,eventBus:m,events:y.events})));return!s&&y&&(s=(0,i.default)(t).create({protectionModel:y,protectionKeyController:a,eventBus:r.eventBus,debug:r.debug,events:r.events,BASE64:r.BASE64,constants:r.constants,cmcdModel:r.cmcdModel,settings:r.settings}),r.capabilities.setEncryptedMediaSupported(!0)),s}}}h.__dashjs_factory_name="Protection",(e=dashjs.FactoryMaker.getClassFactory(h)).events=s.default,e.errors=a.default,dashjs.FactoryMaker.updateClassFactory(h.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{167:167,168:168,169:169,174:174,175:175,176:176,177:177}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(55);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o),n.default=e,t.exports=n.default},{55:55}],168:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(165)),o=r(e(189)),s=r(e(186)),a=r(e(174)),u=r(e(239)),l=r(e(187)),d=r(e(188)),c=e(255),f=r(e(49)),h=r(e(112));function p(e){var t,n=(e=e||{}).protectionKeyController,r=e.protectionModel,p=e.eventBus,m=e.events,g=e.debug,v=e.BASE64,y=e.constants,_=[],E=e.cmcdModel,b=e.settings,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0,D=void 0;function M(){if(!(p&&p.hasOwnProperty("on")&&n&&n.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function N(e,t){var n=i.default.getPSSHForKeySystem(I,e),o=k(I);if(n){if(P(n))return;try{r.createKeySession(n,o,F(I),t)}catch(e){p.trigger(m.KEY_SESSION_CREATED,{data:null,error:new u.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?r.createKeySession(e,o,F(I),t):p.trigger(m.KEY_SESSION_CREATED,{data:null,error:new u.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(I?I.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function P(e){if(e)try{for(var t=r.getAllInitData(),i=0;i<t.length;i++)if(n.initDataEquals(e,t[i]))return T.debug("DRM: Ignoring initData because we have already seen it!"),1;return}catch(e){return}}function x(e,t){M(),r.loadKeySession(e,t,F(I))}function L(e){M(),e?(r.setMediaElement(e),p.on(m.NEED_KEY,H,this)):null===e&&(r.setMediaElement(e),p.off(m.NEED_KEY,H,this))}function k(e){var t=null;return e&&(e=e.systemString,A&&(t=e in A?A[e]:null)),t}function j(e){var t=k(e),n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:C,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:C,u=F(e);e=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",t=t&&t.persistentState?t.persistentState:"temporary"===u?"optional":"required";return w.forEach((function(e){e.type===y.AUDIO?n.push(new o.default(e.codec,i)):e.type===y.VIDEO&&r.push(new o.default(e.codec,a))})),new s.default(n,r,e,t,[u])}function F(e){return(e=k(e))&&e.sessionType?e.sessionType:R}function U(e,t){e=e.sort((function(t,n){return(A&&A[t.ks.systemString]&&0<=A[t.ks.systemString].priority?A[t.ks.systemString].priority:e.length)-(A&&A[n.ks.systemString]&&0<=A[n.ks.systemString].priority?A[n.ks.systemString].priority:e.length)})),void 0===I?function(e,t){var i=this,o=[],s=void 0;I=null,S.push(e);for(var l=0;l<e.length;l++)o.push({ks:e[l].ks,configs:[j(e[l].ks)]});function d(e){p.off(m.KEY_SYSTEM_ACCESS_COMPLETE,d,i),e.error?(I=void 0,p.off(m.INTERNAL_KEY_SYSTEM_SELECTED,f,i),t||p.trigger(m.KEY_SYSTEM_SELECTED,{data:null,error:new u.default(a.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,a.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(c=e.data,T.info("DRM: KeySystem Access Granted ("+c.keySystem.systemString+")!  Selecting key system..."),r.selectKeySystem(c))}var c=void 0,f=function e(o){if(p.off(m.INTERNAL_KEY_SYSTEM_SELECTED,e,i),p.off(m.KEY_SYSTEM_ACCESS_COMPLETE,d,i),o.error)I=void 0,t||p.trigger(m.KEY_SYSTEM_SELECTED,{data:null,error:new u.default(a.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,a.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+o.error)});else{if(!r)return;I=r.getKeySystem(),p.trigger(m.KEY_SYSTEM_SELECTED,{data:c});var l=k(I);l&&l.serverCertificate&&0<l.serverCertificate.length&&r.setServerCertificate(v.decodeArray(l.serverCertificate).buffer);for(var f,h=0;h<S.length;h++)for(s=0;s<S[h].length;s++)if(I===S[h][s].ks){n.isClearKey(I)&&l&&l.hasOwnProperty("clearkeys")&&(f={kids:Object.keys(l.clearkeys)},S[h][s].initData=(new TextEncoder).encode(JSON.stringify(f))),S[h][s].sessionId?x(S[h][s].sessionId,S[h][s].initData):null!==S[h][s].initData&&N(S[h][s].initData,S[h][s].cdmData);break}}};p.on(m.INTERNAL_KEY_SYSTEM_SELECTED,f,i),p.on(m.KEY_SYSTEM_ACCESS_COMPLETE,d,i),r.requestKeySystemAccess(o)}(e,t):I?function(e,t){var o=this,s=[],l=e.findIndex((function(e){return e.ks===I}));-1!==l&&e[l].initData&&(P(i.default.getPSSHForKeySystem(I,e[l].initData))||(s.push({ks:e[l].ks,configs:[j(I)]}),p.on(m.KEY_SYSTEM_ACCESS_COMPLETE,(function r(i){p.off(m.KEY_SYSTEM_ACCESS_COMPLETE,r,o),i.error?t||p.trigger(m.KEY_SYSTEM_SELECTED,{error:new u.default(a.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,a.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+i.error)}):(T.info("DRM: KeySystem Access Granted"),p.trigger(m.KEY_SYSTEM_SELECTED,{data:i.data}),i=k(I),n.isClearKey(I)&&i&&i.hasOwnProperty("clearkeys")&&(i={kids:Object.keys(i.clearkeys)},e[l].initData=(new TextEncoder).encode(JSON.stringify(i))),e[l].sessionId?x(e[l].sessionId,e[l].initData):e[l].initData&&N(e[l].initData,e[l].cdmData))}),o),r.requestKeySystemAccess(s)))}(e,t):S.push(e)}function B(e,t){p.trigger(m.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function G(e){e.error?p.trigger(m.KEY_STATUSES_CHANGED,{data:null,error:e.error}):T.debug("DRM: key status = "+e.status)}function q(e){T.debug("DRM: onKeyMessage");var t=e.data;p.trigger(m.KEY_MESSAGE,{data:t});var o=t.messageType?t.messageType:"license-request",s=t.message,g=t.sessionToken,v=k(I),y=I?I.systemString:null,_=n.getLicenseServer(I,v,o),S={sessionToken:g,messageType:o};if(s&&0!==s.byteLength){if(!_)return T.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+g.getSessionID()),void B(S);if(n.isClearKey(I)){var A=n.processClearKeyLicenseRequest(I,v,s);if(A)return T.debug("DRM: ClearKey license request handled by application!"),B(S),void r.updateKeySession(g,A)}var R,C,M,N,P,x,L,j,F;t=null;v&&v.serverURL?"string"==typeof(A=v.serverURL)&&""!==A?t=A:"object"==typeof A&&A.hasOwnProperty(o)&&(t=A[o]):t=v&&v.laURL&&""!==v.laURL?v.laURL:n.isClearKey(I)?I.getLicenseServerUrlFromMediaInfo(w):(L=i.default.getPSSHData(g.initData),(t=I.getLicenseServerURLFromInitData(L))||e.data.laURL),(t=_.getServerURLFromMessage(t,s,o))?(C=!(R={}),L=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(C=!0),R[t]=e[t]},v&&L(v.httpRequestHeaders),L(I.getRequestHeadersFromMessage(s)),v&&"boolean"==typeof v.withCredentials&&(C=v.withCredentials),M=function(e,t,n,r){r=e.response?_.getErrorResponse(e.response,n,r):"NONE",B(t,new u.default(a.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,a.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+r))},N=function(e){var t;r&&(200===e.status?(t=new d.default(e.responseURL,f.default.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null),e.response),V(D,t).then((function(){var n=_.getLicenseMessage(t.data,y,o);null!==n?(B(S),r.updateKeySession(g,n)):M(e,S,y,o)}))):M(e,S,y,o))},P=function(e){B(S,new u.default(a.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,a.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+y+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},x=function(e){B(S,new u.default(a.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,a.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+y+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},e=I.getLicenseRequestFromMessage(s),L=_.getHTTPMethod(o),s=_.getResponseType(y,o),j=v&&!isNaN(v.httpTimeout)?v.httpTimeout:8e3,v=g.getSessionID()||null,F=new l.default(t,L,s,R,C,o,v,e),V(O,F).then((function(){!function e(t,n,r,i,o,s){var a,u=new XMLHttpRequest;for(var l in b.get().streaming.cmcd&&b.get().streaming.cmcd.enabled&&((d=b.get().streaming.cmcd.mode)!==h.default.CMCD_MODE_QUERY||(a=E.getQueryParameter({url:t.url,type:c.HTTPRequest.LICENSE}))&&(t.url=f.default.addAditionalQueryParameterToUrl(t.url,[a]))),u.open(t.method,t.url,!0),u.responseType=t.responseType,u.withCredentials=t.withCredentials,0<r&&(u.timeout=r),t.headers)u.setRequestHeader(l,t.headers[l]);if(b.get().streaming.cmcd&&b.get().streaming.cmcd.enabled){var d=b.get().streaming.cmcd.mode;if(d===h.default.CMCD_MODE_HEADER){var g=E.getHeaderParameters({url:t.url,type:c.HTTPRequest.LICENSE});if(g)for(var v in g){var y=g[v];y&&u.setRequestHeader(v,y)}}}var _=function(){n--,setTimeout((function(){e(t,n,r,i,o,s)}),1e3)};u.onload=function(){200===this.status||n<=0?i(this):(T.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+n),_())},u.ontimeout=u.onerror=function(){n<=0?s(this):(T.warn("License request network request failed . Retrying it... Pending retries: "+n),_())},u.onabort=function(){o(this)},p.trigger(m.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId}),u.send(t.data)}(F,3,j,N,P,x)}))):B(S,new u.default(a.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,a.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else B(S,new u.default(a.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,a.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function H(e,t){if(T.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===w.length&&(T.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))_.push(setTimeout((function(){H(e,t)}),500));else{var r=e.key.initData;if(ArrayBuffer.isView(r)&&(r=r.buffer),I){var o=i.default.getPSSHForKeySystem(I,r);if(o&&P(o))return}T.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(r))),0!==(r=n.getSupportedKeySystems(r,A)).length?U(r,!1):T.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else T.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}function V(e,t){return e?e.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.resolve()}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");M(),p.on(m.INTERNAL_KEY_MESSAGE,q,this),p.on(m.INTERNAL_KEY_STATUS_CHANGED,G,this),w.push(e),(e=n.getSupportedKeySystemsFromContentProtection(e.contentProtection))&&0<e.length&&U(e,!0)},clearMediaInfoArrayByStreamId:function(e){w=w.filter((function(t){return t.streamInfo.id!==e}))},createKeySession:N,loadKeySession:x,removeKeySession:function(e){M(),r.removeKeySession(e)},closeKeySession:function(e){M(),r.closeKeySession(e)},setServerCertificate:function(e){M(),r.setServerCertificate(e)},setMediaElement:L,setSessionType:function(e){R=e},setRobustnessLevel:function(e){C=e},setProtectionData:function(e){A=e,n.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return M(),n.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return n?n.getKeySystems():[]},setKeySystems:function(e){n&&n.setKeySystems(e)},setLicenseRequestFilters:function(e){O=e},setLicenseResponseFilters:function(e){D=e},stop:function(){r&&r.stop()},reset:function(){M(),O=[],D=[],p.off(m.INTERNAL_KEY_MESSAGE,q,this),p.off(m.INTERNAL_KEY_STATUS_CHANGED,G,this),L(null),I=void 0,r&&(r.reset(),r=null),_.forEach((function(e){return clearTimeout(e)})),_=[],w=[]}},T=g.getLogger(t),S=[],w=[],R="temporary",C="",O=[],D=[],t}p.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(p),t.exports=n.default},{112:112,165:165,174:174,186:186,187:187,188:188,189:189,239:239,255:255,49:49}],169:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(165)),o=r(e(170)),s=r(e(172)),a=r(e(173)),u=r(e(171)),l=r(e(179)),d=r(e(180)),c=r(e(181)),f=r(e(178)),h=r(e(114));function p(){var e=this.context,t=void 0,n=void 0,r=void 0,p=void 0,m=void 0,g=void 0,v=void 0;return t={initialize:function(){p=[];var t=(0,u.default)(e).getInstance({BASE64:m});p.push(t),t=(0,a.default)(e).getInstance({BASE64:m}),p.push(t),t=(0,o.default)(e).getInstance({BASE64:m}),p.push(t),g=t,t=(0,s.default)(e).getInstance({BASE64:m,debug:n}),p.push(t),v=t},setProtectionData:function(e){for(var t,n=0;n<p.length;n++){var r=p[n];r.hasOwnProperty("init")&&r.init((t=r.systemString,r=void 0,r=null,e&&(r=t in e?e[t]:null),r))}},isClearKey:function(e){return e===g||e===v},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0},getKeySystems:function(){return p},setKeySystems:function(e){p=e},getKeySystemBySystemString:function(e){for(var t=0;t<p.length;t++)if(p[t].systemString===e)return p[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,r=void 0,o=void 0,s=[];if(e){var a,u=i.default.findCencContentProtection(e);for(r=0;r<p.length;++r)for(n=p[r],o=0;o<e.length;++o)(t=e[o]).schemeIdUri.toLowerCase()===n.schemeIdURI&&(a=n.getInitData(t,u),s.push({ks:p[r],initData:a,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}))}return s},getSupportedKeySystems:function(e,t){for(var n,r=[],o=i.default.parsePSSHList(e),s=void 0,a=0;a<p.length;++a)n=(s=p[a]).systemString,n=!t||n in t,s.uuid in o&&n&&r.push({ks:s,initData:o[s.uuid],cdmData:s.getCDMData(),sessionId:s.getSessionId()});return r},getLicenseServer:function(t,n,r){return"license-release"===r||"individualization-request"===r?null:(r=null,n&&n.hasOwnProperty("drmtoday")?r=(0,l.default)(e).getInstance({BASE64:m}):t.systemString===h.default.WIDEVINE_KEYSTEM_STRING?r=(0,c.default)(e).getInstance():t.systemString===h.default.PLAYREADY_KEYSTEM_STRING?r=(0,d.default)(e).getInstance():t.systemString===h.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,f.default)(e).getInstance()),r)},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(m=e.BASE64))}}}p.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(p),t.exports=n.default},{114:114,165:165,170:170,171:171,172:172,173:173,178:178,179:179,180:180,181:181}],170:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(184)),o=r(e(182)),s=r(e(165)),a=(e=r(e(114)),"e2719d58-a985-b3c9-781a-b030af78d30e"),u=e.default.CLEARKEY_KEYSTEM_STRING,l="urn:uuid:"+a;function d(e){var t=(e=e||{}).BASE64,n={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};return{uuid:a,schemeIdURI:l,systemString:u,getInitData:function(e,n){try{var r,i=s.default.parseInitDataFromContentProtection(e,t);return!i&&n&&(r={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))).replace(/=/g,"")}catch(e){return null}}(n["cenc:default_KID"])]},i=(new TextEncoder).encode(JSON.stringify(r))),i}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getLicenseServerUrlFromMediaInfo:function(e){try{if(!e||0===e.length)return null;for(var t=0,r=null;t<e.length&&!r;){var i=e[t];if(i&&i.contentProtection&&0<i.contentProtection.length){var o=i.contentProtection.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===l}));if(o&&0<o.length)for(var s=0;s<o.length&&!r;){for(var a=o[s],u=0;u<n.attributes.length&&!r;){for(var d=0,c=n.attributes[u];d<n.prefixes.length&&!r;){var f=n.prefixes[d];a[c]&&a[c].__prefix&&a[c].__prefix===f&&a[c].__text&&(r=a[c].__text),d+=1}u+=1}s+=1}}t+=1}return r}catch(e){return null}},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],a=0;a<r.kids.length;a++){var u=r.kids[a],l=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");s.push(new i.default(u,l))}n=new o.default(s)}return n}}}d.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(d),t.exports=n.default},{114:114,165:165,182:182,184:184}],171:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(165)),o=(e=r(e(114)),e.default.PLAYREADY_KEYSTEM_STRING),s=void 0;function a(e){var t="utf-16",n=(e=e||{}).BASE64;function r(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:o,getInitData:function(e){var t,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=0,l=null,d=void 0,c=void 0;if(r(),!e)return null;if("pssh"in e)return i.default.parseInitDataFromContentProtection(e,n);if("pro"in e)l=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;l=n.decodeArray(e.prheader.__text)}return t=l.length,o=4+s.length+a.length+4+t,e=new ArrayBuffer(o),d=new Uint8Array(e),(c=new DataView(e)).setUint32(0,o),u+=4,d.set(s,4),u+=s.length,d.set(a,u),u+=a.length,c.setUint32(u,t),u+=4,d.set(l,u),d.buffer},getRequestHeadersFromMessage:function(e){for(var n=void 0,r={},i=new DOMParser,o=(e=new("utf-16"===t?Uint16Array:Uint8Array)(e),e=String.fromCharCode.apply(null,e),(n=i.parseFromString(e,"application/xml")).getElementsByTagName("name")),s=n.getElementsByTagName("value"),a=0;a<o.length;a++)r[o[a].childNodes[0].nodeValue]=s[a].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r.hasOwnProperty("Content-Type")||(r["Content-Type"]="text/xml; charset=utf-8"),r},getLicenseRequestFromMessage:function(e){var i=null,o=new DOMParser,s=new("utf-16"===t?Uint16Array:Uint8Array)(e);return r(),s=String.fromCharCode.apply(null,s),(s=o.parseFromString(s,"application/xml")).getElementsByTagName("PlayReadyKeyMessage")[0]?((s=s.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)&&(i=n.decode(s)),i):e},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,o=0;o<n;o++){var s=t.getUint16(r,!0);r+=2;var a=t.getUint16(r,!0);if(r+=2,1===s){var u=e.slice(r,r+a);s=String.fromCharCode.apply(null,new Uint16Array(u));if((u=i.parseFromString(s,"application/xml")).getElementsByTagName("LA_URL")[0]&&(s=u.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue))return s;if(u.getElementsByTagName("LUI_URL")[0]&&(u=u.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue))return u}else r+=a}return null},getCDMData:function(){var e=void 0,t=void 0,i=void 0,o=void 0;if(r(),s&&s.cdmData){for(e=[],o=0;o<s.cdmData.length;++o)e.push(s.cdmData.charCodeAt(o)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=n.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),i=[],o=0;o<t.length;++o)i.push(t.charCodeAt(o)),i.push(0);return new Uint8Array(i).buffer}return null},getSessionId:function(e){return s&&s.sessionId?s.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e},init:function(e){e&&(s=e)}}}a.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{114:114,165:165}],172:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(184)),o=r(e(182)),s=r(e(165)),a=(e=r(e(114)),e.default.CLEARKEY_KEYSTEM_STRING);function u(e){var t=e.BASE64,n=e.debug.getLogger(void 0);return{uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:a,getInitData:function(e){return s.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var r=null;if(e){for(var s=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),a=[],u=0;u<s.kids.length;u++){var l=s.kids[u],d=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");a.push(new i.default(l,d))}r=new o.default(a),n.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return r}}}u.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default},{114:114,165:165,182:182,184:184}],173:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(165)),o=(e=r(e(114)),e.default.WIDEVINE_KEYSTEM_STRING);function s(e){var t=null,n=(e=e||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:o,init:function(e){e&&(t=e)},getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}s.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{114:114,165:165}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(52);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}e=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o),n.default=e,t.exports=n.default},{52:52}],175:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(169)),o=r(e(190)),s=r(e(239)),a=r(e(183)),u=r(e(186)),l=r(e(185)),d=r(e(174));function c(e){e=e||{};var t,n=this.context,r=e.eventBus,c=e.events,f=e.debug,h=e.api,p=e.errHandler,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0;function S(){g&&R();for(var e=0;e<E.length;e++)w(E[e]);r.trigger(c.TEARDOWN_COMPLETE)}function w(e){try{g[h.cancelKeyRequest](v.systemString,e.sessionID)}catch(t){r.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function A(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function R(){g.removeEventListener(h.keyerror,T),g.removeEventListener(h.needkey,T),g.removeEventListener(h.keymessage,T),g.removeEventListener(h.keyadded,T)}return t={getAllInitData:function(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);for(t=0;t<E.length;t++)e.push(E[t].initData);return e},requestKeySystemAccess:function(e){for(var t=(t=g)||document.createElement("video"),n=!1,i=0;i<e.length;i++)for(var o=e[i].ks.systemString,s=e[i].configs,a=null,d=0;d<s.length;d++){var f=s[d].videoCapabilities;if(f&&0!==f.length){a=[];for(var h=0;h<f.length;h++)""!==t.canPlayType(f[h].contentType,o)&&a.push(f[h])}if(a&&(!a||0!==a.length)){n=!0;var p=new u.default(null,a),m=y.getKeySystemBySystemString(o);r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:new l.default(m,p)});break}}n||r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return v},selectKeySystem:function(e){v=e.keySystem,r.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(g!==e){if(g){R();for(var t=0;t<E.length;t++)w(E[t]);E=[]}(g=e)&&(g.addEventListener(h.keyerror,T),g.addEventListener(h.needkey,T),g.addEventListener(h.keymessage,T),g.addEventListener(h.keyadded,T),r.trigger(c.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!v)throw new Error("Can not create sessions until you have selected a key system");if(b||0===E.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return _.push(t),g[h.generateKeyRequest](v.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(y.isClearKey(v))for(var r=0;r<t.keyPairs.length;r++)g[h.addKey](v.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else g[h.addKey](v.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:w,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:S,reset:S},m=f.getLogger(t),_=[],E=[],y=(v=g=null,i.default)(n).getInstance(),T={handleEvent:function(e){var t=null;switch(e.type){case h.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;r.trigger(c.NEED_KEY,{key:new o.default(n,"cenc")});break;case h.keyerror:if(t=(t=A(E,e.sessionId))||A(_,e.sessionId)){n=d.default.MEDIA_KEYERR_CODE;var i="";switch(e.errorCode.code){case 1:n=d.default.MEDIA_KEYERR_UNKNOWN_CODE,i+="MEDIA_KEYERR_UNKNOWN - "+d.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:n=d.default.MEDIA_KEYERR_CLIENT_CODE,i+="MEDIA_KEYERR_CLIENT - "+d.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:n=d.default.MEDIA_KEYERR_SERVICE_CODE,i+="MEDIA_KEYERR_SERVICE - "+d.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:n=d.default.MEDIA_KEYERR_OUTPUT_CODE,i+="MEDIA_KEYERR_OUTPUT - "+d.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:n=d.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,i+="MEDIA_KEYERR_HARDWARECHANGE - "+d.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:n=d.default.MEDIA_KEYERR_DOMAIN_CODE,i+="MEDIA_KEYERR_DOMAIN - "+d.default.MEDIA_KEYERR_DOMAIN_MESSAGE}i+="  System Code = "+e.systemCode,r.trigger(c.KEY_ERROR,{data:new s.default(n,i,t)})}else m.error("No session token found for key error");break;case h.keyadded:(t=(t=A(E,e.sessionId))||A(_,e.sessionId))?(m.debug("DRM: Key added."),r.trigger(c.KEY_ADDED,{data:t})):m.debug("No session token found for key added");break;case h.keymessage:(b=null!==e.sessionId&&void 0!==e.sessionId)?!(t=A(E,e.sessionId))&&0<_.length&&(t=_.shift(),E.push(t),t.sessionID=e.sessionId,r.trigger(c.KEY_SESSION_CREATED,{data:t})):0<_.length&&(t=_.shift(),E.push(t),0!==_.length&&p.error(new s.default(d.default.MEDIA_KEY_MESSAGE_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t?(i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,t.keyMessage=i,r.trigger(c.INTERNAL_KEY_MESSAGE,{data:new a.default(t,i,e.defaultURL)})):m.warn("No session token found for key message")}}},t}c.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(c),t.exports=n.default},{169:169,174:174,183:183,185:185,186:186,190:190,239:239}],176:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(169)),o=r(e(190)),s=r(e(174)),a=r(e(239)),u=r(e(183)),l=r(e(185)),d=r(e(114));function c(e){e=e||{};var t,n=this.context,r=e.eventBus,c=e.events,f=e.debug,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0;function E(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function b(e){for(var t=0;t<v.length;t++)if(v[t]===e){v.splice(t,1);break}}function T(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function S(e,t,n,i){var o={session:e,initData:t,sessionId:i,handleEvent:function(e){switch(e.type){case"keystatuseschange":r.trigger(c.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=T(arguments);"expired"===e.status?r.trigger(c.INTERNAL_KEY_STATUS_CHANGED,{error:new a.default(s.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,s.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):r.trigger(c.INTERNAL_KEY_STATUS_CHANGED,e)}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;r.trigger(c.INTERNAL_KEY_MESSAGE,{data:new u.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){"usable"===T(arguments).status&&(t=!0)})),t},getSessionType:function(){return n}};return e.addEventListener("keystatuseschange",o),e.addEventListener("message",o),e.closed.then((function(){b(o),h.debug("DRM: Session closed.  SessionID = "+o.getSessionID()),r.trigger(c.KEY_SESSION_CLOSED,{data:o.getSessionID()})})),v.push(o),o}return t={getAllInitData:function(){for(var e=[],t=0;t<v.length;t++)v[t].initData&&e.push(v[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,n){void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?function(n){var i=t[n].ks,o=t[n].configs,s=i.systemString;s===d.default.PLAYREADY_KEYSTEM_STRING&&"required"===o[0].persistentState&&(s+=".recommendation"),navigator.requestMediaKeySystemAccess(s,o).then((function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null;(t=new l.default(i,t)).mksa=e,r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:t})})).catch((function(i){++n<t.length?e(t,n):r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+i.message})}))}(n):r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"})}(e,0)},getKeySystem:function(){return p},selectKeySystem:function(e){e.mksa.createMediaKeys().then((function(t){p=e.keySystem,g=t,m?m.setMediaKeys(g).then((function(){r.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)})):r.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)})).catch((function(){r.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))},setMediaElement:function(e){m!==e&&(m&&(m.removeEventListener("encrypted",y),m.setMediaKeys&&m.setMediaKeys(null)),(m=e)&&(m.addEventListener("encrypted",y),m.setMediaKeys&&g&&m.setMediaKeys(g)))},setServerCertificate:function(e){if(!p||!g)throw new Error("Can not set server certificate until you have selected a key system");g.setServerCertificate(e).then((function(){h.info("DRM: License server certificate successfully updated."),r.trigger(c.SERVER_CERTIFICATE_UPDATED)})).catch((function(e){r.trigger(c.SERVER_CERTIFICATE_UPDATED,{error:new a.default(s.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,s.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))},createKeySession:function(e,t,n){if(!p||!g)throw new Error("Can not create sessions until you have selected a key system");var i=g.createSession(n),o=S(i,e,n);t=this.getKeySystem().systemString===d.default.CLEARKEY_KEYSTEM_STRING&&(e||t&&t.clearkeys)?"keyids":"cenc";i.generateRequest(t,e).then((function(){h.debug("DRM: Session created.  SessionID = "+o.getSessionID()),r.trigger(c.KEY_SESSION_CREATED,{data:o})})).catch((function(e){b(o),r.trigger(c.KEY_SESSION_CREATED,{data:null,error:new a.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))},updateKeySession:function(e,t){var n=e.session;_.isClearKey(p)&&(t=t.toJWK()),n.update(t).catch((function(t){r.trigger(c.KEY_ERROR,{data:new a.default(s.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))},loadKeySession:function(e,t,n){if(!p||!g)throw new Error("Can not load sessions until you have selected a key system");for(var i=0;i<v.length;i++)if(e===v[i].sessionId)return void h.warn("DRM: Ignoring session ID because we have already seen it!");var o=g.createSession(n),u=S(o,t,n,e);o.load(e).then((function(t){t?(h.debug("DRM: Session loaded.  SessionID = "+u.getSessionID()),r.trigger(c.KEY_SESSION_CREATED,{data:u})):(b(u),r.trigger(c.KEY_SESSION_CREATED,{data:null,error:new a.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})).catch((function(t){b(u),r.trigger(c.KEY_SESSION_CREATED,{data:null,error:new a.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))},removeKeySession:function(e){e.session.remove().then((function(){h.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),r.trigger(c.KEY_SESSION_REMOVED,{data:e.getSessionID()})}),(function(t){r.trigger(c.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})}))},closeKeySession:function(e){E(e).catch((function(t){b(e),r.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})}))},stop:function(){for(var e=void 0,t=0;t<v.length;t++)(e=v[t]).getUsable()||E(e).catch((function(){b(e)}))},reset:function(){var e=v.length,t=void 0;0!==e?function(){for(var n=function(e){b(e),0===v.length&&(m?(m.removeEventListener("encrypted",y),m.setMediaKeys(null).then((function(){r.trigger(c.TEARDOWN_COMPLETE)}))):r.trigger(c.TEARDOWN_COMPLETE))},i=0;i<e;i++)!function(e){t.session.closed.then((function(){n(e)})),E(t).catch((function(){n(e)}))}(t=v[i])}():r.trigger(c.TEARDOWN_COMPLETE)}},h=f.getLogger(t),v=[],_=(g=m=p=null,i.default)(n).getInstance(),y={handleEvent:function(e){var t;"encrypted"===e.type&&e.initData&&(t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,r.trigger(c.NEED_KEY,{key:new o.default(t,e.initDataType)}))}},t}c.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(c),t.exports=n.default},{114:114,169:169,174:174,183:183,185:185,190:190,239:239}],177:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(169)),o=r(e(190)),s=r(e(239)),a=r(e(174)),u=r(e(183)),l=r(e(186)),d=r(e(185));function c(e){e=e||{};var t,n=this.context,r=e.eventBus,c=e.events,f=e.debug,h=e.api,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0;function T(){try{for(var e=0;e<_.length;e++)S(_[e]);m&&m.removeEventListener(h.needkey,E),r.trigger(c.TEARDOWN_COMPLETE)}catch(e){r.trigger(c.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function S(e){var t=e.session;t.removeEventListener(h.error,e),t.removeEventListener(h.message,e),t.removeEventListener(h.ready,e),t.removeEventListener(h.close,e);for(var n=0;n<_.length;n++)if(_[n]===e){_.splice(n,1);break}t[h.release]()}function w(){function e(){m.removeEventListener("loadedmetadata",t),m[h.setMediaKeys](v),r.trigger(c.VIDEO_ELEMENT_SELECTED)}var t=null;1<=m.readyState?e():(t=e.bind(this),m.addEventListener("loadedmetadata",t))}return t={getAllInitData:function(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var i=e[n].ks.systemString,o=e[n].configs,s=null,a=null,u=0;u<o.length;u++){var f=o[u].audioCapabilities,p=o[u].videoCapabilities;if(f&&0!==f.length){s=[];for(var m=0;m<f.length;m++)window[h.MediaKeys].isTypeSupported(i,f[m].contentType)&&s.push(f[m])}if(p&&0!==p.length){a=[];for(var g=0;g<p.length;g++)window[h.MediaKeys].isTypeSupported(i,p[g].contentType)&&a.push(p[g])}if(!(!s&&!a||s&&0===s.length||a&&0===a.length)){t=!0;var v=new l.default(s,a),y=b.getKeySystemBySystemString(i);r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:new d.default(y,v)});break}}t||r.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return g},selectKeySystem:function(e){try{v=e.mediaKeys=new window[h.MediaKeys](e.keySystem.systemString),g=e.keySystem,y=e,m&&w(),r.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){r.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+g.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){m!==e&&(m&&m.removeEventListener(h.needkey,E),(m=e)&&(m.addEventListener(h.needkey,E),v&&w()))},createKeySession:function(e,t,n,i){if(!g||!v||!y)throw new Error("Can not create sessions until you have selected a key system");var o=null;if(y.ksConfiguration.videoCapabilities&&0<y.ksConfiguration.videoCapabilities.length&&(o=y.ksConfiguration.videoCapabilities[0]),null===o&&y.ksConfiguration.audioCapabilities&&0<y.ksConfiguration.audioCapabilities.length&&(o=y.ksConfiguration.audioCapabilities[0]),null===o)throw new Error("Can not create sessions for unknown content types.");o=o.contentType,e={session:i=v.createSession(o,new Uint8Array(e),i?new Uint8Array(i):null),initData:e,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case h.error:r.trigger(c.KEY_ERROR,{data:new s.default(a.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case h.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;r.trigger(c.INTERNAL_KEY_MESSAGE,{data:new u.default(this,t,e.destinationURL)});break;case h.ready:p.debug("DRM: Key added."),r.trigger(c.KEY_ADDED);break;case h.close:p.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),r.trigger(c.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}},i.addEventListener(h.error,e),i.addEventListener(h.message,e),i.addEventListener(h.ready,e),i.addEventListener(h.close,e),_.push(e),p.debug("DRM: Session created.  SessionID = "+e.getSessionID()),r.trigger(c.KEY_SESSION_CREATED,{data:e})},updateKeySession:function(e,t){e=e.session,b.isClearKey(g)?e.update(new Uint8Array(t.toJWK())):e.update(new Uint8Array(t))},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:T,reset:T},p=f.getLogger(t),_=[],b=(y=v=g=m=null,i.default)(n).getInstance(),E={handleEvent:function(e){e.type===h.needkey&&e.initData&&(e=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData,r.trigger(c.NEED_KEY,{key:new o.default(e,"cenc")}))}},t}c.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(c),t.exports=n.default},{169:169,174:174,183:183,185:185,186:186,190:190,239:239}],178:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(184)),o=r(e(182));function s(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=(s=e.keys[n]).kid.replace(/=/g,""),s=s.k.replace(/=/g,"");t.push(new i.default(r,s))}return new o.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}s.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(s),t.exports=n.default},{182:182,184:184}],179:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(114))&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).BASE64,n={};return n[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,r){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{114:114}],180:[function(e,t,n){"use strict";function r(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){return e=String.fromCharCode.apply(null,new Uint8Array(e)),decodeURIComponent(escape(e))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(n){return function(n){if(window.DOMParser){var r=t(n);if((r=(r=(r=(new window.DOMParser).parseFromString(r,"text/xml"))?r.getElementsByTagNameNS(e,"Envelope")[0]:null)?r.getElementsByTagNameNS(e,"Body")[0]:null)&&r.getElementsByTagNameNS(e,"Fault")[0])return null}return n}.call(this,n)},getErrorResponse:function(n){return function(n){var r="",i="",o="";if(window.DOMParser){var s,a=t(n),u=(n=(u=(s=(new window.DOMParser).parseFromString(a,"text/xml"))?s.getElementsByTagNameNS(e,"Envelope")[0]:null)?u.getElementsByTagNameNS(e,"Body")[0]:null,n=(u=(s=n?n.getElementsByTagNameNS(e,"Fault")[0]:null)?s.getElementsByTagName("detail")[0]:null)?u.getElementsByTagName("Exception")[0]:null,null);if(null===s)return a;r=(u=s.getElementsByTagName("faultstring")[0].firstChild)?u.nodeValue:null,null!==n&&(i=(u=n.getElementsByTagName("StatusCode")[0])?u.firstChild.nodeValue:null,n=(o=(u=n.getElementsByTagName("Message")[0])?u.firstChild.nodeValue:null)?o.lastIndexOf("[")+1:-1,u=o?o.indexOf("]"):-1,o=o?o.substring(n,u):"")}return r="code: "+i+", name: "+r,o&&(r+=", message: "+o),r}.call(this,n)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],181:[function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],182:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),o=i.length,s=new ArrayBuffer(o),a=new Uint8Array(s);for(e=0;e<o;e++)a[e]=i.charCodeAt(e);return s}}]),o);function o(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}n.default=i,t.exports=n.default},{}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"},t.exports=n.default},{}],184:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],185:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=o},t.exports=n.default},{}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r,i,o,s,a,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.method=n,this.responseType=r,this.headers=i,this.withCredentials=o,this.messageType=s,this.sessionId=a,this.data=u},t.exports=n.default},{}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.headers=n,this.data=r},t.exports=n.default},{}],189:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],190:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(){var e=[],t=0,n=0;return{push:function(r,i){var o=i&&i.droppedVideoFrames?i.droppedVideoFrames:0,s=i&&i.totalVideoFrames?i.totalVideoFrames:0;i=o-t;t=o,o=s-n,n=s,isNaN(r)||(e[r]?(e[r].droppedVideoFrames+=i,e[r].totalVideoFrames+=o):e[r]={droppedVideoFrames:i,totalVideoFrames:o})},getFrameHistory:function(){return e},reset:function(r){e=[],t=r.droppedVideoFrames,n=r.totalVideoFrames}}}i.__dashjs_factory_name="DroppedFramesHistory",e=e.default.getClassFactory(i),n.default=e,t.exports=n.default},{47:47}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,o=e.useBufferOccupancyABR,s=e.useL2AABR,a=e.useLoLPABR,u=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,d=e.videoModel?e.videoModel:null;function c(){return l?l.mediaInfo:null}return{getMediaType:function(){var e=c();return e?e.type:null},getMediaInfo:c,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=c();return e?e.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return t},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return o},useL2AABR:function(){return s},useLoLPABR:function(){return a},getVideoModel:function(){return d}}}i.__dashjs_factory_name="RulesContext",n.default=e.default.getClassFactory(i),t.exports=n.default},{47:47}],193:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(47))&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};function s(e,t,n){var r;return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:(r=n)!==o.DEFAULT&&r!==o.STRONG&&r!==o.WEAK?o.DEFAULT:r}}s.__dashjs_factory_name="SwitchRequest",(e=i.default.getClassFactory(s)).NO_CHANGE=-1,e.PRIORITY=o,i.default.updateClassFactory(s.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{47:47}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(193));function s(){var e=[],t=[];return{push:function(n){n.newValue===o.default.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=(s=n.newValue-n.oldValue)<0?1:0,i=r?-s:0,s=r?0:1;e[n.oldValue].drops+=r,e[n.oldValue].dropSize+=i,e[n.oldValue].noDrops+=s,t.push({idx:n.oldValue,noDrop:s,drop:r,dropSize:i}),8<t.length&&(i=t.shift(),e[i.idx].drops-=i.drop,e[i.idx].dropSize-=i.dropSize,e[i.idx].noDrops-=i.noDrop)},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}s.__dashjs_factory_name="SwitchRequestHistory",i=i.default.getClassFactory(s),n.default=i,t.exports=n.default},{193:193,47:47}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112));e=r(e(47));function o(e){var t=(e=e||{}).settings,n=void 0,r=void 0,o=void 0,s=void 0,a=void 0;function u(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate,r=Math.pow(.5,n/r.slow),e.slowEstimate=(1-r)*t+r*e.slowEstimate,e.totalWeight+=n}function l(e,u,l){return t.get().streaming.abr.movingAverageMethod!==i.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?a.throughputHalfLife:a.latencyHalfLife,r=(e?o:s)[t];return!r||r.totalWeight<=0?NaN:(t=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),n=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow)),e?Math.min(t,n):Math.max(t,n))}(e,u):function(e,t,i){return i=function(e,t,i){var o=void 0,s=void 0;s=e?(o=n[t],i?3:4):(o=r[t],4);if(o){if(s>=o.length)s=o.length;else if(e)for(var a=1;a<s;++a){var u=o[o.length-a]/o[o.length-a-1];if((1.3<=u||u<=1/1.3)&&(s+=1)===o.length)break}}else s=0;return s}(e,t,i),t=(e?n:r)[t],0!==i&&t&&0!==t.length?(t=t.slice(-i)).reduce((function(e,t){return e+t}))/t.length:NaN}(e,u,l)}function d(e,t){return l(!0,e,t)}function c(e){n[e]=n[e]||[],r[e]=r[e]||[],o[e]=o[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},s[e]=s[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function f(){n={},r={},o={},s={}}return e={push:function(e,l,d){if(l.trace&&l.trace.length){var f=l.tresponse.getTime()-l.trequest.getTime()||1,h=l._tfinish.getTime()-l.tresponse.getTime()||1,p=l.trace.reduce((function(e,t){return e+t.b[0]}),0),m=void 0;m=t.get().streaming.lowLatencyEnabled?l.trace.reduce((function(e,t){return e+t.d}),0):d?h:f+h,d=Math.round(8*p/m);if(c(e),p=h,(m=e)===i.default.VIDEO?p<t.get().streaming.cacheLoadThresholds[i.default.VIDEO]:m===i.default.AUDIO&&p<t.get().streaming.cacheLoadThresholds[i.default.AUDIO]){if(0<n[e].length&&!n[e].hasCachedEntries)return;n[e].hasCachedEntries=!0}else n[e]&&n[e].hasCachedEntries&&(delete n[p=e],delete r[p],delete o[p],delete s[p],c(p));n[e].push(d),20<n[e].length&&n[e].shift(),r[e].push(f),20<r[e].length&&r[e].shift(),u(o[e],d,.001*h,a.throughputHalfLife),u(s[e],f,1,a.latencyHalfLife)}},getAverageThroughput:d,getSafeAverageThroughput:function(e,n){return n=d(e,n),isNaN(n)||(n*=t.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(e){return l(!1,e)},reset:f},a={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},f(),e}o.__dashjs_factory_name="ThroughputHistory",n.default=e.default.getClassFactory(o),t.exports=n.default},{112:112,47:47}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(203)),o=r(e(200)),s=r(e(197)),a=r(e(199)),u=r(e(202)),l=r(e(198)),d=r(e(201)),c=r(e(206)),f=r(e(47)),h=r(e(193)),p=r(e(112)),m="qualitySwitchRules",g="abandonFragmentRules";function v(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,r=e.dashMetrics,f=e.settings,v=void 0,y=void 0;function _(e){return e.filter((function(e){return e.quality>h.default.NO_CHANGE}))}function E(e){var n,r,i={},o=null,s=void 0,a=void 0,u=void 0;if(0!==e.length){for(i[h.default.PRIORITY.STRONG]={quality:h.default.NO_CHANGE,reason:null},i[h.default.PRIORITY.WEAK]={quality:h.default.NO_CHANGE,reason:null},i[h.default.PRIORITY.DEFAULT]={quality:h.default.NO_CHANGE,reason:null},s=0,n=e.length;s<n;s+=1)(r=e[s]).quality!==h.default.NO_CHANGE&&(i[r.priority].quality===h.default.NO_CHANGE||i[r.priority].quality>r.quality)&&(i[r.priority].quality=r.quality,i[r.priority].reason=r.reason||null);return i[h.default.PRIORITY.WEAK].quality!==h.default.NO_CHANGE&&(o=i[h.default.PRIORITY.WEAK]),i[h.default.PRIORITY.DEFAULT].quality!==h.default.NO_CHANGE&&(o=i[h.default.PRIORITY.DEFAULT]),i[h.default.PRIORITY.STRONG].quality!==h.default.NO_CHANGE&&(o=i[h.default.PRIORITY.STRONG]),o&&(a=o.quality,u=o.reason),(0,h.default)(t).create(a,u)}}return{initialize:function(){v=[],y=[],f.get().streaming.abr.useDefaultABRRules&&(f.get().streaming.abr.ABRStrategy===p.default.ABR_STRATEGY_L2A?v.push((0,d.default)(t).create({dashMetrics:r,mediaPlayerModel:n,settings:f})):f.get().streaming.abr.ABRStrategy===p.default.ABR_STRATEGY_LoLP?v.push((0,c.default)(t).create({dashMetrics:r})):(v.push((0,l.default)(t).create({dashMetrics:r,mediaPlayerModel:n,settings:f})),v.push((0,i.default)(t).create({dashMetrics:r})),v.push((0,o.default)(t).create({dashMetrics:r})),v.push((0,u.default)(t).create()),v.push((0,a.default)(t).create()),y.push((0,s.default)(t).create({dashMetrics:r,mediaPlayerModel:n,settings:f})))),n.getABRCustomRules().forEach((function(e){e.type===m&&v.push(e.rule(t).create()),e.type===g&&y.push(e.rule(t).create())}))},reset:function(){[v,y].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),v=[],y=[]},getMaxQuality:function(e){return E(_(v.map((function(t){return t.getMaxIndex(e)}))))||(0,h.default)(t).create()},getMinSwitchRequest:E,shouldAbandonFragment:function(e){return E(_(y.map((function(t){return t.shouldAbandon(e)}))))||(0,h.default)(t).create()},getQualitySwitchRules:function(){return v}}}v.__dashjs_factory_name="ABRRulesCollection",(e=f.default.getClassFactory(v)).QUALITY_SWITCH_RULES=m,e.ABANDON_FRAGMENT_RULES=g,f.default.updateSingletonFactory(v.__dashjs_factory_name,e),n.default=e,t.exports=n.default},{112:112,193:193,197:197,198:198,199:199,200:200,201:201,202:202,203:203,206:206,47:47}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(193)),o=r(e(47)),s=r(e(45));function a(e){e=e||{};var t,n=this.context,r=e.mediaPlayerModel,o=e.dashMetrics,u=e.settings,l=void 0,d=void 0,c=void 0,f=void 0;function h(){d={},c={},f=[]}return t={shouldAbandon:function(e){var t=(0,i.default)(n).create(i.default.NO_CHANGE,{name:a.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var s,h=e.getMediaInfo(),p=e.getMediaType(),m=e.getCurrentRequest();if(!isNaN(m.index)){if(s=p,g=m.index,d[s]=d[s]||{},d[s][g]=d[s][g]||{},r.getStableBufferTime()<o.getCurrentBufferLevel(p))return t;var g=d[p][m.index];if(null===g||null===m.firstByteDate||c.hasOwnProperty(g.id))return t;if(void 0===g.firstByteTime&&(f[p]=[],g.firstByteTime=m.firstByteDate.getTime(),g.segmentDuration=m.duration,g.bytesTotal=m.bytesTotal,g.id=m.index),g.bytesLoaded=m.bytesLoaded,g.elapsedTime=(new Date).getTime()-g.firstByteTime,0<g.bytesLoaded&&0<g.elapsedTime&&(v=p,y=Math.round(8*g.bytesLoaded/g.elapsedTime),f[v]=f[v]||[],f[v].push(y)),5<=f[p].length&&500<g.elapsedTime&&g.bytesLoaded<g.bytesTotal){var v,y;m=f[p].reduce((function(e,t){return e+t}),0);if(g.measuredBandwidthInKbps=Math.round(m/f[p].length),g.estimatedTimeOfDownload=+(8*g.bytesTotal/g.measuredBandwidthInKbps/1e3).toFixed(2),g.estimatedTimeOfDownload<1.8*g.segmentDuration||0===e.getRepresentationInfo().quality)return t;c.hasOwnProperty(g.id)||(v=e.getAbrController(),y=g.bytesTotal-g.bytesLoaded,m=v.getBitrateList(h),e=v.getQualityForBitrate(h,g.measuredBandwidthInKbps*u.get().streaming.abr.bandwidthSafetyFactor),e=void 0!==(h=v.getMinAllowedIndexFor(p))?Math.max(h,e):e,g.bytesTotal*m[e].bitrate/m[v.getQualityFor(p)].bitrate<y&&(t.quality=e,t.reason.throughput=g.measuredBandwidthInKbps,t.reason.fragmentID=g.id,c[g.id]=g,l.debug("["+p+"] frag id",g.id," is asking to abandon and switch to quality to ",e," measured bandwidth was",g.measuredBandwidthInKbps),delete d[p][g.id]))}else g.bytesLoaded===g.bytesTotal&&delete d[p][g.id]}return t},reset:h},l=(0,s.default)(n).getInstance().getLogger(t),h(),t}a.__dashjs_factory_name="AbandonRequestsRule",n.default=o.default.getClassFactory(a),t.exports=n.default},{193:193,45:45,47:47}],198:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(113)),o=r(e(193)),s=r(e(47)),a=e(255),u=r(e(46)),l=r(e(54)),d=r(e(45));function c(e){e=e||{};var t=this.context,n=e.dashMetrics,r=e.mediaPlayerModel,s=(0,u.default)(t).getInstance(),c=void 0,f=void 0,h=void 0;function p(e,t,n){var r=n.reduce((function(e,t,r){return t>n[e]?r:e}),0);return 0===r?null:(t=Math.max(e,10+2*t.length),{gp:t=(n[r]-1)/(t/10-1),Vp:10/t})}function m(e){var t={},n=e.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),i=(i=n.map((function(e){return Math.log(e)}))).map((function(e){return e-i[0]+1})),o=r.getStableBufferTime();return(e=p(o,n,i))?(t.state=1,t.bitrates=n,t.utilities=i,t.stableBufferTime=o,t.Vp=e.Vp,t.gp=e.gp,t.lastQuality=0,g(t)):t.state=0,t}function g(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function v(e,t){var i,o,s=r.getStableBufferTime();e.stableBufferTime!==s&&((i=p(s,e.bitrates,e.utilities)).Vp===e.Vp&&i.gp===e.gp||(t=(o=n.getCurrentBufferLevel(t))+e.placeholderBuffer,t-=10,t*=i.Vp/e.Vp,t+=10,e.stableBufferTime=s,e.Vp=i.Vp,e.gp=i.gp,e.placeholderBuffer=Math.max(0,t-o)))}function y(e,t){return e.Vp*(e.utilities[t]+e.gp)}function _(e,t){for(var n,r,i=e.bitrates[t],o=e.utilities[t],s=0,a=t-1;0<=a;--a)e.utilities[a]<e.utilities[t]&&(r=e.bitrates[a],n=e.utilities[a],r=e.Vp*(e.gp+(i*n-r*o)/(i-r)),s=Math.max(s,r));return s}function E(){for(var e in h)h.hasOwnProperty(e)&&2===h[e].state&&(h[e].placeholderBuffer=0)}function b(){for(var e in h){var t;!h.hasOwnProperty(e)||0!==(t=h[e]).state&&(t.state=1,g(t))}}function T(e){var t,n;e&&e.chunk&&e.chunk.mediaInfo&&(t=h[e.chunk.mediaInfo.type])&&0!==t.state&&(n=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,w(t,e.chunk.mediaInfo.type))}function S(e){var t;e&&e.metric===i.default.HTTP_REQUEST&&e.value&&e.value.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=h[e.mediaType])&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),w(t,e.mediaType))}function w(e,t){var r;isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||isNaN(e.placeholderBuffer)||(e.placeholderBuffer*=.99,isNaN(e.lastSegmentFinishTimeMs)||(r=n.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),t=y(e,e.lastQuality),r=Math.max(0,t-r),e.placeholderBuffer=Math.min(r,e.placeholderBuffer)),e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function A(e){var t;!e||(t=h[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function R(e){var t,r;!e||(t=h[e.mediaType])&&0!==t.state&&(r=n.getCurrentBufferLevel(e.mediaType),e=void 0,e=0<t.abrQuality?_(t,t.abrQuality):10,r=Math.max(0,e-r),t.placeholderBuffer=Math.min(t.placeholderBuffer,r))}function C(){h={}}return c={getMaxIndex:function(e){var r=(0,o.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return r;var i=e.getMediaInfo(),s=e.getMediaType(),a=e.getScheduleController(),u=e.getStreamInfo(),l=e.getAbrController(),d=l.getThroughputHistory(),c=u?u.id:null,p=u&&u.manifestInfo&&u.manifestInfo.isDynamic,E=e.useBufferOccupancyABR();if(r.reason=r.reason||{},!E)return r;a.setTimeToLoadDelay(0);var b=(A=(w=e).getMediaType(),(T=h[A])?0!==T.state&&v(T,A):(T=m(w),h[A]=T),T);if(0===b.state)return r;u=n.getCurrentBufferLevel(s),E=d.getAverageThroughput(s,p),e=d.getSafeAverageThroughput(s,p);var T,S,w=d.getAverageLatency(s),A=void 0;if(r.reason.state=b.state,r.reason.throughput=E,r.reason.latency=w,isNaN(E))return r;switch(b.state){case 1:A=l.getQualityForBitrate(i,e,w),r.quality=A,r.reason.throughput=e,b.placeholderBuffer=Math.max(0,_(b,A)-u),b.lastQuality=A,!isNaN(b.lastSegmentDurationS)&&u>=b.lastSegmentDurationS&&(b.state=2);break;case 2:T=b,p=s,d=Date.now(),isNaN(T.lastSegmentFinishTimeMs)?isNaN(T.lastCallTimeMs)||(S=.001*(d-T.lastCallTimeMs),T.placeholderBuffer+=Math.max(0,S)):(S=.001*(d-T.lastSegmentFinishTimeMs),T.placeholderBuffer+=Math.max(0,S)),T.lastCallTimeMs=d,T.lastSegmentStart=NaN,T.lastSegmentRequestTimeMs=NaN,T.lastSegmentFinishTimeMs=NaN,v(T,p),A=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,o=0;o<n;++o){var s=(e.Vp*(e.utilities[o]+e.gp)-t)/e.bitrates[o];(isNaN(i)||i<=s)&&(i=s,r=o)}return r}(b,u+b.placeholderBuffer),p=l.getQualityForBitrate(i,e,w),A>b.lastQuality&&p<A&&(A=Math.max(p,b.lastQuality)),(p=Math.max(0,u+b.placeholderBuffer-y(b,A)))<=b.placeholderBuffer?(b.placeholderBuffer-=p,p=0):(p-=b.placeholderBuffer,b.placeholderBuffer=0,A<l.getTopQualityIndexFor(s,c)?a.setTimeToLoadDelay(1e3*p):p=0),r.quality=A,r.reason.throughput=E,r.reason.latency=w,r.reason.bufferLevel=u,r.reason.placeholderBuffer=b.placeholderBuffer,r.reason.delay=p,b.lastQuality=A;break;default:f.debug("BOLA ABR rule invoked in bad state."),r.quality=l.getQualityForBitrate(i,e,w),r.reason.state=b.state,r.reason.throughput=e,r.reason.latency=w,b.state=1,g(b)}return r},reset:function(){C(),s.off(l.default.BUFFER_EMPTY,E,c),s.off(l.default.PLAYBACK_SEEKING,b,c),s.off(l.default.MEDIA_FRAGMENT_LOADED,T,c),s.off(l.default.METRIC_ADDED,S,c),s.off(l.default.QUALITY_CHANGE_REQUESTED,A,c),s.off(l.default.FRAGMENT_LOADING_ABANDONED,R,c)}},f=(0,d.default)(t).getInstance().getLogger(c),C(),s.on(l.default.BUFFER_EMPTY,E,c),s.on(l.default.PLAYBACK_SEEKING,b,c),s.on(l.default.MEDIA_FRAGMENT_LOADED,T,c),s.on(l.default.METRIC_ADDED,S,c),s.on(l.default.QUALITY_CHANGE_REQUESTED,A,c),s.on(l.default.FRAGMENT_LOADING_ABANDONED,R,c),c}c.__dashjs_factory_name="BolaRule",n.default=s.default.getClassFactory(c),t.exports=n.default},{113:113,193:193,255:255,45:45,46:46,47:47,54:54}],199:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(193)),s=r(e(45));function a(){var e,t=this.context,n=void 0;return e={getMaxIndex:function(e){var r=(0,o.default)(t).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return r;if(e=e.getDroppedFramesHistory()){for(var i,s=e.getFrameHistory(),a=0,u=o.default.NO_CHANGE,l=1;l<s.length;l++)if(s[l]&&(a=s[l].droppedVideoFrames,375<(i=s[l].totalVideoFrames)&&.15<a/i)){u=l-1,n.debug("index: "+u+" Dropped Frames: "+a+" Total Frames: "+i);break}return(0,o.default)(t).create(u,{droppedFrames:a})}return r}},n=(0,s.default)(t).getInstance().getLogger(e),e}a.__dashjs_factory_name="DroppedFramesRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{193:193,45:45,47:47}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(54)),s=r(e(47)),a=r(e(45)),u=r(e(193)),l=r(e(112)),d=r(e(113));function c(e){e=e||{};var t=this.context,n=(0,i.default)(t).getInstance(),r=e.dashMetrics,s=void 0,c=void 0,f=void 0;function h(){(f={})[l.default.VIDEO]={ignoreCount:2},f[l.default.AUDIO]={ignoreCount:2}}function p(){h()}function m(e){isNaN(e.startTime)||e.mediaType!==l.default.AUDIO&&e.mediaType!==l.default.VIDEO||0<f[e.mediaType].ignoreCount&&f[e.mediaType].ignoreCount--}return s={getMaxIndex:function(e){var n=(0,u.default)(t).create();if(!e||!e.hasOwnProperty("getMediaType"))return n;!function(){if(!r||!r.hasOwnProperty("getCurrentBufferLevel")||!r.hasOwnProperty("getCurrentBufferState"))throw new Error(l.default.MISSING_CONFIG_ERROR)}();var i,o,s,a=e.getMediaType(),h=r.getCurrentBufferState(a),p=e.getRepresentationInfo().fragmentDuration;return 0<f[a].ignoreCount||!p||(h&&h.state===d.default.BUFFER_EMPTY?(c.debug("["+a+"] Switch to index 0; buffer is empty."),n.quality=0,n.reason="InsufficientBufferRule: Buffer is empty"):(i=e.getMediaInfo(),s=(o=e.getAbrController()).getThroughputHistory(),h=r.getCurrentBufferLevel(a),e=s.getAverageThroughput(a),a=s.getAverageLatency(a),p=e*(h/p)*.5,n.quality=o.getQualityForBitrate(i,p,a),n.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering")),n},reset:function(){h(),n.off(o.default.PLAYBACK_SEEKING,p,s),n.off(o.default.BYTES_APPENDED_END_FRAGMENT,m,s)}},c=(0,a.default)(t).getInstance().getLogger(s),h(),n.on(o.default.PLAYBACK_SEEKING,p,s),n.on(o.default.BYTES_APPENDED_END_FRAGMENT,m,s),s}c.__dashjs_factory_name="InsufficientBufferRule",n.default=s.default.getClassFactory(c),t.exports=n.default},{112:112,113:113,193:193,45:45,46:46,47:47,54:54}],201:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(113)),o=r(e(193)),s=r(e(47)),a=e(255),u=r(e(46)),l=r(e(54)),d=r(e(45)),c=r(e(112));function f(e){e=e||{};var t=this.context,n=e.dashMetrics,r=(0,u.default)(t).getInstance(),s=void 0,f=void 0,h=void 0,p=void 0;function m(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function g(){for(var e in f){var t;!f.hasOwnProperty(e)||0!==(t=f[e]).state&&(t.state=1,m(t))}}function v(e){var t,n,r;e&&e.chunk&&e.chunk.mediaInfo&&(t=f[e.chunk.mediaInfo.type],n=h[e.chunk.mediaInfo.type],t&&0!==t.state&&(r=e.chunk.start,isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,_(t,n)))}function y(e){var t,n;e&&e.metric===i.default.HTTP_REQUEST&&e.value&&e.value.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length&&(t=f[e.mediaType],n=h[e.mediaType],t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),_(t,n)))}function _(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function E(e){var t;e&&e.mediaType&&(t=f[e.mediaType])&&0!==t.state&&(t.abrQuality=e.newQuality)}function b(e,t){if(e.length!==t.length)return-1;for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function T(){f={},h={}}return s={getMaxIndex:function(e){var r=(0,o.default)(t).create(),i=Math.pow(4,.99),s=Math.max(Math.pow(4,1),i*Math.sqrt(4)),a=e.getMediaInfo(),u=e.getMediaType(),l=a.bitrateList.map((function(e){return e.bandwidth})),d=l.length,g=e.getScheduleController(),v=e.getStreamInfo(),y=e.getAbrController(),_=y.getThroughputHistory(),E=v&&v.manifestInfo&&v.manifestInfo.isDynamic,T=e.useL2AABR(),S=n.getCurrentBufferLevel(u,!0),w=_.getSafeAverageThroughput(u,E),A=(v=_.getAverageThroughput(u,E),E=_.getAverageLatency(u),_=void 0,e.getVideoModel().getPlaybackRate());if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")))return r;if(r.reason=r.reason||{},!T||u===c.default.AUDIO)return r;g.setTimeToLoadDelay(0);var R=(g=(T=e).getMediaType(),(e=f[g])||(e=function(e){var t={},n=e.getMediaInfo();return e=n.bitrateList.map((function(e){return e.bandwidth/1e3})),t.state=1,t.bitrates=e,t.lastQuality=0,function(e){e&&e.type&&(h[e.type]={},h[e.type].w=[],h[e.type].prev_w=[],h[e.type].Q=0,h[e.type].segment_request_start_s=0,h[e.type].segment_download_finish_s=0,h[e.type].B_target=1.5)}(n),m(t),t}(T),f[g]=e),e);if(0===R.state)return r;var C=h[u];if(!C)return r;if(r.reason.state=R.state,r.reason.throughput=v,r.reason.latency=E,isNaN(v))return r;switch(R.state){case 1:if(_=y.getQualityForBitrate(a,w,E),r.quality=_,r.reason.throughput=w,R.lastQuality=_,!isNaN(R.lastSegmentDurationS)&&S>=C.B_target){R.state=2,C.Q=i;for(var I=0;I<d;++I)I===R.lastQuality?C.prev_w[I]=1:C.prev_w[I]=0}break;case 2:var O=[],D=(e=n.getCurrentHttpRequest(u).trace.reduce((function(e,t){return e+t.d}),0),u=n.getCurrentHttpRequest(u).trace.reduce((function(e,t){return e+t.b[0]}),0),Math.round(8*u/e));D<1&&(D=1);var M=R.lastSegmentDurationS,N=1;for(I=0;I<d;++I)l[I]=l[I]/1e3,A*l[I]>D&&(N=-1),C.w[I]=C.prev_w[I]+N*(M/(2*s))*((C.Q+i)*(A*l[I]/D));for(C.w=function(e){for(var t=e.length,n=!1,r=[],i=0;i<t;++i)r[i]=e[i];var o=e.sort((function(e,t){return t-e})),s=0,a=0,u=[];for(i=0;i<t-1;++i)if((a=((s+=o[i])-1)/(i+1))>=o[i+1]){n=!0;break}for(n||(a=(s+o[t-1]-1)/t),i=0;i<t;++i)u[i]=Math.max(r[i]-a,0);return u}(C.w),I=0;I<d;++I)O[I]=C.w[I]-C.prev_w[I],C.prev_w[I]=C.w[I];C.Q=Math.max(0,C.Q-M+M*A*((b(l,C.prev_w)+b(l,O))/D));var P=[];for(I=0;I<d;++I)P[I]=Math.abs(l[I]-b(C.w,l));(_=P.indexOf(Math.min.apply(Math,P)))>R.lastQuality&&l[R.lastQuality+1]<=D&&(_=R.lastQuality+1),l[_]>=D&&(C.Q=2*Math.max(i,C.Q)),r.quality=_,r.reason.throughput=v,r.reason.latency=E,r.reason.bufferLevel=S,R.lastQuality=r.quality;break;default:p.debug("L2A ABR rule invoked in bad state."),r.quality=y.getQualityForBitrate(a,w,E),r.reason.state=R.state,r.reason.throughput=w,r.reason.latency=E,R.state=1,m(R)}return r},reset:function(){T(),r.off(l.default.PLAYBACK_SEEKING,g,s),r.off(l.default.MEDIA_FRAGMENT_LOADED,v,s),r.off(l.default.METRIC_ADDED,y,s),r.off(l.default.QUALITY_CHANGE_REQUESTED,E,s)}},p=(0,d.default)(t).getInstance().getLogger(s),T(),r.on(l.default.PLAYBACK_SEEKING,g,s),r.on(l.default.MEDIA_FRAGMENT_LOADED,v,s),r.on(l.default.METRIC_ADDED,y,s),r.on(l.default.QUALITY_CHANGE_REQUESTED,E,s),s}f.__dashjs_factory_name="L2ARule",n.default=s.default.getClassFactory(f),t.exports=n.default},{112:112,113:113,193:193,255:255,45:45,46:46,47:47,54:54}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(193));function a(){var e,t=this.context,n=void 0;return e={getMaxIndex:function(e){for(var r=(e=e?e.getSwitchHistory():null)?e.getSwitchRequests():[],i=0,o=0,a=0,u=(0,s.default)(t).create(),l=0;l<r.length;l++)if(void 0!==r[l]&&(i+=r[l].drops,o+=r[l].noDrops,a+=r[l].dropSize,6<=i+o&&.075<i/o)){u.quality=0<l&&0<r[l].drops?l-1:l,u.reason={index:u.quality,drops:i,noDrops:o,dropSize:a},n.debug("Switch history rule index: "+u.quality+" samples: "+(i+o)+" drops: "+i);break}return u}},n=(0,o.default)(t).getInstance().getLogger(e),e}a.__dashjs_factory_name="SwitchHistoryRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{193:193,45:45,47:47}],203:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(193)),a=r(e(112)),u=r(e(113));function l(e){e=e||{};var t,n=this.context,r=e.dashMetrics,i=void 0;return t={getMaxIndex:function(e){var t=(0,s.default)(n).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!r||!r.hasOwnProperty("getCurrentBufferState"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var o=e.getMediaInfo(),l=e.getMediaType(),d=r.getCurrentBufferState(l),c=e.getScheduleController(),f=e.getAbrController(),h=(p=e.getStreamInfo())&&p.manifestInfo?p.manifestInfo.isDynamic:null,p=(m=f.getThroughputHistory()).getSafeAverageThroughput(l,h),m=m.getAverageLatency(l);e=e.useBufferOccupancyABR();return isNaN(p)||!d||e||f.getAbandonmentStateFor(l)!==u.default.ABANDON_LOAD&&(d.state!==u.default.BUFFER_LOADED&&!h||(t.quality=f.getQualityForBitrate(o,p,m),c.setTimeToLoadDelay(0),i.debug("["+l+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(p),"kbps"),t.reason={throughput:p,latency:m})),t},reset:function(){}},i=(0,o.default)(n).getInstance().getLogger(t),t}l.__dashjs_factory_name="ThroughputRule",n.default=i.default.getClassFactory(l),t.exports=n.default},{112:112,113:113,193:193,45:45,47:47}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s="dynamic_weight_selection";function a(){var e,t=this.context,n=void 0,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,d=void 0,c=void 0;function f(){i=1,a=100,u=0,d=l=r=null,c=s}function h(){var e=0;if(r)for(var t=0;t<r.length;t++){var n=r[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function p(e,t,n){return e=e.map((function(e,r){return n[r]*Math.pow(e-t[r],2)})).reduce((function(e,t){return e+t})),(e<0?-1:1)*Math.sqrt(Math.abs(e))}function m(e,t,n){for(var r,i=0;i<t.length;i++){var o=t[i],s=(r=e,p([(a=o).state.throughput,a.state.latency,a.state.rebuffer,a.state.switch],[r.state.throughput,r.state.latency,r.state.rebuffer,r.state.switch],[1,1,1,1])),a=Math.exp(-1*Math.pow(s,2)/(2*Math.pow(.1,2)));r=n,s=a,a=void 0,a=o.state,o=[.01,.01,.01,.01],a.throughput=a.throughput+(r[0]-a.throughput)*o[0]*s,a.latency=a.latency+(r[1]-a.latency)*o[1]*s,a.rebuffer=a.rebuffer+(r[2]-a.rebuffer)*o[2]*s,a.switch=a.switch+(r[3]-a.switch)*o[3]*s}}function g(e,t,n,r,i,o,s){l=l||d[d.length-1],null!==(s=e.findWeightVector(t,n,r,i,o,s))&&-1!==s&&(l=s)}return e={getNextQuality:function(e,t,o,s,f,v,y){var _=o,E=s,b=t,T=function(e){return r||function(){r=[];var t,n=e.bitrateList,o=[];u=n[0].bandwidth,n.forEach((function(e){o.push(e.bandwidth),e.bandwidth<u&&(u=e.bandwidth)})),t=(t=o).map((function(e){return Math.pow(e,2)})).reduce((function(e,t){return e+t})),i=Math.sqrt(t);for(var s=0;s<n.length;s++){var a={qualityIndex:s,bitrate:n[s].bandwidth,state:{throughput:n[s].bandwidth/i,latency:0,rebuffer:0,switch:0}};r.push(a)}d=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var r=[Math.random()*h(),Math.random(),Math.random(),Math.random()];t.push(r)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var r=[1,1,1,1],i=1;i<e.length;i++){for(var o=null,s=null,a=0;a<n.length;a++){for(var u=n[a],l=null,d=0;d<t.length;d++){var c=p(u,t[d],r);(null===l||c<l)&&(l=c)}(null===s||s<l)&&(o=u,s=l)}t.push(o)}var f=null,m=null;for(a=0;a<t.length;a++){for(c=0,d=0;d<t.length;d++)a!==d&&(c+=p(t[a],t[d],r));(null===f||f<c)&&(f=c,m=a)}var g=[];for(g.push(t[m]),t.splice(m,1);0<t.length;){l=null;var v=null;for(a=0;a<t.length;a++)c=p(g[0],t[a],r),(null===l||c<l)&&(l=c,v=a);g.push(t[v]),t.splice(v,1)}return g}(r)}(),r}(e),S=t/i;1<S&&(S=h()),o/=a,n.debug("getNextQuality called throughput:"+S+" latency:"+o+" bufferSize:"+s+" currentQualityIndex:"+v+" playbackRate:"+f);var w=(s=T[v]).bitrate*y.getSegmentDuration()/b;v=Math.max(0,w-E);if(E-w<y.getMinBuffer())return n.debug("Buffer is low for bitrate= "+s.bitrate+" downloadTime="+w+" currentBuffer="+E+" rebuffer="+v),function(e,t){var n=0,i=e;if(r)for(var o=0;o<r.length;o++){var s=r[o];s.bitrate<e.bitrate&&s.bitrate>n&&t>s.bitrate&&(n=s.bitrate,i=s)}return i}(s,b).qualityIndex;switch(c){case"manual_weight_selection":l=[.4,.4,.4,.4];break;case"random_weight_selection":l=function(e,t){for(var n=[],r=Math.sqrt(2/e),i=0;i<4;i++)n.push(Math.random()*r);return l=n}(T.length);break;default:g(y,T,_,E,v,b,f)}for(var A=null,R=null,C=null,I=0;I<T.length;I++){var O,D=T[I],M=[(O=D.state).throughput,O.latency,O.rebuffer,O.switch],N=l.slice(),P=y.getNextBufferWithBitrate(D.bitrate,E,b);(O=P<y.getMinBuffer())&&n.debug("Buffer is low for bitrate="+D.bitrate+" downloadTime="+w+" currentBuffer="+E+" nextBuffer="+P),(D.bitrate>t-1e4||O)&&D.bitrate!==u&&(N[0]=100),M=p(M,[S,0,0,0],N),(null===A||M<A)&&(A=M,R=D.qualityIndex,C=D)}return m(s,T,[S,o,v,f=Math.abs(s.bitrate-C.bitrate)/i]),m(C,T,[S,0,0,f]),R},reset:function(){f()}},n=(0,o.default)(t).getInstance().getLogger(e),f(),e}a.__dashjs_factory_name="LearningAbrController",n.default=i.default.getClassFactory(a),t.exports=n.default},{45:45,47:47}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(208));function s(){var e,t=void 0,n=void 0,r=void 0,i=void 0;function s(){i=r=n=t=null}function a(e,t,n,r){var i=new o.default;return i.type=e,i.weights.bitrateReward=t||1,i.weights.bitrateSwitchPenalty=1,i.weights.rebufferPenalty=n||1e3,i.weights.latencyPenalty=[],i.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),i.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),i.weights.playbackSpeedPenalty=r||200,i}function u(e,t,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var o=0;o<i.weights.latencyPenalty.length;o++){var s=i.weights.latencyPenalty[o];if(n<=s.threshold){i.latencyWSum+=s.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e={setupPerSegmentQoe:function(e,o,s){t=a("segment",e,o,s),n=e,r=o,i=s},logSegmentMetrics:function(e,n,r,i){t&&u(e,n,r,i,t)},getPerSegmentQoe:function(){return t},calculateSingleUseQoe:function(e,t,o,s){var l=null;return n&&r&&i&&(l=a("segment",n,r,i)),l?(u(e,t,o,s,l),l.totalQoe):0},reset:function(){s()}},s(),e}s.__dashjs_factory_name="LoLpQoeEvaluator",n.default=i.default.getClassFactory(s),t.exports=n.default},{208:208,47:47}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),o=r(e(47)),s=r(e(204)),a=r(e(205)),u=r(e(193)),l=r(e(113)),d=r(e(207)),c=r(e(112));function f(e){var t,n=(e=e||{}).dashMetrics,r=this.context,o=void 0,f=void 0,h=void 0;return t={getMaxIndex:function(e){try{var t=(0,u.default)(r).create(),i=e.getMediaInfo().type,s=e.getAbrController(),a=e.getStreamInfo(),p=s.getQualityFor(i,a),m=e.getMediaInfo(),g=n.getCurrentBufferState(i),v=e.getScheduleController(),y=n.getCurrentBufferLevel(i,!0),_=a&&a.manifestInfo?a.manifestInfo.isDynamic:null,E=v.getPlaybackController(),b=E.getCurrentLiveLatency();if(!e.useLoLPABR()||i===c.default.AUDIO)return t;if(b=b||0,a=E.getPlaybackRate(),E=s.getThroughputHistory().getSafeAverageThroughput(i,_),o.debug("Throughput "+Math.round(E)+" kbps"),isNaN(E)||!g)return t;if(s.getAbandonmentStateFor(i)===l.default.ABANDON_LOAD)return t;for(var T=m.bitrateList,S=(_=e.getRepresentationInfo().fragmentDuration,T[0].bandwidth/1e3),w=T[T.length-1].bandwidth/1e3,A=0;A<T.length;A++){var R=T[A].bandwidth/1e3;w<R?w=R:R<S&&(S=R)}return g=T[p].bandwidth/1e3,s=_<(s=((s=n.getCurrentHttpRequest(i,!0)).tresponse.getTime()-s.trequest.getTime())/1e3)?s-_:0,h.setupPerSegmentQoe(_,w,S),h.logSegmentMetrics(g,s,b,a),_=(0,d.default)(r).create({targetLatency:1.5,bufferMin:.3,segmentDuration:_,qoeEvaluator:h}),t.quality=f.getNextQuality(m,1e3*E,b,y,a,p,_),t.reason={throughput:E,latency:b},t.priority=u.default.PRIORITY.STRONG,v.setTimeToLoadDelay(0),t.quality!==p&&console.log("[TgcLearningRule]["+i+"] requesting switch to index: ",t.quality,"Average throughput",Math.round(E),"kbps"),t}catch(e){throw e}},reset:function(){f.reset(),h.reset()}},o=(0,i.default)(r).getInstance().getLogger(t),f=(0,s.default)(r).create(),h=(0,a.default)(r).create(),t}f.__dashjs_factory_name="LoLPRule",n.default=o.default.getClassFactory(f),t.exports=n.default},{112:112,113:113,193:193,204:204,205:205,207:207,45:45,47:47}],207:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){var t,n=e.targetLatency,r=e.bufferMin,i=e.segmentDuration,o=e.qoeEvaluator,s=(e=void 0,void 0),a=void 0;function u(e,t){return i<t?e-i:e+i-t}return e={getMinBuffer:function(){return r},getSegmentDuration:function(){return i},getNextBufferWithBitrate:function(e,t,n){return u(t,e*i/n)},getNextBuffer:u,findWeightVector:function(e,t,l,d,c,f){var h=null,p=null,m=null,g=Math.abs(t-a);return e.forEach((function(e){s.forEach((function(s){s[0];var a=s[1],d=s[2],v=(s[3],e.bitrate*i/c),y=u(l,v);v=(0===d?10:1/d)*Math.max(1e-5,v-y),a=(0===a?10:1/a)*e.state.latency,a=o.calculateSingleUseQoe(e.bitrate,v,a,f);(null===h||h<a)&&function(e,t,i){return!(n+i<e)&&r<=t}(t,y,g)&&(h=a,p=s,m=e.bitrate)}))})),null===p&&null===m&&(p=-1),a=t,p}},s=function(e,n,r){for(var i=!0;i;){var o=e,s=n,a=r;if(i=!1,a===s)return o;for(var u=o.length,l=0;l<u;l++)for(var d=o.shift(),c=0;c<t.length;c++)o.push(d.concat(t[c]));e=o,n=s,r=a+1,i=!0,u=l=d=c=void 0}}((t=[.2,.4,.6,.8,1]).map((function(e){return[e]})),4,1),a=0,e}i.__dashjs_factory_name="LoLpWeightSelector",n.default=e.default.getClassFactory(i),t.exports=n.default},{47:47}],208:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0},t.exports=n.default},{}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(47)),s=r(e(113));function a(e){var t=(e=e||{}).dashMetrics,n=e.mediaPlayerModel,r=e.textController,o=e.abrController,a=e.settings;function u(e,u,l){var d,c=NaN;return e&&u?c=e===i.default.FRAGMENTED_TEXT?r.isTextEnabled()?isNaN(u.fragmentDuration)?(d=t.getCurrentSchedulingInfo(s.default.SCHEDULING_INFO))?d.duration:0:u.fragmentDuration:0:e===i.default.AUDIO&&l?(l=t.getCurrentBufferLevel(i.default.VIDEO),isNaN(u.fragmentDuration)?l:Math.max(l,u.fragmentDuration)):(u=u.mediaInfo.streamInfo,o.isPlayingAtTopQuality(u)?u.manifestInfo.duration>=a.get().streaming.longFormContentDurationThreshold?a.get().streaming.bufferTimeAtTopQualityLongForm:a.get().streaming.bufferTimeAtTopQuality:n.getStableBufferTime()):c}return{execute:function(e,n,r){return!e||!n||t.getCurrentBufferLevel(e)<u(e,n,r)},getBufferTarget:u}}a.__dashjs_factory_name="BufferLevelRule",n.default=o.default.getClassFactory(a),t.exports=n.default},{112:112,113:113,47:47}],210:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(){var e=0;function t(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function n(e,n){return e=e.videoHeight/15,n?"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(n.foreground?t(n.foreground):"rgb(255, 255, 255)")+"; font-style: "+(n.italics?"italic":"normal")+"; text-decoration: "+(n.underline?"underline":"none")+"; white-space: pre; background-color: "+(n.background?t(n.background):"transparent")+";":"font-size: "+e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(t,r,i,o){var s=null,a=!1,u=-1,l={start:r,end:i,spans:[]},d="style_cea608_white_black",c={},f={},h=[],p=void 0,m=void 0;for(p=0;p<15;++p){var g=o.rows[p],v="",y=null;if(!1===g.isEmpty()){var _=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}(g.chars);null===s&&(s={x:_,y1:p,y2:p+1,p:[]}),_!==u&&a&&(s.p.push(l),l={start:r,end:i,spans:[]},s.y2=p,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===c.hasOwnProperty(s.name)?(h.push(s),c[s.name]=s):c[s.name].p.contat(s.p),s={x:_,y1:p,y2:p+1,p:[]});for(var E=0;E<g.chars.length;++E){var b,T=g.chars[E],S=T.penState;null!==y&&S.equals(y)||(0<v.trim().length&&(l.spans.push({name:d,line:v,row:p}),v=""),b="style_cea608_"+S.foreground+"_"+S.background,S.underline&&(b+="_underline"),S.italics&&(b+="_italics"),f.hasOwnProperty(b)||(f[b]=JSON.parse(JSON.stringify(S))),y=S,d=b),v+=T.uchar}0<v.trim().length&&l.spans.push({name:d,line:v,row:p}),a=!0,u=_}else a=!1,u=-1,s&&(s.p.push(l),l={start:r,end:i,spans:[]},s.y2=p,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===c.hasOwnProperty(s.name)?(h.push(s),c[s.name]=s):c[s.name].p.contat(s.p),s=null)}s&&(s.p.push(l),s.y2=p+1,s.name="region_"+s.x+"_"+s.y1+"_"+s.y2,!1===c.hasOwnProperty(s.name)?(h.push(s),c[s.name]=s):c[s.name].p.contat(s.p),s=null);var w=[];for(p=0;p<h.length;++p){var A=h[p],R="sub_cea608_"+e++,C=document.createElement("div");C.id=R;var I="left: "+3.125*(I=A).x+"%; top: "+6.66*I.y1+"%; width: "+(100-3.125*I.x)+"%; height: "+6.66*Math.max(I.y2-1-I.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";C.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+I,(I=document.createElement("div")).className="paragraph bodyStyle",I.style.cssText=n(t);var O=document.createElement("div");O.className="cueUniWrapper",O.style.cssText="unicode-bidi: normal; direction: ltr;";for(var D=0;D<A.p.length;++D){var M=A.p[D],N=0;for(m=0;m<M.spans.length;++m){var P,x,L,k=M.spans[m];0<k.line.length&&(0!==m&&N!=k.row&&((L=document.createElement("br")).className="lineBreak",O.appendChild(L)),P=!1,N===k.row&&(P=!0),N=k.row,x=f[k.name],(L=document.createElement("span")).className="spanPadding "+k.name+" customSpanColor",L.style.cssText=n(t,x),0!==m&&P?m===M.spans.length-1?L.textContent=k.line.replace(/\s+$/g,""):L.textContent=k.line:1<M.spans.length&&m<M.spans.length-1&&k.row===M.spans[m+1].row?L.textContent=k.line.replace(/^\s+/g,""):L.textContent=k.line.trim(),O.appendChild(L))}}I.appendChild(O),C.appendChild(I);var j,F={bodyStyle:["%",90]};for(j in f)f.hasOwnProperty(j)&&(F[j]=["%",90]);w.push({type:"html",start:r,end:i,cueHTMLElement:C,cueID:R,cellResolution:[32,15],isFromCEA608:!0,fontSize:F,lineHeight:{},linePadding:{}})}return w}}}i.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=e.default.getSingletonFactory(i),t.exports=n.default},{47:47}],211:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(46)),s=r(e(54)),a=r(e(47)),u=r(e(227)),l=r(e(107)),d=r(e(213)),c=r(e(239)),f=r(e(51)),h="NotFragmentedTextBufferController";function p(e){e=e||{};var t=this.context,n=(0,o.default)(t).getInstance(),r=(0,d.default)(t).getInstance(),a=e.errHandler,p=e.streamInfo,m=e.type,g=e.mimeType,v=e.fragmentModel,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0;function w(e){b=e}function A(e){null===S.extract(p.id,e.currentRepresentation.id)&&(_=!1,n.trigger(s.default.INIT_FRAGMENT_NEEDED,{representationId:e.currentRepresentation.id,sender:y},{streamId:p.id,mediaType:m}))}function R(e){e.chunk.bytes&&(S.save(e.chunk),T.append(e.chunk),_=!0,n.trigger(s.default.STREAM_COMPLETED,{request:e.request},{streamId:p.id,mediaType:m}))}return y={getBufferControllerType:function(){return h},initialize:function(e){w(e),S=(0,u.default)(t).getInstance()},createBuffer:function(e){var n,o=e[0];try{return T=(0,l.default)(t).create(b,o),E||((n=T.getBuffer()).hasOwnProperty(i.default.INITIALIZE)&&n.initialize(g,p,e,v),E=!0),T}catch(e){if(o&&(o.isText||-1!==o.codec.indexOf('codecs="stpp')||-1!==o.codec.indexOf('codecs="wvtt')))try{T=r.getTextSourceBuffer()}catch(e){a.error(new c.default(f.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,f.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+m+" : "+e.message))}else a.error(new c.default(f.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,f.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+m))}},getStreamId:function(){return p.id},getType:function(){return m},getBuffer:function(){return T},getBufferLevel:function(){return 0},setMediaSource:w,getMediaSource:function(){return b},getIsBufferingCompleted:function(){return _},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},appendInitSegment:function(e){return null!==S.extract(p.id,e)},getRangeAt:function(){return null},reset:function(e){n.off(s.default.DATA_UPDATE_COMPLETED,A,y),n.off(s.default.INIT_FRAGMENT_LOADED,R,y),!e&&T&&(T.abort(),T.reset(),T=null)},updateTimestampOffset:function(e){T.timestampOffset===e||isNaN(e)||(T.timestampOffset=e)}},b=null,_=E=!1,n.on(s.default.DATA_UPDATE_COMPLETED,A,y),n.on(s.default.INIT_FRAGMENT_LOADED,R,y),y}p.__dashjs_factory_name=h,n.default=a.default.getClassFactory(p),t.exports=n.default},{107:107,112:112,213:213,227:227,239:239,46:46,47:47,51:51,54:54}],212:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(47)),s=r(e(118)),a=r(e(211));function u(e){e=e||{};var t,n=this.context,r=void 0;function o(){return r.getBuffer()}return t={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e,t){return r.createBuffer(e,t)},getType:function(){return r.getType()},getBuffer:o,setBuffer:function(e){r.setBuffer(e)},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e)},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},appendInitSegment:function(e){r.appendInitSegment(e)},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e)},updateTimestampOffset:function(e){var t=o();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)},updateAppendWindow:function(){r.updateAppendWindow()},getRepresentationInfo:function(e){return r.getRepresentationInfo(e)}},r=e.type===i.default.FRAGMENTED_TEXT?(0,s.default)(n).create({streamInfo:e.streamInfo,type:e.type,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,fragmentModel:e.fragmentModel,errHandler:e.errHandler,mediaController:e.mediaController,representationController:e.representationController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,settings:e.settings}):(0,a.default)(n).create({streamInfo:e.streamInfo,type:e.type,mimeType:e.mimeType,fragmentModel:e.fragmentModel,errHandler:e.errHandler}),t}u.__dashjs_factory_name="TextBufferController",n.default=o.default.getClassFactory(u),t.exports=n.default},{112:112,118:118,211:211,47:47}],213:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(47)),s=r(e(214)),a=r(e(215)),u=r(e(235)),l=r(e(233)),d=r(e(46)),c=r(e(54)),f=e(232);function h(){var e,t=this.context,n=void 0,r=void 0,o=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0;function D(){return!(A&&!R)}function M(){I=C=!(A=!0)}return e={setConfig:function(e){e&&(e.errHandler&&(r=e.errHandler),e.adapter&&(o=e.adapter),e.manifestModel&&(h=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(m=e.videoModel),e.streamController&&(g=e.streamController),e.textTracks&&(v=e.textTracks),e.vttParser&&(y=e.vttParser),e.ttmlParser&&(_=e.ttmlParser),n.setConfig({errHandler:r,adapter:o,manifestModel:h,mediaController:p,videoModel:m,streamController:g,textTracks:v,vttParser:y,ttmlParser:_}))},getTextSourceBuffer:function(){return n},getAllTracksAreDisabled:function(){return A},addEmbeddedTrack:function(e){n.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return b&&b.lang||""},setTextDefaultLanguage:function(e){(0,f.checkParameterType)(e,"string"),(b=b||{}).lang=e,T=!0},setTextDefaultEnabled:function(e){(0,f.checkParameterType)(e,"boolean"),(w=e)?A=!1:this.setTextTrack(-1)},getTextDefaultEnabled:function(){return void 0!==w&&w},setInitialSettings:function(e){b=e,T=!0},enableText:function(e){(0,f.checkParameterType)(e,"boolean"),!w&&e&&(w=!0),D()!==e&&(e&&this.setTextTrack(S),e||(S=this.getCurrentTrackIdx(),C?this.setTextTrack(-1):I=!0))},isTextEnabled:D,setTextTrack:function(e){var t=n.getConfig(),r=t.fragmentModel,o=t.fragmentedTracks,s=t.videoModel,a=void 0,u=void 0;A=-1===e;var l=v.getCurrentTrackIdx();if(l!==e){A&&p&&p.saveTextSettingsDisabled(),v.setModeForTrackIdx(l,i.default.TEXT_HIDDEN),v.setCurrentTrackIdx(e),v.setModeForTrackIdx(e,i.default.TEXT_SHOWING);var d=v.getCurrentTrackInfo();if(d&&d.isFragmented&&!d.isEmbedded)for(var c=0;c<o.length;c++){var f=o[c];if(d.lang===f.lang&&d.index===f.index&&(f.id?d.id===f.id:d.id===f.index))if(f!==p.getCurrentTrackFor(i.default.FRAGMENTED_TEXT,g.getActiveStreamInfo()))r.abortRequests(),r.removeExecutedRequestsBeforeTime(),n.remove(),v.deleteCuesFromTrackIdx(l),p.setTrack(f),n.setCurrentFragmentedTrackIdx(c);else if(-1===l){for(var h=g.getActiveStreamProcessors(),m=0;m<h.length;m++)if(h[m].getType()===i.default.FRAGMENTED_TEXT){u=h[m];break}u.setBufferingTime(s.getTime()),u.getScheduleController().start()}}else if(d&&!d.isFragmented){for(h=g.getActiveStreamProcessors(),c=0;c<h.length;c++)if(h[c].getType()===i.default.TEXT){a=(u=h[c]).getMediaInfoArr();break}if(u&&a)for(c=0;c<a.length;c++)if(a[c].index===d.index&&a[c].lang===d.lang){u.selectMediaInfo(a[c]);break}}}},getCurrentTrackIdx:function(){return v.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,f.checkParameterType)(e,"boolean"),R=e},reset:function(){M(),n.resetEmbedded(),n.reset()}},b=null,v=(I=T=C=R=!(S=-1),a.default)(t).getInstance(),y=(0,u.default)(t).getInstance(),_=(0,l.default)(t).getInstance(),n=(0,s.default)(t).getInstance(),E=(0,d.default)(t).getInstance(),v.initialize(),E.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,(function(e){var t=this,n=e.tracks,r=e.index;b&&n.some((function(e,n){if(p.matchSettings(b,e))return t.setTextTrack(n),r=n,!0})),(!1===w||void 0===w&&!b||I)&&this.setTextTrack(-1),S=r,E.trigger(c.default.TEXT_TRACKS_ADDED,{enabled:D(),index:r,tracks:n}),C=!0}),e),E.on(c.default.CURRENT_TRACK_CHANGED,(function(e){T||!e||!e.newMediaInfo||(e=e.newMediaInfo).type===i.default.FRAGMENTED_TEXT&&(b={lang:e.lang,role:e.roles[0],accessibility:e.accessibility[0]})}),e),E.on(c.default.PERIOD_SWITCH_STARTED,(function(e){void 0===O&&null!==e.fromStreamInfo&&(O=this.getCurrentTrackIdx())}),e),E.on(c.default.STREAM_COMPLETED,(function(){void 0===O&&(O=this.getCurrentTrackIdx())}),e),E.on(c.default.PERIOD_SWITCH_COMPLETED,(function(){void 0!==O&&(this.setTextTrack(O),O=void 0)}),e),M(),e}h.__dashjs_factory_name="TextController",n.default=o.default.getSingletonFactory(h),t.exports=n.default},{112:112,214:214,215:215,232:232,233:233,235:235,46:46,47:47,54:54}],214:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=e(255),s=r(e(247)),a=r(e(219)),u=r(e(222)),l=r(e(47)),d=r(e(45)),c=r(e(215)),f=r(e(210)),h=r(e(9)),p=r(e(2)),m=r(e(46)),g=r(e(54)),v=r(e(239)),y=r(e(51));function _(){var e=this.context,t=(0,m.default)(e).getInstance(),n=!1,r=void 0,l=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,A=void 0,R=void 0,C=void 0,I=void 0,O=void 0,D=void 0,M=void 0,N=void 0,P=void 0,x=void 0,L=void 0,k=void 0,j=void 0,F=void 0,U=void 0,B=void 0,G=void 0,q=void 0;function H(){M=NaN,L=O=null,D=!(N=[])}function V(){H(),C=[],w=null}function Y(e){(e=e.chunk).mediaInfo.embeddedCaptions&&J(e.bytes,e)}function K(){j=[],(I=(0,c.default)(e).getInstance()).setConfig({videoModel:P}),I.initialize(),_=(0,a.default)(e).getInstance(),B=[],n=!(U=k=null),G=(F=0,f.default)(e).getInstance();var r,i=x.getActiveStreamProcessors();for(r in i)if("video"===i[r].getType()){q=i[r].getRepresentationInfo().MSETimeOffset;break}t.on(g.default.VIDEO_CHUNK_RECEIVED,Y,this),t.on(g.default.BUFFER_CLEARED,Q,this)}function z(e){k=e}function W(e,t){var n,r,o=new s.default,a={subtitle:"subtitles",caption:"captions"};o.captionData=e,o.lang=t.lang,o.labels=t.labels,o.id=t.id?t.id:t.index,o.index=t.index,o.isTTML=(n=!1,t.codec&&0<=t.codec.search(i.default.STPP)&&(n=!0),t.mimeType&&0<=t.mimeType.search(i.default.TTML)&&(n=!0),n),o.defaultTrack=function(e){var t=!1;return 1<j.length&&e.isEmbedded?t=e.id&&e.id===i.default.CC1:1===j.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===j.length&&(t=e.index===C[0].index),t}(t),o.isFragmented=!b.getIsTextTrack(t.mimeType),o.isEmbedded=!!t.isEmbedded,o.kind=r=(r=0<t.roles.length?a[t.roles[0]]:a.caption)===a.caption||r===a.subtitle?r:a.caption,o.roles=t.roles,o.accessibility=t.accessibility,e=(C?C.length:0)+j.length,I.addTextTrack(o,e)}function J(e,t){var n,r=void 0,s=void 0,a=void 0,u=void 0,d=void 0,c=void 0,f=t.mediaInfo,m=f.type,g=f.mimeType,b=f.codec||g;if(b){if(m===i.default.FRAGMENTED_TEXT)if(D||"InitializationSegment"!==t.segmentType){if(!D)return;if(n=(d=_.getSamplesInfo(e)).sampleList,null===L&&0<n.length&&(L=n[0].cts-t.start*M),0<=b.search(i.default.STPP))for(w=null!==w?w:X(b),s=0;s<n.length;s++){var S=(V=n[s]).cts,A=S-L;this.buffered.add(A/M,(A+V.duration)/M);var R=new DataView(e,V.offset,V.subSizes[0]),C=(c=h.default.Utils.dataViewToString(R,i.default.UTF8),[]),N=V.offset+V.subSizes[0];for(a=1;a<V.subSizes.length;a++){var x=new Uint8Array(e,N,V.subSizes[a]);x=String.fromCharCode.apply(null,x);C.push(x),N+=V.subSizes[a]}try{var H=T.getValue().ttmlTimeIsRelative?S/M:0;r=w.parse(c,H,S/M,(S+V.duration)/M,C);I.addCaptions(k,L/M,r)}catch(e){O.removeExecutedRequestsBeforeTime(),this.remove(),l.error("TTML parser error: "+e.message)}}else{var V,Y=[];for(s=0;s<n.length;s++){(V=n[s]).cts-=L,this.buffered.add(V.cts/M,(V.cts+V.duration)/M);var K=e.slice(V.offset,V.offset+V.size),z=h.default.parseBuffer(K);for(a=0;a<z.boxes.length;a++){var J=z.boxes[a];if(l.debug("VTT box1: "+J.type),"vtte"!==J.type&&"vttc"===J.type)for(l.debug("VTT vttc boxes.length = "+J.boxes.length),u=0;u<J.boxes.length;u++){var Q,$,Z=J.boxes[u];l.debug("VTT box2: "+Z.type),"payl"===Z.type&&(Q=Z.cue_text,l.debug("VTT cue_text = "+Q),$=V.cts/M,Z=(V.cts+V.duration)/M,Y.push({start:$,end:Z,data:Q,styles:{}}),l.debug("VTT "+$+"-"+Z+" : "+Q))}}}0<Y.length&&I.addCaptions(k,0,Y)}}else D=!0,M=_.getMediaTimescaleFromMoov(e);else if(m===i.default.TEXT){R=new DataView(e,0,e.byteLength),c=h.default.Utils.dataViewToString(R,i.default.UTF8);try{r=X(b).parse(c,0),I.addCaptions(I.getCurrentTrackIdx(),0,r)}catch(e){E.error(new v.default(y.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,y.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,c))}}else if(m===i.default.VIDEO)if(t.segmentType===o.HTTPRequest.INIT_SEGMENT_TYPE){if(0===F)for(F=_.getMediaTimescaleFromMoov(e),s=0;s<j.length;s++)W(null,j[s])}else{if(0===F)return void l.warn("CEA-608: No timescale for embeddedTextTrack yet");if(t=(d=_.getSamplesInfo(e)).lastSequenceNumber,!B[0]&&!B[1]){var ee,te=void 0;for(s=0;s<j.length;s++){if(j[s].id===i.default.CC1?te=I.getTrackIdxForId(i.default.CC1):j[s].id===i.default.CC3&&(te=I.getTrackIdxForId(i.default.CC3)),-1===te)return void l.warn("CEA-608: data before track is ready.");ee=function(e){return function(t,n,r){var i;(i=P.getTTMLRenderingDiv()?G.createHTMLCaptionsFromScreen(P.getElement(),t,n,r):[{start:t,end:n,data:r.getDisplayText(),styles:{}}])&&I.addCaptions(e,0,i)}}(te),B[s]=new p.default.Cea608Parser(s+1,{newCue:ee},null)}}if(F){if(null!==U&&t!==U+d.numSequences)for(s=0;s<B.length;s++)B[s]&&B[s].reset();for(var ne=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var o=t[i],s=p.default.findCea608Nalus(r,o.offset,o.size),a=null,u=0,l=0;l<s.length;l++)for(var d=p.default.extractCea608DataFromRange(r,s[l]),c=0;c<2;c++)0<d[c].length&&(o.cts!==a?u=0:u+=1,n.fields[c].push([o.cts+q*F,d[c],u]),a=o.cts);return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}(e,d.sampleList),re=0;re<B.length;re++){var ie=ne.fields[re],oe=B[re];if(oe)for(s=0;s<ie.length;s++)oe.addData(ie[s][0]/F,ie[s][1])}U=t}}}else l.error("No text type defined")}function X(e){var t=void 0;return 0<=e.search(i.default.VTT)?t=A:(0<=e.search(i.default.TTML)||0<=e.search(i.default.STPP))&&(t=R),t}function Q(e){j.forEach((function(t){0<=(t=I.getTrackIdxForId(t.id))&&I.deleteCuesFromTrackIdx(t,e.from,e.to)}))}return r={initialize:function(t,o,s,l){n||K(),I.setConfig({videoModel:P}),I.initialize(),_=_||(0,a.default)(e).getInstance(),function(t,n,o,s){if(t=!b.getIsTextTrack(t),C=C.concat(o),t){O=s,r.buffered=(0,u.default)(e).create(),N=S.getTracksFor(i.default.FRAGMENTED_TEXT,n);for(var a=S.getCurrentTrackFor(i.default.FRAGMENTED_TEXT,n),l=0;l<N.length;l++)if(N[l]===a){z(l);break}}for(l=0;l<C.length;l++)W(null,C[l])}(t,o,s,l)},append:J,abort:function(){I.deleteAllTextTracks(),H(),_=null,C=[]},addEmbeddedTrack:function(e){if(n||K(),e)if(e.id===i.default.CC1||e.id===i.default.CC3){for(var t=0;t<j.length;t++)if(j[t].id===e.id)return;j.push(e)}else l.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(g.default.VIDEO_CHUNK_RECEIVED,Y,this),t.off(g.default.BUFFER_CLEARED,Q,this),I&&I.deleteAllTextTracks(),n=!1,j=[],B=[null,null],U=null},setConfig:function(e){e&&(e.errHandler&&(E=e.errHandler),e.adapter&&(b=e.adapter),e.manifestModel&&(T=e.manifestModel),e.mediaController&&(S=e.mediaController),e.videoModel&&(P=e.videoModel),e.streamController&&(x=e.streamController),e.textTracks&&(I=e.textTracks),e.vttParser&&(A=e.vttParser),e.ttmlParser&&(R=e.ttmlParser))},getConfig:function(){return{fragmentModel:O,fragmentedTracks:N,videoModel:P}},setCurrentFragmentedTrackIdx:z,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){V(),I=P=x=null}},l=(0,d.default)(e).getInstance().getLogger(r),V(),r}_.__dashjs_factory_name="TextSourceBuffer",n.default=l.default.getSingletonFactory(_),t.exports=n.default},{112:112,2:2,210:210,215:215,219:219,222:222,239:239,247:247,255:255,45:45,46:46,47:47,51:51,54:54,9:9}],215:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(46)),s=r(e(54)),a=r(e(47)),u=r(e(45)),l=e(17),d=e(232);function c(){var e,t=this.context,n=(0,o.default)(t).getInstance(),r=void 0,a=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,y=void 0,_=void 0,E=void 0,b=void 0,T=void 0,S=void 0,w=void 0,A=void 0;function R(e){var t=f[e].kind,n=void 0!==f[e].id?f[e].id:f[e].lang,r=f[e].lang,i=f[e].isTTML;e=f[e].isEmbedded;return c.addTextTrack(t,n,r,i,e)}function C(e,t){var r=c.getClientWidth(),i=c.getClientHeight(),o=c.getVideoWidth(),a=c.getVideoHeight(),u=c.getVideoRelativeOffsetTop(),l=c.getVideoRelativeOffsetLeft();if(0!==o&&0!==a){var d=o/a,f=!1;if(e.isFromCEA608&&(d=3.5/3,f=!0),o=function(e,t,n,r,i,o){var s=0,a=0;return n/r<e/t?s=(a=t)/r*n:a=(s=e)/n*r,n=0,r=0,i<s/a?n=(r=a)*i:r=(n=s)/i,e=(e-n)/2,t=(t-r)/2,o?{x:e+.1*n,y:t+.1*r,w:.8*n,h:.8*r}:{x:e,y:t,w:n,h:r}}.call(this,r,i,o,a,d,f),a=o.w,d=o.h,f=o.x,o=o.y,a!=v||d!=y||f!=m||o!=g||t){m=f+l,g=o+u,v=a,y=d,!_||(d=_.style)&&(d.left=m+"px",d.top=g+"px",d.width=v+"px",d.height=y+"px",d.zIndex=b&&document[b]||T?w:null,n.trigger(s.default.CAPTION_CONTAINER_RESIZE));var h=e.activeCues;if(h)for(var p=h.length,E=0;E<p;++E){var S=h[E];S.scaleCue(S)}}}}function I(e){var t,n=void 0,r=void 0,i=void 0,o=void 0,s=void 0;if(e.cellResolution){var a=[v/e.cellResolution[0],y/e.cellResolution[1]];if(e.linePadding)for(n in e.linePadding)if(e.linePadding.hasOwnProperty(n)){r=(e.linePadding[n]*a[0]).toString();for(var u=document.getElementsByClassName("spanPadding"),l=0;l<u.length;l++)u[l].style.cssText=u[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r),u[l].style.cssText=u[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.fontSize){for(n in e.fontSize)if(e.fontSize.hasOwnProperty(n)){"%"===e.fontSize[n][0]?i=e.fontSize[n][1]/100:"c"===e.fontSize[n][0]&&(i=e.fontSize[n][1]),r=(i*a[1]).toString(),s="defaultFontSize"!==n?document.getElementsByClassName(n):document.getElementsByClassName("paragraph");for(var d=0;d<s.length;d++)s[d].style.cssText=s[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}if(e.lineHeight)for(n in e.lineHeight)if(e.lineHeight.hasOwnProperty(n)){"%"===e.lineHeight[n][0]?o=e.lineHeight[n][1]/100:"c"===e.fontSize[n][0]&&(o=e.lineHeight[n][1]),r=(o*a[1]).toString(),s=document.getElementsByClassName(n);for(var c=0;c<s.length;c++)s[c].style.cssText=s[c].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+r)}}}e.isd&&((t=document.getElementById(e.cueID))&&_.removeChild(t),O(e))}function O(e){var t;_&&(t=document.createElement("div"),_.appendChild(t),S=(0,l.renderHTML)(e.isd,t,(function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),o=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(e.images[o])}return r.test(t)?(o=(i=r.exec(t))[1],"data:image/png;base64,"+e.embeddedImages[o]):null}),_.clientHeight,_.clientWidth,!1,(function(e){r.info("renderCaption :",e)}),S,!0),t.id=e.cueID,n.trigger(s.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:p}))}function D(e){return 0<=e&&f[e]?c.getTextTrack(f[e].kind,f[e].id,f[e].lang,f[e].isTTML,f[e].isEmbedded):null}function M(e){var t,n=this;e!==p&&(t=D(p=e),function(e){x.call(this),(e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=c.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){r.info(""+e.message)}}}:P).call(this)}.call(this,t),E&&(clearInterval(E),E=null),t&&"html"===t.renderingType&&(C.call(this,t,!0),window.ResizeObserver?(A=new window.ResizeObserver((function(){C.call(n,t,!0)}))).observe(c.getElement()):E=setInterval(C.bind(this,t),500)))}function N(e,t,n){if(e.cues)for(var r=e.cues,i=r.length-1;0<=i;i--)o=r[i],s=t,a=n,(isNaN(s)||o.startTime>=s)&&(isNaN(a)||o.endTime<=a)&&e.removeCue(r[i]);var o,s,a}function P(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function x(){if(_)for(;_.firstChild;)_.removeChild(_.firstChild)}return e={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(a=window.VTTCue||window.TextTrackCue,f=[],h=[],T=!(p=-1),w=2147483647,S=E=_=null,void(y=v=g=m=0)!==document.fullscreenElement?b="fullscreenElement":void 0!==document.webkitIsFullScreen?b="webkitIsFullScreen":document.msFullscreenElement?b="msFullscreenElement":document.mozFullScreen&&(b="mozFullScreen"))},setDisplayCConTop:function(e){(0,d.checkParameterType)(e,"boolean"),T=e,_&&!document[b]&&(_.style.zIndex=e?w:null)},addTextTrack:function(e,t){var o=this;f.length!==t?(f.push(e),f.length===t&&function(){f.sort((function(e,t){return e.index-t.index})),_=c.getTTMLRenderingDiv();for(var e=-1,t=0;t<f.length;t++){var r=R.call(o,t);h.push(r),f[t].defaultTrack&&(r.default=!0,e=t),(r=D(t))&&(r.mode=i.default.TEXT_SHOWING,_&&(f[t].isTTML||f[t].isEmbedded)?r.renderingType="html":r.renderingType="default"),o.addCaptions(t,0,f[t].captionData),n.trigger(s.default.TEXT_TRACK_ADDED)}M.call(o,e),0<=e&&function(){n.on(s.default.PLAYBACK_METADATA_LOADED,(function t(){var r=D(e);r&&C.call(this,r,!0),n.off(s.default.PLAYBACK_METADATA_LOADED,t,this)}),o);for(var t=0;t<f.length;t++){var r=D(t);r&&(r.mode=t===e?i.default.TEXT_SHOWING:i.default.TEXT_HIDDEN)}}(),n.trigger(s.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:p,tracks:f})}()):r.error("Trying to add too many tracks.")},addCaptions:function(e,t,o){var u=D(e),l=this;if(u&&Array.isArray(o)&&0!==o.length)for(var d=0;d<o.length;d++){var c=void 0,f=o[d];u.cellResolution=f.cellResolution,u.isFromCEA608=f.isFromCEA608,"html"===f.type&&_?((c=new a(f.start-t,f.end-t,"")).cueHTMLElement=f.cueHTMLElement,c.isd=f.isd,c.images=f.images,c.embeddedImages=f.embeddedImages,c.cueID=f.cueID,c.scaleCue=I.bind(l),c.cellResolution=f.cellResolution,c.lineHeight=f.lineHeight,c.linePadding=f.linePadding,c.fontSize=f.fontSize,_.style.left=m+"px",_.style.top=g+"px",_.style.width=v+"px",_.style.height=y+"px",c.onenter=function(){u.mode===i.default.TEXT_SHOWING&&(this.isd?(O(this),r.debug("Cue enter id:"+this.cueID)):(_.appendChild(this.cueHTMLElement),I.call(l,this),n.trigger(s.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:p})))},c.onexit=function(){if(_)for(var e=_.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(r.debug("Cue exit id:"+e[t].id),_.removeChild(e[t]),--t)}):f.data&&(c=new a(f.start-t,f.end-t,f.data),f.styles&&(void 0!==f.styles.align&&"align"in c&&(c.align=f.styles.align),void 0!==f.styles.line&&"line"in c&&(c.line=f.styles.line),void 0!==f.styles.position&&"position"in c&&(c.position=f.styles.position),void 0!==f.styles.size&&"size"in c&&(c.size=f.styles.size)),c.onenter=function(){u.mode===i.default.TEXT_SHOWING&&n.trigger(s.default.CAPTION_RENDERED,{currentTrackIdx:p})});try{c?u.addCue(c):r.error("impossible to display subtitles.")}catch(e){throw N(u),u.addCue(c),e}}},getCurrentTrackIdx:function(){return p},setCurrentTrackIdx:M,getTrackIdxForId:function(e){for(var t=-1,n=0;n<f.length;n++)if(f[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return f[p]},setModeForTrackIdx:function(e,t){(e=D(e))&&e.mode!==t&&(e.mode=t)},deleteCuesFromTrackIdx:function(e,t,n){(e=D(e))&&N(e,t,n)},deleteAllTextTracks:function(){for(var e=h?h.length:0,t=0;t<e;t++){var n=D(t);n&&(N.call(this,n),n.mode="disabled")}h=[],f=[],E&&(clearInterval(E),E=null),A&&c&&(A.unobserve(c.getElement()),A=null),p=-1,x.call(this)},deleteTextTrack:function(e){c.removeChild(h[e]),h.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(c=e.videoModel)}},r=(0,u.default)(t).getInstance().getLogger(e),e}c.__dashjs_factory_name="TextTracks",n.default=a.default.getSingletonFactory(c),t.exports=n.default},{112:112,17:17,232:232,45:45,46:46,47:47,54:54}],216:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112)),s=r(e(248)),a=r(e(217)),u=r(e(238)),l=e(81);function d(e){var t,n=this.context,r=e.streamInfo,i=void 0;function d(){i&&i.reset()}return t={getStreamId:function(){return r.id},provide:function(e,t){if("function"==typeof t){var n=i.getCurrentTrack(),r=void 0;if(!n||n.segmentDuration<=0||null==e)t(null);else{isNaN(n.segmentDuration)&&(r=i.getThumbnailRequestForTime(e))&&(n.segmentDuration=r.duration),o=e%n.segmentDuration;var o=Math.floor(o*n.tilesHor*n.tilesVert/n.segmentDuration),a=new s.default;if(a.width=Math.floor(n.widthPerTile),a.height=Math.floor(n.heightPerTile),a.x=Math.floor(o%n.tilesHor)*n.widthPerTile,a.y=Math.floor(o/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n.readThumbnail(e,(function(e){a.url=e,t(a)}));r?(a.url=r.url,n.segmentDuration=NaN):(r=Math.floor(e/n.segmentDuration),a.url=(n=(e=r)+(r=n).startNumber,e=(0,l.replaceTokenForTemplate)(r.templateUrl,"Number",n),e=(0,l.replaceTokenForTemplate)(e,"Time",(n-1)*r.segmentDuration*r.timescale),e=(0,l.replaceTokenForTemplate)(e,"Bandwidth",r.bandwidth),(0,l.unescapeDollarsInTemplate)(e))),t(a)}}},setTrackByIndex:function(e){i.setTrackByIndex(e)},getCurrentTrackIndex:function(){return i.getCurrentTrackIndex()},getBitrateList:function(){var e=i.getTracks(),t=0;return e.map((function(e){var n=new u.default;return n.mediaType=o.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))},reset:d},d(),i=(0,a.default)(n).create({streamInfo:r,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants}),t}d.__dashjs_factory_name="ThumbnailController",n.default=i.default.getClassFactory(d),t.exports=n.default},{112:112,217:217,238:238,248:248,47:47,81:81}],217:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(112)),o=r(e(61)),s=r(e(47)),a=r(e(249)),u=r(e(234)),l=e(81),d=r(e(54)),c=r(e(219)),f=r(e(164)),h=r(e(57)),p=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function m(e){var t=this.context,n=e.adapter,r=e.baseURLController,s=e.streamInfo,m=e.timelineConverter,g=e.debug,v=e.eventBus,y=e.events,_=e.dashConstants,E=(0,u.default)(t).getInstance(),b=(e=void 0,void 0),T=void 0,S=void 0,w=void 0,A=void 0,R=void 0;function C(){O(),A=(0,f.default)(t).create({}),R=(0,c.default)(t).getInstance(),(T=(0,h.default)(t).create({streamInfo:s,timelineConverter:m,baseURLController:r,debug:g,eventBus:v,events:y,dashConstants:_,urlUtils:E})).initialize(!!n&&n.getIsDynamic()),function(){if(s&&n&&(w=n.getMediaInfoForType(s,i.default.IMAGE))){var e=n.getVoRepresentations(w);e&&0<e.length&&e.forEach((function(e){(e.segmentInfoType===o.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media||e.segmentInfoType===o.default.SEGMENT_TIMELINE)&&I(e),e.segmentInfoType===o.default.SEGMENT_BASE&&I(e,!0)})),0<b.length&&(b.sort((function(e,t){return e.bitrate-t.bitrate})),S=b.length-1)}}()}function I(e,t){var o=new a.default;o.id=e.id,o.bitrate=e.bandwidth,o.width=e.width,o.height=e.height,o.tilesHor=1,o.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){0<=p.indexOf(e.schemeIdUri)&&e.value&&(2!==(e=e.value.split("x")).length||isNaN(e[0])||isNaN(e[1])||(o.tilesHor=parseInt(e[0],10),o.tilesVert=parseInt(e[1],10)))})),t?v.trigger(d.default.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED,{streamId:s.id,mediaType:i.default.IMAGE,mimeType:w.mimeType,representation:e,callback:function(e,t,i,s){var a=[];i=function(e,t){for(var r,i=[],o=0,s=void 0,a=(s=0,e.length);s<a;s++)r=e[s],(r=(0,l.getTimeBasedSegment)(m,n.getIsDynamic(),t,r.startTime,r.duration,r.timescale,r.media,r.mediaRange,o))&&(i.push(r),o++);return i}(i,s),o.segmentDuration=i[0].duration,o.readThumbnail=function(e,t){var n=null;a.some((function(t){if(t.start<=e&&t.end>e)return n=t.url,!0})),n?t(n):i.some((function(n){if(n.mediaStartTime<=e&&n.mediaStartTime+n.duration>e){var i=r.resolve(s.path);return A.load({method:"get",url:i.url,request:{range:n.mediaRange,responseType:"arraybuffer"},onload:function(e){var r=R.getSamplesInfo(e.target.response);r=new Blob([e.target.response.slice(r.sampleList[0].offset,r.sampleList[0].offset+r.sampleList[0].size)],{type:"image/jpeg"}),r=window.URL.createObjectURL(r);a.push({start:n.mediaStartTime,end:n.mediaStartTime+n.duration,url:r}),t&&t(r)}}),!0}}))}}}):(o.startNumber=e.startNumber,o.segmentDuration=e.segmentDuration,o.timescale=e.timescale,o.templateUrl=(t=e,(e=E.isRelative(t.media)?E.resolve(t.media,r.resolve(t.path).url):t.media)?(0,l.replaceIDForTemplate)(e,t.id):"")),0<o.tilesHor&&0<o.tilesVert&&(o.widthPerTile=o.width/o.tilesHor,o.heightPerTile=o.height/o.tilesVert,b.push(o))}function O(){b=[],S=-1,w=null}return e={initialize:C,getTracks:function(){return b},reset:O,setTrackByIndex:function(e){b&&0!==b.length&&(e>=b.length&&(e=b.length-1),S=e)},getCurrentTrack:function(){return S<0?null:b[S]},getCurrentTrackIndex:function(){return S},getThumbnailRequestForTime:function(e){for(var t=void 0,r=n.getVoRepresentations(w),i=0;i<r.length;i++)if(b[S].id===r[i].id){t=r[i];break}return T.getSegmentRequestForTime(w,t,e)}},C(),e}n.THUMBNAILS_SCHEME_ID_URIS=p,m.__dashjs_factory_name="ThumbnailTracks",n.default=s.default.getClassFactory(m)},{112:112,164:164,219:219,234:234,249:249,47:47,54:54,57:57,61:61,81:81}],218:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(51)),o=r(e(46)),s=r(e(54)),a=r(e(117)),u=r(e(237)),l=r(e(236)),d=r(e(47)),c=r(e(239)),f=e(232);function h(){var e,t=this.context,n=(0,o.default)(t).getInstance(),r=void 0,d=void 0,h=void 0,p=void 0;function m(){r.reset()}return e={chooseSelector:function(e){(0,f.checkParameterType)(e,"boolean"),p=e?h:d},select:function(e){if(e){var t=e.baseUrls,r=e.selectedIdx;return isNaN(r)?(r=p.select(t))?(e.selectedIdx=t.indexOf(r),r):(n.trigger(s.default.URL_RESOLUTION_FAILED,{error:new c.default(i.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,i.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(p===d&&m())):t[r]}},reset:m,setConfig:function(e){e.selector&&(p=e.selector)}},r=(0,a.default)(t).create({updateEventName:s.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:s.default.SERVICE_LOCATION_BLACKLIST_ADD}),d=(0,l.default)(t).create({blacklistController:r}),h=(0,u.default)(t).create({blacklistController:r}),p=d,e}h.__dashjs_factory_name="BaseURLSelector",n.default=d.default.getClassFactory(h),t.exports=n.default},{117:117,232:232,236:236,237:237,239:239,46:46,47:47,51:51,54:54}],219:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(45)),o=r(e(228)),s=r(e(47)),a=r(e(9)),u=r(e(244));function l(){var e,t=void 0,n=this.context;function r(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=a.default.parseBuffer(e);return(e=(0,o.default)(n).create()).setData(t),e}function s(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function l(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return e={parse:r,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new u.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,o=0;n<r.byteLength;){var a=s(r,n),d=l(r,n+4);if(0===a)break;n+a<=r.byteLength&&(0<=e.indexOf(d)?i=new u.default(n,!0,a):o=n+a),n+=a}return i||new u.default(o,!1)},getMediaTimescaleFromMoov:function(e){return(e=(e=r(e))?e.getBox("mdhd"):void 0)?e.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,i,o=r(e),s=o.getBoxes("moof"),a=o.getBoxes("mfhd"),u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=(e=void 0,void 0),y=(e=o.getBoxes("moof").length,a=a[a.length-1].sequence_number,l=[],-1),_=-1;for(h=0;h<s.length;h++){var E=s[h],b=E.getChildBoxes("traf");for(c=0;c<b.length;c++){var T=b[c],S=T.getChildBox("tfhd"),w=T.getChildBox("tfdt"),A=(u=w.baseMediaDecodeTime,T.getChildBoxes("trun")),R=T.getChildBoxes("subs");for(f=0;f<A.length;f++){var C=A[f],I=C.sample_count;for(g=(S.base_data_offset||0)+(C.data_offset||0),d=0;d<I;d++){t=void 0!==(i=C.samples[d]).sample_duration?i.sample_duration:S.default_sample_duration,n=void 0!==i.sample_size?i.sample_size:S.default_sample_size;var O={dts:u,cts:u+(void 0!==i.sample_composition_time_offset?i.sample_composition_time_offset:0),duration:t,offset:E.offset+g,size:n,subSizes:[n]};if(R)for(p=0;p<R.length;p++){var D=R[p];if(y<D.entry_count-1&&_<d&&(y++,_+=D.entries[y].sample_delta),d==_){O.subSizes=[];var M=D.entries[y];for(m=0;m<M.subsample_count;m++)O.subSizes.push(M.subsamples[m].subsample_size)}}l.push(O),g+=n,u+=t}}v=u-w.baseMediaDecodeTime}}return{sampleList:l,lastSequenceNumber:a,totalDuration:v,numSequences:e}},findInitRange:function(e){var n=null,i=r(e);return i&&(e=i.getBox("ftyp"),i=i.getBox("moov"),t.debug("Searching for initialization."),i&&i.isComplete&&(n=(e||i).offset+"-"+(i.offset+i.size-1),t.debug("Found the initialization.  Range: "+n))),n},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new u.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,o=0;n<r.byteLength;){var a=s(r,n),d=l(r,n+4);if(0===a)break;n+a<=r.byteLength&&(0<=e.indexOf(d)?i=new u.default(n,!0,a,d):o=n+a),n+=a}return i||new u.default(o,!1)}},t=(0,i.default)(n).getInstance().getLogger(e),e}l.__dashjs_factory_name="BoxParser",n.default=s.default.getSingletonFactory(l),t.exports=n.default},{228:228,244:244,45:45,47:47,9:9}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.supportsMediaSource=a;var r,i=(r=e(47))&&r.__esModule?r:{default:r},o=e(217),s=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function a(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function u(){var e,t=void 0;return t=!(e={supportsMediaSource:a,supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!(!("MediaSource"in window)||!MediaSource.isTypeSupported(e))||!(!("WebKitMediaSource"in window)||!WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e},supportsEssentialProperty:function(e){try{return-1!==o.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n=e.split(".")[0],r=(e=0===t.indexOf(n),void 0),i=0;i<s.length;i++)if(s[i].codec===n){r=s[i];break}return r?e||r.compatibleCodecs.some((function(e){return 0===t.indexOf(e)})):e}}),e}u.__dashjs_factory_name="Capabilities",n.default=i.default.getSingletonFactory(u)},{217:217,47:47}],221:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(112));function a(){var e,t=this.context,n=void 0,r=void 0,i=void 0,a=void 0,u=void 0;function l(e,t){(t=n.getRealPeriodByIndex(t?t.index:null))&&t.AdaptationSet_asArray&&0!==t.AdaptationSet_asArray.length&&(t.AdaptationSet_asArray=t.AdaptationSet_asArray.filter((function(t){return!t.Representation_asArray||0===t.Representation_asArray.length||!n.getIsTypeOf(t,e)||(t.Representation_asArray=t.Representation_asArray.filter((function(e,i){return i=n.getCodec(t,i,!0),!!r.supportsCodec(i)||(a.error("[Stream] codec not supported: "+i),!1)})),t.Representation_asArray&&0<t.Representation_asArray.length)})))}return e={setConfig:function(e){e&&(e.adapter&&(n=e.adapter),e.capabilities&&(r=e.capabilities),e.settings&&(i=e.settings))},filterUnsupportedFeaturesOfPeriod:function(e){l(s.default.VIDEO,e),l(s.default.AUDIO,e),i.get().streaming.filterUnsupportedEssentialProperties&&function(e){(e=n.getRealPeriodByIndex(e?e.index:null))&&e.AdaptationSet_asArray&&0!==e.AdaptationSet_asArray.length&&(e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){var t=n.getEssentialPropertiesForRepresentation(e);if(t&&0<t.length)for(var i=0;i<t.length;){if(!r.supportsEssentialProperty(t[i]))return a.debug("[Stream] EssentialProperty not supported: "+t[i].schemeIdUri),!1;i+=1}return!0})),e.Representation_asArray&&0<e.Representation_asArray.length)})))}(e),function(e){u&&0!==u.length&&(e=n.getRealPeriodByIndex(e?e.index:null))&&e.AdaptationSet_asArray&&0!==e.AdaptationSet_asArray.length&&(e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){return!u.some((function(t){return!t(e)}))})),e.Representation_asArray&&0<e.Representation_asArray.length)})))}(e)},setCustomCapabilitiesFilters:function(e){u=e}},a=(0,o.default)(t).getInstance().getLogger(e),e}a.__dashjs_factory_name="CapabilitiesFilter",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{112:112,45:45,47:47}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(47))&&r.__esModule?r:{default:r},o=e(232);function s(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",n.default=i.default.getClassFactory(s),t.exports=n.default},{232:232,47:47}],223:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(112)),a=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],u="dashjs_?_bitrate",l="dashjs_?_settings",d="localStorage",c="lastBitrate",f="lastMediaSettings";function h(e){e=e||{};var t,n=this.context,r=e.settings,i=void 0,h=void 0;function p(e){if(void 0!==h)return h;h=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return i.warn("DOMStorage access denied: "+e.message),h}if(!t||e!==d&&"sessionStorage"!==e)return h;try{t.setItem("1","1"),t.removeItem("1"),h=!0}catch(e){i.warn("DOMStorage is supported, but cannot be used: "+e.message)}return h}function m(){return 6e5*Math.round((new Date).getTime()/6e5)}function g(e,t){return p(e)&&r.get().streaming[t+"CachingInfo"].enabled}function v(){if(!r)throw new Error(s.default.MISSING_CONFIG_ERROR)}return t={getSavedBitrateSettings:function(e){var t=NaN;if(v(),g(d,c)){var n=u.replace(/\?/,e);try{var o=JSON.parse(localStorage.getItem(n))||{},s=(new Date).getTime()-parseInt(o.timestamp,10)>=r.get().streaming.lastBitrateCachingInfo.ttl||!1;o=parseFloat(o.bitrate);isNaN(o)||s?s&&localStorage.removeItem(n):(t=o,i.debug("Last saved bitrate for "+e+" was "+o))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(g(d,c)&&t){var n=u.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:m()}))}catch(e){i.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(v(),g(d,f)){var n=l.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(n))||{},o=(new Date).getTime()-parseInt(i.timestamp,10)>=r.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=i.settings;o&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(g(d,f)){var n=l.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:m()}))}catch(e){i.error(e.message)}}}},i=(0,o.default)(n).getInstance().getLogger(t),p(d)&&a.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){i.error(e.message)}}})),t}h.__dashjs_factory_name="DOMStorage",i=i.default.getSingletonFactory(h),n.default=i,t.exports=n.default},{112:112,45:45,47:47}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(){function e(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}}function t(e,t){var n=a;return t&&d(e)?(c(e)&&(n=u),f(e)&&(n=l),t="/"!==(n=n(t)).charAt(n.length-1)&&"/"!==e.charAt(0)?"/":"",[n,e].join(t)):e}var n=void 0,r=/^[a-z][a-z0-9+\-_.]*:/i,i=/^https?:\/\//i,o=/^https:\/\//i,s=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i;function a(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){return(e=e.match(s))?e[1]:""}function l(e){return(e=e.match(r))?e[0]:""}function d(e){return!r.test(e)}function c(e){return d(e)&&"/"===e.charAt(0)}function f(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),n=e}catch(e){}finally{n=n||t}}(),{parseBaseUrl:a,parseOrigin:u,parseScheme:l,isRelative:d,isPathAbsolute:c,isSchemeRelative:f,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return o.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(e,t){return n(e,t)}}}i.__dashjs_factory_name="DefaultURLUtils",n.default=e.default.getSingletonFactory(i),t.exports=n.default},{47:47}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){e=e||{};var t=void 0,n=new DataView(e.data),r=0;function i(e,t){var i,o=!0;if(void 0===t&&(t=!1),i=16777215<e.tag?(n.getUint32(r)!==e.tag&&(o=!1),4):65535<e.tag?(256*n.getUint16(r)+n.getUint8(r+2)!==e.tag&&(o=!1),3):255<e.tag?(n.getUint16(r)!==e.tag&&(o=!1),2):(n.getUint8(r)!==e.tag&&(o=!1),1),!o&&e.required&&!t)throw new Error("required tag not found");return o&&(r+=i),o}function o(e){var t=1,i=128,o=-1,s=0,a=n.getUint8(r),u=0;for(u=0;u<8;u+=1){if((a&i)===i){s=void 0===e?a&~i:a,o=u;break}i>>=1}for(u=0;u<o;u+=1,t+=1)s=s<<8|255&n.getUint8(r+t);return r+=t,s}return t={getPos:function(){return r},setPos:function(e){r=e},consumeTag:i,consumeTagAndSize:function(e,t){return(t=i(e,t))&&o(),t},parseTag:function(e){var n;return i(e),n=o(),t[e.parse](n)},skipOverElement:function(e,t){return e=i(e,t),t=void 0,e&&(t=o(),r+=t),e},getMatroskaCodedNum:o,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8}return t},getMatroskaUint:function(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t},moreData:function(){return r<n.byteLength}}}i.__dashjs_factory_name="EBMLParser",n.default=e.default.getClassFactory(i),t.exports=n.default},{47:47}],226:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(54));e=r(e(47));function s(){var e=this.context,t=(0,i.default)(e).getInstance();return{error:function(e){t.trigger(o.default.ERROR,{error:e})}}}s.__dashjs_factory_name="ErrorHandler",n.default=e.default.getSingletonFactory(s),t.exports=n.default},{46:46,47:47,54:54}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(){var e={};return{save:function(t){var n=t.streamId,r=t.representationId;e[n]=e[n]||{},e[n][r]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}i.__dashjs_factory_name="InitCache",n.default=e.default.getSingletonFactory(i),t.exports=n.default},{47:47}],228:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(243));e=r(e(47));function o(){var e=void 0;function t(t){var r=[];if(!t||!e||"function"!=typeof e.fetchAll)return r;for(var i,o=e.fetchAll(t),s=0,a=o.length;s<a;s++)(i=n(o[s]))&&r.push(i);return r}function n(e){if(!e)return null;var t=new i.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?n(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var n=t(e.boxes[e.boxes.length-1].type);return 0<n.length?n[n.length-1]:null}}}o.__dashjs_factory_name="IsoFile",n.default=e.default.getClassFactory(o),t.exports=n.default},{243:243,47:47}],229:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(112));function s(e){var t=(e=e||{}).timelineConverter;return{getLiveEdge:function(e){return function(){if(!t||!t.hasOwnProperty("getExpectedLiveEdge"))throw new Error(o.default.MISSING_CONFIG_ERROR)}(),e.DVRWindow?e.DVRWindow.end:0},reset:function(){t=null}}}s.__dashjs_factory_name="LiveEdgeFinder",n.default=i.default.getClassFactory(s),t.exports=n.default},{112:112,47:47}],230:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(12));function s(){return{areEqual:function(e,t){return(0,o.default)(e,t)}}}s.__dashjs_factory_name="ObjectUtils",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{12:12,47:47}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}i.__dashjs_factory_name="RequestModifier",n.default=e.default.getSingletonFactory(i),t.exports=n.default},{47:47}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw i.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw i.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw i.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==i.default.AUDIO&&e!==i.default.VIDEO)throw i.default.BAD_ARGUMENT_ERROR};var r,i=(r=e(112))&&r.__esModule?r:{default:r}},{112:112}],233:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45)),s=r(e(46)),a=r(e(54)),u=e(17),l=r(e(104)),d=r(e(111));function c(){var e,t=this.context,n=(0,s.default)(t).getInstance(),r=void 0,i=0;return e={parse:function(e,t,o,s,c){var f,h,p="",m=[],g=void 0,v={},y={},_="",E="",b={onOpenTag:function(e,t,i){if(i[" imagetype"]&&!i[" imageType"]&&(n.trigger(l.default.CONFORMANCE_VIOLATION,{level:d.default.LEVELS.ERROR,event:d.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===t&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void r.warn("smpte-tt imageType != PNG. Discarded");_=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){_&&(y[_]=E.trim()),_=E=""},onText:function(e){_&&(E+=e)}};if(!e)throw p="no ttml data to parse",new Error(p);v.data=e,n.trigger(a.default.TTML_TO_PARSE,v);var T=(0,u.fromXML)(v.data,(function(e){p=e}),b);n.trigger(a.default.TTML_PARSED,{ttmlString:v.data,ttmlDoc:T});var S,w=T.getMediaTimeEvents();for(g=0;g<w.length;g++){var A=(0,u.generateISD)(T,w[g],(function(e){p=e}));A.contents.some((function(e){return e.contents.length}))&&(f=w[g]+t<o?o:w[g]+t)<(h=w[g+1]+t>s?s:w[g+1]+t)&&m.push({start:f,end:h,type:"html",cueID:(void 0,S="cue_TTML_"+i,i++,S),isd:A,images:c,embeddedImages:y})}if(""!==p)throw r.error(p),new Error(p);return m}},r=(0,o.default)(t).getInstance().getLogger(e),e}c.__dashjs_factory_name="TTMLParser",n.default=i.default.getSingletonFactory(c),t.exports=n.default},{104:104,111:111,17:17,45:45,46:46,47:47,54:54}],234:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(224));function s(){var e=void 0,t=[],n=this.context;function r(n,r,i){var o=function(n){var r=void 0;for(r=0;r<t.length;r++)if(t[r].regex.test(n))return t[r].utils;return e}(i||r);return(o&&"function"==typeof o[n]?o:e)[n](r,i)}return e=(0,o.default)(n).getInstance(),{registerUrlRegex:function(e,n){t.push({regex:e,utils:n})},parseBaseUrl:function(e){return r("parseBaseUrl",e)},parseOrigin:function(e){return r("parseOrigin",e)},parseScheme:function(e){return r("parseScheme",e)},isRelative:function(e){return r("isRelative",e)},isPathAbsolute:function(e){return r("isPathAbsolute",e)},isSchemeRelative:function(e){return r("isSchemeRelative",e)},isHTTPURL:function(e){return r("isHTTPURL",e)},isHTTPS:function(e){return r("isHTTPS",e)},removeHostname:function(e){return r("removeHostname",e)},resolve:function(e,t){return r("resolve",e,t)}}}s.__dashjs_factory_name="URLUtils",i=i.default.getSingletonFactory(s),n.default=i,t.exports=n.default},{224:224,47:47}],235:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),o=r(e(45));function s(){var e,t=this.context,n=void 0,r=void 0,i=void 0,s=void 0,a=void 0;function u(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}return e={parse:function(e){var t,o=[],l=void 0;if(!e)return o;t=(e=e.split(r)).length,l=-1;for(var d=0;d<t;d++){var c,f,h,p=e[d];0<p.length&&"WEBVTT"!==p&&p.match(i)&&(c=void 0,(f=(c=(f=p).split(i))[1].split(a)).shift(),c[1]=f[0],f.shift(),p=(h={cuePoints:c,styles:function(e){var t={};return e.forEach((function(e){var n;1<e.split(/:/).length&&((n=e.split(/:/)[1])&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n))})),t}(f)}).cuePoints,c=h.styles,f=function(e,t){for(var n,r=t,o="",s="";""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var a=0;a<n;a++){if((s=e[t+a]).match(i)){o="";break}o+=s,a!==n-1&&(o+="\n")}else(s=e[t]).match(i)||(o=s);return o}(e,d+1),h=u(p[0].replace(s,"")),p=u(p[1].replace(s,"")),!isNaN(h)&&!isNaN(p)&&l<=h&&h<p?""!==f?(l=h,o.push({start:h,end:p,data:f,styles:c})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing"))}return o}},n=(0,o.default)(t).getInstance().getLogger(e),r=/(?:\r\n|\r|\n)/gm,i=/-->/,s=/(^[\s]+|[\s]+$)/g,a=/\s\b/g,e}s.__dashjs_factory_name="VTTParser",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{45:45,47:47}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n=0,r=void 0;return e&&e.some((function(e,r){return n=r,!t.contains(e.serviceLocation)}))&&(r=e[n]),r}}}i.__dashjs_factory_name="BasicSelector",n.default=e.default.getClassFactory(i),t.exports=n.default},{47:47}],237:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;e=(r=e(47))&&r.__esModule?r:{default:r};function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t,n=0,r=[],i=0,o=void 0;if((o=e.sort((function(e,t){return t=e.dvb_priority-t.dvb_priority,isNaN(t)?0:t})).filter((function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority}))).length)return 1<o.length&&(o.forEach((function(e){n+=e.dvb_weight,r.push(n)})),t=Math.floor(Math.random()*(n-1)),r.every((function(e,n){return i=n,!(t<e)}))),o[i]}((n=[],e.filter((function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&n.push(e.dvb_priority),!1)})).filter((function(e){return!n.length||!e.dvb_priority||-1===n.indexOf(e.dvb_priority)}))));var n}}}i.__dashjs_factory_name="DVBSelector",n.default=e.default.getClassFactory(i),t.exports=n.default},{47:47}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=n.default},{}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null},t.exports=n.default},{}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=n.default},{}],241:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e(255);r(s,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===o.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?o.HTTPRequest.INIT_SEGMENT_TYPE:o.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),r=s;function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.action=s.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=e||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",n.default=r,t.exports=n.default},{255:255}],242:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r;(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(i,((r=e(241))&&r.__esModule?r:{default:r}).default),e=i;function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,e),this.checkForExistenceOnly=!0}n.default=e,t.exports=n.default},{241:241}],243:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){t&&r(e.prototype,t)}(o,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),o);function o(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new o(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references)for(this.references=[],t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];t=0;for(var r=e.samples.length;t<r;t++){var i={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(i)}}}}n.default=i,t.exports=n.default},{}],244:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r},t.exports=n.default},{}],245:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=n.default},{}],246:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(112));(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(o,r(e(241)).default),e=o;function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,o=t,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}if(null===(i=Object.getPrototypeOf(i)))return;e=i,t=o,n=s,r=!0,a=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=i.default.STREAM,this.responseType=""}n.default=e,t.exports=n.default},{112:112,241:241}],247:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],248:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=n.default},{}],249:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=n.default},{}],250:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=n.default},{}],251:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},t.exports=n.default},{}],252:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=(r=e(113))&&r.__esModule?r:{default:r};e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=i.default.BUFFER_EMPTY};n.default=e,t.exports=n.default},{113:113}],253:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],254:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],255:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){r(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null}Object.defineProperty(n,"__esModule",{value:!0}),i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.LICENSE="license",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=function e(){r(this,e),this.s=null,this.d=null,this.b=[]}},{}],256:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ManifestUpdate=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},n.ManifestUpdateStreamInfo=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateRepresentationInfo=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],257:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){r(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}function o(){r(this,o),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}Object.defineProperty(n,"__esModule",{value:!0}),i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start",o.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",o.REBUFFERING_REASON="rebuffering",o.USER_REQUEST_STOP_REASON="user_request",o.END_OF_PERIOD_STOP_REASON="end_of_period",o.END_OF_CONTENT_STOP_REASON="end_of_content",o.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",o.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=o},{}],258:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],259:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],260:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}]},{},[4])},"./src/wcs/libs/dash-video-element/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DASHVideoElement:()=>i});var r=n("./node_modules/custom-video-element/index.js");n("./src/wcs/libs/dash-video-element/dash-3.2.2.all.min.js");class i extends r.default{constructor(){super()}get src(){return this.getAttribute("src")}set src(e){if(e!==this.src&&this.setAttribute("src",e),this.dashPlayer){let e=this.getAttribute("options");e=JSON.parse(e),this.dashPlayer.updateSettings(e)}}get options(){return this.getAttribute("options")}set options(e){if(e!==this.options&&(this.setAttribute("options",e),this.dashPlayer)){let t=e;t=JSON.parse(t),this.dashPlayer.updateSettings(t)}}get autoplay(){return this.getAttribute("autoplay")}set autoplay(e){e!==this.autoplay&&this.setAttribute("autoplay",e)}get log(){return this._log}set log(e){this._log=e}updateOptions(){if(this.dashPlayer){let e=this.getAttribute("options");e=JSON.parse(e),this.dashPlayer.updateSettings(e)}}load(){this.dashPlayer=window.dashjs.MediaPlayer().create(),this.dashPlayer.initialize(this.nativeEl,this.src,"true"==this.getAttribute("autoplay"));let e=this.getAttribute("options");e=JSON.parse(e),this.dashPlayer.updateSettings(e)}renderHTML(){let e=document.createElement("div");e.style="position:absolute;top:15px;left:15px;color:red",e.innerHTML='\n      <span id="bufferLevel"></span>\n      <span id="framerate"></span>\n      <span id="reportedBitrate"></span>\n      ',this.shadowRoot.appendChild(e)}initDebug(){this.logIntervalId||(this.renderHTML(),this.logIntervalId=setInterval((()=>{if(this.dashPlayer&&this.dashPlayer.getActiveStream()){var e=this.dashPlayer.getActiveStream().getStreamInfo(),t=this.dashPlayer.getDashMetrics(),n=this.dashPlayer.getDashAdapter();if(t&&e){const a=e.index;var r=t.getCurrentRepresentationSwitch("video",!0),i=t.getCurrentBufferLevel("video",!0),o=r?Math.round(n.getBandwidthForRepresentation(r.to,a)/1e3):NaN,s=n.getAdaptationForType(a,"video",e).Representation_asArray.find((function(e){return e.id===r.to})).frameRate;this.shadowRoot.querySelector("#bufferLevel").innerText=i+" secs",this.shadowRoot.querySelector("#framerate").innerText=s+" fps",this.shadowRoot.querySelector("#reportedBitrate").innerText=o+" Kbps"}}}),1e3))}connectedCallback(){this.load(),this._log&&"true"===this._log&&this.initDebug()}disconnectedCallback(){this.logIntervalId&&clearInterval(this.logIntervalId)}}window.customElements.get("dash-video")||(window.customElements.define("dash-video",i),window.DASHVideoElement=i)},"./src/wcs/libs/dash-video-element sync recursive":e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="./src/wcs/libs/dash-video-element sync recursive",e.exports=t},"./src/wcs/libs/janus.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Janus:()=>u});var r=n("./node_modules/webrtc-adapter/src/js/adapter_core.js");function i(e){var t,n,r,i,s=e.split("\r\n"),a=o(s,"a=rtpmap","opus/48000/2");if(a&&(n=s[a],r=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),t=(i=n.match(r))&&2===i.length?i[1]:null),t){var u=o(s,"a=fmtp:"+t.toString());if(null===u)return e;s[u]=s[u].concat("; stereo=1; sprop-stereo=1; maxaveragebitrate=131072; x-google-min-bitrate=6; x-google-max-bitrate=128; cbr=1;"),e=s.join("\r\n")}return e}function o(e,t,n){return function(e,t,n,r,i){for(var o=-1!==n?n:e.length,s=t;s<o;++s)if(0===e[s].indexOf(r)&&(!i||-1!==e[s].toLowerCase().indexOf(i.toLowerCase())))return s;return null}(e,0,-1,t,n)}function s(e){return[{label:"UHD",width:3840,height:2160,ratio:"16:9"},{label:"FHD",width:1920,height:1080,ratio:"16:9"},{label:"UXGA",width:1600,height:1200,ratio:"4:3"},{label:"HD",width:1280,height:720,ratio:"16:9"},{label:"SVGA",width:800,height:600,ratio:"4:3"},{label:"VGA",width:640,height:480,ratio:"4:3"},{label:"VGAHD",width:960,height:720,ratio:"4:3"},{label:"VGAHD-P",width:720,height:960,ratio:"4:3"},{label:"VGAFHD",width:1440,height:1080,ratio:"4:3"},{label:"VGAFHD-P",width:1080,height:1440,ratio:"4:3"},{label:"360p",width:640,height:360,ratio:"16:9"},{label:"CIF",width:352,height:288,ratio:"4:3"},{label:"QVGA",width:320,height:240,ratio:"4:3"}].find((t=>t.label===e))}u.sessions={},u.getSizeFromRes=s,u.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||u.extension.isInstalled()}return!0};var a={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var r=new Error("NavigatorUserMediaError");r.name="You cancelled the request for permission, giving up...",n(r)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&window.clearTimeout(t.data.id)}))}};function u(e){if(void 0===u.initDone)return e.error("Library not initialized"),{};if(!u.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(u.log("Library initialized: "+u.initDone),(e=e||{}).success="function"==typeof e.success?e.success:u.noop,e.error="function"==typeof e.error?e.error:u.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:u.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var t=!1,n=null,r={},o=null,a=null,l=0,d=e.server;u.isArray(d)?(u.log("Multiple servers provided ("+d.length+"), will use the first that works"),d=null,a=e.server,u.debug(a)):0===d.indexOf("ws")?(t=!0,u.log("Using WebSockets to contact Janus: "+d)):(t=!1,u.log("Using REST API to contact Janus: "+d));var c=e.iceServers;null==c&&(c=[{urls:"stun:stun.l.google.com:19302"}]);var f=e.iceTransportPolicy,h=e.bundlePolicy,p=e.ipv6;null==p&&(p=!1);var m=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(m=!0===e.withCredentials);var g=null;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(g=e.max_poll_events),g<1&&(g=1);var v=null;void 0!==e.token&&null!==e.token&&(v=e.token);var y=null;void 0!==e.apisecret&&null!==e.apisecret&&(y=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var _=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(_=e.keepAlivePeriod),isNaN(_)&&(_=25e3);var E=6e4;function b(e){var t={high:2e6,medium:4e5,low:128e3};return null!=e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(E=e.longPollTimeout),isNaN(E)&&(E=6e4);var T=!1,S=null,w={},A=this,R=0,C={};function I(){if(null!=S)if(u.debug("Long poll..."),T){var t=d+"/"+S+"?rid="+(new Date).getTime();null!=g&&(t=t+"&maxev="+g),null!=v&&(t=t+"&token="+encodeURIComponent(v)),null!=y&&(t=t+"&apisecret="+encodeURIComponent(y)),u.httpAPICall(t,{verb:"GET",withCredentials:m,success:O,timeout:E,error:function(t,n){if(u.error(t+":",n),++R>3)return T=!1,void e.error("Lost connection to the server (is it down?)");I()}})}else u.warn("Is the server down? (connected=false)")}function O(e,r){if(R=0,t||null==S||!0===r||setTimeout(I,200),t||!u.isArray(e))if("keepalive"!==e.janus)if("ack"!==e.janus)if("success"!==e.janus)if("trickle"===e.janus){if(null==(l=e.sender))return void u.warn("Missing sender...");if(null==(c=w[l]))return void u.debug("This handle is not attached to this session");var i=e.candidate;u.debug("Got a trickled candidate on session "+S),u.debug(i);var o=c.webrtcStuff;o.pc&&o.remoteSdp?(u.debug("Adding remote candidate:",i),i&&!0!==i.completed?o.pc.addIceCandidate(i):o.pc.addIceCandidate()):(u.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),o.candidates||(o.candidates=[]),o.candidates.push(i),u.debug(o.candidates))}else{if("webrtcup"===e.janus)return u.debug("Got a webrtcup event on session "+S),u.debug(e),null==(l=e.sender)?void u.warn("Missing sender..."):null==(c=w[l])?void u.debug("This handle is not attached to this session"):void c.webrtcState(!0);if("hangup"===e.janus){if(u.debug("Got a hangup event on session "+S),u.debug(e),null==(l=e.sender))return void u.warn("Missing sender...");if(null==(c=w[l]))return void u.debug("This handle is not attached to this session");c.webrtcState(!1,e.reason),c.hangup()}else if("detached"===e.janus){if(u.debug("Got a detached event on session "+S),u.debug(e),null==(l=e.sender))return void u.warn("Missing sender...");if(null==(c=w[l]))return;c.detached=!0,c.ondetached(),c.detach()}else if("media"===e.janus){if(u.debug("Got a media event on session "+S),u.debug(e),null==(l=e.sender))return void u.warn("Missing sender...");if(null==(c=w[l]))return void u.debug("This handle is not attached to this session");c.mediaState(e.type,e.receiving)}else if("slowlink"===e.janus){if(u.debug("Got a slowlink event on session "+S),u.debug(e),null==(l=e.sender))return void u.warn("Missing sender...");if(null==(c=w[l]))return void u.debug("This handle is not attached to this session");c.slowLink(e.uplink,e.nacks)}else{if("error"===e.janus){var s,a;if(u.error("Ooops: "+e.error.code+" "+e.error.reason),u.debug(e),null!=(s=e.transaction))null!=(a=C[s])&&a(e),delete C[s];return}if("event"===e.janus){var l;if(u.debug("Got a plugin event on session "+S),u.debug(e),null==(l=e.sender))return void u.warn("Missing sender...");var d=e.plugindata;if(null==d)return void u.warn("Missing plugindata...");u.debug("  -- Event is coming from "+l+" ("+d.plugin+")");var c,f=d.data;if(u.debug(f),null==(c=w[l]))return void u.warn("This handle is not attached to this session");var h=e.jsep;null!=h&&(u.debug("Handling SDP as well..."),u.debug(h));var p=c.onmessage;null!=p?(u.debug("Notifying application..."),p(f,h)):u.debug("No provided notification callback")}else{if("timeout"===e.janus)return u.error("Timeout on session "+S),u.debug(e),void(t&&n.close(3504,"Gateway timeout"));u.warn("Unknown message/event  '"+e.janus+"' on session "+S),u.debug(e)}}}else u.debug("Got a success on session "+S),u.debug(e),null!=(s=e.transaction)&&(null!=(a=C[s])&&a(e),delete C[s]);else u.debug("Got an ack on session "+S),u.debug(e),null!=(s=e.transaction)&&(null!=(a=C[s])&&a(e),delete C[s]);else u.vdebug("Got a keepalive on session "+S);else for(var m=0;m<e.length;m++)O(e[m],!0)}function D(){if(null!==d&&t&&T){o=setTimeout(D,_);var e={janus:"keepalive",session_id:S,transaction:u.randomString(12)};null!=v&&(e.token=v),null!=y&&(e.apisecret=y),n.send(JSON.stringify(e))}}function M(i){var s=u.randomString(12),c={janus:"create",transaction:s};if(i.reconnect&&(T=!1,c.janus="claim",c.session_id=S,n&&(n.onopen=null,n.onerror=null,n.onclose=null,o&&(clearTimeout(o),o=null))),null!=v&&(c.token=v),null!=y&&(c.apisecret=y),null===d&&u.isArray(a)&&(0===(d=a[l]).indexOf("ws")?(t=!0,u.log("Server #"+(l+1)+": trying WebSockets to contact Janus ("+d+")")):(t=!1,u.log("Server #"+(l+1)+": trying REST API to contact Janus ("+d+")"))),t)for(var f in n=u.newWebSocket(d,"janus-protocol"),r={error:function(){if(u.error("Error connecting to the Janus WebSockets server... "+d),u.isArray(a)&&!i.reconnect)return++l==a.length?void i.error("Error connecting to any of the provided Janus servers: Is the server down?"):(d=null,void setTimeout((function(){M(i)}),200));i.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){C[s]=function(e){if(u.debug(e),"success"!==e.janus)return u.error("Ooops: "+e.error.code+" "+e.error.reason),void i.error(e.error.reason);o=setTimeout(D,_),T=!0,S=e.session_id?e.session_id:e.data.id,i.reconnect?u.log("Claimed session: "+S):u.log("Created session: "+S),u.sessions[S]=A,i.success()},n.send(JSON.stringify(c))},message:function(e){O(JSON.parse(e.data))},close:function(){null!==d&&T&&(T=!1,e.error("Lost connection to the server (is it down?)"))}})n.addEventListener(f,r[f]);else u.httpAPICall(d,{verb:"POST",withCredentials:m,body:c,success:function(e){if(u.debug(e),"success"!==e.janus)return u.error("Ooops: "+e.error.code+" "+e.error.reason),void i.error(e.error.reason);T=!0,S=e.session_id?e.session_id:e.data.id,i.reconnect?u.log("Claimed session: "+S):u.log("Created session: "+S),u.sessions[S]=A,I(),i.success()},error:function(e,t){if(u.error(e+":",t),u.isArray(a)&&!i.reconnect)return++l==a.length?void i.error("Error connecting to any of the provided Janus servers: Is the server down?"):(d=null,void setTimeout((function(){M(i)}),200));""===t?i.error(e+": Is the server down?"):i.error(e+": "+t)}})}function N(e,r){if((r=r||{}).success="function"==typeof r.success?r.success:u.noop,r.error="function"==typeof r.error?r.error:u.noop,!T)return u.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");var i=w[e];if(null==i||null===i.webrtcStuff||void 0===i.webrtcStuff)return u.warn("Invalid handle"),void r.error("Invalid handle");var o=r.message,s=r.jsep,a=u.randomString(12),l={janus:"message",body:o,transaction:a};if(null!==i.token&&void 0!==i.token&&(l.token=i.token),null!=y&&(l.apisecret=y),null!=s&&(l.jsep=s),u.debug("Sending message to plugin (handle="+e+"):"),u.debug(l),t)return l.session_id=S,l.handle_id=e,C[a]=function(e){if(u.debug("Message sent!"),u.debug(e),"success"===e.janus){var t=e.plugindata;if(null==t)return u.warn("Request succeeded, but missing plugindata..."),void r.success();u.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return u.debug(n),void r.success(n)}"ack"===e.janus?r.success():void 0!==e.error&&null!==e.error?(u.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(u.error("Unknown error"),r.error("Unknown error"))},void n.send(JSON.stringify(l));u.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",withCredentials:m,body:l,success:function(e){if(u.debug("Message sent!"),u.debug(e),"success"===e.janus){var t=e.plugindata;if(null==t)return u.warn("Request succeeded, but missing plugindata..."),void r.success();u.log("Synchronous transaction successful ("+t.plugin+")");var n=t.data;return u.debug(n),void r.success(n)}"ack"===e.janus?r.success():void 0!==e.error&&null!==e.error?(u.error("Ooops: "+e.error.code+" "+e.error.reason),r.error(e.error.code+" "+e.error.reason)):(u.error("Unknown error"),r.error("Unknown error"))},error:function(e,t){u.error(e+":",t),r.error(e+": "+t)}})}function P(e,r){if(T){var i=w[e];if(null!=i&&null!==i.webrtcStuff&&void 0!==i.webrtcStuff){var o={janus:"trickle",candidate:r,transaction:u.randomString(12)};if(null!==i.token&&void 0!==i.token&&(o.token=i.token),null!=y&&(o.apisecret=y),u.vdebug("Sending trickle candidate (handle="+e+"):"),u.vdebug(o),t)return o.session_id=S,o.handle_id=e,void n.send(JSON.stringify(o));u.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",withCredentials:m,body:o,success:function(e){u.vdebug("Candidate sent!"),u.vdebug(e),"ack"===e.janus||u.error("Ooops: "+e.error.code+" "+e.error.reason)},error:function(e,t){u.error(e+":",t)}})}else u.warn("Invalid handle")}else u.warn("Is the server down? (connected=false)")}function x(e,t,n,r){var i=w[e];if(i&&i.webrtcStuff){var o=i.webrtcStuff,s=function(e){u.log("Received state change on data channel:",e);var t=e.target.label,n=o.dataChannel[t]?o.dataChannel[t].readyState:"null";if(u.log("State change on <"+t+"> data channel: "+n),"open"===n){if(o.dataChannel[t].pending&&o.dataChannel[t].pending.length>0){for(var r of(u.log("Sending pending messages on <"+t+">:",o.dataChannel[t].pending.length),o.dataChannel[t].pending))u.log("Sending string on data channel <"+t+">: "+r),o.dataChannel[t].send(r);o.dataChannel[t].pending=[]}i.ondataopen(t)}};o.dataChannel[t]=n||o.pc.createDataChannel(t,{ordered:!1}),o.dataChannel[t].onmessage=function(e){u.log("Received message on data channel:",e);var t=e.target.label;i.ondata(e.data,t)},o.dataChannel[t].onopen=s,o.dataChannel[t].onclose=s,o.dataChannel[t].onerror=function(e){u.error("Got error on data channel:",e)},o.dataChannel[t].pending=[],r&&o.dataChannel[t].pending.push(r)}else u.warn("Invalid handle")}function L(e,t){(t=t||{}).success="function"==typeof t.success?t.success:u.noop,t.error="function"==typeof t.error?t.error:u.noop;var n=w[e];if(!n||!n.webrtcStuff)return u.warn("Invalid handle"),void t.error("Invalid handle");var r=n.webrtcStuff,i=t.text;if(!i)return u.warn("Invalid text"),void t.error("Invalid text");var o=t.label?t.label:u.dataChanDefaultLabel;return r.dataChannel[o]?"open"!==r.dataChannel[o].readyState?(r.dataChannel[o].pending.push(i),void t.success()):(u.log("Sending string on data channel <"+o+">: "+i),r.dataChannel[o].send(i),void t.success()):(x(e,o,!1,i),void t.success())}function k(e,t){(t=t||{}).success="function"==typeof t.success?t.success:u.noop,t.error="function"==typeof t.error?t.error:u.noop;var n=w[e];if(!n||!n.webrtcStuff)return u.warn("Invalid handle"),void t.error("Invalid handle");var r=n.webrtcStuff;if(!r.dtmfSender){if(r.pc){var i=r.pc.getSenders().find((function(e){return e.track&&"audio"===e.track.kind}));if(!i)return u.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");r.dtmfSender=i.dtmf,r.dtmfSender&&(u.log("Created DTMF Sender"),r.dtmfSender.ontonechange=function(e){u.debug("Sent DTMF tone: "+e.tone)})}if(!r.dtmfSender)return u.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var o=t.dtmf;if(!o)return u.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var s=o.tones;if(!s)return u.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var a="number"==typeof o.duration?o.duration:500,l="number"==typeof o.gap?o.gap:50;u.debug("Sending DTMF string "+s+" (duration "+a+"ms, gap "+l+"ms)"),r.dtmfSender.insertDTMF(s,a,l),t.success()}function j(e,r){(r=r||{}).success="function"==typeof r.success?r.success:u.noop,r.error="function"==typeof r.error?r.error:u.noop;var i=!0;void 0!==r.asyncRequest&&null!==r.asyncRequest&&(i=!0===r.asyncRequest);var o=!0;void 0!==r.noRequest&&null!==r.noRequest&&(o=!0===r.noRequest),u.log("Destroying handle "+e+" (async="+i+")"),K(e);var s=w[e];if(!s||s.detached)return delete w[e],void r.success();if(o)return delete w[e],void r.success();if(!T)return u.warn("Is the server down? (connected=false)"),void r.error("Is the server down? (connected=false)");var a={janus:"detach",transaction:u.randomString(12)};if(s.token&&(a.token=s.token),y&&(a.apisecret=y),t)return a.session_id=S,a.handle_id=e,n.send(JSON.stringify(a)),delete w[e],void r.success();u.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",async:i,withCredentials:m,body:a,success:function(t){u.log("Destroyed handle:"),u.debug(t),"success"!==t.janus&&u.error("Ooops: "+t.error.code+" "+t.error.reason),delete w[e],r.success()},error:function(t,n){u.error(t+":",n),delete w[e],r.success()}})}function F(e,t,n,r,o){var s=w[e];if(!s||!s.webrtcStuff)return u.warn("Invalid handle"),void r.error("Invalid handle");var a=s.webrtcStuff;u.debug("streamsDone:",o),o&&(u.debug("  -- Audio tracks:",o.getAudioTracks()),u.debug("  -- Video tracks:",o.getVideoTracks()));var l=!1;if(a.myStream&&n.update&&!a.streamExternal){if((!n.update&&z(n)||n.update&&(n.addAudio||n.replaceAudio))&&o.getAudioTracks()&&o.getAudioTracks().length)if(a.myStream.addTrack(o.getAudioTracks()[0]),u.unifiedPlan){u.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]);var d=null;if((g=a.pc.getTransceivers())&&g.length>0)for(var m of g)if(m.sender&&m.sender.track&&"audio"===m.sender.track.kind||m.receiver&&m.receiver.track&&"audio"===m.receiver.track.kind){d=m;break}d&&d.sender?d.sender.replaceTrack(o.getAudioTracks()[0]):(u.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]),a.pc.addTrack(o.getAudioTracks()[0],o))}else u.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]),a.pc.addTrack(o.getAudioTracks()[0],o);if((!n.update&&J(n)||n.update&&(n.addVideo||n.replaceVideo))&&o.getVideoTracks()&&o.getVideoTracks().length)if(a.myStream.addTrack(o.getVideoTracks()[0]),u.unifiedPlan){u.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]);var g,v=null;if((g=a.pc.getTransceivers())&&g.length>0)for(var m of g)if(m.sender&&m.sender.track&&"video"===m.sender.track.kind||m.receiver&&m.receiver.track&&"video"===m.receiver.track.kind){v=m;break}v&&v.sender?v.sender.replaceTrack(o.getVideoTracks()[0]):a.pc.addTrack(o.getVideoTracks()[0],o)}else u.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]),a.pc.addTrack(o.getVideoTracks()[0],o)}else a.myStream=o,l=!0;if(!a.pc){var y={iceServers:c,iceTransportPolicy:f,bundlePolicy:h};"chrome"===u.webRTCAdapter.browserDetails.browser&&(y.sdpSemantics=u.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var _={optional:[{DtlsSrtpKeyAgreement:!0}]};if(p&&_.optional.push({googIPv6:!0}),r.rtcConstraints&&"object"==typeof r.rtcConstraints)for(var E in u.debug("Adding custom PeerConnection constraints:",r.rtcConstraints),r.rtcConstraints)_.optional.push(r.rtcConstraints[E]);"edge"===u.webRTCAdapter.browserDetails.browser&&(y.bundlePolicy="max-bundle"),u.log("Creating PeerConnection"),u.debug(_),a.pc=new RTCPeerConnection(y,_),u.debug(a.pc),a.pc.getStats&&(a.volume={},a.bitrate.value="0 kbits/sec"),u.log("Preparing local SDP and gathering candidates (trickle="+a.trickle+")"),a.pc.oniceconnectionstatechange=function(e){a.pc&&s.iceState(a.pc.iceConnectionState)},a.pc.onicecandidate=function(t){if(!t.candidate||"edge"===u.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)u.log("End of candidates."),a.iceDone=!0,!0===a.trickle?P(e,{completed:!0}):function(e,t){(t=t||{}).success="function"==typeof t.success?t.success:u.noop,t.error="function"==typeof t.error?t.error:u.noop;var n=w[e];if(!n||!n.webrtcStuff)return void u.warn("Invalid handle, not sending anything");var r=n.webrtcStuff;if(u.log("Sending offer/answer SDP..."),!r.mySdp)return void u.warn("Local SDP instance is invalid, not sending anything...");r.mySdp={type:r.pc.localDescription.type,sdp:r.pc.localDescription.sdp},!1===r.trickle&&(r.mySdp.trickle=!1);u.debug(t),r.sdpSent=!0,t.success(r.mySdp)}(e,r);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===a.trickle&&P(e,n)}},a.pc.ontrack=function(e){u.log("Handling Remote Track"),u.debug(e),e.streams&&(a.remoteStream=e.streams[0],s.onremotestream(a.remoteStream),e.track.onended||(u.log("Adding onended callback to track:",e.track),e.track.onended=function(e){u.log("Remote track muted/removed:",e),a.remoteStream&&(a.remoteStream.removeTrack(e.target),s.onremotestream(a.remoteStream))}))}}if(l&&o){u.log("Adding local stream");var T=!0===r.simulcast2;o.getTracks().forEach((function(e){if(u.log("Adding local track:",e),T)if("audio"===e.kind)a.pc.addTrack(e,o);else{u.log("Enabling rid-based simulcasting:",e);const t=b(r.simulcastMaxBitrates);a.pc.addTransceiver(e,{direction:"sendrecv",streams:[o],sendEncodings:[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low}]})}else a.pc.addTrack(e,o)}))}(function(e){if(u.debug("isDataEnabled:",e),"edge"===u.webRTCAdapter.browserDetails.browser)return u.warn("Edge doesn't support data channels yet"),!1;return null!=e&&!0===e.data})(n)&&!a.dataChannel[u.dataChanDefaultLabel]&&(u.log("Creating data channel"),x(e,u.dataChanDefaultLabel,!1),a.pc.ondatachannel=function(t){u.log("Data channel created by Janus:",t),x(e,t.channel.label,t.channel)}),a.myStream&&s.onlocalstream(a.myStream),t?a.pc.setRemoteDescription(t).then((function(){if(u.log("Remote description accepted!"),a.remoteSdp=t.sdp,a.candidates&&a.candidates.length>0){for(var o=0;o<a.candidates.length;o++){var s=a.candidates[o];u.debug("Adding remote candidate:",s),s&&!0!==s.completed?a.pc.addIceCandidate(s):a.pc.addIceCandidate(u.endOfCandidates)}a.candidates=[]}!function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:u.noop,n.error="function"==typeof n.error?n.error:u.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:u.noop;var r=w[e];if(!r||!r.webrtcStuff)return u.warn("Invalid handle"),void n.error("Invalid handle");var o=r.webrtcStuff,s=!0===n.simulcast;s?u.log("Creating answer (iceDone="+o.iceDone+", simulcast="+s+")"):u.log("Creating answer (iceDone="+o.iceDone+")");var a=null;if(u.unifiedPlan){a={voiceActivityDetection:!1};var l=null,d=null,c=o.pc.getTransceivers();if(c&&c.length>0)for(var f of c)f.sender&&f.sender.track&&"audio"===f.sender.track.kind||f.receiver&&f.receiver.track&&"audio"===f.receiver.track.kind?l||(l=f):(f.sender&&f.sender.track&&"video"===f.sender.track.kind||f.receiver&&f.receiver.track&&"video"===f.receiver.track.kind)&&(d||(d=f));var h=z(t),p=W(t);if(h||p){if(h&&p){if(l)try{l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",u.log("Setting audio transceiver to sendrecv:",l)}catch(e){u.error(e)}}else if(h&&!p)try{l&&(l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",u.log("Setting audio transceiver to sendonly:",l))}catch(e){u.error(e)}else if(!h&&p)if(l)try{l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",u.log("Setting audio transceiver to recvonly:",l)}catch(e){u.error(e)}else l=o.pc.addTransceiver("audio",{direction:"recvonly"}),u.log("Adding recvonly audio transceiver:",l)}else if(t.removeAudio&&l)try{l.setDirection?l.setDirection("inactive"):l.direction="inactive",u.log("Setting audio transceiver to inactive:",l)}catch(e){u.error(e)}var m=J(t),g=X(t);if(m||g){if(m&&g){if(d)try{d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",u.log("Setting video transceiver to sendrecv:",d)}catch(e){u.error(e)}}else if(m&&!g){if(d)try{d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",u.log("Setting video transceiver to sendonly:",d)}catch(e){u.error(e)}}else if(!m&&g)if(d)try{d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",u.log("Setting video transceiver to recvonly:",d)}catch(e){u.error(e)}else d=o.pc.addTransceiver("video",{direction:"recvonly"}),u.log("Adding recvonly video transceiver:",d)}else if(t.removeVideo&&d)try{d.setDirection?d.setDirection("inactive"):d.direction="inactive",u.log("Setting video transceiver to inactive:",d)}catch(e){u.error(e)}}else a="firefox"===u.webRTCAdapter.browserDetails.browser||"edge"===u.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:W(t),offerToReceiveVideo:X(t)}:{mandatory:{OfferToReceiveAudio:W(t),OfferToReceiveVideo:X(t)}};u.debug(a);var v=J(t);if(v&&s&&"firefox"===u.webRTCAdapter.browserDetails.browser){u.log("Enabling Simulcasting for Firefox (RID)");var y=o.pc.getSenders()[1];u.log(y);var _=y.getParameters();u.log(_);const e=b(n.simulcastMaxBitrates);y.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:e.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:e.medium},{rid:"low",active:!0,priority:"low",maxBitrate:e.low}]})}o.pc.createAnswer(a).then((function(e){u.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,u.log("Setting local description"),v&&s&&("chrome"===u.webRTCAdapter.browserDetails.browser?u.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==u.webRTCAdapter.browserDetails.browser&&u.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),v&&(e.sdp=i(e.sdp)),o.mySdp=e.sdp,o.pc.setLocalDescription(e).catch(n.error),o.mediaConstraints=a,o.iceDone||o.trickle?n.success(e):u.log("Waiting for all candidates...")}),n.error)}(e,n,r)}),r.error):function(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:u.noop,n.error="function"==typeof n.error?n.error:u.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:u.noop;var r=w[e];if(!r||!r.webrtcStuff)return u.warn("Invalid handle"),void n.error("Invalid handle");var o=r.webrtcStuff,s=!0===n.simulcast;s?u.log("Creating offer (iceDone="+o.iceDone+", simulcast="+s+")"):u.log("Creating offer (iceDone="+o.iceDone+")");var a={voiceActivityDetection:!1};if(u.unifiedPlan){var l=null,d=null,c=o.pc.getTransceivers();if(c&&c.length>0)for(var f of c)f.sender&&f.sender.track&&"audio"===f.sender.track.kind||f.receiver&&f.receiver.track&&"audio"===f.receiver.track.kind?l||(l=f):(f.sender&&f.sender.track&&"video"===f.sender.track.kind||f.receiver&&f.receiver.track&&"video"===f.receiver.track.kind)&&(d||(d=f));var h=z(t),p=W(t);h||p?h&&p?l&&(l.setDirection?l.setDirection("sendrecv"):l.direction="sendrecv",u.log("Setting audio transceiver to sendrecv:",l)):h&&!p?l&&(l.setDirection?l.setDirection("sendonly"):l.direction="sendonly",u.log("Setting audio transceiver to sendonly:",l)):!h&&p&&(l?(l.setDirection?l.setDirection("recvonly"):l.direction="recvonly",u.log("Setting audio transceiver to recvonly:",l)):(l=o.pc.addTransceiver("audio",{direction:"recvonly"}),u.log("Adding recvonly audio transceiver:",l))):t.removeAudio&&l&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive",u.log("Setting audio transceiver to inactive:",l));var m=J(t),g=X(t);m||g?m&&g?d&&(d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",u.log("Setting video transceiver to sendrecv:",d)):m&&!g?d&&(d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",u.log("Setting video transceiver to sendonly:",d)):!m&&g&&(d?(d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",u.log("Setting video transceiver to recvonly:",d)):(d=o.pc.addTransceiver("video",{direction:"recvonly"}),u.log("Adding recvonly video transceiver:",d))):t.removeVideo&&d&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive",u.log("Setting video transceiver to inactive:",d))}else a.offerToReceiveAudio=W(t),a.offerToReceiveVideo=X(t),a.voiceActivityDetection=!1;!0===n.iceRestart&&(a.iceRestart=!0);u.debug(a);var v=J(t);if(v&&s&&"firefox"===u.webRTCAdapter.browserDetails.browser){u.log("Enabling Simulcasting for Firefox (RID)");var y=o.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(y){var _=y.getParameters();_||(_={});const e=b(n.simulcastMaxBitrates);_.encodings=[{rid:"h",active:!0,maxBitrate:e.high},{rid:"m",active:!0,maxBitrate:e.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:e.low}],y.setParameters(_)}}o.pc.createOffer(a).then((function(e){u.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,u.log("Setting local description"),v&&s&&("chrome"===u.webRTCAdapter.browserDetails.browser||"safari"===u.webRTCAdapter.browserDetails.browser?(u.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=function(e){for(var t=e.split("\r\n"),n=!1,r=[-1],i=[-1],o=null,s=null,a=null,l=null,d=-1,c=0;c<t.length;c++){if(h=t[c].match(/m=(\w+) */)){if("video"===h[1]){if(!(r[0]<0)){d=c;break}n=!0}else if(r[0]>-1){d=c;break}}else if(n){var f=t[c].match(/a=ssrc-group:FID (\d+) (\d+)/);if(f)r[0]=f[1],i[0]=f[2],t.splice(c,1),c--;else{if(r[0]){if((m=t[c].match("a=ssrc:"+r[0]+" cname:(.+)"))&&(o=m[1]),(m=t[c].match("a=ssrc:"+r[0]+" msid:(.+)"))&&(s=m[1]),(m=t[c].match("a=ssrc:"+r[0]+" mslabel:(.+)"))&&(a=m[1]),(m=t[c].match("a=ssrc:"+r[0]+" label:(.+)"))&&(l=m[1]),0===t[c].indexOf("a=ssrc:"+i[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+r[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(r[0]<0){d=-1,n=!1;for(c=0;c<t.length;c++){var h;if(h=t[c].match(/m=(\w+) */)){if("video"===h[1]){if(!(r[0]<0)){d=c;break}n=!0}else if(r[0]>-1){d=c;break}}else if(n){if(r[0]<0){var p=t[c].match(/a=ssrc:(\d+)/);if(p){r[0]=p[1],t.splice(c,1),c--;continue}}else{var m;if((m=t[c].match("a=ssrc:"+r[0]+" cname:(.+)"))&&(o=m[1]),(m=t[c].match("a=ssrc:"+r[0]+" msid:(.+)"))&&(s=m[1]),(m=t[c].match("a=ssrc:"+r[0]+" mslabel:(.+)"))&&(a=m[1]),(m=t[c].match("a=ssrc:"+r[0]+" label:(.+)"))&&(l=m[1]),0===t[c].indexOf("a=ssrc:"+i[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+r[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(r[0]<0)return u.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;d<0&&(d=t.length);r[1]=Math.floor(4294967295*Math.random()),r[2]=Math.floor(4294967295*Math.random()),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random());for(c=0;c<r.length;c++)o&&(t.splice(d,0,"a=ssrc:"+r[c]+" cname:"+o),d++),s&&(t.splice(d,0,"a=ssrc:"+r[c]+" msid:"+s),d++),a&&(t.splice(d,0,"a=ssrc:"+r[c]+" mslabel:"+a),d++),l&&(t.splice(d,0,"a=ssrc:"+r[c]+" label:"+l),d++),o&&(t.splice(d,0,"a=ssrc:"+i[c]+" cname:"+o),d++),s&&(t.splice(d,0,"a=ssrc:"+i[c]+" msid:"+s),d++),a&&(t.splice(d,0,"a=ssrc:"+i[c]+" mslabel:"+a),d++),l&&(t.splice(d,0,"a=ssrc:"+i[c]+" label:"+l),d++);t.splice(d,0,"a=ssrc-group:FID "+r[2]+" "+i[2]),t.splice(d,0,"a=ssrc-group:FID "+r[1]+" "+i[1]),t.splice(d,0,"a=ssrc-group:FID "+r[0]+" "+i[0]),t.splice(d,0,"a=ssrc-group:SIM "+r[0]+" "+r[1]+" "+r[2]),(e=t.join("\r\n")).endsWith("\r\n")||(e+="\r\n");return e}(e.sdp)):"firefox"!==u.webRTCAdapter.browserDetails.browser&&u.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),v&&(e.sdp=i(e.sdp)),o.mySdp=e.sdp,o.pc.setLocalDescription(e).catch(n.error),o.mediaConstraints=a,o.iceDone||o.trickle?(u.log("Offer ready"),u.debug(n),n.success(e)):u.log("Waiting for all candidates...")}),n.error)}(e,n,r)}function U(e,t,n){(n=n||{}).success="function"==typeof n.success?n.success:u.noop,n.error="function"==typeof n.error?n.error:Y;var r=n.jsep;if(t&&r)return u.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!(t||r&&r.type&&r.sdp))return u.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media="object"==typeof n.media&&n.media?n.media:{audio:!0,video:!0};var i=n.media,o=w[e];if(!o||!o.webrtcStuff)return u.warn("Invalid handle"),void n.error("Invalid handle");var a,l=o.webrtcStuff;if(l.trickle=(a=n.trickle,u.debug("isTrickleEnabled:",a),!1!==a),l.pc){if(u.log("Updating existing media session"),i.update=!0,n.stream)n.stream!==l.myStream&&u.log("Renegotiation involves a new external stream");else{if(i.addAudio){if(i.keepAudio=!1,i.replaceAudio=!1,i.removeAudio=!1,i.audioSend=!0,l.myStream&&l.myStream.getAudioTracks()&&l.myStream.getAudioTracks().length)return u.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else i.removeAudio?(i.keepAudio=!1,i.replaceAudio=!1,i.addAudio=!1,i.audioSend=!1):i.replaceAudio&&(i.keepAudio=!1,i.addAudio=!1,i.removeAudio=!1,i.audioSend=!0);if(l.myStream?l.myStream.getAudioTracks()&&0!==l.myStream.getAudioTracks().length?!z(i)||i.removeAudio||i.replaceAudio||(i.keepAudio=!0):(i.replaceAudio&&(i.keepAudio=!1,i.replaceAudio=!1,i.addAudio=!0,i.audioSend=!0),z(i)&&(i.keepVideo=!1,i.addAudio=!0)):(i.replaceAudio&&(i.keepAudio=!1,i.replaceAudio=!1,i.addAudio=!0,i.audioSend=!0),z(i)&&(i.keepAudio=!1,i.addAudio=!0)),i.addVideo){if(i.keepVideo=!1,i.replaceVideo=!1,i.removeVideo=!1,i.videoSend=!0,l.myStream&&l.myStream.getVideoTracks()&&l.myStream.getVideoTracks().length)return u.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else i.removeVideo?(i.keepVideo=!1,i.replaceVideo=!1,i.addVideo=!1,i.videoSend=!1):i.replaceVideo&&(i.keepVideo=!1,i.addVideo=!1,i.removeVideo=!1,i.videoSend=!0);l.myStream&&l.myStream.getVideoTracks()&&0!==l.myStream.getVideoTracks().length?!J(i)||i.removeVideo||i.replaceVideo||(i.keepVideo=!0):(i.replaceVideo&&(i.keepVideo=!1,i.replaceVideo=!1,i.addVideo=!0,i.videoSend=!0),J(i)&&(i.keepVideo=!1,i.addVideo=!0)),i.addData&&(i.data=!0)}if(z(i)&&i.keepAudio&&J(i)&&i.keepVideo)return o.consentDialog(!1),void F(e,r,i,n,l.myStream)}else i.update=!1,i.keepAudio=!1,i.keepVideo=!1;if(i.update&&!l.streamExternal){if(i.removeAudio||i.replaceAudio){if(l.myStream&&l.myStream.getAudioTracks()&&l.myStream.getAudioTracks().length){var d=l.myStream.getAudioTracks()[0];u.log("Removing audio track:",d),l.myStream.removeTrack(d);try{d.stop()}catch(C){}}if(l.pc.getSenders()&&l.pc.getSenders().length){var c=!0;if(i.replaceAudio&&u.unifiedPlan&&(c=!1),c)for(var d of l.pc.getSenders())d&&d.track&&"audio"===d.track.kind&&(u.log("Removing audio sender:",d),l.pc.removeTrack(d))}}if(i.removeVideo||i.replaceVideo){if(l.myStream&&l.myStream.getVideoTracks()&&l.myStream.getVideoTracks().length){d=l.myStream.getVideoTracks()[0];u.log("Removing video track:",d),l.myStream.removeTrack(d);try{d.stop()}catch(I){}}if(l.pc.getSenders()&&l.pc.getSenders().length){var f=!0;if(i.replaceVideo&&u.unifiedPlan&&(f=!1),f)for(var d of l.pc.getSenders())d&&d.track&&"video"===d.track.kind&&(u.log("Removing video sender:",d),l.pc.removeTrack(d))}}}if(n.stream){var h=n.stream;if(u.log("MediaStream provided by the application"),u.debug(h),i.update&&l.myStream&&l.myStream!==n.stream&&!l.streamExternal){try{var p=l.myStream.getTracks();for(var m of p)u.log(m),m&&m.stop()}catch(O){}l.myStream=null}return l.streamExternal=!0,o.consentDialog(!1),void F(e,r,i,n,h)}if(z(i)||J(i)){if(!u.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var g={mandatory:{},optional:[]};o.consentDialog(!0);var v=z(i);v&&i&&"object"==typeof i.audio&&(v=i.audio);var y=J(i);if(y&&i){var _=!0===n.simulcast,E=!0===n.simulcast2;if(!_&&!E||r||i.video||(i.video="hires"),i.video&&"screen"!=i.video&&"window"!=i.video)if("object"==typeof i.video)y=i.video;else{var b=0,T=0;"lowres"===i.video?(T=240,240,b=320):"lowres-16:9"===i.video?(T=180,180,b=320):"hires"===i.video||"hires-16:9"===i.video||"hdres"===i.video?(T=720,720,b=1280):"fhdres"===i.video?(T=1080,1080,b=1920):"4kres"===i.video?(T=2160,2160,b=3840):"stdres"===i.video?(T=480,480,b=640):"stdres-16:9"===i.video?(T=360,360,b=640):(u.log("Default video setting is stdres 4:3"),T=480,480,b=640),u.log("Adding media constraint:",i.video),y={height:{ideal:T},width:{ideal:b}},u.log("Adding video constraint:",y)}else if("screen"===i.video||"window"===i.video){if(i.screenshareFrameRate||(i.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0,audio:i.captureDesktopAudio}).then((function(t){o.consentDialog(!1),z(i)&&!i.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(o){t.addTrack(o.getAudioTracks()[0]),F(e,r,i,n,t)})):F(e,r,i,n,t)}),(function(e){o.consentDialog(!1),n.error(e)}));function D(t,s){o.consentDialog(!1),t?n.error(t):F(e,r,i,n,s)}function M(e,t,n){u.log("Adding media constraint (screen capture)"),u.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)})).catch((function(e){o.consentDialog(!1),t(e)}))}if("chrome"===u.webRTCAdapter.browserDetails.browser){var S=u.webRTCAdapter.browserDetails.version,A=33;window.navigator.userAgent.match("Linux")&&(A=35),S>=26&&S<=A?M(g={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:i.screenshareFrameRate,maxFrameRate:i.screenshareFrameRate,chromeMediaSource:"screen"}},audio:z(i)&&!i.keepAudio},D):u.extension.getScreen((function(e,t){if(e)return o.consentDialog(!1),n.error(e);(g={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:i.screenshareFrameRate,maxFrameRate:i.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=t,M(g,D,z(i)&&!i.keepAudio)}))}else if("firefox"===u.webRTCAdapter.browserDetails.browser){if(!(u.webRTCAdapter.browserDetails.version>=33)){var R=new Error("NavigatorUserMediaError");return R.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",o.consentDialog(!1),void n.error(R)}M(g={video:{mozMediaSource:i.video,mediaSource:i.video},audio:z(i)&&!i.keepAudio},(function(e,t){if(D(e,t),!e)var n=t.currentTime,r=window.setInterval((function(){t||window.clearInterval(r),t.currentTime==n&&(window.clearInterval(r),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}i&&"screen"===i.video||navigator.mediaDevices.enumerateDevices().then((function(t){var a=t.some((function(e){return"audioinput"===e.kind})),l=function(e){if(u.debug("isScreenSendEnabled:",e),!e)return!1;if("object"!=typeof e.video||"object"!=typeof e.video.mandatory)return!1;var t=e.video.mandatory;if(t.chromeMediaSource)return"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource;if(t.mozMediaSource)return"window"===t.mozMediaSource||"screen"===t.mozMediaSource;if(t.mediaSource)return"window"===t.mediaSource||"screen"===t.mediaSource;return!1}(i)||t.some((function(e){return"videoinput"===e.kind})),d=z(i),c=J(i),f=function(e){return u.debug("isAudioSendRequired:",e),!!e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}(i),p=function(e){return u.debug("isVideoSendRequired:",e),!!e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}(i);if(d||c||f||p){var m=!!d&&a,g=!!c&&l;if(!m&&!g)return o.consentDialog(!1),n.error("No capture device found"),!1;if(!m&&f)return o.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!g&&p)return o.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var _={audio:!(!a||i.keepAudio)&&v,video:!(!l||i.keepVideo)&&y};if(u.debug("getUserMedia constraints",_),_.audio||_.video){if("res"in window){_.video={},_.video.deviceId=videoDeviceId?{exact:videoDeviceId}:void 0;let e=s(res);_.video.width={ideal:e.width},_.video.height={ideal:e.height}}"audio"in _&&_.audio&&(_.audio={},_.audio.echoCancellation=echoC,_.audio.autoGainControl=gainC,_.audio.noiseSuppression=noiseS,_.audio.channelCount=2),navigator.mediaDevices.getUserMedia(_).then((function(t){if(t.contentHint=window.audioType?window.audioType:"",window.delay=window.delay||0,0!==window.delay&&_.audio){let e=(s=new AudioContext).createMediaStreamSource(t);const n=s.createMediaStreamDestination(),r=s.createDelay(10);r.delayTime.value=window.delay||0,e.connect(r),e.muted=!0,r.connect(n),o.consentDialog(!1),t.addTrack(n.stream.getAudioTracks()[0]),t.removeTrack(t.getAudioTracks()[0])}if(window.volIncrease>0&&_.audio){var s;let e=(s=new AudioContext).createMediaStreamSource(t);const n=s.createMediaStreamDestination();var a=s.createGain();a.gain.value=window.volIncrease,e.connect(a),a.connect(n),o.consentDialog(!1),t.addTrack(n.stream.getAudioTracks()[0]),t.removeTrack(t.getAudioTracks()[0])}F(e,r,i,n,t)})).catch((function(e){alert(e),o.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})}))}else o.consentDialog(!1),F(e,r,i,n,h)})).catch((function(e){o.consentDialog(!1),n.error("enumerateDevices error",e)}))}else F(e,r,i,n)}function B(e,t){(t=t||{}).success="function"==typeof t.success?t.success:u.noop,t.error="function"==typeof t.error?t.error:Y;var n=t.jsep,r=w[e];if(!r||!r.webrtcStuff)return u.warn("Invalid handle"),void t.error("Invalid handle");var o=r.webrtcStuff;if(n){if(!o.pc)return u.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");n.sdp=n.sdp.replace("opus/48000/2","opus/48000/2\r\na=rtcp-fb:111 transport-cc\r\na=fmtp:111 minptime=10;useinbandfec=1; stereo=1; sprop-stereo=1; maxaveragebitrate=131072; x-google-min-bitrate=6; x-google-max-bitrate=128; cbr=1;"),o.pc.setRemoteDescription(n).then((function(){if(u.log("Remote description accepted!"),n.sdp=i(n.sdp),o.remoteSdp=n.sdp,o.candidates&&o.candidates.length>0){for(var e=0;e<o.candidates.length;e++){var r=o.candidates[e];u.debug("Adding remote candidate:",r),r&&!0!==r.completed?o.pc.addIceCandidate(r):o.pc.addIceCandidate(u.endOfCandidates)}o.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function G(e,t){var n=w[e];if(!n||!n.webrtcStuff)return u.warn("Invalid handle"),0;var r=t?"remote":"local",i=n.webrtcStuff;return i.volume[r]||(i.volume[r]={value:0}),i.pc.getStats&&"chrome"===u.webRTCAdapter.browserDetails.browser?t&&!i.remoteStream?(u.warn("Remote stream unavailable"),0):t||i.myStream?i.volume[r].timer?i.volume[r].value:(u.log("Starting "+r+" volume monitor"),i.volume[r].timer=setInterval((function(){i.pc.getStats().then((function(e){for(var n=e.result(),o=0;o<n.length;o++){var s=n[o];"ssrc"==s.type&&(t&&s.stat("audioOutputLevel")?i.volume[r].value=parseInt(s.stat("audioOutputLevel")):!t&&s.stat("audioInputLevel")&&(i.volume[r].value=parseInt(s.stat("audioInputLevel"))))}}))}),200),0):(u.warn("Local stream unavailable"),0):(u.warn("Getting the "+r+" volume unsupported by browser"),0)}function q(e,t){var n=w[e];if(!n||!n.webrtcStuff)return u.warn("Invalid handle"),!0;var r=n.webrtcStuff;return r.pc?r.myStream?t?r.myStream.getVideoTracks()&&0!==r.myStream.getVideoTracks().length?!r.myStream.getVideoTracks()[0].enabled:(u.warn("No video track"),!0):r.myStream.getAudioTracks()&&0!==r.myStream.getAudioTracks().length?!r.myStream.getAudioTracks()[0].enabled:(u.warn("No audio track"),!0):(u.warn("Invalid local MediaStream"),!0):(u.warn("Invalid PeerConnection"),!0)}function H(e,t,n){var r=w[e];if(!r||!r.webrtcStuff)return u.warn("Invalid handle"),!1;var i=r.webrtcStuff;return i.pc?i.myStream?t?i.myStream.getVideoTracks()&&0!==i.myStream.getVideoTracks().length?(i.myStream.getVideoTracks()[0].enabled=!n,!0):(u.warn("No video track"),!1):i.myStream.getAudioTracks()&&0!==i.myStream.getAudioTracks().length?(i.myStream.getAudioTracks()[0].enabled=!n,!0):(u.warn("No audio track"),!1):(u.warn("Invalid local MediaStream"),!1):(u.warn("Invalid PeerConnection"),!1)}function V(e){var t=w[e];if(!t||!t.webrtcStuff)return u.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return n.pc?n.pc.getStats?n.bitrate.timer?n.bitrate.value:(u.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var r=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"===u.webRTCAdapter.browserDetails.browser&&(r/=1e3);var i=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/r);"safari"===u.webRTCAdapter.browserDetails.browser&&(i=parseInt(i/1e3)),n.bitrate.value=i+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):(u.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"):"Invalid PeerConnection"}function Y(e){u.error("WebRTC error:",e)}function K(e,r){u.log("Cleaning WebRTC stuff");var i=w[e];if(i){var o=i.webrtcStuff;if(o){if(!0===r){var s={janus:"hangup",transaction:u.randomString(12)};i.token&&(s.token=i.token),y&&(s.apisecret=y),u.debug("Sending hangup request (handle="+e+"):"),u.debug(s),t?(s.session_id=S,s.handle_id=e,n.send(JSON.stringify(s))):u.httpAPICall(d+"/"+S+"/"+e,{verb:"POST",withCredentials:m,body:s})}o.remoteStream=null,o.volume&&(o.volume.local&&o.volume.local.timer&&clearInterval(o.volume.local.timer),o.volume.remote&&o.volume.remote.timer&&clearInterval(o.volume.remote.timer)),o.volume={},o.bitrate.timer&&clearInterval(o.bitrate.timer),o.bitrate.timer=null,o.bitrate.bsnow=null,o.bitrate.bsbefore=null,o.bitrate.tsnow=null,o.bitrate.tsbefore=null,o.bitrate.value=null;try{if(!o.streamExternal&&o.myStream){u.log("Stopping local stream tracks");var a=o.myStream.getTracks();for(var l of a)u.log(l),l&&l.stop()}}catch(e){}o.streamExternal=!1,o.myStream=null;try{o.pc.close()}catch(e){}o.pc=null,o.candidates=null,o.mySdp=null,o.remoteSdp=null,o.iceDone=!1,o.dataChannel={},o.dtmfSender=null}i.oncleanup()}}function z(e){return u.debug("isAudioSendEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function W(e){return u.debug("isAudioRecvEnabled:",e),!e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function J(e){return u.debug("isVideoSendEnabled:",e),!e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function X(e){return u.debug("isVideoRecvEnabled:",e),!e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}M(e),this.getServer=function(){return d},this.isConnected=function(){return T},this.reconnect=function(e){(e=e||{}).success="function"==typeof e.success?e.success:u.noop,e.error="function"==typeof e.error?e.error:u.noop,e.reconnect=!0,M(e)},this.getSessionId=function(){return S},this.destroy=function(i){!function(i){(i=i||{}).success="function"==typeof i.success?i.success:u.noop;var s=!0;void 0!==i.asyncRequest&&null!==i.asyncRequest&&(s=!0===i.asyncRequest);var a=!0;void 0!==i.notifyDestroyed&&null!==i.notifyDestroyed&&(a=!0===i.notifyDestroyed);var l=!1;void 0!==i.cleanupHandles&&null!==i.cleanupHandles&&(l=!0===i.cleanupHandles);if(u.log("Destroying session "+S+" (async="+s+")"),!T)return u.warn("Is the server down? (connected=false)"),void i.success();if(null==S)return u.warn("No session to destroy"),i.success(),void(a&&e.destroyed());if(l)for(var c in w)j(c,{noRequest:!0});if(!T)return u.warn("Is the server down? (connected=false)"),void i.success();var f={janus:"destroy",transaction:u.randomString(12)};null!=v&&(f.token=v);null!=y&&(f.apisecret=y);if(t){f.session_id=S;var h=function(){for(var e in r)n.removeEventListener(e,r[e]);n.removeEventListener("message",p),n.removeEventListener("error",g),o&&clearTimeout(o),n.close()},p=function(t){var n=JSON.parse(t.data);n.session_id==f.session_id&&n.transaction==f.transaction&&(h(),i.success(),a&&e.destroyed())},g=function(t){h(),i.error("Failed to destroy the server: Is the server down?"),a&&e.destroyed()};return n.addEventListener("message",p),n.addEventListener("error",g),void n.send(JSON.stringify(f))}u.httpAPICall(d+"/"+S,{verb:"POST",async:s,withCredentials:m,body:f,success:function(t){u.log("Destroyed session:"),u.debug(t),S=null,T=!1,"success"!==t.janus&&u.error("Ooops: "+t.error.code+" "+t.error.reason),i.success(),a&&e.destroyed()},error:function(t,n){u.error(t+":",n),S=null,T=!1,i.success(),a&&e.destroyed()}})}(i)},this.attach=function(e){!function(e){if((e=e||{}).success="function"==typeof e.success?e.success:u.noop,e.error="function"==typeof e.error?e.error:u.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:u.noop,e.iceState="function"==typeof e.iceState?e.iceState:u.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:u.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:u.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:u.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:u.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:u.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:u.noop,e.ondata="function"==typeof e.ondata?e.ondata:u.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:u.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:u.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:u.noop,!T)return u.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var r=e.plugin;if(null==r)return u.error("Invalid plugin"),void e.error("Invalid plugin");var i=e.opaqueId,o=e.token?e.token:v,s=u.randomString(12),a={janus:"attach",plugin:r,opaque_id:i,transaction:s};null!=o&&(a.token=o);null!=y&&(a.apisecret=y);if(t)return C[s]=function(t){if(u.debug(t),"success"!==t.janus)return u.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;u.log("Created handle: "+n);var i={session:A,plugin:r,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:null,dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(){return G(n,!0)},getRemoteVolume:function(){return G(n,!0)},getLocalVolume:function(){return G(n,!1)},isAudioMuted:function(){return q(n,!1)},muteAudio:function(){return H(n,!1,!0)},unmuteAudio:function(){return H(n,!1,!1)},isVideoMuted:function(){return q(n,!0)},muteVideo:function(){return H(n,!0,!0)},unmuteVideo:function(){return H(n,!0,!1)},getBitrate:function(){return V(n)},send:function(e){N(n,e)},data:function(e){L(n,e)},dtmf:function(e){k(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){U(n,!0,e)},createAnswer:function(e){U(n,!1,e)},handleRemoteJsep:function(e){B(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){K(n,!0===e)},detach:function(e){j(n,e)}};w[n]=i,e.success(i)},a.session_id=S,void n.send(JSON.stringify(a));u.httpAPICall(d+"/"+S,{verb:"POST",withCredentials:m,body:a,success:function(t){if(u.debug(t),"success"!==t.janus)return u.error("Ooops: "+t.error.code+" "+t.error.reason),void e.error("Ooops: "+t.error.code+" "+t.error.reason);var n=t.data.id;u.log("Created handle: "+n);var i={session:A,plugin:r,id:n,token:o,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:null,dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return r},getVolume:function(){return G(n,!0)},getRemoteVolume:function(){return G(n,!0)},getLocalVolume:function(){return G(n,!1)},isAudioMuted:function(){return q(n,!1)},muteAudio:function(){return H(n,!1,!0)},unmuteAudio:function(){return H(n,!1,!1)},isVideoMuted:function(){return q(n,!0)},muteVideo:function(){return H(n,!0,!0)},unmuteVideo:function(){return H(n,!0,!1)},getBitrate:function(){return V(n)},send:function(e){N(n,e)},data:function(e){L(n,e)},dtmf:function(e){k(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){U(n,e)},createAnswer:function(e){U(n,e)},handleRemoteJsep:function(e){B(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){K(n,!0===e)},detach:function(e){j(n,e)}};w[n]=i,e.success(i)},error:function(e,t){u.error(e+":",t)}})}(e)}}u.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},extension:e&&e.extension||a,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||r.default,httpAPICall:function(e,r){var i={method:r.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===r.verb&&(i.headers["Content-Type"]="application/json"),void 0!==r.withCredentials&&(i.credentials=!0===r.withCredentials?"include":r.withCredentials?r.withCredentials:"omit"),r.body&&(i.body=JSON.stringify(r.body));var o=t(e,i).catch((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(r.timeout){var s=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:r.timeout})}),r.timeout)}));o=n.race([o,s])}return o.then((function(e){return e.ok?typeof r.success==typeof u.noop?e.json().then((function(e){r.success(e)})).catch((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})})).catch((function(e){typeof r.error==typeof u.noop&&r.error(e.message||"<< internal error >>",e)})),o}}},u.useOldDependencies=function(e){var t=e&&e.jQuery||jQuery,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||a,webRTCAdapter:e&&e.adapter||r.default,httpAPICall:function(e,n){var r=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},i=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(r,i,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){typeof n.success==typeof u.noop&&n.success(e)},error:function(e,t,r){typeof n.error==typeof u.noop&&n.error(t,r)}}))}}},u.noop=function(){},u.dataChanDefaultLabel="JanusDataChannel",u.endOfCandidates=null,u.init=function(e){if((e=e||{}).callback="function"==typeof e.callback?e.callback:u.noop,!0===u.initDone)e.callback();else{if("undefined"!=typeof console&&void 0!==console.log||(console={log:function(){}}),u.trace=u.noop,u.debug=u.noop,u.vdebug=u.noop,u.log=u.noop,u.warn=u.noop,u.error=u.noop,!0===e.debug||"all"===e.debug)u.trace=console.trace.bind(console),u.debug=console.debug.bind(console),u.vdebug=console.debug.bind(console),u.log=console.log.bind(console),u.warn=console.warn.bind(console),u.error=console.error.bind(console);else if(Array.isArray(e.debug))for(var t in e.debug){var n=e.debug[t];switch(n){case"trace":u.trace=console.trace.bind(console);break;case"debug":u.debug=console.debug.bind(console);break;case"vdebug":u.vdebug=console.debug.bind(console);break;case"log":u.log=console.log.bind(console);break;case"warn":u.warn=console.warn.bind(console);break;case"error":u.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+n+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')")}}u.log("Initializing library");var r=e.dependencies||u.useDefaultDependencies();u.isArray=r.isArray,u.webRTCAdapter=r.webRTCAdapter,u.httpAPICall=r.httpAPICall,u.newWebSocket=r.newWebSocket,u.extension=r.extension,u.extension.init(),u.listDevices=function(e,t){return new Promise(((e,n)=>{let r={audio:t.audio,video:t.video};r.echoCancellation=t.echoC,r.autoGainControl=t.gainC,r.noiseSuppression=t.noiseS,navigator.mediaDevices.getUserMedia(r).then((t=>{navigator.mediaDevices.enumerateDevices().then((function(n){e(n);try{var r=t.getTracks();for(var i in r){var o=r[i];null!=o&&o.stop()}}catch(e){}}))})).catch((e=>{n(e)}))}))},u.attachMediaStream=function(e,t){"chrome"===u.webRTCAdapter.browserDetails.browser?u.webRTCAdapter.browserDetails.version>=52?e.srcObject=t:void 0!==e.src?e.src=URL.createObjectURL(t):u.error("Error attaching stream to element"):e.srcObject=t},u.reattachMediaStream=function(e,t){"chrome"===u.webRTCAdapter.browserDetails.browser?u.webRTCAdapter.browserDetails.version>=52?e.srcObject=t.srcObject:void 0!==e.src?e.src=t.src:u.error("Error reattaching stream to element"):e.srcObject=t.srcObject};var i=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",o=window["on"+i];if(window.addEventListener(i,(function(e){for(var t in u.log("Closing window"),u.sessions)null!==u.sessions[t]&&void 0!==u.sessions[t]&&u.sessions[t].destroyOnUnload&&(u.log("Destroying session "+t),u.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));o&&"function"==typeof o&&o()})),u.safariVp8=!1,"safari"===u.webRTCAdapter.browserDetails.browser&&u.webRTCAdapter.browserDetails.version>=605){var s=new RTCPeerConnection({},{});s.createOffer({offerToReceiveVideo:!0}).then((function(e){u.safariVp8=-1!==e.sdp.indexOf("VP8"),u.safariVp8?u.log("This version of Safari supports VP8"):u.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),s.close(),s=null}))}u.initDone=!0,e.callback()}},u.isWebrtcSupported=function(){return!!window.RTCPeerConnection},u.isGetUserMediaAvailable=function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)},u.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++){var i=Math.floor(Math.random()*t.length);n+=t.substring(i,i+1)}return n}},"./src/wcs/libs/janusScreenShare.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{JanusScreenShare:()=>i});var r=n("./src/wcs/libs/janus.js"),i=function(e,t,n){let i=null;i="http:"===window.location.protocol?"ws://"+(t||window.location.hostname)+":8188/janus":"wss://"+(t||window.location.hostname)+":8989/janus";var o=null,s=null,a="screensharing-"+r.Janus.randomString(12),u=null,l=null;n=n||1234;function d(e){l="publisher";let t={request:"join",room:n,ptype:"publisher",display:e};s.send({message:t})}return{init:function(e,t){const{debug:n}=t;r.Janus.init({debug:n,callback:function(){r.Janus.isWebrtcSupported()?(o=new r.Janus({server:i,success:function(){o.attach({plugin:"janus.plugin.videoroom",opaqueId:a,success:function(e){s=e,n&&console.log("Plugin attached! ("+s.getPlugin()+", id="+s.getId()+")")},error:function(e){r.Janus.error("  -- Error attaching plugin...",e),bootbox.alert("Error attaching plugin... "+e)},consentDialog:function(e){},iceState:function(e){r.Janus.log("ICE state changed to "+e)},mediaState:function(e,t){r.Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){r.Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(e,n){r.Janus.debug(" ::: Got a message (publisher) :::",e);var i=e.videoroom;if(r.Janus.debug("Event: "+i),i)if("joined"===i)u=e.id,r.Janus.log("Successfully joined room "+e.room+" with ID "+u),"publisher"===l&&(r.Janus.debug("Negotiating WebRTC stream for our screen (capture null)"),s.createOffer({media:{video:"screen",audioSend:!1,videoRecv:!1,audioRecv:!1,recvonly:!1},success:function(e){r.Janus.debug("Got publisher SDP!"),r.Janus.debug(e);let n={request:"configure",audio:!1,video:!0,bitrate:t.bitrate};t.filename&&(n=Object.assign(n,{filename:t.filename})),s.send({message:n,jsep:e})},error:function(e){r.Janus.error("WebRTC error:",e),bootbox.alert("WebRTC error... "+JSON.stringify(e))}}));else if("event"===i)if("listener"===l&&e.publishers);else if(e.leaving)e.leaving;else e.error&&console.warn(e.error);n&&(r.Janus.debug("Handling SDP as well...",n),s.handleRemoteJsep({jsep:n}))},onlocalstream:function(e){},onremotestream:function(e){},oncleanup:function(){n&&console.log(" ::: Got a cleanup notification :::")}})},error:function(e){console.error(e)},destroyed:function(){}}),setTimeout((()=>{d(e)}),1e3)):alert("No WebRTC support... ")}})},stop:function(){s.hangup(),o.destroy()},start:d}}},"./src/wcs/libs/janusclient.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{JanusClient:()=>i});var r=n("./src/wcs/libs/janus.js"),i=function(e,t,n,i){var o=null;o="http:"===window.location.protocol?"ws://"+(t||window.location.hostname)+":8188/janus":"wss://"+(t||window.location.hostname)+":8989/janus";var s=null,a=null,u="orkestra-"+r.Janus.randomString(12),l=n||1234,d=null,c=null,f=null,h=i,p=[],m=[],g=!1,v=("yes"===_("simulcast")||_("simulcast"),"yes"===_("simulcast2")||_("simulcast2"),"");function y(e,t){var n=FlexJanus.feeds.find((t=>{if(t.display===e)return!0}));(function(e,t,n,i){return new Promise(((n,o)=>{var a=FlexJanus.feeds.find((t=>{if(t.id===e)return!0}));if(a.stream)n(a);else if(-1==v.indexOf(e)){var d=null;v+="_"+e,s.attach({plugin:"janus.plugin.videoroom",opaqueId:u,success:function(t){s.activeHandles.push({id:e,handle:t}),a=t,(d=t).simulcastStarted=!1,r.Janus.log("Plugin attached! ("+d.getPlugin()+", id="+d.getId()+")"),r.Janus.log("  -- This is a subscriber");var n={request:"join",room:l,ptype:"subscriber",feed:e,private_id:f,offer_data:!1};"safari"!==r.Janus.webRTCAdapter.browserDetails.browser||"vp9"!==i&&("vp8"!==i||r.Janus.safariVp8)||(i&&(i=i.toUpperCase()),toastr.warning("Publisher is using "+i+", but Safari doesn't support it: disabling video"),n.offer_video=!1),d.videoCodec=i,d.send({message:n});let o=a.webrtcStuff;setInterval((()=>{o.pc&&o.pc.getReceivers().forEach((e=>{e.playoutDelayHint=e.jitterBufferDelayHint=h||.15}))}),1e3)},error:function(e){r.Janus.error("  -- Error attaching plugin...",e),o(e)},onmessage:function(e,t){r.Janus.debug(" ::: Got a message (subscriber) :::"),r.Janus.debug(e);var n=e.videoroom;if(r.Janus.debug("Event: "+n),void 0!==e.error&&null!==e.error)console.error(e.error);else if(null!=n&&null!=n)if("attached"===n){for(var i=0;i<26;i++)if(void 0===p[i]||null===p[i]){p[i]=d,d.rfindex=i;break}d.rfid=e.id,d.rfdisplay=e.display,r.Janus.log("Successfully attached to feed "+d.rfid+" ("+d.rfdisplay+") in room "+e.room)}else if("event"===n){var o=e.substream;if("substream"in e){d.substream=o;const e=new CustomEvent("substreamConfigured",{detail:{substream:o,input:d.rfdisplay}});document.dispatchEvent(e)}var s=e.temporal;null==o&&null==s||d.simulcastStarted||(d.simulcastStarted=!0)}null!=t&&(r.Janus.debug("Handling SDP as well..."),r.Janus.debug(t),d.createAnswer({jsep:t,media:{audioSend:!1,videoSend:!1,audioRecv:!1,recvonly:!0},success:function(e){r.Janus.debug("Got SDP!"),r.Janus.debug(e);var t={request:"start",room:l};d.send({message:t,jsep:e})},error:function(e){r.Janus.error("WebRTC error:",e),bootbox.alert("WebRTC error... "+JSON.stringify(e))}}))},webrtcState:function(e){r.Janus.log("Janus says this WebRTC PeerConnection (feed #"+d.rfindex+") is "+(e?"up":"down")+" now")},onlocalstream:function(e){},onremotestream:function(t){if(v=v.replace(e,""),!d)return;r.Janus.debug("Remote feed #"+d.rfindex),FlexJanus.feeds=FlexJanus.feeds.filter((e=>null!=e)),FlexJanus.feeds.find((e=>{if(d&&e&&e.id==d.rfid)return!0}))?FlexJanus.feeds.forEach((e=>{e.id==d.rfid&&(e.stream=t)})):d.stream=t,FlexJanus.feeds.find((e=>{if(e.id==d.id)return!0}))||FlexJanus.feeds.push(d),n(d)},oncleanup:function(){r.Janus.log(" ::: Got a cleanup notification (remote feed "+e+") :::");let n=new CustomEvent("deletedStream",{detail:{id:t}});document.dispatchEvent(n),FlexJanus.feeds=FlexJanus.feeds.filter((t=>t.rfid!=e)),d.rfindex=0,null!==m[d.rfindex]&&null!==m[d.rfindex]&&clearInterval(m[d.rfindex]),m[d.rfindex]=null,d.simulcastStarted=!1}})}else n(a)}))})(n.id,n.display,n.audio,n.video).then((n=>{var i=t.querySelector("video")||t.shadowRoot.querySelector("video");if(n)if(n.stream){if(r.Janus.attachMediaStream(i,n.stream),i.showAudioInput&&!0===i.showAudioInput){let e=i.parentNode.querySelector("volume-meter");e&&e.init(n.stream)}}else setTimeout((()=>{var t=FlexJanus.feeds.find((t=>{if(t.display===e)return!0}));if(r.Janus.attachMediaStream(i,t.stream),i.showAudioInput&&!0===i.showAudioInput){let e=i.parentNode.querySelector("volume-meter");e&&e.init(t.stream)}}),2e3)}))}function _(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}return{changeCamera:y,init:function(){r.Janus.running||r.Janus.init({debug:!1,callback:function(){r.Janus.running=!0,r.Janus.isWebrtcSupported()?(s=new r.Janus({server:o,success:function(){s.attach({plugin:"janus.plugin.videoroom",opaqueId:u,success:function(e){a=e,r.Janus.log("Plugin attached! ("+a.getPlugin()+", id="+a.getId()+")"),r.Janus.log("  -- This is a publisher/manager")},error:function(e){r.Janus.error("  -- Error attaching plugin...",e),bootbox.alert("Error attaching plugin... "+e)},consentDialog:function(e){r.Janus.debug("Consent dialog should be "+(e?"on":"off")+" now"),e?$.blockUI({message:'<div><img src="up_arrow.png"/></div>',css:{border:"none",padding:"15px",backgroundColor:"transparent",color:"#aaa",top:"10px",left:navigator.mozGetUserMedia?"-100px":"300px"}}):$.unblockUI()},mediaState:function(e,t){r.Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){r.Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(e,t){r.Janus.debug(" ::: Got a message (publisher) :::"),r.Janus.debug(e);var n=e.videoroom;if(r.Janus.debug("Event: "+n),null!=n&&null!=n)if("joined"===n){var i=new CustomEvent("JanusReady",{detail:{ready:!0}});if(document.dispatchEvent(i),d=e.id,f=e.private_id,r.Janus.log("Successfully joined room "+e.room+" with ID "+d),void 0!==e.publishers&&null!==e.publishers){s.list=e.publishers,r.Janus.debug("Got a list of available publishers/feeds:"),r.Janus.debug(s.list),FlexJanus.feeds=s.list;for(var o=0;o<s.list.length;o++){var u=s.list[o].id,h=s.list[o].display,m=s.list[o].audio_codec,g=s.list[o].video_codec;r.Janus.debug("  >> ["+u+"] "+h+" (audio: "+m+", video: "+g+")");var v=new CustomEvent("newStream",{detail:{id:s.list[o].display}});document.dispatchEvent(v)}}}else if("destroyed"===n)r.Janus.warn("The room has been destroyed!");else if("event"===n)if(void 0!==e.publishers&&null!==e.publishers){var y=e.publishers;r.Janus.debug("Got a list of available publishers/feeds:"),r.Janus.debug(s.list);for(o=0;o<y.length;o++){if(s.list.push(y[o]),void 0===FlexJanus.feeds)FlexJanus.feeds=s.list;else{y[o].id;let e=FlexJanus.feeds.find((e=>{if(e.display==y[o].display)return!0}));void 0===e&&FlexJanus.feeds.push(y[o]),e=y[o]}v=new CustomEvent("newStream",{detail:{id:y[o].display}});document.dispatchEvent(v);e.publishers}}else if(void 0!==e.leaving&&null!==e.leaving){var _=e.leaving;r.Janus.log("Publisher left: "+_);for(var E=null,b=0;b<26;b++)if(null!=p[b]&&null!=p[b]&&p[b].rfid==_){E=p[b];break}FlexJanus.feeds=FlexJanus.feeds.filter((e=>e.id!==_));var T=new CustomEvent("updateStream",{detail:{id:S}});document.dispatchEvent(T),null!=E&&(r.Janus.debug("Feed "+E.rfid+" ("+E.rfdisplay+") has left the room, detaching"),p[E.rfindex]=null,E.detach())}else if(void 0!==e.unpublished&&null!==e.unpublished){var S=e.unpublished;if(r.Janus.log("Publisher left: "+S),"ok"===S)return void a.hangup();for(E=null,b=0;b<26;b++)if(null!=p[b]&&null!=p[b]&&p[b].id==S){E=p[b];break}FlexJanus.feeds=FlexJanus.feeds.filter((e=>e.id!==S));T=new CustomEvent("updateStream",{detail:{id:S}});document.dispatchEvent(T),null!=E&&(r.Janus.debug("Feed "+E.rfid+" ("+E.rfdisplay+") has left the room, detaching"),p[E.rfindex]=null,E.detach())}else void 0!==e.error&&null!==e.error&&(426===e.error_code?console.warn("<p>Apparently room <code>"+l+"</code> (the one this demo uses as a test room) does not exist...</p><p>Do you have an updated <code>janus.plugin.videoroom.cfg</code> configuration file? If not, make sure you copy the details of room <code>"+l+"</code> from that sample in your current configuration file, then restart Janus and try again."):console.warn(e.error));if(null!=t){r.Janus.debug("Handling SDP as well..."),r.Janus.debug(t),a.handleRemoteJsep({jsep:t});m=e.audio_codec;c&&c.getAudioTracks()&&c.getAudioTracks().length>0&&!m&&toastr.warning("Our audio stream has been rejected, viewers won't hear us");g=e.video_codec;c&&c.getVideoTracks()&&c.getVideoTracks().length>0&&!g&&(toastr.warning("Our video stream has been rejected, viewers won't see us"),$("#myvideo").hide(),$("#videolocal").append('<div class="no-video-container"><i class="fa fa-video-camera fa-5 no-video-icon" style="height: 100%;"></i><span class="no-video-text" style="font-size: 16px;">Video rejected, no webcam</span></div>'))}},onlocalstream:function(e){r.Janus.debug(" ::: Got a local stream :::")},onremotestream:function(e){},oncleanup:function(){r.Janus.log(" ::: Got a cleanup notification: we are unpublished now :::"),c=null}})},error:function(e){r.Janus.error(e),console.error("Janus critical error",e)},destroyed:function(){console.warn("janus destroyed !!")}}),s.list=[],s.activeHandles=[],setTimeout((()=>{!1===g&&function(){var e={request:"join",room:l,ptype:"publisher",display:"flex"};"orkestra";let t=setInterval((()=>{a&&(a.send({message:e}),clearInterval(t))}),500)}()}),4e3)):bootbox.alert("No WebRTC support... ")}})},stop:function(t){var n=e.querySelector("video");n.src="",n.srcObject=null},start:function(e,t){FlexJanus.feeds.find((t=>{if(t.display===e)return!0}))?y(e,t):console.warn("There is not that feed",e)},changeBuffer:function(e){h=e},changeSubStream:function(e,t){var n=FlexJanus.feeds.find((t=>{if(t.rfdisplay===e)return!0}));n&&"substream"in n&&n.substream!==t&&n.send({message:{request:"configure",substream:t}})},registerUsernameAsSubscriber:function(e){g=!0;var t={request:"join",room:l,ptype:"subscriber",display:"flex",feed:e};"orkestra";let n=setInterval((()=>{a&&(a.send({message:t}),clearInterval(n))}),1500)},client:s,feeds:p}}},"./src/wcs/libs/januspublish.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{JanusPublish:()=>i});n("./node_modules/underscore/modules/index-all.js");var r=n("./src/wcs/libs/janus.js"),i=function(e,t,n){var i=null,o={audio:!0,audio:!0,simulcast:!0,bitrate:0,echoC:!0,noiseS:!0,gainC:!0};i="http:"===window.location.protocol?"ws://"+(t||window.location.hostname)+":8188/janus":"wss://"+(t||window.location.hostname)+":8989/janus";window.noiseS=!0,window.gainC=!0,window.echoC=!0;var s,a,u,l=null,d=null,c="orkestra-"+r.Janus.randomString(12),f=n||1234,h=null,p=null,m=!0,g=[],v="yes"===A("simulcast")||"true"===A("simulcast"),y="yes"===A("simulcast2")||"true"===A("simulcast2");var _="";function E(e,t){T();const n=document.querySelector("webrtc-publisher");let i;if(window.res){const e=r.Janus.getSizeFromRes(window.res);i={width:{ideal:e.width},height:{ideal:e.height},deviceId:{exact:t}}}else i={width:{ideal:1280},height:{ideal:720}};navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:e}},video:i}).then((e=>{u=e,(a=n.shadowRoot.querySelector("video")).srcObject=e,a.muted="muted",a.autoplay=!0,a.removeEventListener("play",b),a.addEventListener("play",b),a.style.position="absolute",a.style.opacity=0,a.style.top="0px",a.style.visibility="hidden",a.style.cssFloat="left",(s=n.shadowRoot.querySelector("#canvasforRotate"))&&s.parentNode.removeChild(s),(s=document.createElement("canvas")).style.position="absolute",s.style.height="80%",s.style.left="25%",s.style.top="0px",s.id="canvasforRotate",n.shadowRoot.appendChild(s),clearInterval(window.drawLoop),window.drawLoop=setInterval((function(){const e=s.getContext("2d");switch(e.drawImage(a,0,0,s.width,s.height),e.clearRect(0,0,s.width,s.height),e.save(),e.translate(s.width,0),e.rotate(90*Math.PI/180),e.drawImage(a,-a.width/2,-a.height/2),e.restore(),s.width){case 1920:s.style.zoom=.2;break;case 720:s.style.zoom=.4;break;default:s.style.zoom=.8}}),1e3/24)})).catch((e=>{alert("Not supported format"),console.error(e)}))}function b(e){s.width=a.videoHeight,s.height=a.videoWidth;var t=s.captureStream();t.addTrack(u.getAudioTracks()[0]);d.send({message:{audio:!0,video:!0}}),d.createOffer({stream:t,media:{replaceAudio:!0,replaceVideo:!0},simulcast:!1,simulcast2:!1,success:function(e){console.log("Got publisher SDP!"),r.Janus.debug(e);var t={};(t={request:"configure",audio:!0,video:!0}).videocodec="h264",d.send({message:t,jsep:e})},error:function(e){console.error("WebRTC error:",e)}})}function T(){clearInterval(window.drawLoop);let e=document.querySelector("webrtc-publisher"),t=e.shadowRoot.querySelector("video");t.removeEventListener("play",b),t.style.visibility="visible",t.style.position="relative",t.style.opacity=1,e.shadowRoot.querySelector("#canvasforRotate")&&e.shadowRoot.querySelector("#canvasforRotate").parentNode.removeChild(e.shadowRoot.querySelector("#canvasforRotate"))}function S(e,t,n){var r=n;console.log("Sending message ("+JSON.stringify(r)+")"),d.send({message:r}),console.log("Trying a createOffer too (audio/video sendrecv)"),d.createOffer({media:{audio:{deviceId:{exact:e}},replaceAudio:!0,video:{deviceId:{exact:t}},replaceVideo:!0,data:!1},simulcast:v,success:function(e){console.log("Got SDP!"),console.log(e),d.send({message:r,jsep:e})},error:function(e){console.error("WebRTC error:",e)}})}function w({useAudio:e}){T(),console.log("OPTIONS",o);let t={},n={};var i=o.video,s=o.audio,a=o.audioinput,u=o.videoinput;window.videoDeviceId=o.videoinput,t=!1!==i&&(void 0===u||{deviceId:{exact:u||"default"},advanced:[{height:{min:480}},{width:{min:640}}]}),n=!1!==s&&{deviceId:{exact:a}},v=o.simulcast,d.createOffer({media:{video:t,replaceAudio:!0,audio:n,replaceVideo:!0,data:!1},simulcast:v,simulcast2:y,success:function(t){r.Janus.debug("Got publisher SDP!"),r.Janus.debug(t);let n={request:"configure",audio:e,video:o.video,videocodec:"h264"};0!=o.bitrate&&(n=Object.assign(n,{bitrate:o.bitrate})),o.filename&&(n=Object.assign(n,{filename:o.filename})),d.send({message:n,jsep:t})},error:function(t){r.Janus.error("WebRTC error:",t),e?w({useAudio:!1}):console.warn("WebRTC error... "+JSON.stringify(t))}})}function A(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}return{changeCamera:function(e){var t=l.list.find((t=>{if(t.display===e)return!0}));""!=_&&_.detach(),newRemoteFeed(t.id,t.display,t.audio,t.video)},init:function(t,n){n&&(o=n),r.Janus.init({debug:!1,callback:function(){r.Janus.isWebrtcSupported()?(l=new r.Janus({server:i,success:function(){l.attach({plugin:"janus.plugin.videoroom",opaqueId:c,success:function(e){d=e,r.Janus.log("Plugin attached! ("+d.getPlugin()+", id="+d.getId()+")"),r.Janus.log("  -- This is a publisher/manager");var t=new CustomEvent("JanusPublishReady",{detail:{ready:!0}});document.dispatchEvent(t)},error:function(e){r.Janus.error("  -- Error attaching plugin...",e),bootbox.alert("Error attaching plugin... "+e)},consentDialog:function(e){},mediaState:function(e,t){r.Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){r.Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},onmessage:function(t,n){r.Janus.debug(" ::: Got a message (publisher) :::"),r.Janus.debug(t);var i=t.videoroom;if(r.Janus.debug("Event: "+i),null!=i&&null!=i)if("joined"===i){if(h=t.id,t.private_id,r.Janus.log("Successfully joined room "+t.room+" with ID "+h),void 0!==t.publishers&&null!==t.publishers)for(var o in l.list=t.publishers,r.Janus.debug("Got a list of available publishers/feeds:"),r.Janus.debug(l.list),l.list){var s=l.list[o].id,a=l.list[o].display,u=l.list[o].audio_codec,c=l.list[o].video_codec;r.Janus.debug("  >> ["+s+"] "+a+" (audio: "+u+", video: "+c+")")}}else if("destroyed"===i)r.Janus.warn("The room has been destroyed!"),bootbox.alert("The room has been destroyed",(function(){window.location.reload()}));else if("event"===i)if(void 0!==t.publishers&&null!==t.publishers)for(var o in l.list=t.publishers,r.Janus.debug("Got a list of available publishers/feeds:"),r.Janus.debug(l.list),l.list){s=l.list[o].id,a=l.list[o].display,u=l.list[o].audio_codec,c=l.list[o].video_codec;r.Janus.debug("  >> ["+s+"] "+a+" (audio: "+u+", video: "+c+")")}else if(void 0!==t.leaving&&null!==t.leaving){var f=t.leaving;r.Janus.log("Publisher left: "+f);for(var m=null,v=1;v<6;v++)if(null!=g[v]&&null!=g[v]&&g[v].rfid==f){m=g[v];break}null!=m&&(r.Janus.debug("Feed "+m.rfid+" ("+m.rfdisplay+") has left the room, detaching"),e.querySelector("#remote"+m.rfindex).empty().hide(),e.querySelector("#videoremote"+m.rfindex).empty(),g[m.rfindex]=null,m.detach())}else if(void 0!==t.unpublished&&null!==t.unpublished){var y=t.unpublished;if(r.Janus.log("Publisher left: "+y),"ok"===y)return void d.hangup();null!=m&&(r.Janus.debug("Feed "+m.rfid+" ("+m.rfdisplay+") has left the room, detaching"),g[m.rfindex]=null,m.detach())}else void 0!==t.error&&null!==t.error&&console.error(t);if(null!=n){r.Janus.debug("Handling SDP as well..."),r.Janus.debug(n),d.handleRemoteJsep({jsep:n});u=t.audio_codec;p&&p.getAudioTracks()&&p.getAudioTracks().length>0&&!u&&toastr.warning("Our audio stream has been rejected, viewers won't hear us");c=t.video_codec;p&&p.getVideoTracks()&&p.getVideoTracks().length>0&&!c&&console.warn("video not permited")}},onlocalstream:function(t){if(r.Janus.debug(" ::: Got a local stream :::"),p=t,r.Janus.debug(t),l.list.push(t),window.portrait&&!1!==window.portrait||r.Janus.attachMediaStream(e.querySelector("#myvideo"),t),window.showAudioInput&&!0===window.showAudioInput){let e=document.querySelector("webrtc-publisher").shadowRoot.querySelector("volume-meter");e&&e.init(t)}},onremotestream:function(e){},oncleanup:function(){r.Janus.log(" ::: Got a cleanup notification: we are unpublished now :::"),p&&(p.getTracks().forEach((e=>{e.stop()})),p=null)}})},error:function(e){r.Janus.error(e)},destroyed:function(){}}),l.list=[],setTimeout((()=>{!function(e){const t={request:"join",room:f,ptype:"publisher",display:e},n=setInterval((()=>{if(d){if(clearInterval(n),d.send({message:t}),window.portrait&&!1!==window.portrait)if(document.querySelector("webrtc-publisher")){const e=document.querySelector("webrtc-publisher");E(e.flags.audioinput,e.flags.videoinput)}else E();else w({useAudio:!0});d.unmuteAudio()}}),50)}(t)}),1e3)):bootbox.alert("No WebRTC support... ")}})},stop:function(e){if(d)try{d.send({message:{request:"unpublish"}})}catch(e){console.warn("Not publisher")}},destroy:function(){d.hangup(),l.destroy()},start:function(e){var t=l.list.find((t=>{if(t.display===e)return!0}));newRemoteFeed(t.id,t.display,t.audio,t.video)},restartCapture:S,changeDev:function(){if(m)return m=!1,void S();S()},listDevices:async function(e){return new Promise(((e,t)=>{navigator.mediaDevices.enumerateDevices().then((t=>{e(t)}))}))},rotateVideo:E}}},"./src/wcs/libs/volume-meter-wc.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{VolumeMeter:()=>r});class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.audioContext=null,this.meter=void 0,this.canvasContext=null,this.rafID=null}get color(){return this.getAttribute("color")}set color(e){this.setAttribute("color",e)}get width(){return parseInt(this.getAttribute("width"))}set width(e){this.shadowRoot.querySelector("canvas")&&(this.shadowRoot.querySelector("canvas").width=this.width),this.setAttribute("width",parseInt(e))}get height(){return parseInt(this.getAttribute("height"))}set height(e){this.shadowRoot.querySelector("canvas")&&(this.shadowRoot.querySelector("canvas").height=this.height),this.setAttribute("height",parseInt(e))}async connectedCallback(){this.color=this.color||"green"}init(e){if(!this.shadowRoot.querySelector("canvas")){let e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.shadowRoot.appendChild(e)}this.canvasContext=this.shadowRoot.querySelector("canvas").getContext("2d"),window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext=new AudioContext;let t=this.audioContext.createMediaStreamSource(e);this.meter=this.createAudioMeter(this.audioContext),t.connect(this.meter),this.render()}hide(){this.canvasContext.clearRect(0,0,this.width,this.height),this.meter=void 0}render(e){this.meter&&(this.canvasContext.clearRect(0,0,this.width,this.height),this.meter.checkClipping()?this.canvasContext.fillStyle="red":this.canvasContext.fillStyle=this.color,this.canvasContext.fillRect(0,0,this.width,this.meter.volume*this.height*1.4),this.rafID=window.requestAnimationFrame(this.render.bind(this)))}createAudioMeter(e,t,n,r){return this.processor=this.audioContext.createScriptProcessor(512),this.processor.addEventListener("audioprocess",this.volumeAudioProcess.bind(this)),this.processor.clipping=!1,this.processor.lastClip=0,this.processor.volume=0,this.processor.clipLevel=t||.98,this.processor.averaging=n||.95,this.processor.clipLag=r||750,this.processor.connect(this.audioContext.destination),this.processor.checkClipping=()=>!!this.processor.clipping&&(this.processor.lastClip+this.processor.clipLag<window.performance.now()&&(this.processor.clipping=!1),this.processor.clipping),this.processor.shutdown=function(){this.disconnect(),this.onaudioprocess=null},this.processor}volumeAudioProcess(e){for(var t,n=e.inputBuffer.getChannelData(0),r=n.length,i=0,o=0;o<r;o++)t=n[o],Math.abs(t)>=this.processor.clipLevel&&(this.processor.clipping=!0,this.processor.lastClip=window.performance.now()),i+=t*t;var s=Math.sqrt(i/r);this.processor.volume=Math.max(s,this.processor.volume*this.processor.averaging)}}customElements.define("volume-meter",r)},"./src/wcs/screen-share/screen-share.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WCScreenShare:()=>s});var r=n("./src/wcs/libs/janusScreenShare.js"),i=(n("./node_modules/web-dialog/index.js"),n("./src/wcs/icons/config.js")),o=n("./src/wcs/css/webrtc.js");class s extends HTMLElement{static get observedAttributes(){return["config","input","options","style"]}attributeChangedCallback(e,t,n){t!==n&&(this[e]=n)}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML+="<style>"+o.buttonClass+"</style>"}get style(){return this.getAttribute("style")}set style(e){this.getAttribute("style");void 0!==e&&(this.setAttribute("style",e),setTimeout((()=>{this.shadowRoot.querySelector("#myvideo").style.cssText+=e}),1e3))}get config(){return this.getAttribute("config")}set config(e){if(this.setAttribute("config",e),""!=e){let t=JSON.parse(e);this.JanusScreenShare=(0,r.JanusScreenShare)(this.shadowRoot,t.janusServer,t.room)}this.render()}get options(){return this.getAttribute("options")}set options(e){this.setAttribute("options",e),setTimeout((()=>{this.setConfig()}),500)}async connectedCallback(){this.__initialized=!0}publish(e){e instanceof MouseEvent?this.JanusScreenShare.init(this.input,this.flags):this.JanusScreenShare.init(this.input,e||this.flags)}unpublish(){this.JanusScreenShare.stop()}setConfig(){let e={};try{e=JSON.parse(this.options),this.flags=e}catch(e){console.log(e)}void 0!==e.bitrate&&(this.shadowRoot.querySelector("#bitrate").value=e.bitrate),void 0!==e.simulcast&&(this.shadowRoot.querySelector("#simulcast").checked=e.simulcast)}async showConfig(){}configChange(e){this.flags.simulcast=this.shadowRoot.querySelector("#simulcast").checked,this.flags.bitrate=parseInt(this.shadowRoot.querySelector("#bitrate").value)}render(){"undefined"!==this.config&&(this.shadowRoot.querySelector("#videoWrap")||(this.shadowRoot.innerHTML+='\n    <div style="display:none; position: fixed;" id="videoWrap"><video id=\'myvideo\' muted style=\'position: relative;top: 0;left: 0;\' controls autoplay></video>\n    <span id="configIcon" style="position: absolute;top: 15px;left: 88%;width:40px;height:40px;cursor:hand;visibility:hidden">'+i.svg+'</span></div>\n    <web-dialog center>\n     <form id=\'change_dev_form\' class="form-inline" >\n \t\t\t\t\t        \n   <div id="configPanel" >\n   <h2> Advanced:</h2>\n\t\t\n      Simulcast:<input type="checkbox"\tid="simulcast" checked style="margin-right:20px">\n      <h2>Bitrate:</h2> <input type="number" id="bitrate" value=0 style="margin-right:20px">\n      </form>\n      <span style="float:right"><span id="saveB" class="btn btn-primary"> Save </span>\n      <span id="closeB" class="btn btn-primary"> Close </span></span>\n      <div>\n      </web-dialog>\n     ',this.shadowRoot.querySelector("form").addEventListener("change",this.configChange.bind(this)),this.shadowRoot.querySelector("#saveB").addEventListener("click",this.publish.bind(this)),this.shadowRoot.querySelector("#closeB").addEventListener("click",(()=>this.shadowRoot.querySelector("web-dialog").open=!1)),this.shadowRoot.querySelector("#configIcon").addEventListener("click",this.showConfig.bind(this)),this.shadowRoot.querySelector("#videoWrap").addEventListener("mouseover",(()=>{this.shadowRoot.querySelector("#configIcon").style.visibility="visible",e&&clearTimeout(e);var e=setTimeout((()=>{this.shadowRoot.querySelector("#configIcon").style.visibility="hidden"}),3e3)}))))}}customElements.define("screen-share",s)},"./src/wcs/timer.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WCTimer:()=>r});n("./src/wcs/css/apptable.css");class r extends HTMLElement{static get observedAttributes(){return["datos"]}attributeChangedCallback(e,t,n){this.__initialized&&t!==n&&("no-headers"===e?this.noHeaders=n:this[e]=n)}get datos(){return this.getAttribute("datos")}set datos(e){this.setAttribute("datos",e),this.render()}get value(){return this.__data}set value(e){this.setValue(e)}constructor(){super()}async connectedCallback(){this.__initialized=!0}setValue(e){this.__data=parse(e),this.render()}render(){if("undefined"===this.datos)return;this.__table||(this.__table=document.createElement("table"));const e=document.createElement("h2");if(e.innerHTML="TIMER DATA",e.id="app_div",this.__headers=["Key","Value"],this.__table.innerHTML="",this.__headers){const e=document.createElement("thead"),t=document.createElement("tr");this.__headers.forEach((e=>{const n=document.createElement("th");n.innerText=e,t.appendChild(n)})),e.append(t),this.__table.appendChild(e)}const t=document.createElement("tbody");var n=JSON.parse(this.datos);Object.keys(n).forEach((e=>{const r=document.createElement("tr"),i=document.createElement("td");i.innerText=e,r.appendChild(i);const o=document.createElement("td");o.innerText=JSON.stringify(n[e]),r.appendChild(o),t.appendChild(r)})),this.__table.id="table",this.__table.appendChild(t),this.querySelector("#app_div")||this.appendChild(e),this.querySelector("#table")||this.appendChild(this.__table)}}customElements.define("app-timer",r)},"./src/wcs/users.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WCUserTable:()=>r});n("./src/wcs/css/usertable.css");class r extends HTMLElement{static get observedAttributes(){return["users"]}attributeChangedCallback(e,t,n){this.__initialized&&t!==n&&("no-headers"===e?this.noHeaders=n:this[e]=n)}get users(){return this.getAttribute("users")}set users(e){this.setAttribute("users",e),this.render()}get value(){return this.__data}set value(e){this.setValue(e)}constructor(){super()}async connectedCallback(){this.__initialized=!0}setValue(e){this.__data=JSON.parse(e),this.render()}render(){if("undefined"===this.users)return;this.__table||(this.__table=document.createElement("table"),this.__table.id="userTable");const e=document.createElement("h2");if(e.innerHTML="USERS DATA",e.id="user_div",this.__headers=["Id","Name","Profile","Capacity","Context","UserData"],this.__table.innerHTML="",this.__headers){const e=document.createElement("thead"),t=document.createElement("tr");this.__headers.forEach((e=>{const n=document.createElement("th");n.innerText=e,t.appendChild(n)})),e.append(t),this.__table.appendChild(e)}const t=document.createElement("tbody");JSON.parse(this.users).forEach((e=>{const n=document.createElement("tr");for(let t in e[1]){const r=document.createElement("td");"capacities"==t||"userData"==t||"context"==t?r.innerHTML="<div>"+JSON.stringify(e[1][t])+"</div>":r.innerText=e[1][t],n.appendChild(r)}t.appendChild(n)})),this.__table.appendChild(t),this.querySelector("#user_div")||this.appendChild(e),this.querySelector("#table")||this.appendChild(this.__table)}}customElements.define("user-table",r)},"./src/wcs/webrtc-publisher/webrtcPublisher.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WCWebrtcPublisher:()=>l});var r=n("./src/wcs/libs/januspublish.js"),i=(n("./node_modules/web-dialog/index.js"),n("./src/wcs/webrtc-publisher/webrtr-publisher.template.js")),o=n("./src/wcs/css/webrtc.js"),s=n("./src/orkestra/utils/index.js"),a=n("./node_modules/rxjs/dist/esm5/internal/Subject.js"),u=n("./node_modules/rxjs/dist/esm5/internal/Observable.js");n("./src/wcs/libs/volume-meter-wc.js");class l extends HTMLElement{static get observedAttributes(){return["config","input","options","style","settings"]}attributeChangedCallback(e,t,n){t!==n&&(this[e]=n)}constructor(){super(),this.playerEventObserver=new a.Subject,this.attachShadow({mode:"open"}).appendChild(i.tmpl.content.cloneNode(!0)),this.shadowRoot.innerHTML+="<style>"+o.buttonClass+"</style>",this.log=s.Logger.getLogger("Webrtc-publisher"),this.playerEventObservable=new u.Observable((e=>{this.playerEventObserver.subscribe(e)})),this.shadowRoot.querySelector("form").addEventListener("change",this.configChange.bind(this)),this.shadowRoot.querySelector("#saveB").addEventListener("click",this.save.bind(this),!0),this.shadowRoot.querySelector("#closeB").addEventListener("click",(()=>{this.shadowRoot.querySelector("web-dialog").open=!1,document.exitFullscreen()})),this.showConfListener=this.showConfig.bind(this),this.showIconListener=this.showIcon.bind(this),this.shadowRoot.querySelector("#configIcon").addEventListener("click",this.showConfListener),this.shadowRoot.querySelector("#configIcon").addEventListener("touchend",this.showConfListener),this.shadowRoot.querySelector("#videoWrap").addEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("#videoWrap").addEventListener("touchend",this.showIconListener)}showIcon(){this.shadowRoot.querySelector("#configIcon").style.visibility="visible",e&&clearTimeout(e);var e=setTimeout((()=>{this.shadowRoot.querySelector("#configIcon").style.visibility="hidden"}),3e3)}get style(){return this.getAttribute("style")}set style(e){this.getAttribute("style");void 0!==e&&(this.setAttribute("style",e),setTimeout((()=>{this.shadowRoot.querySelector("video").style.cssText+=e}),1e3))}get config(){return this.getAttribute("config")}set config(e){if(this.setAttribute("config",e),""!=e){let t=JSON.parse(e);this.PublishJanus=(0,r.JanusPublish)(this.shadowRoot,t.janusServer,t.room)}this.render()}get settings(){return this.getAttribute("settings")}set settings(e){this.setAttribute("settings",e),"false"==this.settings&&(this.shadowRoot.querySelector("#configIcon").style.visibility="hidden",this.shadowRoot.querySelector("#configIcon").removeEventListener("click",this.showConfListener),this.shadowRoot.querySelector("#configIcon").removeEventListener("touchend",this.showConfListener),this.shadowRoot.querySelector("#videoWrap").removeEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("#videoWrap").removeEventListener("touchend",this.showIconListener))}get options(){return this.getAttribute("options")}set options(e){this.setAttribute("options",e),setTimeout((()=>{this.setConfig()}),500)}async connectedCallback(){this.__initialized=!0}async listMedia(){return await this.PublishJanus.listDevices()}playEventSubscriber(){return this.playerEventObservable}publish(e){this.flags&&!0===this.flags.portrait&&this.shadowRoot.querySelector("canvas")&&(this.shadowRoot.querySelector("canvas").removeEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("canvas").removeEventListener("touchend",this.showIconListener),this.shadowRoot.querySelector("canvas").addEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("canvas").addEventListener("touchend",this.showIconListener)),this.log.info("click publish"),this.unpublish(),e instanceof MouseEvent?this.PublishJanus.init(this.input,this.flags):this.PublishJanus.init(this.input,e||this.flags),this.flags&&0==this.flags.video?this.setOnlyAudioPoster(!0):this.setOnlyAudioPoster(!1),this.playerEventObserver.next({type:"play",value:"true"})}unpublish(){this.PublishJanus.stop(),this.shadowRoot.querySelector("video").srcObject=null,this.playerEventObserver.next({type:"pause",value:"true"})}destroy(){this.PublishJanus.stop(),this.PublishJanus.destroy(),this.shadowRoot.querySelector("video").srcObject=null}setConfig(){this.log.info(this.options);let e={};try{e=JSON.parse(this.options),this.flags=e}catch(e){this.log.warn(e)}void 0!==e.portrait&&(this.shadowRoot.querySelector("#portrait").checked=e.portrait||!1),void 0!==e.res&&(this.shadowRoot.querySelector("#res").value=e.res||"HD"),void 0!==e.audio&&(this.shadowRoot.querySelector("#audioc").checked=e.audio),void 0!==e.video&&(this.shadowRoot.querySelector("#videoc").checked=e.video),void 0!==e.bitrate&&(this.shadowRoot.querySelector("#bitrate").value=e.bitrate),void 0!==e.noiseS&&(this.shadowRoot.querySelector("#noise").checked=e.noiseS),void 0!==e.echoC&&(this.shadowRoot.querySelector("#echo").checked=e.echoC),void 0!==e.gainC&&(this.shadowRoot.querySelector("#gain").checked=e.gainC),void 0!==e.gainC&&(this.shadowRoot.querySelector("#delay").value=e.delay||0),void 0!==e.volIncrease&&(this.shadowRoot.querySelector("#volIncrease").value=e.volIncrease||0),void 0!==e.simulcast&&(this.shadowRoot.querySelector("#simulcast").checked=e.simulcast),window.echoC=this.shadowRoot.querySelector("#echo").checked,window.noiseS=this.shadowRoot.querySelector("#noise").checked,window.gainC=this.shadowRoot.querySelector("#gain").checked,window.volIncrease=parseInt(this.shadowRoot.querySelector("#volIncrease").value)||0,window.audioType=this.shadowRoot.querySelector("#audiotype").value||"",void 0!==e.showAudioInput&&(window.showAudioInput=e.showAudioInput)}async showConfig(){let e,t,n,r;this.requestFullscreen();let i=await this.listMedia();this.shadowRoot.querySelector("web-dialog").open=!0;let o=this.shadowRoot.querySelector("#audio-device"),s=this.shadowRoot.querySelector("#video-device");o&&s&&o.children.length>0&&(e=o.options[o.selectedIndex].value,t=o.options[o.selectedIndex].text,n=s.options[s.selectedIndex].value,r=s.options[s.selectedIndex].text),o.innerHTML="",s.innerHTML="",i.forEach((t=>{let r=document.createElement("option");r.value=t.deviceId,r.innerHTML=t.label||t.deviceId,"audioinput"===t.kind?(t.deviceId==e&&(r.selected=!0),o.appendChild(r)):"videoinput"===t.kind&&(t.deviceId==n&&(r.selected=!0),s.appendChild(r))}))}configChange(e){this.flags.portrait=window.portrait=this.shadowRoot.querySelector("#portrait").checked,this.flags.res=window.res=this.shadowRoot.querySelector("#res").value,this.flags.audioinput=this.shadowRoot.querySelector("#audio-device").value,this.flags.videoinput=this.shadowRoot.querySelector("#video-device").value,this.flags.video=this.shadowRoot.querySelector("#videoc").checked;const t=this.shadowRoot.querySelector("#audioc").checked;t&&!this.flags.audioinput&&console.warn("Disabled audio since there is not audio input selected"),this.flags.audio=!!this.flags.audioinput&&t,window.showAudioInput&&!this.flags.audio&&(window.showAudioInput=!1),this.flags.echoC=window.echoC=this.shadowRoot.querySelector("#echo").checked,this.flags.noiseS=window.noiseS=this.shadowRoot.querySelector("#noise").checked,this.flags.gainC=window.gainC=this.shadowRoot.querySelector("#gain").checked,this.flags.delay=window.delay=this.shadowRoot.querySelector("#delay").value,this.flags.volIncrease=window.volIncrease=parseInt(this.shadowRoot.querySelector("#volIncrease").value),this.flags.audioType=window.audioType=this.shadowRoot.querySelector("#audiotype").value,this.flags.simulcast=this.shadowRoot.querySelector("#simulcast").checked,this.flags.bitrate=1024*parseInt(this.shadowRoot.querySelector("#bitrate").value),this.log.info(this.flags),e&&"audio-device"===e.srcElement.id?(!0===this.flags.portrait?(this.PublishJanus.rotateVideo(this.flags.audioinput,this.flags.videoinput),this.shadowRoot.querySelector("canvas").removeEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("canvas").removeEventListener("touchend",this.showIconListener),this.shadowRoot.querySelector("canvas").addEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("canvas").addEventListener("touchend",this.showIconListener)):this.PublishJanus.restartCapture(this.flags.audioinput,this.flags.videoinput,{video:this.flags.video,audio:this.flags.audio,portrait:this.flags.portrait}),0==this.flags.video?this.setOnlyAudioPoster(!0):this.setOnlyAudioPoster(!1)):e&&"video-device"===e.srcElement.id&&(!0===this.flags.portrait?this.PublishJanus.rotateVideo(this.flags.audioinput,this.flags.videoinput):this.PublishJanus.restartCapture(this.flags.audioinput,this.flags.videoinput,{video:this.flags.video,audio:this.flags.audio,portrait:this.flags.portrait}),0==this.flags.video?this.setOnlyAudioPoster(!0):this.setOnlyAudioPoster(!1))}setOnlyAudioPoster(e){this.shadowRoot.querySelector("video").poster=!0===e?"https://assets.boxcast.com/latest/static/audio-only.png":""}userCmdEvents(e){"stream"==e.cmd&&(FlexJanus.stop(this.input),this.input=e.value,FlexJanus.start(e.value,this),0==this.flags.video?this.setOnlyAudioPoster(!0):this.setOnlyAudioPoster(!1))}setOrkestraInstance(e){this.app=e,this.app.useServiceHub(e.options.channel+"_mediaServs").then((()=>{this.app.publishService("adaptiveStream_"+this.app.getMyAgentId()),setTimeout((()=>{let e={io:"out",portrait:!1,res:"HD",bitrate:0,volume:1,volIncrease:1,noiseS:!0,echoC:!1,gainC:!1,simulcast:!1,viewport:this.shadowRoot.querySelector("video").clientWidth+"x"+this.shadowRoot.querySelector("video").clientHeight,audio:!0,video:!0,status:1,timestamp:(new Date).getTime()};this.sendAdaptativeStreamInfo(e)}),3e3),this.app.subscribeToService("adaptiveStream_"+this.app.getMyAgentId(),this.adaptativeStreamChange.bind(this),"in")})).catch((e=>{this.log.error(e)}))}sendAdaptativeStreamInfo(e){this.app.sendServiceData("adaptiveStream_"+this.app.getMyAgentId(),e,"out")}adaptativeStreamChange(e){if(this.log.info(e),void 0!==e.value.data.bitrate){let t=s.Obj.getObjectDiff(e.value.data,this.flags);this.log.info("diff",t),this.flags.portrait=window.portrait=e.value.data.portrait,this.flags.res=window.res=e.value.data.res,this.flags.bitrate=e.value.data.bitrate,this.flags.video=e.value.data.video,this.flags.audio=e.value.data.audio,this.flags.echoC=window.echoC=e.value.data.echoC,this.flags.gainC=window.gainC=e.value.data.gainC,this.flags.noiseS=window.noiseS=e.value.data.noiseS,this.flags.simulcat=e.value.data.simulcast,this.flags.delay=window.delay=e.value.data.delay||0,this.flags.volIncrease=window.volIncrease=parseInt(e.value.data.volIncrease)||1,this.flags.audioType=window.audioType=e.value.data.audioType||"",this.publish(this.flags),0==this.flags.video?this.setOnlyAudioPoster(!0):this.setOnlyAudioPoster(!1)}}save(){this.configChange(),!0===this.flags.portrait?(this.unpublish(),this.PublishJanus.init(this.input,this.flags),0==this.flags.video?this.setOnlyAudioPoster(!0):this.setOnlyAudioPoster(!1),this.playerEventObserver.next({type:"play",value:"true"}),setTimeout((()=>{setTimeout((()=>{this.shadowRoot.querySelector("canvas").removeEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("canvas").removeEventListener("touchend",this.showIconListener),this.shadowRoot.querySelector("canvas").addEventListener("mouseover",this.showIconListener),this.shadowRoot.querySelector("canvas").addEventListener("touchend",this.showIconListener)}),1e3)}),1500)):(this.publish(this.flags),this.playerEventObserver.next({type:"play",value:"true"}))}render(){this.config}}customElements.define("webrtc-publisher",l)},"./src/wcs/webrtc-publisher/webrtr-publisher.template.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{tmpl:()=>o});var r=n("./src/wcs/icons/config.js");n("./src/wcs/libs/volume-meter-wc.js");let i='\n    <div id="videoWrap" style="height:100%;">\n    <volume-meter width="25" height="200" color="blue" style="position:absolute;left:0;"></volume-meter>\n    <video id=\'myvideo\' muted style=\'position: relative;top: 0;left: 0;width:100%;height:100%;\' autoplay>\n    </video>\n\n    <span id="configIcon" style="position: absolute;top: 0%;left: 0%;width:80px;height:80px;cursor:hand;visibility:visible;blakground:black;z-index:9999">'+r.svg+'</span>\n    </div>\n    <web-dialog center>\n     <form id=\'change_dev_form\' class="form-inline" >\n\n  \t\t\t\t\t\t              <div class="form-group" style="margin-right: 20px;">\n                                   <h2> Media Choose:</h2>\n                                   <div>\n                                   <label for="audio-device" i18n>Audio device (input):</label>\n\n                                   <select id="audio-device" class="form-control"  ></select>\n                                    </div>\n                                    <div>\n  \t\t\t\t\t\t\t                   <label for="video-device" i18n>Video device (input):</label>\n                                   <select id="video-device" class="form-control"></select>\n                                   </div>\n\n  \t\t\t\t\t\t              </div>\n\n  \t\t\t\t\t        \n   <div id="configPanel" >\n   <h2> Advanced:</h2>\n   <h2>Resolution: \n    <select id="res"> \n    <option value="UHD"> 4K (3840x2160)</option>\n    <option value="FHD"> FHD (1920x1080)</option>\n    <option value="UXGA"> UXGA (1600x1200)</option>\n    <option value="HD" selected> HD (1280x720)</option>\n    <option value="SVGA"> SVGA (800x600)</option>\n    <option value="VGA"> VGA (640x480)</option>\n    <option value="VGAHD"> VGAHD (960x720)</option>\n    <option value="VGAHD-P"> VGAHD Portrait (720x960)</option>\n    <option value="VGAFHD"> VGAFHD (1440x1080)</option>\n    <option value="VGAFHD-P"> VGAFHD Portrait (1080x1440)</option>\n    <option value="360p"> 360p (640x360)</option>\n    <option value="QVGA"> QVGA (320x240)</option></select>\n    </h2>\n\t\t\tEchoCancelation:<input type="checkbox"\tid="echo" checked style="margin-right:20px">\n\t\t\tNoiseSupression:<input type="checkbox"\tid="noise" checked style="margin-right:20px">\n      GainControl:<input type="checkbox"\tid="gain" checked style="margin-right:20px">\n      Video:<input type="checkbox"\tid="videoc" checked style="margin-right:20px">\n      Audio:<input type="checkbox"\tid="audioc" checked style="margin-right:20px">\n      Simulcast:<input type="checkbox"\tid="simulcast" checked style="margin-right:20px">\n      Portrait:<input type="checkbox"\tid="portrait" style="margin-right:20px">\n      <h2>Bitrate:</h2> <input type="number" id="bitrate" value=0 style="margin-right:20px"><span>kb/s</span>\n      <h2>Micro Volume (force):</h2> <input type="range" id="volIncrease" value=1 min=1 max=5 style="margin-right:20px">\n      <h2>Audio Delay:</h2> <input type="number" id="delay" value=0 style="margin-right:20px"><span>s</span>\n      <h2>Audio Type: <select id="audiotype"> <option value=""> None</option><option value="music" selected> Music</option><option value="speech"> Speech</option><option value="speech-recognition"> Speech Recognotion</option></select></h2>\n      </form>\n      <span style="float:right"><span id="saveB" class="btn btn-primary"> Save </span>\n      <span id="closeB" class="btn btn-primary"> Close </span></span>\n      <div>\n      </web-dialog>',o=document.createElement("template");o.innerHTML=i},"./src/wcs/xmedia/xmedia.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{XMedia:()=>a});var r=n("./src/wcs/libs/janusclient.js"),i=n("./src/orkestra/utils/index.js");const o=document.createElement("template");o.innerHTML="\n<style>\n:host {\n  display: inline-block;\n  position: relative;\n}\n.title {\n  position: absolute;\n  background-color: rgb(63 63 63);\n  color: rgb(205 202 202);\n  letter-spacing: 0.05rem;\n  left: 0;\n  padding: 0.3rem 1.2rem;\n  font-size: 65%;\n}\n#video {\n  background-color: rgb(0, 0, 0);\n}\n@media (max-width: 750px){\n  .title {\n    padding: 0.2rem 0.8rem;\n    font-size: 55%;\n  }\n}\n</style>";const s={debug:{logLevel:0,dispatchEvent:!1},streaming:{stableBufferTime:12,bufferTimeAtTopQuality:20,scheduleWhilePaused:!1,fastSwitchEnabled:!0,abr:{limitBitrateByPortal:!0,initialBitrate:{video:1500},maxBitrate:{audio:-1,video:5e3},minBitrate:{audio:-1,video:900}}}};class a extends HTMLElement{static get observedAttributes(){return["input","type","style","config","nosignalimg","title"]}attributeChangedCallback(e,t,n){if(t!==n){"type"===e?this.type=n:(this[e]=n,"nosignalimg"==e&&this.render());const t=this.identifiyMedia();if("webrtc"===t&&"style"===e&&"low"!==this.profile){const e=this.shadowRoot.querySelector("video");e&&e.clientWidth,this.changeSubStream(this.input,2)}"webrtc"===t&&"input"===e&&document.addEventListener("substreamConfigured",this.onSubstreamConfigured.bind(this))}}get config(){return this.getAttribute("config")}set config(e){this.getAttribute("config")!=e&&this.setAttribute("config",e);let t=JSON.parse(e);!window.FlexJanus&&t.janusServer&&(window.parent.FlexJanus||(!0===t.iframe?(window.parent.FlexJanus=(0,r.JanusClient)(this,t.janusServer,t.room,t.buffer),window.parent.FlexJanus.init(this)):(window.FlexJanus=(0,r.JanusClient)(this,t.janusServer,t.room,t.buffer),(window.FlexJanus||window.parent.FlexJanus).init(this))),t.publisherFeed&&""!=t.publisherFeed&&(window.FlexJanus||window.parent.FlexJanus).registerUsernameAsSubscriber(t.publisherFeed)),"true"!==t.showAudioInput&&!0!==t.showAudioInput||this.enableVolumeMeter(),"true"===t.showBitrate&&setTimeout((()=>{this.querySelector("#bitrate").style.display="block"}),5e3),void 0!==t.profile&&(this.profile=t.profile),"false"===t.autoplay&&this.autoPlay(!1),"true"===t.muted?(this.muted=!0,this.mute(),this.render()):"false"===t.muted&&(this.muted=!1,this.mute(),this.render()),t.me&&this.input===t.me&&this.shadowRoot.querySelector("video")&&(this.muted=!0,this.mute(),this.render())}get input(){return this.getAttribute("input")}set input(e){if(this.oldInput!=e){if(this.oldInput=e,this.setAttribute("input",e),!e)return void this.cleanInput();let t=this.identifiyMedia();if("webrtc"===t){const e=this.shadowRoot.querySelector("video");e&&(e.srcObject=null)}this.render(),"webrtc"==t&&this.janusReady?(window.FlexJanus||window.parent.FlexJanus).start(this.input,this):"webrtc"==t&&null==this.janusReady&&setTimeout((()=>{(window.FlexJanus||window.parent.FlexJanus).start(this.input,this)}),5e3)}else if(this.shadowRoot.querySelector("video")&&this.shadowRoot.querySelector("video").paused){"webrtc"==this.identifiyMedia()&&this.janusReady&&(window.FlexJanus||window.parent.FlexJanus).start(this.input,this)}let t=JSON.parse(this.getAttribute("config"));t&&t.me&&this.input===t.me&&this.shadowRoot.querySelector("video")&&(this.shadowRoot.querySelector("video").muted=!0)}get type(){return this.getAttribute("type")}set type(e){this.getAttribute("type")!=e&&(this.setAttribute("type",e),this.render())}get title(){return this.getAttribute("title")}set title(e){this.setAttribute("title",e),this.createTitleElement(e)}constructor(){super(),this.substream=-1,this.oldInput="",this.autoplay=!0,this.loaded=!1,this.log=i.Logger.getLogger("X-media"),this.attachShadow({mode:"open"}),document.addEventListener("JanusReady",this.janusReadyListener.bind(this)),document.addEventListener("newStream",this.newStreamListener.bind(this)),document.addEventListener("deletedStream",this.deletedStreamListener.bind(this)),window.parent&&(window.parent.document.addEventListener("JanusReady",this.janusReadyListener.bind(this)),window.parent.document.addEventListener("newStream",this.newStreamListener.bind(this)),window.parent.document.addEventListener("deletedStream",this.deletedStreamListener.bind(this))),this.log.warn(this.input,"could not connect"),this.shadowRoot.appendChild(o.content.cloneNode(!0))}janusReadyListener(e){this.janusReady=!0}deletedStreamListener(e){this.input===e.detail.id&&this.shadowRoot.querySelector("video")&&(this.shadowRoot.querySelector("video").srcObject=null)}setOnlyAudioPoster(){if(null!=this.shadowRoot.querySelector("video").srcObject){0===this.shadowRoot.querySelector("video").srcObject.getVideoTracks().length&&(this.shadowRoot.querySelector("video").poster="https://assets.boxcast.com/latest/static/audio-only.png")}}newStreamListener(e){this.input===e.detail.id&&((window.FlexJanus||window.parent.FlexJanus).start(this.input,this),document.addEventListener("substreamConfigured",this.onSubstreamConfigured.bind(this)),this.setOnlyAudioPoster())}onSubstreamConfigured({detail:e}){const{substream:t,input:n}=e;if(this.input===n){if("low"===this.profile)0!==t&&this.changeSubStream(this.input,0);else{this.shadowRoot.querySelector("video").clientWidth;const e=2;t!==e&&this.changeSubStream(this.input,e)}document.removeEventListener("substreamConfigured",this.onSubstreamConfigured.bind(this))}}disconnectedCallback(){document.removeEventListener("JanusReady",this.janusReadyListener.bind(this)),document.removeEventListener("newStream",this.newStreamListener.bind(this)),document.removeEventListener("deletedStream",this.deletedStreamListener.bind(this)),this.log.info("disconnected from the DOM")}async connectedCallback(){this.hasAttribute("input")&&this.render(),this.hasAttribute("type")&&this.render(),this.querySelector("#bitrate")||(this.shadowRoot.innerHTML+="<div id='bitrate' style='position:absolute;display:none;color:yellow;'></div>")}userCmdEvents(e){this.log.info("XMEDIA CMD",e),"stream"==e.cmd&&((window.FlexJanus||window.parent.FlexJanus).stop(this.input),this.input=e.value,(window.FlexJanus||window.parent.FlexJanus).start(e.value,this))}identifiyMedia(){if(this.input&&"undefined"!==this.input){if(!(-1!=this.input.indexOf("/")))return"webrtc";{let e=this.input.substring(this.input.lastIndexOf("/")+1,this.input.length),t=e.substring(e.lastIndexOf("."),this.input.length);switch(""===t&&this.log.warn("Not extension found could not know media type"),t.toLowerCase()){case".png":case".jpg":case".jpeg":case".gif":case".webp":case".svg":return"image";case".mp4":case".ogv":case".vp9":case".vp8":case".mpeg":case".mpg":return"video";case".mpd":return"dash";default:return"unknown"}}}}cleanInput(){let e=this.shadowRoot.querySelector("video");e&&this.shadowRoot.removeChild(e);let t=this.shadowRoot.querySelector("img");t&&this.shadowRoot.removeChild(t);let n=this.shadowRoot.querySelector("dash-video");n&&this.shadowRoot.removeChild(n)}mute(){let e=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(e=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),e&&(e.muted=this.muted)}muteVideo(){let e=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(e=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),this.muted=!0,e&&(e.muted=this.muted)}unmuteVideo(){let e=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(e=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),this.muted=!1,e&&(e.muted=this.muted)}changeLoop(e){let t=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(t=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),t.loop=e}autoPlay(e){this.autoplay=e;let t=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(t=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),t&&!1===e&&t.removeAttribute("autoplay")}load(e){let t=this.identifiyMedia(),n=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(n=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),"webrtc"===t?n&&(n.muted=this.muted):n&&(null==e||e)&&(n.currentTime=0,n.play()),this.loaded=!0}unload(e){let t=this.identifiyMedia(),n=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(n=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),"webrtc"===t?n&&(n.muted=!0):n&&(null==e||e)&&n.pause(),this.loaded=!1}changeSubStream(e,t){(window.FlexJanus||window.parent.FlexJanus)&&(window.FlexJanus||window.parent.FlexJanus).changeSubStream(e,t)}play(){let e=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(e=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),e&&!0===this.loaded&&e.play()}pause(){let e=this.shadowRoot.querySelector("video");this.shadowRoot.querySelector("dash-video")&&(e=this.shadowRoot.querySelector("dash-video").shadowRoot.querySelector("video")),e&&!0===this.loaded&&e.pause()}muteScene(){this.muted=!0,this.mute()}unmuteScene(){this.muted=!1,this.mute()}createTitleElement(e){const t=this.shadowRoot.querySelector(".title");if(t)t.textContent=e;else{const t=Object.assign(document.createElement("span"),{className:"title",textContent:e});this.shadowRoot.appendChild(t)}}createVideoElement(e){const t=document.createElement("video");t.id="video",t.muted=this.muted,t.controls=!1,t.autoplay=this.autoplay,t.loop=!1,t.style="width:100%;height:100%",e&&(t.src=e),this.shadowRoot.appendChild(t)}enableVolumeMeter(){this.shadowRoot.querySelector("volume-meter")||(this.shadowRoot.innerHTML=this.shadowRoot.innerHTML+'<volume-meter width="25" height="200" color="blue" style="position:absolute;left:0;"></volume-meter>'),setTimeout((()=>{this.shadowRoot.querySelector("video")&&(this.shadowRoot.querySelector("video").showAudioInput=!0)}),2e3)}disableVolumeMeter(){this.shadowRoot.querySelector("volume-meter").parentNode.removeChild(this.shadowRoot.querySelector("volume-meter")),setTimeout((()=>{this.shadowRoot.querySelector("video")&&(this.shadowRoot.querySelector("video").showAudioInput=!1)}),2e3)}render(){let e=this.identifiyMedia();if(e&&"unknown"!=e)switch(e){case"image":if(this.shadowRoot.querySelector("img")){let e=this.shadowRoot.querySelector("img");e.src=this.input,e.style="width:100%;height:100%;object-fit:contain;"}else{this.cleanInput("video"),this.cleanInput("dash");let e=document.createElement("img");e.id="video",e.src=this.input,e.style="width:100%;height:100%;object-fit:contain;",this.shadowRoot.appendChild(e)}break;case"video":{let e=this.shadowRoot.querySelector("video");e?(e.muted=this.muted,e.srcObject=null,e.src=this.input,e.autoplay=this.autoplay):(this.cleanInput("img"),this.cleanInput("dash"),this.createVideoElement(this.input));break}case"dash":{let e=this.shadowRoot.querySelector("dash-video");e&&this.shadowRoot.removeChild(e),this.cleanInput("img"),this.cleanInput("video"),e=document.createElement("dash-video"),e.id="video",e.muted=this.muted,e.controls=!1,e.autoplay=this.autoplay,e.loop=!1,e.setAttribute("log","false"),e.setAttribute("options",JSON.stringify(s)),e.style="width:100%;height:100%",e.src=this.input,this.shadowRoot.appendChild(e);break}case"webrtc":if(this.shadowRoot.querySelector("video")){let e=this.shadowRoot.querySelector("video");this.nosignalimg?e.poster=this.nosignalimg:e.poster="https://f4.bcbits.com/img/a1761578860_10.jpg"}else{this.cleanInput("img"),this.cleanInput("dash");let e=document.createElement("video");e.id="video",e.muted=this.muted,this.nosignalimg?e.poster=this.nosignalimg:e.poster="https://f4.bcbits.com/img/a1761578860_10.jpg",e.controls=!1,e.autoplay=!0,e.style="width:100%;height:100%",this.shadowRoot.appendChild(e)}}else{this.shadowRoot.querySelector("video")||this.createVideoElement()}}}customElements.define("x-media",a)}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";r.r(o),r.d(o,{Orkestra:()=>e.Orkestra,ObjectSync:()=>b.ObjectSync,WCAppTable:()=>n.WCAppTable,WCUserTable:()=>t.WCUserTable,WCTimer:()=>i.WCTimer,XMedia:()=>T.XMedia,TextData:()=>s.TextData,KeyPress:()=>s.KeyPress,UI:()=>a.UI,Byname:()=>m.Byname,URI:()=>E.URI,Obj:()=>E.Obj,QRCode:()=>E.QRCode,Bytimeline:()=>g.Bytimeline,Divided:()=>u.Divided,PipGrid:()=>l.PipGrid,Mosaic:()=>p.Mosaic,Tabs:()=>h.Tabs,JanusClient:()=>S.JanusClient,JanusPublish:()=>w.JanusPublish,UserData:()=>s.UserData,WCWebrtcPublisher:()=>A.WCWebrtcPublisher,WCScreenShare:()=>R.WCScreenShare,Explicit:()=>v.Explicit,UserPref:()=>_.UserPref,FullScreen:()=>y.FullScreen,DASHVideoElement:()=>C,Logger:()=>E.Logger,Simple:()=>f.Simple,CustomLayout:()=>d.CustomLayout,EditLayout:()=>c.EditLayout});var e=r("./src/orkestra/orkestra.js"),t=r("./src/wcs/users.js"),n=r("./src/wcs/app.js"),i=r("./src/wcs/timer.js"),s=r("./src/orkestra/instruments/index.js"),a=r("./src/orkestra/ui/UI.js"),u=r("./src/orkestra/ui/plugins/divided.js"),l=r("./src/orkestra/ui/plugins/pipgrid.js"),d=r("./src/orkestra/ui/plugins/customLayout.js"),c=r("./src/orkestra/ui/plugins/editLayout.js"),f=r("./src/orkestra/transitions/simple.js"),h=r("./src/orkestra/ui/plugins/tabs.js"),p=r("./src/orkestra/ui/plugins/mosaic.js"),m=r("./src/orkestra/rules/byname.js"),g=r("./src/orkestra/rules/byTimeline.js"),v=r("./src/orkestra/rules/explicit.js"),y=r("./src/orkestra/ui/plugins/fullscreen.js"),_=r("./src/orkestra/rules/userPref.js"),E=r("./src/orkestra/utils/index.js"),b=r("./src/orkestra/motion/motion.js"),T=r("./src/wcs/xmedia/xmedia.js"),S=r("./src/wcs/libs/janusclient.js"),w=r("./src/wcs/libs/januspublish.js"),A=r("./src/wcs/webrtc-publisher/webrtcPublisher.js"),R=r("./src/wcs/screen-share/screen-share.js"),C=r("./src/wcs/libs/dash-video-element/index.js")})()})();
//# sourceMappingURL=main.js.map